
<!DOCTYPE html>

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<meta property="og:title" content="wsgiref — Utilidades WSGI e implementación de referencia" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://docs.python.org/3/library/wsgiref.html" />
<meta property="og:site_name" content="Python documentation" />
<meta property="og:description" content="Source code: Lib/wsgiref La Interfaz de Pasarela del Servidor Web, o Web Server Gateway Interface en inglés (WSGI), es una interfaz estándar entre el servidor web y aplicaciones web escritas en Pyt..." />
<meta property="og:image" content="https://docs.python.org/3/_static/og-image.png" />
<meta property="og:image:alt" content="Python documentation" />
<meta name="description" content="Source code: Lib/wsgiref La Interfaz de Pasarela del Servidor Web, o Web Server Gateway Interface en inglés (WSGI), es una interfaz estándar entre el servidor web y aplicaciones web escritas en Pyt..." />
<meta property="og:image:width" content="200" />
<meta property="og:image:height" content="200" />
<meta name="theme-color" content="#3776ab" />

    <title>wsgiref — Utilidades WSGI e implementación de referencia &#8212; documentación de Python - 3.11.2</title><meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/pydoctheme.css?digest=2d3badd06fe70b34b68db01f99471ce1624ffe4a" />
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/translations.js"></script>
    
    <script src="../_static/sidebar.js"></script>
    
    <link rel="search" type="application/opensearchdescription+xml"
          title="Buscar en documentación de Python - 3.11.2"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="Sobre este documento" href="../about.html" />
    <link rel="index" title="Índice" href="../genindex.html" />
    <link rel="search" title="Búsqueda" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="urllib — URL módulos de manipulación" href="urllib.html" />
    <link rel="prev" title="webbrowser — Controlador de navegador web conveniente" href="webbrowser.html" />
    <link rel="canonical" href="https://docs.python.org/3/library/wsgiref.html" />
    
      
    

    
    <style>
      @media only screen {
        table.full-width-table {
            width: 100%;
        }
      }
    </style>
<link rel="shortcut icon" type="image/png" href="../_static/py.svg" />
            <script type="text/javascript" src="../_static/copybutton.js"></script>
            <script type="text/javascript" src="../_static/menu.js"></script> 

  </head>
<body>
<div class="mobile-nav">
    <input type="checkbox" id="menuToggler" class="toggler__input" aria-controls="navigation"
           aria-pressed="false" aria-expanded="false" role="button" aria-label="Menu" />
    <label for="menuToggler" class="toggler__label">
        <span></span>
    </label>
    <nav class="nav-content" role="navigation">
         <a href="https://www.python.org/" class="nav-logo">
             <img src="../_static/py.svg" alt="Logo"/>
         </a>
        <div class="version_switcher_placeholder"></div>
        <form role="search" class="search" action="../search.html" method="get">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="search-icon">
                <path fill-rule="nonzero"
                        d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 001.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 00-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 005.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" fill="#444"></path>
            </svg>
            <input type="text" name="q" aria-label="Búsqueda rápida"/>
            <input type="submit" value="Ir"/>
        </form>
    </nav>
    <div class="menu-wrapper">
        <nav class="menu" role="navigation" aria-label="main navigation">
            <div class="language_switcher_placeholder"></div>
  <div>
    <h3><a href="../contents.html">Tabla de contenido</a></h3>
    <ul>
<li><a class="reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">wsgiref</span></code> — Utilidades WSGI e implementación de referencia</a><ul>
<li><a class="reference internal" href="#module-wsgiref.util"><code class="xref py py-mod docutils literal notranslate"><span class="pre">wsgiref.util</span></code> – Utilidades de entorno WSGI</a></li>
<li><a class="reference internal" href="#module-wsgiref.headers"><code class="xref py py-mod docutils literal notranslate"><span class="pre">wsgiref.headers</span></code> – Herramientas para cabeceras de respuesta WSGI</a></li>
<li><a class="reference internal" href="#module-wsgiref.simple_server"><code class="xref py py-mod docutils literal notranslate"><span class="pre">wsgiref.simple_server</span></code>– Un servidor HTTP WSGI simple</a></li>
<li><a class="reference internal" href="#module-wsgiref.validate"><code class="xref py py-mod docutils literal notranslate"><span class="pre">wsgiref.validate</span></code> — Verificador de compatibilidad WSGI</a></li>
<li><a class="reference internal" href="#module-wsgiref.handlers"><code class="xref py py-mod docutils literal notranslate"><span class="pre">wsgiref.handlers</span></code> – Clases base servidor/<em>gateway</em></a></li>
<li><a class="reference internal" href="#module-wsgiref.types"><code class="xref py py-mod docutils literal notranslate"><span class="pre">wsgiref.types</span></code> — Tipos de WSGI para validadores estáticos de tipos</a></li>
<li><a class="reference internal" href="#examples">Ejemplos</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Tema anterior</h4>
    <p class="topless"><a href="webbrowser.html"
                          title="capítulo anterior"><code class="xref py py-mod docutils literal notranslate"><span class="pre">webbrowser</span></code> — Controlador de navegador web conveniente</a></p>
  </div>
  <div>
    <h4>Próximo tema</h4>
    <p class="topless"><a href="urllib.html"
                          title="próximo capítulo"><code class="xref py py-mod docutils literal notranslate"><span class="pre">urllib</span></code> — URL módulos de manipulación</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Reporta un bug</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/3.11/Doc/library/wsgiref.rst"
            rel="nofollow">Ver fuente
        </a>
      </li>
    </ul>
  </div>
        </nav>
    </div>
</div>

  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice general"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Índice de Módulos Python"
             >módulos</a> |</li>
        <li class="right" >
          <a href="urllib.html" title="urllib — URL módulos de manipulación"
             accesskey="N">siguiente</a> |</li>
        <li class="right" >
          <a href="webbrowser.html" title="webbrowser — Controlador de navegador web conveniente"
             accesskey="P">anterior</a> |</li>

          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.11.2 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" >La biblioteca estándar de Python</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="internet.html" accesskey="U">Protocolos y soporte de Internet</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><code class="xref py py-mod docutils literal notranslate"><span class="pre">wsgiref</span></code> — Utilidades WSGI e implementación de referencia</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Búsqueda rápida" aria-label="Búsqueda rápida" type="text" name="q" />
          <input type="submit" value="Ir" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
                     |
                </li>
            
      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="module-wsgiref">
<span id="wsgiref-wsgi-utilities-and-reference-implementation"></span><h1><a class="reference internal" href="#module-wsgiref" title="wsgiref: WSGI Utilities and Reference Implementation."><code class="xref py py-mod docutils literal notranslate"><span class="pre">wsgiref</span></code></a> — Utilidades WSGI e implementación de referencia<a class="headerlink" href="#module-wsgiref" title="Enlazar permanentemente con este título">¶</a></h1>
<p><strong>Source code:</strong> <a class="reference external" href="https://github.com/python/cpython/tree/3.11/Lib/wsgiref">Lib/wsgiref</a></p>
<hr class="docutils" />
<p>La Interfaz de Pasarela del Servidor Web, o <em>Web Server Gateway Interface</em> en inglés (WSGI), es una interfaz estándar entre el servidor web y aplicaciones web escritas en Python. Con una interfaz estándar es más sencillo usar una aplicación que soporte WSGI con diferentes servidores web.</p>
<p>Sólo los autores de servidores y frameworks web necesitan conocer cada detalle y caso límite del diseño WSGI. No es necesario conocer cada detalle de WSGI sólo para instalar o escribir una aplicación web usando un <em>framework</em> existente.</p>
<p><a class="reference internal" href="#module-wsgiref" title="wsgiref: WSGI Utilities and Reference Implementation."><code class="xref py py-mod docutils literal notranslate"><span class="pre">wsgiref</span></code></a> es una implementación de referencia de la especificación WSGI que se puede usar para añadir soporte WSGI a un servidor o <em>framework</em> web. Este módulo provee utilidades para manipular las variables de entorno WSGI y las cabeceras de respuesta, clases base para implementar servidores WSGI, un servidor HTTP de demostración que sirve aplicaciones WSGI, tipos para validadores estáticos de tipos, y una herramienta de validación que comprueba la compatibilidad de servidores y aplicaciones WSGI en base a la especificación <span class="target" id="index-37"></span><a class="pep reference external" href="https://peps.python.org/pep-3333/"><strong>PEP 3333</strong></a>.</p>
<p>Vea <a class="reference external" href="https://wsgi.readthedocs.io/">wsgi.readthedocs.io</a> para más información sobre WSGI, así como enlaces a tutoriales y otros recursos.</p>
<section id="module-wsgiref.util">
<span id="wsgiref-util-wsgi-environment-utilities"></span><h2><a class="reference internal" href="#module-wsgiref.util" title="wsgiref.util: WSGI environment utilities."><code class="xref py py-mod docutils literal notranslate"><span class="pre">wsgiref.util</span></code></a> – Utilidades de entorno WSGI<a class="headerlink" href="#module-wsgiref.util" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Este módulo ofrece una variedad de funciones útiles para trabajar con entornos WSGI. Un entorno WSGI es un diccionario que contiene variables de la petición HTTP, descrito en <span class="target" id="index-38"></span><a class="pep reference external" href="https://peps.python.org/pep-3333/"><strong>PEP 3333</strong></a>. Todas las funciones que aceptan un parámetro <em>environ</em> esperan un diccionario compatible con WSGI. Por favor, consulte la especificación detallada en <span class="target" id="index-39"></span><a class="pep reference external" href="https://peps.python.org/pep-3333/"><strong>PEP 3333</strong></a>, y los alias de tipos que pueden usarse en las anotaciones de tipo en <a class="reference internal" href="#wsgiref.types.WSGIEnvironment" title="wsgiref.types.WSGIEnvironment"><code class="xref py py-data docutils literal notranslate"><span class="pre">WSGIEnvironment</span></code></a>.</p>
<dl class="py function">
<dt class="sig sig-object py" id="wsgiref.util.guess_scheme">
<span class="sig-prename descclassname"><span class="pre">wsgiref.util.</span></span><span class="sig-name descname"><span class="pre">guess_scheme</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">environ</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wsgiref.util.guess_scheme" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Retorna una deducción del valor para <code class="docutils literal notranslate"><span class="pre">wsgi.url_scheme</span></code> que debería ser «http» o «https», buscando la variable de entorno <code class="docutils literal notranslate"><span class="pre">HTTPS</span></code> en el diccionario <em>environ</em>. El valor de retorno es una cadena.</p>
<p>Esta función es útil al crear un <em>gateway</em> que envuelve CGI o un protocolo similar como FastCGI. Habitualmente, los servidores que ofrecen estos protocolos incluyen una variable <code class="docutils literal notranslate"><span class="pre">HTTPS</span></code> con el valor «1», «yes», o «on» cuando reciben una petición vía SSL. Así, esta función retorna «https» si encuentra ese valor, o «http», en caso contrario.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wsgiref.util.request_uri">
<span class="sig-prename descclassname"><span class="pre">wsgiref.util.</span></span><span class="sig-name descname"><span class="pre">request_uri</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">environ</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_query</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wsgiref.util.request_uri" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Retorna la URI completa de la petición, opcionalmente la cadena de consulta, usando el algoritmo encontrado en la sección «URL Reconstruction» de <span class="target" id="index-40"></span><a class="pep reference external" href="https://peps.python.org/pep-3333/"><strong>PEP 3333</strong></a>. Si <em>include_query</em> es falso, la cadena de consulta no se incluye en la URI resultante.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wsgiref.util.application_uri">
<span class="sig-prename descclassname"><span class="pre">wsgiref.util.</span></span><span class="sig-name descname"><span class="pre">application_uri</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">environ</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wsgiref.util.application_uri" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Similar a <a class="reference internal" href="#wsgiref.util.request_uri" title="wsgiref.util.request_uri"><code class="xref py py-func docutils literal notranslate"><span class="pre">request_uri()</span></code></a> excepto que se ignoran las variables <code class="docutils literal notranslate"><span class="pre">PATH_INFO</span></code> y <code class="docutils literal notranslate"><span class="pre">QUERY_STRING</span></code>. El resultado es la URI base del objeto de aplicación indicado en la petición.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wsgiref.util.shift_path_info">
<span class="sig-prename descclassname"><span class="pre">wsgiref.util.</span></span><span class="sig-name descname"><span class="pre">shift_path_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">environ</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wsgiref.util.shift_path_info" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Desplaza un solo nombre de <code class="docutils literal notranslate"><span class="pre">PATH_INFO</span></code> a <code class="docutils literal notranslate"><span class="pre">SCRIPT_NAME</span></code> y retorna el nombre. Se modifica el diccionario <em>environ</em>, por lo que se deberá usar una copia si se quiere mantener <code class="docutils literal notranslate"><span class="pre">PATH_INFO</span></code> o <code class="docutils literal notranslate"><span class="pre">SCRIPT_NAME</span></code> intactos.</p>
<p>Si no quedan segmentos en <code class="docutils literal notranslate"><span class="pre">PATH_INFO</span></code>, retornará <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>Habitualmente, esta rutina se usa para procesar cada porción de la ruta del URI de la petición, por ejemplo, para usar la ruta como una serie de claves en un diccionario. Esta rutina modifica el entorno pasado para permitir invocar otra aplicación WSGI que esté localizada en la URI objetivo. Por ejemplo, si hay una aplicación WSGI en <code class="docutils literal notranslate"><span class="pre">/foo</span></code>, y la ruta es <code class="docutils literal notranslate"><span class="pre">/foo/bar/baz</span></code>, y la aplicación WSGI en <code class="docutils literal notranslate"><span class="pre">/foo</span></code> llama a <a class="reference internal" href="#wsgiref.util.shift_path_info" title="wsgiref.util.shift_path_info"><code class="xref py py-func docutils literal notranslate"><span class="pre">shift_path_info()</span></code></a>, recibirá la cadena «bar», y se actualizará el entorno para pasarlo a una aplicación WSGI en <code class="docutils literal notranslate"><span class="pre">/foo/bar</span></code>. Es decir, <code class="docutils literal notranslate"><span class="pre">SCRIPT_NAME</span></code> cambiará de <code class="docutils literal notranslate"><span class="pre">/foo</span></code> a <code class="docutils literal notranslate"><span class="pre">/foo/bar</span></code> y <code class="docutils literal notranslate"><span class="pre">PATH_INFO</span></code> cambiará de <code class="docutils literal notranslate"><span class="pre">/bar/baz</span></code> a <code class="docutils literal notranslate"><span class="pre">/baz</span></code>.</p>
<p>Cuando <code class="docutils literal notranslate"><span class="pre">PATH_INFO</span></code> es únicamente «/», esta rutina retornará una cadena vacía y añadirá una barra final a <code class="docutils literal notranslate"><span class="pre">SCRIPT_NAME</span></code>, incluso cuando normalmente los segmentos de ruta vacíos se ignoran y <code class="docutils literal notranslate"><span class="pre">SCRIPT_NAME</span></code> no acaba con una barra. Este comportamiento es intencional, para asegurar que una aplicación puede diferenciar entre URIs que acaban en <code class="docutils literal notranslate"><span class="pre">/x</span></code> de las que acaban en <code class="docutils literal notranslate"><span class="pre">/x/</span></code> cuando usan esta rutina para atravesar objetos.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wsgiref.util.setup_testing_defaults">
<span class="sig-prename descclassname"><span class="pre">wsgiref.util.</span></span><span class="sig-name descname"><span class="pre">setup_testing_defaults</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">environ</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wsgiref.util.setup_testing_defaults" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Actualiza <em>environ</em> con valores por defecto triviales con propósito de prueba.</p>
<p>Esta rutina añade varios parámetros requeridos por WSGI, incluyendo <code class="docutils literal notranslate"><span class="pre">HTTP_POST</span></code>, <code class="docutils literal notranslate"><span class="pre">SERVER_NAME</span></code>, <code class="docutils literal notranslate"><span class="pre">SERVER_PORT</span></code>, <code class="docutils literal notranslate"><span class="pre">REQUEST_METHOD</span></code>, <code class="docutils literal notranslate"><span class="pre">SCRIPT_NAME</span></code>, <code class="docutils literal notranslate"><span class="pre">PATH_INFO</span></code>, y todas las variables <code class="docutils literal notranslate"><span class="pre">wsgi.*</span></code> definidas en <span class="target" id="index-41"></span><a class="pep reference external" href="https://peps.python.org/pep-3333/"><strong>PEP 3333</strong></a>. Sólo ofrece valores por defecto y no reemplaza ningún valor existente en esas variables.</p>
<p>Esta rutina pretende facilitar la preparación de entornos ficticios para pruebas unitarias de servidores y aplicaciones WSGI. NO debería usarse en servidores y aplicaciones WSGI reales, ya que los valores son ficticios!</p>
<p>Ejemplo de uso:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">wsgiref.util</span> <span class="kn">import</span> <span class="n">setup_testing_defaults</span>
<span class="kn">from</span> <span class="nn">wsgiref.simple_server</span> <span class="kn">import</span> <span class="n">make_server</span>

<span class="c1"># A relatively simple WSGI application. It&#39;s going to print out the</span>
<span class="c1"># environment dictionary after being updated by setup_testing_defaults</span>
<span class="k">def</span> <span class="nf">simple_app</span><span class="p">(</span><span class="n">environ</span><span class="p">,</span> <span class="n">start_response</span><span class="p">):</span>
    <span class="n">setup_testing_defaults</span><span class="p">(</span><span class="n">environ</span><span class="p">)</span>

    <span class="n">status</span> <span class="o">=</span> <span class="s1">&#39;200 OK&#39;</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;Content-type&#39;</span><span class="p">,</span> <span class="s1">&#39;text/plain; charset=utf-8&#39;</span><span class="p">)]</span>

    <span class="n">start_response</span><span class="p">(</span><span class="n">status</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>

    <span class="n">ret</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">: </span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
           <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">environ</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>
    <span class="k">return</span> <span class="n">ret</span>

<span class="k">with</span> <span class="n">make_server</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="mi">8000</span><span class="p">,</span> <span class="n">simple_app</span><span class="p">)</span> <span class="k">as</span> <span class="n">httpd</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Serving on port 8000...&quot;</span><span class="p">)</span>
    <span class="n">httpd</span><span class="o">.</span><span class="n">serve_forever</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<p>Además de las funciones de entorno previas, el módulo <a class="reference internal" href="#module-wsgiref.util" title="wsgiref.util: WSGI environment utilities."><code class="xref py py-mod docutils literal notranslate"><span class="pre">wsgiref.util</span></code></a> también ofrece las siguientes utilidades varias:</p>
<dl class="py function">
<dt class="sig sig-object py" id="wsgiref.util.is_hop_by_hop">
<span class="sig-prename descclassname"><span class="pre">wsgiref.util.</span></span><span class="sig-name descname"><span class="pre">is_hop_by_hop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">header_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wsgiref.util.is_hop_by_hop" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Retorna <code class="docutils literal notranslate"><span class="pre">True</span></code> si “header_name” es una cabecera «Hop-by-Hop» HTTP/1.1, como se define en <span class="target" id="index-42"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc2616.html"><strong>RFC 2616</strong></a>.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="wsgiref.util.FileWrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wsgiref.util.</span></span><span class="sig-name descname"><span class="pre">FileWrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filelike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blksize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8192</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wsgiref.util.FileWrapper" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Una implementación concreta del protocolo <a class="reference internal" href="#wsgiref.types.FileWrapper" title="wsgiref.types.FileWrapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">wsgiref.types.FileWrapper</span></code></a> usado para convertir objetos de tipo archivo en un <a class="reference internal" href="../glossary.html#term-iterator"><span class="xref std std-term">iterator</span></a>. Los objetos resultantes son <a class="reference internal" href="../glossary.html#term-iterable"><span class="xref std std-term">iterable</span></a>s. A medida que se itera sobre el objeto, el parámetro opcional <em>blksize</em> se pasará repetidamente al método <code class="xref py py-meth docutils literal notranslate"><span class="pre">read()</span></code> del objeto archivo para obtener cadenas de bytes para entregar. Cuando <code class="xref py py-meth docutils literal notranslate"><span class="pre">read()</span></code> retorna una cadena de bytes vacía, la iteración finalizará y no se podrá reiniciar.</p>
<p>Si <em>filelike</em> tiene un método <code class="xref py py-meth docutils literal notranslate"><span class="pre">close()</span></code>, el objeto retornado también tendrá un método <code class="xref py py-meth docutils literal notranslate"><span class="pre">close()</span></code> que llamará al método <code class="xref py py-meth docutils literal notranslate"><span class="pre">close()</span></code> del objeto archivo subyacente.</p>
<p>Ejemplo de uso:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">StringIO</span>
<span class="kn">from</span> <span class="nn">wsgiref.util</span> <span class="kn">import</span> <span class="n">FileWrapper</span>

<span class="c1"># We&#39;re using a StringIO-buffer for as the file-like object</span>
<span class="n">filelike</span> <span class="o">=</span> <span class="n">StringIO</span><span class="p">(</span><span class="s2">&quot;This is an example file-like object&quot;</span><span class="o">*</span><span class="mi">10</span><span class="p">)</span>
<span class="n">wrapper</span> <span class="o">=</span> <span class="n">FileWrapper</span><span class="p">(</span><span class="n">filelike</span><span class="p">,</span> <span class="n">blksize</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">wrapper</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Distinto en la versión 3.11: </span>Se ha quitado el soporte para el método <code class="xref py py-meth docutils literal notranslate"><span class="pre">sequence</span> <span class="pre">protocol</span></code>.</p>
</div>
</dd></dl>

</section>
<section id="module-wsgiref.headers">
<span id="wsgiref-headers-wsgi-response-header-tools"></span><h2><a class="reference internal" href="#module-wsgiref.headers" title="wsgiref.headers: WSGI response header tools."><code class="xref py py-mod docutils literal notranslate"><span class="pre">wsgiref.headers</span></code></a> – Herramientas para cabeceras de respuesta WSGI<a class="headerlink" href="#module-wsgiref.headers" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Este módulo ofrece una sola clase, <a class="reference internal" href="#wsgiref.headers.Headers" title="wsgiref.headers.Headers"><code class="xref py py-class docutils literal notranslate"><span class="pre">Headers</span></code></a>, para la manipulación de cabeceras de respuesta WSGI usando un interfaz de mapa.</p>
<dl class="py class">
<dt class="sig sig-object py" id="wsgiref.headers.Headers">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wsgiref.headers.</span></span><span class="sig-name descname"><span class="pre">Headers</span></span><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param"><span class="n"><span class="pre">headers</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#wsgiref.headers.Headers" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Crea un objeto con interfaz de mapa envolviendo <em>headers</em>, que debe ser una lista de tuplas nombre/valor de las cabeceras, como se describe en <span class="target" id="index-43"></span><a class="pep reference external" href="https://peps.python.org/pep-3333/"><strong>PEP 3333</strong></a>. El valor por defecto de <em>headers</em> es una lista vacía.</p>
<p>Los objetos <a class="reference internal" href="#wsgiref.headers.Headers" title="wsgiref.headers.Headers"><code class="xref py py-class docutils literal notranslate"><span class="pre">Headers</span></code></a> soportan las operaciones de mapa habituales incluyendo <code class="xref py py-meth docutils literal notranslate"><span class="pre">__getitem__()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">get()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">__setitem__()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">setdefault()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">__delitem__()</span></code> y <code class="xref py py-meth docutils literal notranslate"><span class="pre">__contains__()</span></code>. Para cada uno de esos métodos, la clave es el nombre de la cabecera, sin distinción entre mayúsculas y minúsculas, y el valor es el primer valor asociado con el nombre de la cabecera. Establecer una cabecera borra cualquier valor previamente existente y añade un nuevo valor al final de la lista de cabeceras. En general, el orden de las cabeceras existentes se mantiene, con las nuevas cabeceras añadidas al final de la lista de cabeceras.</p>
<p>A diferencia de un diccionario, los objetos <a class="reference internal" href="#wsgiref.headers.Headers" title="wsgiref.headers.Headers"><code class="xref py py-class docutils literal notranslate"><span class="pre">Headers</span></code></a> no lanzan un error cuando se intenta obtener o eliminar una clave que no está en la lista de cabeceras subyacente. Al intentar obtener una clave inexistente simplemente se retornará <code class="docutils literal notranslate"><span class="pre">None</span></code>, mientras que el intento de eliminación de una cabecera inexistente simplemente no tendrá ningún efecto.</p>
<p>Los objetos <a class="reference internal" href="#wsgiref.headers.Headers" title="wsgiref.headers.Headers"><code class="xref py py-class docutils literal notranslate"><span class="pre">Headers</span></code></a> también soportan los métodos <code class="xref py py-meth docutils literal notranslate"><span class="pre">keys()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">values()</span></code>, y <code class="xref py py-meth docutils literal notranslate"><span class="pre">items()</span></code>. Las listas retornadas por <code class="xref py py-meth docutils literal notranslate"><span class="pre">keys()</span></code> y <code class="xref py py-meth docutils literal notranslate"><span class="pre">items()</span></code> pueden incluir la misma clave más de una vez si se trata de una cabecera de valor múltiple. La <code class="docutils literal notranslate"><span class="pre">len()</span></code> de un objeto <a class="reference internal" href="#wsgiref.headers.Headers" title="wsgiref.headers.Headers"><code class="xref py py-class docutils literal notranslate"><span class="pre">Headers</span></code></a> es la misma que la longitud de sus <code class="xref py py-meth docutils literal notranslate"><span class="pre">items()</span></code>, que es la misma que la longitud de la lista de cabeceras envuelta. De hecho, el método <code class="xref py py-meth docutils literal notranslate"><span class="pre">items()</span></code> simplemente retorna una copia de la lista de cabeceras.</p>
<p>La llamada <code class="docutils literal notranslate"><span class="pre">bytes()</span></code> sobre un objeto <a class="reference internal" href="#wsgiref.headers.Headers" title="wsgiref.headers.Headers"><code class="xref py py-class docutils literal notranslate"><span class="pre">Headers</span></code></a> retorna una cadena de bytes formateada y lista para su transmisión como cabeceras de respuesta HTTP. Cada cabecera se ubica en una línea con su valor separado por dos puntos y un espacio. Cada línea finaliza con un retorno de carro y un salto de línea, y la cadena de bytes finaliza con una línea en blanco.</p>
<p>Además de la interfaz de mapa y las funcionalidades de formateado, los objetos <a class="reference internal" href="#wsgiref.headers.Headers" title="wsgiref.headers.Headers"><code class="xref py py-class docutils literal notranslate"><span class="pre">Headers</span></code></a> también ofrecen los siguientes métodos para consultar y añadir cabeceras con múltiples valores, y para añadir cabeceras con parámetros MIME:</p>
<dl class="py method">
<dt class="sig sig-object py" id="wsgiref.headers.Headers.get_all">
<span class="sig-name descname"><span class="pre">get_all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wsgiref.headers.Headers.get_all" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Retorna una lista de todos los valores para la cabecera indicada.</p>
<p>La lista retornada tendrá los valores ordenados según la lista de cabeceras original o según se hayan añadido a esta instancia, y podrá contener duplicados. Cualquier campo eliminado y añadido de nuevo estará al final de la lista. Si no existen campos con el nombre indicado, retornará una lista vacía.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="wsgiref.headers.Headers.add_header">
<span class="sig-name descname"><span class="pre">add_header</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">_params</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wsgiref.headers.Headers.add_header" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Añade una cabecera, posiblemente de valor múltiple, con los parámetros MIME opcionales especificados vía argumentos por palabra clave.</p>
<p><em>name</em> es el nombre de la cabecera a añadir. Se pueden usar argumentos por palabra clave para establecer parámetros MIME para la cabecera. Cada parámetro debe ser una cadena o <code class="docutils literal notranslate"><span class="pre">None</span></code>. Todos los guiones bajos en los nombres de parámetros se convierten en guiones, dado que los guiones son inválidos en identificadores Python y muchos parámetros MIME incluyen guiones. Si el valor del parámetro es una cadena, se añade a los parámetros del valor de la cabecera con la forma <code class="docutils literal notranslate"><span class="pre">nombre=valor</span></code>. Si es <code class="docutils literal notranslate"><span class="pre">None</span></code>, sólo se añade el nombre del parámetro, para reflejar parámetros MIME sin valor. Ejemplo de uso:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">h</span><span class="o">.</span><span class="n">add_header</span><span class="p">(</span><span class="s1">&#39;content-disposition&#39;</span><span class="p">,</span> <span class="s1">&#39;attachment&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;bud.gif&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>El código anterior añadirá una cabecera como la siguiente:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">Content</span><span class="o">-</span><span class="n">Disposition</span><span class="p">:</span> <span class="n">attachment</span><span class="p">;</span> <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;bud.gif&quot;</span>
</pre></div>
</div>
</dd></dl>

<div class="versionchanged">
<p><span class="versionmodified changed">Distinto en la versión 3.5: </span>El parámetro <em>headers</em> es opcional.</p>
</div>
</dd></dl>

</section>
<section id="module-wsgiref.simple_server">
<span id="wsgiref-simple-server-a-simple-wsgi-http-server"></span><h2><a class="reference internal" href="#module-wsgiref.simple_server" title="wsgiref.simple_server: A simple WSGI HTTP server."><code class="xref py py-mod docutils literal notranslate"><span class="pre">wsgiref.simple_server</span></code></a>– Un servidor HTTP WSGI simple<a class="headerlink" href="#module-wsgiref.simple_server" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Este módulo implementa un servidor HTTP simple, basado en <a class="reference internal" href="http.server.html#module-http.server" title="http.server: HTTP server and request handlers."><code class="xref py py-mod docutils literal notranslate"><span class="pre">http.server</span></code></a>, que sirve aplicaciones WSGI. Cada instancia del servidor sirve una aplicación WSGI simple en una máquina y puerto dados. Si se quiere servir múltiples aplicaciones en una misma máquina y puerto, se deberá crear una aplicación WSGI que analiza <code class="docutils literal notranslate"><span class="pre">PATH_INFO</span></code> para seleccionar qué aplicación invocar para cada petición. Por ejemplo, usando la función <code class="xref py py-func docutils literal notranslate"><span class="pre">shift_path_info()</span></code> de <a class="reference internal" href="#module-wsgiref.util" title="wsgiref.util: WSGI environment utilities."><code class="xref py py-mod docutils literal notranslate"><span class="pre">wsgiref.util</span></code></a>.</p>
<dl class="py function">
<dt class="sig sig-object py" id="wsgiref.simple_server.make_server">
<span class="sig-prename descclassname"><span class="pre">wsgiref.simple_server.</span></span><span class="sig-name descname"><span class="pre">make_server</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">server_class</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">WSGIServer</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">handler_class</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">WSGIRequestHandler</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wsgiref.simple_server.make_server" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Crea un nuevo servidor WSGI que sirve en <em>host</em> y <em>port</em>, aceptando conexiones para <em>app</em>. El valor de retorno es una instancia de <em>server_class</em> y procesará peticiones usando <em>handler_class</em>. <em>app</em> debe ser un objeto aplicación WSGI, como se define en <span class="target" id="index-44"></span><a class="pep reference external" href="https://peps.python.org/pep-3333/"><strong>PEP 3333</strong></a>.</p>
<p>Ejemplo de uso:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">wsgiref.simple_server</span> <span class="kn">import</span> <span class="n">make_server</span><span class="p">,</span> <span class="n">demo_app</span>

<span class="k">with</span> <span class="n">make_server</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="mi">8000</span><span class="p">,</span> <span class="n">demo_app</span><span class="p">)</span> <span class="k">as</span> <span class="n">httpd</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Serving HTTP on port 8000...&quot;</span><span class="p">)</span>

    <span class="c1"># Respond to requests until process is killed</span>
    <span class="n">httpd</span><span class="o">.</span><span class="n">serve_forever</span><span class="p">()</span>

    <span class="c1"># Alternative: serve one request, then exit</span>
    <span class="n">httpd</span><span class="o">.</span><span class="n">handle_request</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wsgiref.simple_server.demo_app">
<span class="sig-prename descclassname"><span class="pre">wsgiref.simple_server.</span></span><span class="sig-name descname"><span class="pre">demo_app</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">environ</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_response</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wsgiref.simple_server.demo_app" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Esta función es una pequeña pero completa aplicación WSGI que retorna una página de texto con el mensaje «Hello world!» y una lista de pares clave/valor obtenida del parámetro <em>environ</em>. Es útil para verificar que un servidor WSGI, como <a class="reference internal" href="#module-wsgiref.simple_server" title="wsgiref.simple_server: A simple WSGI HTTP server."><code class="xref py py-mod docutils literal notranslate"><span class="pre">wsgiref.simple_server</span></code></a>, es capaz de ejecutar una aplicación WSGI simple correctamente.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="wsgiref.simple_server.WSGIServer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wsgiref.simple_server.</span></span><span class="sig-name descname"><span class="pre">WSGIServer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">server_address</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">RequestHandlerClass</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wsgiref.simple_server.WSGIServer" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Crea una instancia de <a class="reference internal" href="#wsgiref.simple_server.WSGIServer" title="wsgiref.simple_server.WSGIServer"><code class="xref py py-class docutils literal notranslate"><span class="pre">WSGIServer</span></code></a>. <em>server_address</em> debe ser una tupla <code class="docutils literal notranslate"><span class="pre">(máquina,puerto)</span></code> y <em>RequestHandlerClass</em> debe ser la subclase de <a class="reference internal" href="http.server.html#http.server.BaseHTTPRequestHandler" title="http.server.BaseHTTPRequestHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">http.server.BaseHTTPRequestHandler</span></code></a> que se usará para procesar peticiones.</p>
<p>Normalmente, no es necesario invocar este constructor, ya que la función <a class="reference internal" href="#wsgiref.simple_server.make_server" title="wsgiref.simple_server.make_server"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_server()</span></code></a> puede gestionar todos los detalles.</p>
<p><a class="reference internal" href="#wsgiref.simple_server.WSGIServer" title="wsgiref.simple_server.WSGIServer"><code class="xref py py-class docutils literal notranslate"><span class="pre">WSGIServer</span></code></a> es una subclase de <a class="reference internal" href="http.server.html#http.server.HTTPServer" title="http.server.HTTPServer"><code class="xref py py-class docutils literal notranslate"><span class="pre">http.server.HTTPServer</span></code></a>, por lo que todos sus métodos, como <code class="xref py py-meth docutils literal notranslate"><span class="pre">serve_forever()</span></code> y <code class="xref py py-meth docutils literal notranslate"><span class="pre">handle_request()</span></code>, están disponibles. <a class="reference internal" href="#wsgiref.simple_server.WSGIServer" title="wsgiref.simple_server.WSGIServer"><code class="xref py py-class docutils literal notranslate"><span class="pre">WSGIServer</span></code></a> también ofrece los siguientes métodos específicos de WSGI:</p>
<dl class="py method">
<dt class="sig sig-object py" id="wsgiref.simple_server.WSGIServer.set_app">
<span class="sig-name descname"><span class="pre">set_app</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">application</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wsgiref.simple_server.WSGIServer.set_app" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Establece el invocable <em>application</em> como la aplicación WSGI que recibirá las peticiones.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="wsgiref.simple_server.WSGIServer.get_app">
<span class="sig-name descname"><span class="pre">get_app</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wsgiref.simple_server.WSGIServer.get_app" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Retorna la aplicación invocable actualmente establecida.</p>
</dd></dl>

<p>Habitualmente, sin embargo, no es necesario usar estos métodos adicionales, ya que <a class="reference internal" href="#wsgiref.simple_server.WSGIServer.set_app" title="wsgiref.simple_server.WSGIServer.set_app"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_app()</span></code></a> se llama desde <a class="reference internal" href="#wsgiref.simple_server.make_server" title="wsgiref.simple_server.make_server"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_server()</span></code></a> y <a class="reference internal" href="#wsgiref.simple_server.WSGIServer.get_app" title="wsgiref.simple_server.WSGIServer.get_app"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_app()</span></code></a> existe sobretodo para el beneficio de instancias del gestor de peticiones.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="wsgiref.simple_server.WSGIRequestHandler">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wsgiref.simple_server.</span></span><span class="sig-name descname"><span class="pre">WSGIRequestHandler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client_address</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">server</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wsgiref.simple_server.WSGIRequestHandler" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Crea un gestor HTTP para la <em>request</em> indicada (es decir un socket), <em>client_address (una tupla ``(máquina,puerto)``), y *server</em> (una instancia <a class="reference internal" href="#wsgiref.simple_server.WSGIServer" title="wsgiref.simple_server.WSGIServer"><code class="xref py py-class docutils literal notranslate"><span class="pre">WSGIServer</span></code></a>).</p>
<p>No es necesario crear instancias de esta clase directamente. Se crean automáticamente bajo demanda por objetos <a class="reference internal" href="#wsgiref.simple_server.WSGIServer" title="wsgiref.simple_server.WSGIServer"><code class="xref py py-class docutils literal notranslate"><span class="pre">WSGIServer</span></code></a>. Sin embargo, se pueden crear subclases de esta clase y proveerlas como <em>handler_class</em> a la función <a class="reference internal" href="#wsgiref.simple_server.make_server" title="wsgiref.simple_server.make_server"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_server()</span></code></a>. Algunos métodos posiblemente relevantes para sobreescribir en estas subclases:</p>
<dl class="py method">
<dt class="sig sig-object py" id="wsgiref.simple_server.WSGIRequestHandler.get_environ">
<span class="sig-name descname"><span class="pre">get_environ</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wsgiref.simple_server.WSGIRequestHandler.get_environ" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Retorna un diccionario <a class="reference internal" href="#wsgiref.types.WSGIEnvironment" title="wsgiref.types.WSGIEnvironment"><code class="xref py py-data docutils literal notranslate"><span class="pre">WSGIEnvironment</span></code></a> para una petición. La implementación por defecto copia el contenido del diccionario atributo <code class="xref py py-attr docutils literal notranslate"><span class="pre">base_environ</span></code> del objeto <code class="xref py py-class docutils literal notranslate"><span class="pre">WSGIserver</span></code> y añade varias cabeceras derivadas de la petición HTTP. Cada llamada a este método debe retornar un nuevo diccionario con todas las variables de entorno CGI relevantes especificadas en <span class="target" id="index-45"></span><a class="pep reference external" href="https://peps.python.org/pep-3333/"><strong>PEP 3333</strong></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="wsgiref.simple_server.WSGIRequestHandler.get_stderr">
<span class="sig-name descname"><span class="pre">get_stderr</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wsgiref.simple_server.WSGIRequestHandler.get_stderr" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Retorna el objeto que debe usarse como el flujo de <code class="docutils literal notranslate"><span class="pre">wsgi.errors</span></code>. La implementación por defecto retorna simplemente <code class="docutils literal notranslate"><span class="pre">sys.stderr</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="wsgiref.simple_server.WSGIRequestHandler.handle">
<span class="sig-name descname"><span class="pre">handle</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wsgiref.simple_server.WSGIRequestHandler.handle" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Procesa la petición HTTP. La implementación por defecto crea una instancia gestora usando una clase <a class="reference internal" href="#module-wsgiref.handlers" title="wsgiref.handlers: WSGI server/gateway base classes."><code class="xref py py-mod docutils literal notranslate"><span class="pre">wsgiref.handlers</span></code></a> para implementar la interfaz de aplicación WSGI real.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-wsgiref.validate">
<span id="wsgiref-validate-wsgi-conformance-checker"></span><h2><a class="reference internal" href="#module-wsgiref.validate" title="wsgiref.validate: WSGI conformance checker."><code class="xref py py-mod docutils literal notranslate"><span class="pre">wsgiref.validate</span></code></a> — Verificador de compatibilidad WSGI<a class="headerlink" href="#module-wsgiref.validate" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Al crear nuevos objetos aplicación WSGI, <em>frameworks</em>, servidores, o <em>middleware</em>, puede ser útil validar la compatibilidad del nuevo código usando <a class="reference internal" href="#module-wsgiref.validate" title="wsgiref.validate: WSGI conformance checker."><code class="xref py py-mod docutils literal notranslate"><span class="pre">wsgiref.validate</span></code></a>. Este módulo ofrece una función que crea objetos de aplicación WSGI que validan las comunicaciones entre un servidor o <em>gateway</em> WSGI y un objeto de aplicación WSGI, para comprobar la compatibilidad del protocolo en ambos lados.</p>
<p>Hay que observar que esta utilidad no garantiza compatibilidad completa con <span class="target" id="index-46"></span><a class="pep reference external" href="https://peps.python.org/pep-3333/"><strong>PEP 3333</strong></a>. La ausencia de errores usando este módulo no implica que no existan errores. Sin embargo, si este módulo produce errores, implica que o el servidor o la aplicación no son 100% compatibles.</p>
<p>Este módulo se basa en el módulo <code class="xref py py-mod docutils literal notranslate"><span class="pre">paste.lint</span></code> de la librería <em>Python Paste</em> de <em>Ian Bicking</em>.</p>
<dl class="py function">
<dt class="sig sig-object py" id="wsgiref.validate.validator">
<span class="sig-prename descclassname"><span class="pre">wsgiref.validate.</span></span><span class="sig-name descname"><span class="pre">validator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">application</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wsgiref.validate.validator" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Envuelve <em>application</em> y retorna un nuevo objeto de aplicación WSGI. La aplicación retornada reenviará todas las peticiones a la <em>application</em> original y comprobará que tanto la <em>application</em> como el servidor que la llama son compatibles con la especificación WSGI y con <span class="target" id="index-47"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc2616.html"><strong>RFC 2616</strong></a>.</p>
<p>Cualquier incompatibilidad detectada provocará el lanzamiento de un <a class="reference internal" href="exceptions.html#AssertionError" title="AssertionError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">AssertionError</span></code></a>. Nótese que, sin embargo, cómo se gestionan estos errores depende del servidor. Por ejemplo, <a class="reference internal" href="#module-wsgiref.simple_server" title="wsgiref.simple_server: A simple WSGI HTTP server."><code class="xref py py-mod docutils literal notranslate"><span class="pre">wsgiref.simple_server</span></code></a> y otros servidores basados en <a class="reference internal" href="#module-wsgiref.handlers" title="wsgiref.handlers: WSGI server/gateway base classes."><code class="xref py py-mod docutils literal notranslate"><span class="pre">wsgiref.handlers</span></code></a>, que no sobreescriben los métodos de gestión de errores para hacer otras cosas, simplemente escribirán un mensaje de que el error ha ocurrido y volcarán la traza de error en <code class="docutils literal notranslate"><span class="pre">sys.stderr</span></code> o algún otro flujo de errores.</p>
<p>Este <em>wrapper</em> puede también generar salidas usando el módulo <a class="reference internal" href="warnings.html#module-warnings" title="warnings: Issue warning messages and control their disposition."><code class="xref py py-mod docutils literal notranslate"><span class="pre">warnings</span></code></a> para señalar comportamientos que son cuestionables pero que no están realmente prohibidos por <span class="target" id="index-48"></span><a class="pep reference external" href="https://peps.python.org/pep-3333/"><strong>PEP 3333</strong></a>. A no ser que se suprima esta salida usando opciones de línea de comandos de Python o la API de <a class="reference internal" href="warnings.html#module-warnings" title="warnings: Issue warning messages and control their disposition."><code class="xref py py-mod docutils literal notranslate"><span class="pre">warnings</span></code></a>, cualquier aviso se escribirá en <code class="docutils literal notranslate"><span class="pre">sys.stderr</span></code>, en lugar de en <code class="docutils literal notranslate"><span class="pre">wsgi.errors</span></code>, aunque sean el mismo objeto.</p>
<p>Ejemplo de uso:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">wsgiref.validate</span> <span class="kn">import</span> <span class="n">validator</span>
<span class="kn">from</span> <span class="nn">wsgiref.simple_server</span> <span class="kn">import</span> <span class="n">make_server</span>

<span class="c1"># Our callable object which is intentionally not compliant to the</span>
<span class="c1"># standard, so the validator is going to break</span>
<span class="k">def</span> <span class="nf">simple_app</span><span class="p">(</span><span class="n">environ</span><span class="p">,</span> <span class="n">start_response</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="s1">&#39;200 OK&#39;</span>  <span class="c1"># HTTP Status</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;Content-type&#39;</span><span class="p">,</span> <span class="s1">&#39;text/plain&#39;</span><span class="p">)]</span>  <span class="c1"># HTTP Headers</span>
    <span class="n">start_response</span><span class="p">(</span><span class="n">status</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>

    <span class="c1"># This is going to break because we need to return a list, and</span>
    <span class="c1"># the validator is going to inform us</span>
    <span class="k">return</span> <span class="sa">b</span><span class="s2">&quot;Hello World&quot;</span>

<span class="c1"># This is the application wrapped in a validator</span>
<span class="n">validator_app</span> <span class="o">=</span> <span class="n">validator</span><span class="p">(</span><span class="n">simple_app</span><span class="p">)</span>

<span class="k">with</span> <span class="n">make_server</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="mi">8000</span><span class="p">,</span> <span class="n">validator_app</span><span class="p">)</span> <span class="k">as</span> <span class="n">httpd</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Listening on port 8000....&quot;</span><span class="p">)</span>
    <span class="n">httpd</span><span class="o">.</span><span class="n">serve_forever</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-wsgiref.handlers">
<span id="wsgiref-handlers-server-gateway-base-classes"></span><h2><a class="reference internal" href="#module-wsgiref.handlers" title="wsgiref.handlers: WSGI server/gateway base classes."><code class="xref py py-mod docutils literal notranslate"><span class="pre">wsgiref.handlers</span></code></a> – Clases base servidor/<em>gateway</em><a class="headerlink" href="#module-wsgiref.handlers" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Este módulo ofrece clases gestoras base para implementar servidores y <em>gateways</em> WSGI. Estas clases base gestionan la mayoría del trabajo de comunicarse con una aplicación WSGI, siempre que se les dé un entorno CGI, junto con una entrada, una salida, y un flujo de errores.</p>
<dl class="py class">
<dt class="sig sig-object py" id="wsgiref.handlers.CGIHandler">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wsgiref.handlers.</span></span><span class="sig-name descname"><span class="pre">CGIHandler</span></span><a class="headerlink" href="#wsgiref.handlers.CGIHandler" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Invocación basada en CGI vía <code class="docutils literal notranslate"><span class="pre">sys.stdin</span></code>, <code class="docutils literal notranslate"><span class="pre">sys.stdout</span></code>, <code class="docutils literal notranslate"><span class="pre">sys.stderr</span></code> y <code class="docutils literal notranslate"><span class="pre">os.environ</span></code>. Esto es útil cuando se quiere ejecutar una aplicación WSGI como un script CGI. Simplemente es necesario invocar <code class="docutils literal notranslate"><span class="pre">CGIHandler().run(app)</span></code>, donde <code class="docutils literal notranslate"><span class="pre">app</span></code> es el objeto de aplicación WSGI que se quiere invocar.</p>
<p>Esta clase es una subclase de <a class="reference internal" href="#wsgiref.handlers.BaseCGIHandler" title="wsgiref.handlers.BaseCGIHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCGIHandler</span></code></a> que establece <code class="docutils literal notranslate"><span class="pre">wsgi.run_once</span></code> a cierto, <code class="docutils literal notranslate"><span class="pre">wsgi.multithread</span></code> a falso, y <code class="docutils literal notranslate"><span class="pre">wsgi.multiprocess</span></code> a cierto, y siempre usa <a class="reference internal" href="sys.html#module-sys" title="sys: Access system-specific parameters and functions."><code class="xref py py-mod docutils literal notranslate"><span class="pre">sys</span></code></a> y <a class="reference internal" href="os.html#module-os" title="os: Miscellaneous operating system interfaces."><code class="xref py py-mod docutils literal notranslate"><span class="pre">os</span></code></a> para obtener los flujos y entorno CGI necesarios.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="wsgiref.handlers.IISCGIHandler">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wsgiref.handlers.</span></span><span class="sig-name descname"><span class="pre">IISCGIHandler</span></span><a class="headerlink" href="#wsgiref.handlers.IISCGIHandler" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Una alternativa especializada a <a class="reference internal" href="#wsgiref.handlers.CGIHandler" title="wsgiref.handlers.CGIHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">CGIHandler</span></code></a>, para usar al desplegar en servidores web Microsoft IIS, sin establecer la opción de configuración <code class="docutils literal notranslate"><span class="pre">allowPathInfo</span></code> (IIS&gt;=7) o la meta-base <code class="docutils literal notranslate"><span class="pre">allowPathInfoForScriptMappings</span></code> (IIS&lt;7).</p>
<p>Por defecto, IIS entrega <code class="docutils literal notranslate"><span class="pre">PATH_INFO</span></code> que duplica <code class="docutils literal notranslate"><span class="pre">SCRIPT_NAME</span></code> al principio, causando problemas con aplicaciones WSGI que implementan enrutamiento. Este gestor elimina las partes duplicadas de la ruta.</p>
<p>IIS se puede configurar para pasar el <code class="docutils literal notranslate"><span class="pre">PATH_INFO</span></code> correcto, pero esto causa otro error donde <code class="docutils literal notranslate"><span class="pre">PATH_TRANSLATED</span></code> es incorrecto. Afortunadamente, esta variable rara vez se usa y no está garantizada por WSGI. Sin embargo, en IIS&lt;7, la configuración solo se puede realizar en un nivel de vhost, lo que afecta a todas las demás asignaciones de scripts, muchas de las cuales se rompen cuando se exponen al error <code class="docutils literal notranslate"><span class="pre">PATH_TRANSLATED</span></code>. Por esta razón, IIS&lt;7 casi nunca se implementa con la solución (incluso IIS7 rara vez lo usa porque todavía no tiene una interfaz de usuario).</p>
<p>No hay forma de que el código CGI detecte cuándo la opción está activada, por lo que se ofrece una clase gestora separada. Se usa de la misma forma que <a class="reference internal" href="#wsgiref.handlers.CGIHandler" title="wsgiref.handlers.CGIHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">CGIHandler</span></code></a>, p.e. llamando a <code class="docutils literal notranslate"><span class="pre">IISCGIHandler().run(app)</span></code>, donde <code class="docutils literal notranslate"><span class="pre">app</span></code> es el objeto aplicación WSGI que se desea invocar.</p>
<div class="versionadded">
<p><span class="versionmodified added">Nuevo en la versión 3.2.</span></p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="wsgiref.handlers.BaseCGIHandler">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wsgiref.handlers.</span></span><span class="sig-name descname"><span class="pre">BaseCGIHandler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stdin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stdout</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stderr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">environ</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multithread</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multiprocess</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wsgiref.handlers.BaseCGIHandler" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Similar a <a class="reference internal" href="#wsgiref.handlers.CGIHandler" title="wsgiref.handlers.CGIHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">CGIHandler</span></code></a>, pero en lugar de usar los módulos <a class="reference internal" href="sys.html#module-sys" title="sys: Access system-specific parameters and functions."><code class="xref py py-mod docutils literal notranslate"><span class="pre">sys</span></code></a> y <a class="reference internal" href="os.html#module-os" title="os: Miscellaneous operating system interfaces."><code class="xref py py-mod docutils literal notranslate"><span class="pre">os</span></code></a>, el entorno CGI y los flujos de E/S se especifican explícitamente. Los valores <em>multithread</em> y <em>multiprocess</em> se pasan a las aplicaciones ejecutadas por la instancia de gestión como <code class="docutils literal notranslate"><span class="pre">wsgi.multithread</span></code> y <code class="docutils literal notranslate"><span class="pre">wsgi.multiprocess</span></code>.</p>
<p>Esta clase es una subclase de <a class="reference internal" href="#wsgiref.handlers.SimpleHandler" title="wsgiref.handlers.SimpleHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleHandler</span></code></a> para usarse con servidores HTTP que no reciben peticiones directas de Internet, <em>HTTP origin servers</em>. Al escribir una implementación de un protocolo de pasarela, como CGI, FastCGI, SCGI, etcétera, que use una cabecera <code class="docutils literal notranslate"><span class="pre">Status:</span></code> para enviar un estado HTTP, probablemente sea adecuado heredar de esta clase, en lugar de <a class="reference internal" href="#wsgiref.handlers.SimpleHandler" title="wsgiref.handlers.SimpleHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleHandler</span></code></a>.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="wsgiref.handlers.SimpleHandler">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wsgiref.handlers.</span></span><span class="sig-name descname"><span class="pre">SimpleHandler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stdin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stdout</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stderr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">environ</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multithread</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multiprocess</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wsgiref.handlers.SimpleHandler" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Similar a <a class="reference internal" href="#wsgiref.handlers.BaseCGIHandler" title="wsgiref.handlers.BaseCGIHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCGIHandler</span></code></a> pero diseñada para usarse con servidores que reciban peticiones directamente de Internet, o <em>HTTP origin servers</em>. Al escribir una implementación de un servidor HTTP, probablemente prefiera heredar de esta clase en lugar de <a class="reference internal" href="#wsgiref.handlers.BaseCGIHandler" title="wsgiref.handlers.BaseCGIHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCGIHandler</span></code></a>.</p>
<p>Esta clase es una subclase de <a class="reference internal" href="#wsgiref.handlers.BaseHandler" title="wsgiref.handlers.BaseHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseHandler</span></code></a>. Sobreescribe los métodos <code class="xref py py-meth docutils literal notranslate"><span class="pre">__init__()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">get_stdin()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">get_stderr()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">add_cgi_vars()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">_write()</span></code> y <code class="xref py py-meth docutils literal notranslate"><span class="pre">_flush()</span></code> para soportar el uso explícito del entorno y los flujos a partir del constructor. El entorno y los flujos especificados se almacenan en los atributos <code class="xref py py-attr docutils literal notranslate"><span class="pre">stdin</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">stdout</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">stderr</span></code> y <code class="xref py py-attr docutils literal notranslate"><span class="pre">environ</span></code>.</p>
<p>El método <a class="reference internal" href="io.html#io.BufferedIOBase.write" title="io.BufferedIOBase.write"><code class="xref py py-meth docutils literal notranslate"><span class="pre">write()</span></code></a> de <em>stdout</em> podría escribir cada fragmento de información completamente, como <a class="reference internal" href="io.html#io.BufferedIOBase" title="io.BufferedIOBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">io.BufferedIOBase</span></code></a>.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="wsgiref.handlers.BaseHandler">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wsgiref.handlers.</span></span><span class="sig-name descname"><span class="pre">BaseHandler</span></span><a class="headerlink" href="#wsgiref.handlers.BaseHandler" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Esta es una clase base abstracta para ejecutar aplicaciones WSGI. Cada instancia gestionará una sola petición HTTP, aunque en principio se podría crear una subclase reutilizable para múltiples peticiones.</p>
<p>Las instancias de <a class="reference internal" href="#wsgiref.handlers.BaseHandler" title="wsgiref.handlers.BaseHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseHandler</span></code></a> tiene un sólo método para uso externo:</p>
<dl class="py method">
<dt class="sig sig-object py" id="wsgiref.handlers.BaseHandler.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wsgiref.handlers.BaseHandler.run" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Ejecuta la aplicación WSGI <em>app</em> indicada.</p>
</dd></dl>

<p>Todos los otros métodos de <a class="reference internal" href="#wsgiref.handlers.BaseHandler" title="wsgiref.handlers.BaseHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseHandler</span></code></a> se invocan por este método en el proceso de ejecutar la aplicación, es decir, existen principalmente para permitir personalizar el proceso.</p>
<p>Los métodos siguientes DEBEN sobrescribirse en una subclase:</p>
<dl class="py method">
<dt class="sig sig-object py" id="wsgiref.handlers.BaseHandler._write">
<span class="sig-name descname"><span class="pre">_write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wsgiref.handlers.BaseHandler._write" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Enviar los bytes <em>data</em> para la transmisión al cliente. Es correcto que este método realmente transmita la información. La clase <a class="reference internal" href="#wsgiref.handlers.BaseHandler" title="wsgiref.handlers.BaseHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseHandler</span></code></a> simplemente separa las operaciones de escritura y liberación para una mayor eficiencia cuando el sistema subyacente realmente hace esa distinción.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="wsgiref.handlers.BaseHandler._flush">
<span class="sig-name descname"><span class="pre">_flush</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wsgiref.handlers.BaseHandler._flush" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Forzar la transmisión de los datos en el búfer al cliente. Es correcto si este método no es operativo, p.e., si <a class="reference internal" href="#wsgiref.handlers.BaseHandler._write" title="wsgiref.handlers.BaseHandler._write"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_write()</span></code></a> realmente envía los datos.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="wsgiref.handlers.BaseHandler.get_stdin">
<span class="sig-name descname"><span class="pre">get_stdin</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wsgiref.handlers.BaseHandler.get_stdin" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Retorna un objeto compatible con <a class="reference internal" href="#wsgiref.types.InputStream" title="wsgiref.types.InputStream"><code class="xref py py-class docutils literal notranslate"><span class="pre">InputStream</span></code></a>, apropiado para usar como <code class="docutils literal notranslate"><span class="pre">wsgi.input</span></code> de la petición en proceso actualmente.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="wsgiref.handlers.BaseHandler.get_stderr">
<span class="sig-name descname"><span class="pre">get_stderr</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wsgiref.handlers.BaseHandler.get_stderr" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Retorna un objeto compatible con <a class="reference internal" href="#wsgiref.types.ErrorStream" title="wsgiref.types.ErrorStream"><code class="xref py py-class docutils literal notranslate"><span class="pre">ErrorStream</span></code></a>, apropiado para usar como <code class="docutils literal notranslate"><span class="pre">wsgi.errors</span></code> de la petición en proceso actualmente.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="wsgiref.handlers.BaseHandler.add_cgi_vars">
<span class="sig-name descname"><span class="pre">add_cgi_vars</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wsgiref.handlers.BaseHandler.add_cgi_vars" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Inserta las variables CGI para la petición actual en el atributo <code class="xref py py-attr docutils literal notranslate"><span class="pre">environ</span></code>.</p>
</dd></dl>

<p>A continuación se describen algunos métodos y atributos más que podría ser interesante sobrescribir. Esta lista es sólo un sumario, sin embargo, y no incluye cada método que puede ser sobrescrito. Conviene consultar las docstrings y el código fuente para obtener información adicional antes de intentar crear una subclase de <a class="reference internal" href="#wsgiref.handlers.BaseHandler" title="wsgiref.handlers.BaseHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseHandler</span></code></a> personalizada.</p>
<p>Atributos y métodos para personalizar el entorno WSGI:</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="wsgiref.handlers.BaseHandler.wsgi_multithread">
<span class="sig-name descname"><span class="pre">wsgi_multithread</span></span><a class="headerlink" href="#wsgiref.handlers.BaseHandler.wsgi_multithread" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>El valor a usar en la variable de entorno <code class="docutils literal notranslate"><span class="pre">wsgi.multithread</span></code>. Por defecto es cierto en <a class="reference internal" href="#wsgiref.handlers.BaseHandler" title="wsgiref.handlers.BaseHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseHandler</span></code></a>, pero puede tener un valor por defecto distinto (o establecerse en el constructor) en otras subclases.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wsgiref.handlers.BaseHandler.wsgi_multiprocess">
<span class="sig-name descname"><span class="pre">wsgi_multiprocess</span></span><a class="headerlink" href="#wsgiref.handlers.BaseHandler.wsgi_multiprocess" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>El valor a usar en la variable de entorno <code class="docutils literal notranslate"><span class="pre">wsgi.multiprocess</span></code>. Por defecto es cierto en <a class="reference internal" href="#wsgiref.handlers.BaseHandler" title="wsgiref.handlers.BaseHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseHandler</span></code></a>, pero puede tener un valor por defecto distinto (o establecerse en el constructor) en otras subclases.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wsgiref.handlers.BaseHandler.wsgi_run_once">
<span class="sig-name descname"><span class="pre">wsgi_run_once</span></span><a class="headerlink" href="#wsgiref.handlers.BaseHandler.wsgi_run_once" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>El valor a usar en la variable de entorno <code class="docutils literal notranslate"><span class="pre">wsgi.run_once</span></code>. Por defecto es falso en <a class="reference internal" href="#wsgiref.handlers.BaseHandler" title="wsgiref.handlers.BaseHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseHandler</span></code></a>, pero en <a class="reference internal" href="#wsgiref.handlers.CGIHandler" title="wsgiref.handlers.CGIHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">CGIHandler</span></code></a> es cierto por defecto.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wsgiref.handlers.BaseHandler.os_environ">
<span class="sig-name descname"><span class="pre">os_environ</span></span><a class="headerlink" href="#wsgiref.handlers.BaseHandler.os_environ" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Las variables de entorno por defecto que se incluirán en el entorno WSGI de cada petición. Por defecto, es una copia de <code class="docutils literal notranslate"><span class="pre">os.environ</span></code> cuando se importa <a class="reference internal" href="#module-wsgiref.handlers" title="wsgiref.handlers: WSGI server/gateway base classes."><code class="xref py py-mod docutils literal notranslate"><span class="pre">wsgiref.handlers</span></code></a>, pero otras subclases pueden crear las suyas propias a nivel de clase o de instancia. Se debe tener en cuenta que el diccionario se debe considerar como de sólo lectura, ya que el valor por defecto se comparte entre múltiples clases e instancias.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wsgiref.handlers.BaseHandler.server_software">
<span class="sig-name descname"><span class="pre">server_software</span></span><a class="headerlink" href="#wsgiref.handlers.BaseHandler.server_software" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Si el atributo <a class="reference internal" href="#wsgiref.handlers.BaseHandler.origin_server" title="wsgiref.handlers.BaseHandler.origin_server"><code class="xref py py-attr docutils literal notranslate"><span class="pre">origin_server</span></code></a> tiene valor, éste se usa para establecer el valor por defecto de la variable de entorno WSGI <code class="docutils literal notranslate"><span class="pre">SERVER_SOFTWARE</span></code> y un cabecera <code class="docutils literal notranslate"><span class="pre">Server:</span></code> por defecto en las respuestas HTTP. Las clases gestoras que no son <em>HTTP origin servers</em>, como <a class="reference internal" href="#wsgiref.handlers.BaseCGIHandler" title="wsgiref.handlers.BaseCGIHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCGIHandler</span></code></a> y <a class="reference internal" href="#wsgiref.handlers.CGIHandler" title="wsgiref.handlers.CGIHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">CGIHandler</span></code></a>, ignoran este atributo.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Distinto en la versión 3.3: </span>El término «Python» se reemplaza con el término específico correspondiente a la implementación del intérprete, como «CPython», «Jython», etc.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="wsgiref.handlers.BaseHandler.get_scheme">
<span class="sig-name descname"><span class="pre">get_scheme</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wsgiref.handlers.BaseHandler.get_scheme" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Retorna el esquema usado en la URL para la petición actual. La implementación por defecto utiliza la función <code class="xref py py-func docutils literal notranslate"><span class="pre">guess_scheme()</span></code> de <a class="reference internal" href="#module-wsgiref.util" title="wsgiref.util: WSGI environment utilities."><code class="xref py py-mod docutils literal notranslate"><span class="pre">wsgiref.util</span></code></a> para adivinar si el esquema debería ser «http» o «https», basándose en las variables de <code class="xref py py-attr docutils literal notranslate"><span class="pre">environ</span></code> de la petición actual.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="wsgiref.handlers.BaseHandler.setup_environ">
<span class="sig-name descname"><span class="pre">setup_environ</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wsgiref.handlers.BaseHandler.setup_environ" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Establece el atributo <code class="xref py py-attr docutils literal notranslate"><span class="pre">environ</span></code> a un entorno WSGI completo. La implementación por defecto utiliza todos los métodos y atributos anteriormente mencionados, más los métodos <a class="reference internal" href="#wsgiref.handlers.BaseHandler.get_stdin" title="wsgiref.handlers.BaseHandler.get_stdin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_stdin()</span></code></a>, <a class="reference internal" href="#wsgiref.handlers.BaseHandler.get_stderr" title="wsgiref.handlers.BaseHandler.get_stderr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_stderr()</span></code></a> y <a class="reference internal" href="#wsgiref.handlers.BaseHandler.add_cgi_vars" title="wsgiref.handlers.BaseHandler.add_cgi_vars"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_cgi_vars()</span></code></a>, y el atributo <a class="reference internal" href="#wsgiref.handlers.BaseHandler.wsgi_file_wrapper" title="wsgiref.handlers.BaseHandler.wsgi_file_wrapper"><code class="xref py py-attr docutils literal notranslate"><span class="pre">wsgi_file_wrapper</span></code></a>. También incluye una clave <code class="docutils literal notranslate"><span class="pre">SERVER_SOFTWARE</span></code> si no existe, siempre y cuando el atributo <a class="reference internal" href="#wsgiref.handlers.BaseHandler.origin_server" title="wsgiref.handlers.BaseHandler.origin_server"><code class="xref py py-attr docutils literal notranslate"><span class="pre">origin_server</span></code></a> tiene un valor válido y el atributo <a class="reference internal" href="#wsgiref.handlers.BaseHandler.server_software" title="wsgiref.handlers.BaseHandler.server_software"><code class="xref py py-attr docutils literal notranslate"><span class="pre">server_software</span></code></a> está establecido.</p>
</dd></dl>

<p>Métodos y atributos para personalizar el manejo de excepciones:</p>
<dl class="py method">
<dt class="sig sig-object py" id="wsgiref.handlers.BaseHandler.log_exception">
<span class="sig-name descname"><span class="pre">log_exception</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exc_info</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wsgiref.handlers.BaseHandler.log_exception" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Envía la tupla <em>exc_info</em> al registro del servidor. <em>exc_info</em> es un tupla <code class="docutils literal notranslate"><span class="pre">(type,</span> <span class="pre">value,</span> <span class="pre">traceback)</span></code>. La implementación por defecto simplemente escribe el seguimiento de la pila en el flujo <code class="docutils literal notranslate"><span class="pre">wsgi.errors</span></code> de la petición y lo vacía. Las subclases pueden sobrescribir éste método para cambiar el formato o redirigir la salida, enviar mensajes de correo con el seguimiento de pila a un administrador o cualquier otra acción que se considere adecuada.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wsgiref.handlers.BaseHandler.traceback_limit">
<span class="sig-name descname"><span class="pre">traceback_limit</span></span><a class="headerlink" href="#wsgiref.handlers.BaseHandler.traceback_limit" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>El máximo número de marcos a incluir en la salida de seguimientos de pilas por el método por defecto <a class="reference internal" href="#wsgiref.handlers.BaseHandler.log_exception" title="wsgiref.handlers.BaseHandler.log_exception"><code class="xref py py-meth docutils literal notranslate"><span class="pre">log_exception()</span></code></a>. Si vale <code class="docutils literal notranslate"><span class="pre">None</span></code>, se incluyen todos los marcos.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="wsgiref.handlers.BaseHandler.error_output">
<span class="sig-name descname"><span class="pre">error_output</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">environ</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_response</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#wsgiref.handlers.BaseHandler.error_output" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Este método es una aplicación WSGI para generar una página de error para el usuario. Sólo se invoca si un error ocurre antes de enviar las cabeceras al cliente.</p>
<p>This method can access the current error using <code class="docutils literal notranslate"><span class="pre">sys.exception()</span></code>,
and should pass that information to <em>start_response</em> when calling it (as
described in the «Error Handling» section of <span class="target" id="index-12"></span><a class="pep reference external" href="https://peps.python.org/pep-3333/"><strong>PEP 3333</strong></a>).</p>
<p>La implementación por defecto sólo utiliza los atributos <a class="reference internal" href="#wsgiref.handlers.BaseHandler.error_status" title="wsgiref.handlers.BaseHandler.error_status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">error_status</span></code></a>, <a class="reference internal" href="#wsgiref.handlers.BaseHandler.error_headers" title="wsgiref.handlers.BaseHandler.error_headers"><code class="xref py py-attr docutils literal notranslate"><span class="pre">error_headers</span></code></a> y <a class="reference internal" href="#wsgiref.handlers.BaseHandler.error_body" title="wsgiref.handlers.BaseHandler.error_body"><code class="xref py py-attr docutils literal notranslate"><span class="pre">error_body</span></code></a> para generar una página de salida. Las subclases pueden sobrescribir éste para producir una salida de error dinámica mejor.</p>
<p>Hay que tener en cuenta, sin embargo, que no se recomienda, desde una perspectiva de seguridad, mostrar información de diagnóstico a cualquier usuario antiguo. Idealmente, se debería hacer algo especial para activar la salida de información de diagnóstico, motivo por el que la implementación por defecto no incluye ninguna.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wsgiref.handlers.BaseHandler.error_status">
<span class="sig-name descname"><span class="pre">error_status</span></span><a class="headerlink" href="#wsgiref.handlers.BaseHandler.error_status" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>El estado HTTP utilizado para las respuestas de error. Se debería utilizar una de las cadenas de estado definidas en <span class="target" id="index-49"></span><a class="pep reference external" href="https://peps.python.org/pep-3333/"><strong>PEP 3333</strong></a>. Por defecto es un código 500 y un mensaje.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wsgiref.handlers.BaseHandler.error_headers">
<span class="sig-name descname"><span class="pre">error_headers</span></span><a class="headerlink" href="#wsgiref.handlers.BaseHandler.error_headers" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Las cabeceras HTTP utilizadas por las respuestas de error. Debería tratarse de una lista de cabeceras de respuesta WSGI (tuplas <code class="docutils literal notranslate"><span class="pre">(name,</span> <span class="pre">value)</span></code>), tal y como se describe en <span class="target" id="index-50"></span><a class="pep reference external" href="https://peps.python.org/pep-3333/"><strong>PEP 3333</strong></a>. La lista por defecto simplemente establece el tipo de contenido a <code class="docutils literal notranslate"><span class="pre">text/plain</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wsgiref.handlers.BaseHandler.error_body">
<span class="sig-name descname"><span class="pre">error_body</span></span><a class="headerlink" href="#wsgiref.handlers.BaseHandler.error_body" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>El cuerpo de la respuesta de error. Debería ser una cadena de bytes con el cuerpo de la respuesta HTTP. Por defecto contiene el texto plano <em>A server error occurred. Please contact the administrator.</em></p>
</dd></dl>

<p>Métodos y atributos para la funcionalidad «Optional Platform-Specific File Handling» de <span class="target" id="index-51"></span><a class="pep reference external" href="https://peps.python.org/pep-3333/"><strong>PEP 3333</strong></a>:</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="wsgiref.handlers.BaseHandler.wsgi_file_wrapper">
<span class="sig-name descname"><span class="pre">wsgi_file_wrapper</span></span><a class="headerlink" href="#wsgiref.handlers.BaseHandler.wsgi_file_wrapper" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Una fábrica <code class="docutils literal notranslate"><span class="pre">wsgi.file_wrapper</span></code> compatible con <a class="reference internal" href="#wsgiref.types.FileWrapper" title="wsgiref.types.FileWrapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">wsgiref.types.FileWrapper</span></code></a>, o <code class="docutils literal notranslate"><span class="pre">None</span></code>. El valor por defecto de este atributo es la clase <a class="reference internal" href="#wsgiref.util.FileWrapper" title="wsgiref.util.FileWrapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">wsgiref.util.FileWrapper</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="wsgiref.handlers.BaseHandler.sendfile">
<span class="sig-name descname"><span class="pre">sendfile</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wsgiref.handlers.BaseHandler.sendfile" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Sobrescribir para implementar la transmisión de ficheros específica para la plataforma. Este método se llama sólo si el valor de retorno de la aplicación es una instancia de la clase especificada por el atributo <a class="reference internal" href="#wsgiref.handlers.BaseHandler.wsgi_file_wrapper" title="wsgiref.handlers.BaseHandler.wsgi_file_wrapper"><code class="xref py py-attr docutils literal notranslate"><span class="pre">wsgi_file_wrapper</span></code></a>. Debería retornar un valor cierto si fue capaz de transmitir correctamente el fichero, de modo que el código por defecto de transmisión no será ejecutado. La implementación por defecto de este método simplemente retorna un valor falso.</p>
</dd></dl>

<p>Métodos y atributos varios:</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="wsgiref.handlers.BaseHandler.origin_server">
<span class="sig-name descname"><span class="pre">origin_server</span></span><a class="headerlink" href="#wsgiref.handlers.BaseHandler.origin_server" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Este atributo debería establecerse a cierto si los métodos <a class="reference internal" href="#wsgiref.handlers.BaseHandler._write" title="wsgiref.handlers.BaseHandler._write"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_write()</span></code></a> y <a class="reference internal" href="#wsgiref.handlers.BaseHandler._flush" title="wsgiref.handlers.BaseHandler._flush"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_flush()</span></code></a> están siendo usados para comunicar directamente al cliente, en lugar de usar un protocolo de pasarela CGI que requiere el estado HTTP en una cabecera <code class="docutils literal notranslate"><span class="pre">Status:</span></code> especial.</p>
<p>El valor por defecto de este atributo es cierto en <a class="reference internal" href="#wsgiref.handlers.BaseHandler" title="wsgiref.handlers.BaseHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseHandler</span></code></a>, pero en <a class="reference internal" href="#wsgiref.handlers.BaseCGIHandler" title="wsgiref.handlers.BaseCGIHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCGIHandler</span></code></a> y <a class="reference internal" href="#wsgiref.handlers.CGIHandler" title="wsgiref.handlers.CGIHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">CGIHandler</span></code></a> es falso.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="wsgiref.handlers.BaseHandler.http_version">
<span class="sig-name descname"><span class="pre">http_version</span></span><a class="headerlink" href="#wsgiref.handlers.BaseHandler.http_version" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Si <a class="reference internal" href="#wsgiref.handlers.BaseHandler.origin_server" title="wsgiref.handlers.BaseHandler.origin_server"><code class="xref py py-attr docutils literal notranslate"><span class="pre">origin_server</span></code></a> es cierto, este atributo de tipo cadena se usa para establecer la versión HTTP de la respuesta enviada al cliente. Por defecto es <code class="docutils literal notranslate"><span class="pre">&quot;1.0&quot;</span></code>.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="wsgiref.handlers.read_environ">
<span class="sig-prename descclassname"><span class="pre">wsgiref.handlers.</span></span><span class="sig-name descname"><span class="pre">read_environ</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wsgiref.handlers.read_environ" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Transcodifica las variables CGI de <code class="docutils literal notranslate"><span class="pre">os.environ</span></code> a cadenas «bytes in unicode» definidas en <span class="target" id="index-52"></span><a class="pep reference external" href="https://peps.python.org/pep-3333/"><strong>PEP 3333</strong></a>, retornando un nuevo diccionario. Esta función se usa en <a class="reference internal" href="#wsgiref.handlers.CGIHandler" title="wsgiref.handlers.CGIHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">CGIHandler</span></code></a> y <a class="reference internal" href="#wsgiref.handlers.IISCGIHandler" title="wsgiref.handlers.IISCGIHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">IISCGIHandler</span></code></a> en lugar de usar directamente <code class="docutils literal notranslate"><span class="pre">os.environ</span></code>, lo que no es necesariamente compatible con EWGI en todas las plataformas y servidores web usando Python 3 – específicamente, aquellas en las que el entorno actual del sistema operativo es Unicode, p.e. Windows, o en las que el entorno está en bytes, pero la codificación del sistema usada por Python para descodificar lo es cualquier otro que ISO-8859-1, por ejemplo, sistemas UNIX que usen UTF-8.</p>
<p>Cuando se está implementando un gestor basado en CGI propio, probablemente se requiera usar esta rutina en lugar de sólo copiar directamente los valores de <code class="docutils literal notranslate"><span class="pre">os.environ</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">Nuevo en la versión 3.2.</span></p>
</div>
</dd></dl>

</section>
<section id="module-wsgiref.types">
<span id="wsgiref-types-wsgi-types-for-static-type-checking"></span><h2><a class="reference internal" href="#module-wsgiref.types" title="wsgiref.types: WSGI types for static type checking"><code class="xref py py-mod docutils literal notranslate"><span class="pre">wsgiref.types</span></code></a> — Tipos de WSGI para validadores estáticos de tipos<a class="headerlink" href="#module-wsgiref.types" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Este módulo provee varios tipos para validadores estáticos de tipos, como se describe en <span class="target" id="index-53"></span><a class="pep reference external" href="https://peps.python.org/pep-3333/"><strong>PEP 3333</strong></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">Nuevo en la versión 3.11.</span></p>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="wsgiref.types.StartResponse">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wsgiref.types.</span></span><span class="sig-name descname"><span class="pre">StartResponse</span></span><a class="headerlink" href="#wsgiref.types.StartResponse" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Un <a class="reference internal" href="typing.html#typing.Protocol" title="typing.Protocol"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.Protocol</span></code></a> que describe los invocables <a class="reference external" href="https://peps.python.org/pep-3333/#the-start-response-callable">start_response()</a> (<span class="target" id="index-54"></span><a class="pep reference external" href="https://peps.python.org/pep-3333/"><strong>PEP 3333</strong></a>).</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="wsgiref.types.WSGIEnvironment">
<span class="sig-prename descclassname"><span class="pre">wsgiref.types.</span></span><span class="sig-name descname"><span class="pre">WSGIEnvironment</span></span><a class="headerlink" href="#wsgiref.types.WSGIEnvironment" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Un alias de tipo que describe un diccionario de entorno WSGI.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="wsgiref.types.WSGIApplication">
<span class="sig-prename descclassname"><span class="pre">wsgiref.types.</span></span><span class="sig-name descname"><span class="pre">WSGIApplication</span></span><a class="headerlink" href="#wsgiref.types.WSGIApplication" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Un alias de tipo que describe una aplicación WSGI invocable.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="wsgiref.types.InputStream">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wsgiref.types.</span></span><span class="sig-name descname"><span class="pre">InputStream</span></span><a class="headerlink" href="#wsgiref.types.InputStream" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Un <a class="reference internal" href="typing.html#typing.Protocol" title="typing.Protocol"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.Protocol</span></code></a> que describe un <a class="reference external" href="https://peps.python.org/pep-3333/#input-and-error-streams">flujo de entrada WSGI</a>.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="wsgiref.types.ErrorStream">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wsgiref.types.</span></span><span class="sig-name descname"><span class="pre">ErrorStream</span></span><a class="headerlink" href="#wsgiref.types.ErrorStream" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Un <a class="reference internal" href="typing.html#typing.Protocol" title="typing.Protocol"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.Protocol</span></code></a> que describe un <a class="reference external" href="https://peps.python.org/pep-3333/#input-and-error-streams">flujo de error WSGI</a>.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="wsgiref.types.FileWrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wsgiref.types.</span></span><span class="sig-name descname"><span class="pre">FileWrapper</span></span><a class="headerlink" href="#wsgiref.types.FileWrapper" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Un <a class="reference internal" href="typing.html#typing.Protocol" title="typing.Protocol"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.Protocol</span></code></a> que describe un <a class="reference external" href="https://peps.python.org/pep-3333/#optional-platform-specific-file-handling">envoltorio de archivo</a>. Vea <a class="reference internal" href="#wsgiref.util.FileWrapper" title="wsgiref.util.FileWrapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">wsgiref.util.FileWrapper</span></code></a> para una implementación concreta de este protocolo.</p>
</dd></dl>

</section>
<section id="examples">
<h2>Ejemplos<a class="headerlink" href="#examples" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Ésta es una aplicación WSGI «Hello World» que funciona:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Every WSGI application must have an application object - a callable</span>
<span class="sd">object that accepts two arguments. For that purpose, we&#39;re going to</span>
<span class="sd">use a function (note that you&#39;re not limited to a function, you can</span>
<span class="sd">use a class for example). The first argument passed to the function</span>
<span class="sd">is a dictionary containing CGI-style environment variables and the</span>
<span class="sd">second variable is the callable object.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">wsgiref.simple_server</span> <span class="kn">import</span> <span class="n">make_server</span>


<span class="k">def</span> <span class="nf">hello_world_app</span><span class="p">(</span><span class="n">environ</span><span class="p">,</span> <span class="n">start_response</span><span class="p">):</span>
    <span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;200 OK&quot;</span>  <span class="c1"># HTTP Status</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;Content-type&quot;</span><span class="p">,</span> <span class="s2">&quot;text/plain; charset=utf-8&quot;</span><span class="p">)]</span>  <span class="c1"># HTTP Headers</span>
    <span class="n">start_response</span><span class="p">(</span><span class="n">status</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>

    <span class="c1"># The returned object is going to be printed</span>
    <span class="k">return</span> <span class="p">[</span><span class="sa">b</span><span class="s2">&quot;Hello World&quot;</span><span class="p">]</span>

<span class="k">with</span> <span class="n">make_server</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">8000</span><span class="p">,</span> <span class="n">hello_world_app</span><span class="p">)</span> <span class="k">as</span> <span class="n">httpd</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Serving on port 8000...&quot;</span><span class="p">)</span>

    <span class="c1"># Serve until process is killed</span>
    <span class="n">httpd</span><span class="o">.</span><span class="n">serve_forever</span><span class="p">()</span>
</pre></div>
</div>
<p>Ejemplo de una aplicación WSGI que sirve el directorio actual, acepta un directorio opcional y un número de puerto (default: 8000) en la línea de comandos:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Small wsgiref based web server. Takes a path to serve from and an</span>
<span class="sd">optional port number (defaults to 8000), then tries to serve files.</span>
<span class="sd">MIME types are guessed from the file names, 404 errors are raised</span>
<span class="sd">if the file is not found.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">mimetypes</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">wsgiref</span> <span class="kn">import</span> <span class="n">simple_server</span><span class="p">,</span> <span class="n">util</span>


<span class="k">def</span> <span class="nf">app</span><span class="p">(</span><span class="n">environ</span><span class="p">,</span> <span class="n">respond</span><span class="p">):</span>
    <span class="c1"># Get the file name and MIME type</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">environ</span><span class="p">[</span><span class="s2">&quot;PATH_INFO&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">:])</span>
    <span class="k">if</span> <span class="s2">&quot;.&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">fn</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
        <span class="n">fn</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="s2">&quot;index.html&quot;</span><span class="p">)</span>
    <span class="n">mime_type</span> <span class="o">=</span> <span class="n">mimetypes</span><span class="o">.</span><span class="n">guess_type</span><span class="p">(</span><span class="n">fn</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

    <span class="c1"># Return 200 OK if file exists, otherwise 404 Not Found</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">fn</span><span class="p">):</span>
        <span class="n">respond</span><span class="p">(</span><span class="s2">&quot;200 OK&quot;</span><span class="p">,</span> <span class="p">[(</span><span class="s2">&quot;Content-Type&quot;</span><span class="p">,</span> <span class="n">mime_type</span><span class="p">)])</span>
        <span class="k">return</span> <span class="n">util</span><span class="o">.</span><span class="n">FileWrapper</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">respond</span><span class="p">(</span><span class="s2">&quot;404 Not Found&quot;</span><span class="p">,</span> <span class="p">[(</span><span class="s2">&quot;Content-Type&quot;</span><span class="p">,</span> <span class="s2">&quot;text/plain&quot;</span><span class="p">)])</span>
        <span class="k">return</span> <span class="p">[</span><span class="sa">b</span><span class="s2">&quot;not found&quot;</span><span class="p">]</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="c1"># Get the path and port from command-line arguments</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
    <span class="n">port</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="k">else</span> <span class="mi">8000</span>

    <span class="c1"># Make and start the server until control-c</span>
    <span class="n">httpd</span> <span class="o">=</span> <span class="n">simple_server</span><span class="o">.</span><span class="n">make_server</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">app</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Serving </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2"> on port </span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2">, control-C to stop&quot;</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">httpd</span><span class="o">.</span><span class="n">serve_forever</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Shutting down.&quot;</span><span class="p">)</span>
        <span class="n">httpd</span><span class="o">.</span><span class="n">server_close</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../contents.html">Tabla de contenido</a></h3>
    <ul>
<li><a class="reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">wsgiref</span></code> — Utilidades WSGI e implementación de referencia</a><ul>
<li><a class="reference internal" href="#module-wsgiref.util"><code class="xref py py-mod docutils literal notranslate"><span class="pre">wsgiref.util</span></code> – Utilidades de entorno WSGI</a></li>
<li><a class="reference internal" href="#module-wsgiref.headers"><code class="xref py py-mod docutils literal notranslate"><span class="pre">wsgiref.headers</span></code> – Herramientas para cabeceras de respuesta WSGI</a></li>
<li><a class="reference internal" href="#module-wsgiref.simple_server"><code class="xref py py-mod docutils literal notranslate"><span class="pre">wsgiref.simple_server</span></code>– Un servidor HTTP WSGI simple</a></li>
<li><a class="reference internal" href="#module-wsgiref.validate"><code class="xref py py-mod docutils literal notranslate"><span class="pre">wsgiref.validate</span></code> — Verificador de compatibilidad WSGI</a></li>
<li><a class="reference internal" href="#module-wsgiref.handlers"><code class="xref py py-mod docutils literal notranslate"><span class="pre">wsgiref.handlers</span></code> – Clases base servidor/<em>gateway</em></a></li>
<li><a class="reference internal" href="#module-wsgiref.types"><code class="xref py py-mod docutils literal notranslate"><span class="pre">wsgiref.types</span></code> — Tipos de WSGI para validadores estáticos de tipos</a></li>
<li><a class="reference internal" href="#examples">Ejemplos</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Tema anterior</h4>
    <p class="topless"><a href="webbrowser.html"
                          title="capítulo anterior"><code class="xref py py-mod docutils literal notranslate"><span class="pre">webbrowser</span></code> — Controlador de navegador web conveniente</a></p>
  </div>
  <div>
    <h4>Próximo tema</h4>
    <p class="topless"><a href="urllib.html"
                          title="próximo capítulo"><code class="xref py py-mod docutils literal notranslate"><span class="pre">urllib</span></code> — URL módulos de manipulación</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Reporta un bug</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/3.11/Doc/library/wsgiref.rst"
            rel="nofollow">Ver fuente
        </a>
      </li>
    </ul>
  </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice general"
             >índice</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Índice de Módulos Python"
             >módulos</a> |</li>
        <li class="right" >
          <a href="urllib.html" title="urllib — URL módulos de manipulación"
             >siguiente</a> |</li>
        <li class="right" >
          <a href="webbrowser.html" title="webbrowser — Controlador de navegador web conveniente"
             >anterior</a> |</li>

          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.11.2 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" >La biblioteca estándar de Python</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="internet.html" >Protocolos y soporte de Internet</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><code class="xref py py-mod docutils literal notranslate"><span class="pre">wsgiref</span></code> — Utilidades WSGI e implementación de referencia</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Búsqueda rápida" aria-label="Búsqueda rápida" type="text" name="q" />
          <input type="submit" value="Ir" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
                     |
                </li>
            
      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="../copyright.html">Copyright</a> 2001-2023, Python Software Foundation.
    <br />
    This page is licensed under the Python Software Foundation License Version 2.
    <br />
    Examples, recipes, and other code in the documentation are additionally licensed under the Zero Clause BSD License.
    <br />
    See <a href="/license.html">History and License</a> for more information.<br />
    <br />

    La Python Software Foundation es una organización sin fines de lucro.
<a href="https://www.python.org/psf/donations/">Por favor, haga una donación.</a>
<br />
    <br />

    Última actualización el mar 23, 2023.
    <a href="/bugs.html">Found a bug</a>?
    <br />

    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.5.0.
    </div>

  </body>
</html>