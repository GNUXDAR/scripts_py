
<!DOCTYPE html>

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Qué hay de nuevo en Python 2.7 &#8212; documentación de Python - 3.10.10</title><meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pydoctheme.css?2022.1" type="text/css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/translations.js"></script>
    
    <script src="../_static/sidebar.js"></script>
    
    <link rel="search" type="application/opensearchdescription+xml"
          title="Buscar en documentación de Python - 3.10.10"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="Sobre este documento" href="../about.html" />
    <link rel="index" title="Índice" href="../genindex.html" />
    <link rel="search" title="Búsqueda" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="Qué hay de nuevo en Python 2.6" href="2.6.html" />
    <link rel="prev" title="Qué hay de nuevo en Python 3.0" href="3.0.html" />
    <link rel="canonical" href="https://docs.python.org/3/whatsnew/2.7.html" />
    
      
    

    
    <style>
      @media only screen {
        table.full-width-table {
            width: 100%;
        }
      }
    </style>
<link rel="shortcut icon" type="image/png" href="../_static/py.svg" />
            <script type="text/javascript" src="../_static/copybutton.js"></script>
            <script type="text/javascript" src="../_static/menu.js"></script> 

  </head>
<body>
<div class="mobile-nav">
    <input type="checkbox" id="menuToggler" class="toggler__input" aria-controls="navigation"
           aria-pressed="false" aria-expanded="false" role="button" aria-label="Menu" />
    <label for="menuToggler" class="toggler__label">
        <span></span>
    </label>
    <nav class="nav-content" role="navigation">
         <a href="https://www.python.org/" class="nav-logo">
             <img src="../_static/py.svg" alt="Logo"/>
         </a>
        <div class="version_switcher_placeholder"></div>
        <form role="search" class="search" action="../search.html" method="get">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="search-icon">
                <path fill-rule="nonzero"
                        d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 001.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 00-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 005.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" fill="#444"></path>
            </svg>
            <input type="text" name="q" aria-label="Búsqueda rápida"/>
            <input type="submit" value="Ir"/>
        </form>
    </nav>
    <div class="menu-wrapper">
        <nav class="menu" role="navigation" aria-label="main navigation">
            <div class="language_switcher_placeholder"></div>
  <h3><a href="../contents.html">Tabla de contenido</a></h3>
  <ul>
<li><a class="reference internal" href="#">Qué hay de nuevo en Python 2.7</a><ul>
<li><a class="reference internal" href="#the-future-for-python-2-x">El futuro de Python 2.x</a></li>
<li><a class="reference internal" href="#changes-to-the-handling-of-deprecation-warnings">Cambios en el manejo de las advertencias de desuso</a></li>
<li><a class="reference internal" href="#python-3-1-features">Características de Python 3.1</a></li>
<li><a class="reference internal" href="#pep-372-adding-an-ordered-dictionary-to-collections">PEP 372: Adición de un diccionario ordenado a las colecciones</a></li>
<li><a class="reference internal" href="#pep-378-format-specifier-for-thousands-separator">PEP 378: Especificador de formato para separador de miles</a></li>
<li><a class="reference internal" href="#pep-389-the-argparse-module-for-parsing-command-lines">PEP 389: El módulo argparse para el análisis de líneas de comando</a></li>
<li><a class="reference internal" href="#pep-391-dictionary-based-configuration-for-logging">PEP 391: Configuración basada en diccionarios para el registro</a></li>
<li><a class="reference internal" href="#pep-3106-dictionary-views">PEP 3106: Vistas de diccionario</a></li>
<li><a class="reference internal" href="#pep-3137-the-memoryview-object">PEP 3137: El objeto memoryview</a></li>
<li><a class="reference internal" href="#other-language-changes">Otros cambios de lenguaje</a><ul>
<li><a class="reference internal" href="#interpreter-changes">Cambios en el intérprete</a></li>
<li><a class="reference internal" href="#optimizations">Optimizaciones</a></li>
</ul>
</li>
<li><a class="reference internal" href="#new-and-improved-modules">Módulos nuevos y mejorados</a><ul>
<li><a class="reference internal" href="#new-module-importlib">Nuevo módulo: importlib</a></li>
<li><a class="reference internal" href="#new-module-sysconfig">Nuevo módulo: sysconfig</a></li>
<li><a class="reference internal" href="#ttk-themed-widgets-for-tk">ttk: Widgets temáticos para Tk</a></li>
<li><a class="reference internal" href="#updated-module-unittest">Módulo actualizado: unittest</a></li>
<li><a class="reference internal" href="#updated-module-elementtree-1-3">Módulo actualizado: ElementTree 1.3</a></li>
</ul>
</li>
<li><a class="reference internal" href="#build-and-c-api-changes">Cambios en la API de construcción y C</a><ul>
<li><a class="reference internal" href="#capsules">Cápsulas</a></li>
<li><a class="reference internal" href="#port-specific-changes-windows">Cambios específicos en los puertos: Windows</a></li>
<li><a class="reference internal" href="#port-specific-changes-mac-os-x">Cambios específicos en los puertos: Mac OS X</a></li>
<li><a class="reference internal" href="#port-specific-changes-freebsd">Cambios específicos en los puertos: FreeBSD</a></li>
</ul>
</li>
<li><a class="reference internal" href="#other-changes-and-fixes">Otros cambios y correcciones</a></li>
<li><a class="reference internal" href="#porting-to-python-2-7">Adaptación a Python 2.7</a></li>
<li><a class="reference internal" href="#new-features-added-to-python-2-7-maintenance-releases">Nuevas funciones añadidas a las versiones de mantenimiento de Python 2.7</a><ul>
<li><a class="reference internal" href="#two-new-environment-variables-for-debug-mode">Dos nuevas variables de entorno para el modo de depuración</a></li>
<li><a class="reference internal" href="#pep-434-idle-enhancement-exception-for-all-branches">PEP 434: Excepción de mejora de IDLE para todas las ramas</a></li>
<li><a class="reference internal" href="#pep-466-network-security-enhancements-for-python-2-7">PEP 466: Mejoras en la seguridad de la red para Python 2.7</a></li>
<li><a class="reference internal" href="#pep-477-backport-ensurepip-pep-453-to-python-2-7">PEP 477: Backport ensurepip (PEP 453) a Python 2.7</a><ul>
<li><a class="reference internal" href="#bootstrapping-pip-by-default">Puesta en marcha de pip por defecto</a></li>
<li><a class="reference internal" href="#documentation-changes">Cambios en la documentación</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pep-476-enabling-certificate-verification-by-default-for-stdlib-http-clients">PEP 476: Habilitar la verificación de certificados por defecto para los clientes http stdlib</a></li>
<li><a class="reference internal" href="#pep-493-https-verification-migration-tools-for-python-2-7">PEP 493: Herramientas de migración de verificación HTTPS para Python 2.7</a></li>
<li><a class="reference internal" href="#new-make-regen-all-build-target">Nuevo objetivo de construcción <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">regen-all</span></code></a></li>
<li><a class="reference internal" href="#removal-of-make-touch-build-target">Eliminación del objetivo de construcción <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">touch</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#acknowledgements">Agradecimientos</a></li>
</ul>
</li>
</ul>

  <h4>Tema anterior</h4>
  <p class="topless"><a href="3.0.html"
                        title="capítulo anterior">Qué hay de nuevo en Python 3.0</a></p>
  <h4>Próximo tema</h4>
  <p class="topless"><a href="2.6.html"
                        title="próximo capítulo">Qué hay de nuevo en Python 2.6</a></p>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Reporta un Bug</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/3.10/Doc/whatsnew/2.7.rst"
            rel="nofollow">Ver Fuente
        </a>
      </li>
    </ul>
  </div>
        </nav>
    </div>
</div>

  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice general"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Índice de Módulos Python"
             >módulos</a> |</li>
        <li class="right" >
          <a href="2.6.html" title="Qué hay de nuevo en Python 2.6"
             accesskey="N">siguiente</a> |</li>
        <li class="right" >
          <a href="3.0.html" title="Qué hay de nuevo en Python 3.0"
             accesskey="P">anterior</a> |</li>

          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.10.10 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Qué hay de nuevo en Python</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Qué hay de nuevo en Python 2.7</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Búsqueda rápida" aria-label="Búsqueda rápida" type="text" name="q" />
          <input type="submit" value="Ir" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
                     |
                </li>
            
      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="what-s-new-in-python-2-7">
<h1>Qué hay de nuevo en Python 2.7<a class="headerlink" href="#what-s-new-in-python-2-7" title="Enlazar permanentemente con este título">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Autor</dt>
<dd class="field-odd"><p>A.M. Kuchling (amk en amk.ca)</p>
</dd>
</dl>
<p>Este articulo explica las nuevas características en Python 2.7.  Python 2.7 fue publicado el 3 de Julio de 2010.</p>
<p>El manejo numérico ha sido mejorado en muchas formas, tanto para los números de punto flotante como para la clase <a class="reference internal" href="../library/decimal.html#decimal.Decimal" title="decimal.Decimal"><code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code></a>. Hay algunas adiciones útiles a la biblioteca estándar, como una gran mejora al modulo <a class="reference internal" href="../library/unittest.html#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal notranslate"><span class="pre">unittest</span></code></a>, el modulo <a class="reference internal" href="../library/argparse.html#module-argparse" title="argparse: Command-line option and argument parsing library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">argparse</span></code></a> para analizar las opciones de la línea de comandos, adecuando las clases <a class="reference internal" href="../library/collections.html#collections.OrderedDict" title="collections.OrderedDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">OrderedDict</span></code></a> y <a class="reference internal" href="../library/collections.html#collections.Counter" title="collections.Counter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Counter</span></code></a> en el modulo <a class="reference internal" href="../library/collections.html#module-collections" title="collections: Container datatypes"><code class="xref py py-mod docutils literal notranslate"><span class="pre">collections</span></code></a>, y muchas otras mejoras.</p>
<p>Python 2.7 esta previsto que sea el ultimo lanzamiento de la serie 2.x, así que hemos trabajado para que sea una versión a largo plazo. Para ayudar con la migración a Python 3, se han incluido varias características nuevas de la serie Python 3.x en 2.7.</p>
<p>Este articulo no intenta proporcionar una especificación completa de las nuevas características, sino que proporciona una visión general conveniente.  Para obtener mas información, debería consultar la documentación de Python 2.7 en <a class="reference external" href="https://docs.python.org">https://docs.python.org</a>. Si desea comprender la justificación para el diseño y la implementación, consultar el PEP para una nueva característica particular o el error en el que se discutió un cambio en <a class="reference external" href="https://bugs.python.org">https://bugs.python.org</a>.  Siempre que sea posible, «Que hay de nuevo en Python» enlaza el elemento error/parche para cada cambio.</p>
<section id="the-future-for-python-2-x">
<span id="whatsnew27-python31"></span><h2>El futuro de Python 2.x<a class="headerlink" href="#the-future-for-python-2-x" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Python 2.7 es el último lanzamiento importante de la serie 2.x, ya que los mantenedores de Python han cambiado el enfoque de sus esfuerzos en el desarrollo de nuevas características para la serie de Python 3.x. Esto significa que mientras Python 2 continúe recibiendo corrección de errores, y sea actualizado para construir correctamente sobre nuevo hardware y versiones de sistemas operativos compatibles, no habrá nuevas versiones completas de funciones para el idioma o la biblioteca estándar.</p>
<p>Sin embargo, si bien existe un gran subconjunto común entre Python 2.7 y Python 3, y muchos de los cambios involucrados en la migración a ese subconjunto común, o directamente a Python 3, se pueden automatizar de manera segura, algunos otros cambios (en particular los asociados con el manejo de Unicode) puede requerir una consideración cuidadosa, y preferiblemente conjuntos de pruebas de regresión automatizada robustos, para migrar de manera efectiva.</p>
<p>Esto significa que Python 2.7 permanecerá en su lugar durante un largo tiempo, proporcionando una plataforma base estable y compatible para sistemas de producción que aún no se han adaptado a Python 3. La expectativa completa del ciclo de vida de la versión de Python 2.7 esta detallada en <span class="target" id="index-51"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0373"><strong>PEP 373</strong></a>.</p>
<p>Algunas consecuencias clave de la importancia a largo plazo de 2.7 son:</p>
<ul class="simple">
<li><p>Como se señalo anteriormente, la versión 2.7 tiene un período de mantenimiento mucho más largo en comparación con las versiones anteriores 2.x. Actualmente se espera que Python 2.7 siga siendo compatible con el equipo de desarrollo central (recibiendo actualizaciones de seguridad y otras correcciones de errores) al menos hasta 2020 (10 años después de su lanzamiento inicial, comparado con el típico periodo de mantenimiento de 18–24 meses).</p></li>
<li><p>A medida que la biblioteca estándar de Python envejece, hacer un uso eficaz del índice de paquetes de Python (ya sea directamente o a través de un distribuidor) se vuelve mas importante para los usuarios de Python 2. Además de una amplia variedad de paquetes de terceros para diversas tareas, los paquetes disponibles incluyen <em>backports</em> de nuevos módulos y características de la biblioteca estándar de Python 3 que son compatibles con Python 2, así como varias herramientas y librerías que pueden hacer mas fácil la migración a Python 3. La <a class="reference external" href="https://packaging.python.org">Guía de usuario de paquetes de Python</a> proporciona un información sobre como descargar e instalar software desde el índice de paquetes de Python.</p></li>
<li><p>Aunque el enfoque preferido para mejorar Python 2 es ahora la publicación de nuevos paquetes en el índice de paquetes de Python, este enfoque no necesariamente funciona en todos los casos, especialmente aquellos relacionados a la seguridad de la red. En casos excepcionales que no puedan ser manejados adecuadamente mediante la publicación de nuevos paquetes o actualizaciones en PyPI, el proceso de propuestas de mejoras de Python podría ser usado para crear el caso para añadir nuevas funciones a la librería estándar de Python 2. Dichas adiciones, y las versiones de mantenimiento donde fueron agregadas, se observaran en la sección <a class="reference internal" href="#py27-maintenance-enhancements"><span class="std std-ref">Nuevas funciones añadidas a las versiones de mantenimiento de Python 2.7</span></a> mas abajo.</p></li>
</ul>
<p>Para los proyectos que deseen migrar de Python 2 a Python 3, o para los desarrolladores de <em>frameworks</em> y libreras que deseen dar soporte a usuarios en Python 2 y Python 3, hay una variedad de herramientas y guías disponibles para ayudarles a decidir sobre un enfoque adecuado y manejar algunos de los detalles técnicos involucrados. El punto de partida recomendado es la guía HOWTO <a class="reference internal" href="../howto/pyporting.html#pyporting-howto"><span class="std std-ref">Portando código de Python 2 a Python 3</span></a>.</p>
</section>
<section id="changes-to-the-handling-of-deprecation-warnings">
<h2>Cambios en el manejo de las advertencias de desuso<a class="headerlink" href="#changes-to-the-handling-of-deprecation-warnings" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Para Python 2.7, se tomo la decisión de silenciar las advertencias solo de interés para los desarrolladores de manera predeterminada. <code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning`y</span> <span class="pre">sus</span> <span class="pre">descendientes</span> <span class="pre">son</span> <span class="pre">ahora</span> <span class="pre">ignoradas</span> <span class="pre">a</span> <span class="pre">menos</span> <span class="pre">que</span> <span class="pre">se</span> <span class="pre">solicite</span> <span class="pre">lo</span> <span class="pre">contrario,</span> <span class="pre">impidiendo</span> <span class="pre">a</span> <span class="pre">los</span> <span class="pre">usuarios</span> <span class="pre">estar</span> <span class="pre">viendo</span> <span class="pre">las</span> <span class="pre">advertencias</span> <span class="pre">disparadas</span> <span class="pre">por</span> <span class="pre">una</span> <span class="pre">aplicación.</span> <span class="pre">Este</span> <span class="pre">cambio</span> <span class="pre">se</span> <span class="pre">realizo</span> <span class="pre">en</span> <span class="pre">la</span> <span class="pre">rama</span> <span class="pre">que</span> <span class="pre">se</span> <span class="pre">convirtió</span> <span class="pre">en</span> <span class="pre">Python</span> <span class="pre">3.2.</span> <span class="pre">(Discutido</span> <span class="pre">en</span> <span class="pre">stdlib-sig</span> <span class="pre">y</span> <span class="pre">llevado</span> <span class="pre">a</span> <span class="pre">cabo</span> <span class="pre">en</span> <span class="pre">:issue:`7319</span></code>).</p>
<p>En versiones previas, los mensajes <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a> estaban habilitados de manera predeterminada, proporcionando a los desarrolladores de Python una indicación clara de donde podría romperse su código en una futura versión principal de Python.</p>
<p>Sin embargo, cada vez hay más usuarios de aplicaciones basadas en Python que no están directamente involucrados en el desarrollo de esas aplicaciones.  Los mensajes <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a> son irrelevantes para estos usuarios, hacen que se preocupen por una aplicación que realmente está funcionando correctamente y sobrecargando a los desarrolladores de aplicaciones con responder a estas preocupaciones.</p>
<p>Puede volver a habilitar la visualización de los mensajes <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a> ejecutando Python con el modificador <a class="reference internal" href="../using/cmdline.html#cmdoption-W"><code class="xref std std-option docutils literal notranslate"><span class="pre">-Wdefault</span></code></a> (forma corta: <a class="reference internal" href="../using/cmdline.html#cmdoption-W"><code class="xref std std-option docutils literal notranslate"><span class="pre">-Wd</span></code></a>), o estableciendo la variable de entorno <span class="target" id="index-52"></span><a class="reference internal" href="../using/cmdline.html#envvar-PYTHONWARNINGS"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONWARNINGS</span></code></a> en <code class="docutils literal notranslate"><span class="pre">&quot;default&quot;</span></code> (o <code class="docutils literal notranslate"><span class="pre">&quot;d&quot;</span></code>) antes de ejecutar Python.  El código Python también puede volver a habilitarlos llamando a “”warnings.simplefilter(“default”)``.</p>
<p>El módulo <code class="docutils literal notranslate"><span class="pre">unittest</span></code> también vuelve a instalar automáticamente las advertencias de desuso al ejecutar pruebas.</p>
</section>
<section id="python-3-1-features">
<h2>Características de Python 3.1<a class="headerlink" href="#python-3-1-features" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Al igual que Python 2.6 incorporó características de Python 3.0, la versión 2.7 incorpora algunas de las nuevas características de Python 3.1.  La serie 2.x continúa proporcionando herramientas para migrar a la serie 3.x.</p>
<p>Una lista parcial de características 3.1 que se retro importaron a 2.7:</p>
<ul class="simple">
<li><p>La sintaxis para establecer literales (<code class="docutils literal notranslate"><span class="pre">{1,2,3}</span></code> es un conjunto mutable).</p></li>
<li><p>Diccionario y establecimiento de compresiones (<code class="docutils literal notranslate"><span class="pre">{i:</span> <span class="pre">i*2</span> <span class="pre">for</span> <span class="pre">i</span> <span class="pre">in</span> <span class="pre">range(3)}</span></code>).</p></li>
<li><p>Múltiples administradores de contexto en una sola declaración <a class="reference internal" href="../reference/compound_stmts.html#with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a>.</p></li>
<li><p>Una nueva versión para la librería <a class="reference internal" href="../library/io.html#module-io" title="io: Core tools for working with streams."><code class="xref py py-mod docutils literal notranslate"><span class="pre">io</span></code></a>, rescrito en C para un mejor desempeño.</p></li>
<li><p>El tipo de ordenador de diccionario descrito en <a class="reference internal" href="#pep-0372"><span class="std std-ref">PEP 372: Adición de un diccionario ordenado a las colecciones</span></a>.</p></li>
<li><p>El nuevo especificador de formato <code class="docutils literal notranslate"><span class="pre">&quot;,&quot;</span></code> descrito en <a class="reference internal" href="#pep-0378"><span class="std std-ref">PEP 378: Especificador de formato para separador de miles</span></a>.</p></li>
<li><p>El objeto <a class="reference internal" href="../library/stdtypes.html#memoryview" title="memoryview"><code class="xref py py-class docutils literal notranslate"><span class="pre">memoryview</span></code></a>.</p></li>
<li><p>Un pequeño subconjunto del modulo <a class="reference internal" href="../library/importlib.html#module-importlib" title="importlib: The implementation of the import machinery."><code class="xref py py-mod docutils literal notranslate"><span class="pre">importlib</span></code></a>, <a class="reference external" href="#importlib-section">descrito abajo</a>.</p></li>
<li><p>La <a class="reference internal" href="../library/functions.html#repr" title="repr"><code class="xref py py-func docutils literal notranslate"><span class="pre">repr()</span></code></a> de un flotante <code class="docutils literal notranslate"><span class="pre">x</span></code> es más corto en muchos casos: ahora se basa en la cadena decimal más corta que se garantiza que redondea a <code class="docutils literal notranslate"><span class="pre">x</span></code>. Como en versiones anteriores de Python, se garantiza que <code class="docutils literal notranslate"><span class="pre">float(repr(x))</span></code> retorne <code class="docutils literal notranslate"><span class="pre">x</span></code>.</p></li>
<li><p>Las conversiones flotante a cadena y cadena a flotante se redondean correctamente. La función <a class="reference internal" href="../library/functions.html#round" title="round"><code class="xref py py-func docutils literal notranslate"><span class="pre">round()</span></code></a> también ahora se redondea correctamente.</p></li>
<li><p>El tipo <a class="reference internal" href="../c-api/capsule.html#c.PyCapsule" title="PyCapsule"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyCapsule</span></code></a>, utilizado para proporcionar una API de C para módulos de extensión.</p></li>
<li><p>La función de API de C <a class="reference internal" href="../c-api/long.html#c.PyLong_AsLongAndOverflow" title="PyLong_AsLongAndOverflow"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyLong_AsLongAndOverflow()</span></code></a>.</p></li>
</ul>
<p>Otras nuevas advertencias en modo Python3 incluyen:</p>
<ul class="simple">
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">operator.isCallable()</span></code> y <code class="xref py py-func docutils literal notranslate"><span class="pre">operator.sequenceIncludes()</span></code>, que no se admiten en 3.x, ahora activan advertencias.</p></li>
<li><p>El modificador <code class="xref std std-option docutils literal notranslate"><span class="pre">-3</span></code> ahora habilita automáticamente el modificador <code class="xref std std-option docutils literal notranslate"><span class="pre">-Qwarn</span></code> que provoca advertencias sobre el uso de la división clásica con enteros y enteros largos.</p></li>
</ul>
</section>
<section id="pep-372-adding-an-ordered-dictionary-to-collections">
<span id="pep-0372"></span><h2>PEP 372: Adición de un diccionario ordenado a las colecciones<a class="headerlink" href="#pep-372-adding-an-ordered-dictionary-to-collections" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Los diccionarios de python normales recorren en iteración los pares clave/valor en un orden arbitrario. A lo largo de los años, varios autores han escrito implementaciones alternativas que recuerdan el orden en que se insertaron originalmente las claves.  Basado en las experiencias de esas implementaciones, 2.7 presenta una nueva clase <a class="reference internal" href="../library/collections.html#collections.OrderedDict" title="collections.OrderedDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">OrderedDict</span></code></a> en el módulo <a class="reference internal" href="../library/collections.html#module-collections" title="collections: Container datatypes"><code class="xref py py-mod docutils literal notranslate"><span class="pre">collections</span></code></a>.</p>
<p>La API <a class="reference internal" href="../library/collections.html#collections.OrderedDict" title="collections.OrderedDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">OrderedDict</span></code></a> proporciona la misma interfaz que los diccionarios normales, pero recorre en iteración las claves y los valores en un orden garantizado en función de cuándo se insertó una clave por primera vez:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">([(</span><span class="s1">&#39;first&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
<span class="gp">... </span>                 <span class="p">(</span><span class="s1">&#39;second&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
<span class="gp">... </span>                 <span class="p">(</span><span class="s1">&#39;third&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
<span class="go">[(&#39;first&#39;, 1), (&#39;second&#39;, 2), (&#39;third&#39;, 3)]</span>
</pre></div>
</div>
<p>Si una nueva entrada sobrescribe una entrada existente, la posición de inserción original no se modifica:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="p">[</span><span class="s1">&#39;second&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
<span class="go">[(&#39;first&#39;, 1), (&#39;second&#39;, 4), (&#39;third&#39;, 3)]</span>
</pre></div>
</div>
<p>Borrando una entrada y luego reinsertándola, moverá la misma al final:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;second&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="p">[</span><span class="s1">&#39;second&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
<span class="go">[(&#39;first&#39;, 1), (&#39;third&#39;, 3), (&#39;second&#39;, 5)]</span>
</pre></div>
</div>
<p>El método <a class="reference internal" href="../library/collections.html#collections.OrderedDict.popitem" title="collections.OrderedDict.popitem"><code class="xref py py-meth docutils literal notranslate"><span class="pre">popitem()</span></code></a> tiene un argumento <em>last</em> opcional que por defecto esta en <code class="docutils literal notranslate"><span class="pre">True</span></code> (verdadero). Si <em>last</em> es verdadero, la ultima llave ingresada es regresada y eliminada; si es falso, se selecciona la llave más antigua:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">od</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">([(</span><span class="n">x</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">od</span><span class="o">.</span><span class="n">popitem</span><span class="p">()</span>
<span class="go">(19, 0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">od</span><span class="o">.</span><span class="n">popitem</span><span class="p">()</span>
<span class="go">(18, 0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">od</span><span class="o">.</span><span class="n">popitem</span><span class="p">(</span><span class="n">last</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">(0, 0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">od</span><span class="o">.</span><span class="n">popitem</span><span class="p">(</span><span class="n">last</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">(1, 0)</span>
</pre></div>
</div>
<p>La comparación de dos diccionarios ordenados comprueba tanto las claves como los valores, y requiere que el orden de inserción sea el mismo:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">od1</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">([(</span><span class="s1">&#39;first&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="p">(</span><span class="s1">&#39;second&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="p">(</span><span class="s1">&#39;third&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">od2</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">([(</span><span class="s1">&#39;third&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="p">(</span><span class="s1">&#39;first&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="p">(</span><span class="s1">&#39;second&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">od1</span> <span class="o">==</span> <span class="n">od2</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Move &#39;third&#39; key to the end</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">od2</span><span class="p">[</span><span class="s1">&#39;third&#39;</span><span class="p">];</span> <span class="n">od2</span><span class="p">[</span><span class="s1">&#39;third&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">od1</span> <span class="o">==</span> <span class="n">od2</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Comparando a un <a class="reference internal" href="../library/collections.html#collections.OrderedDict" title="collections.OrderedDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">OrderedDict</span></code></a> con un diccionario normal ignora el orden de inserción y simplemente compara las llaves y los valores.</p>
<p>How does the <a class="reference internal" href="../library/collections.html#collections.OrderedDict" title="collections.OrderedDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">OrderedDict</span></code></a> work?  It maintains a
doubly linked list of keys, appending new keys to the list as they’re inserted.
A secondary dictionary maps keys to their corresponding list node, so
deletion doesn’t have to traverse the entire linked list and therefore
remains O(1).</p>
<p>La biblioteca estándar ahora admite el uso de diccionarios ordenados en varios módulos.</p>
<ul class="simple">
<li><p>El módulo <code class="xref py py-mod docutils literal notranslate"><span class="pre">ConfigParser</span></code> los utiliza de forma predeterminada, lo que significa que los archivos de configuración ahora se pueden leer, modificar y volver a escribir en su orden original.</p></li>
<li><p>El método <a class="reference internal" href="../library/collections.html#collections.somenamedtuple._asdict" title="collections.somenamedtuple._asdict"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_asdict()</span></code></a> para <a class="reference internal" href="../library/collections.html#collections.namedtuple" title="collections.namedtuple"><code class="xref py py-func docutils literal notranslate"><span class="pre">collections.namedtuple()</span></code></a> ahora retorna un diccionario ordenado con los valores que aparecen en el mismo orden que los índices de tupla subyacentes.</p></li>
<li><p>The <a class="reference internal" href="../library/json.html#module-json" title="json: Encode and decode the JSON format."><code class="xref py py-mod docutils literal notranslate"><span class="pre">json</span></code></a> module’s <a class="reference internal" href="../library/json.html#json.JSONDecoder" title="json.JSONDecoder"><code class="xref py py-class docutils literal notranslate"><span class="pre">JSONDecoder</span></code></a> class
constructor was extended with an <em>object_pairs_hook</em> parameter to
allow <code class="xref py py-class docutils literal notranslate"><span class="pre">OrderedDict</span></code> instances to be built by the decoder.
Support was also added for third-party tools like
<a class="reference external" href="https://pyyaml.org/">PyYAML</a>.</p></li>
</ul>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<dl class="simple">
<dt><span class="target" id="index-53"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0372"><strong>PEP 372</strong></a> - Adición de un diccionario ordenado a las <em>collections</em></dt><dd><p>PEP escrito por Armin Ronacher y Raymond Hettinger; implementado por Raymond Hettinger.</p>
</dd>
</dl>
</div>
</section>
<section id="pep-378-format-specifier-for-thousands-separator">
<span id="pep-0378"></span><h2>PEP 378: Especificador de formato para separador de miles<a class="headerlink" href="#pep-378-format-specifier-for-thousands-separator" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Para que la salida del programa sea más legible, puede ser útil agregar separadores a números grandes, representándolos como 18,446,744,073,709,551,616 en lugar de 18446744073709551616.</p>
<p>La solución totalmente general para hacer esto es el módulo <a class="reference internal" href="../library/locale.html#module-locale" title="locale: Internationalization services."><code class="xref py py-mod docutils literal notranslate"><span class="pre">locale</span></code></a>, que puede utilizar diferentes separadores («,» en América del Norte, «.» en Europa) y diferentes tamaños de agrupación, pero <a class="reference internal" href="../library/locale.html#module-locale" title="locale: Internationalization services."><code class="xref py py-mod docutils literal notranslate"><span class="pre">locale</span></code></a> es complicado de usar y no es adecuado para aplicaciones multiproceso donde diferentes hilos están produciendo resultados para diferentes configuraciones regionales.</p>
<p>Por lo tanto, se ha añadido un mecanismo simple de agrupación de comas al mini-lenguaje utilizado por el método <a class="reference internal" href="../library/stdtypes.html#str.format" title="str.format"><code class="xref py py-meth docutils literal notranslate"><span class="pre">str.format()</span></code></a>.  Al dar formato a un número de punto flotante, simplemente incluya una coma entre el ancho y la precisión:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;</span><span class="si">{:20,.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mf">18446744073709551616.0</span><span class="p">)</span>
<span class="go">&#39;18,446,744,073,709,551,616.00&#39;</span>
</pre></div>
</div>
<p>Al dar formato a un entero, incluya la coma después del ancho:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;</span><span class="si">{:20,d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mi">18446744073709551616</span><span class="p">)</span>
<span class="go">&#39;18,446,744,073,709,551,616&#39;</span>
</pre></div>
</div>
<p>Este mecanismo no es adaptable en absoluto; Las comas siempre se utilizan como separador y la agrupación siempre está en grupos de tres dígitos.  El mecanismo de formato de coma no es tan general como el módulo <a class="reference internal" href="../library/locale.html#module-locale" title="locale: Internationalization services."><code class="xref py py-mod docutils literal notranslate"><span class="pre">locale</span></code></a>, pero es más fácil de usar.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<dl class="simple">
<dt><span class="target" id="index-54"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0378"><strong>PEP 378</strong></a> - Especificador de formato para separador de miles</dt><dd><p>PEP escrito por Raymond Hettinger; implementado por Eric Smith.</p>
</dd>
</dl>
</div>
</section>
<section id="pep-389-the-argparse-module-for-parsing-command-lines">
<h2>PEP 389: El módulo argparse para el análisis de líneas de comando<a class="headerlink" href="#pep-389-the-argparse-module-for-parsing-command-lines" title="Enlazar permanentemente con este título">¶</a></h2>
<p>El módulo <a class="reference internal" href="../library/argparse.html#module-argparse" title="argparse: Command-line option and argument parsing library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">argparse</span></code></a> para analizar argumentos de línea de comandos se agregó como un reemplazo más potente para el módulo <a class="reference internal" href="../library/optparse.html#module-optparse" title="optparse: Command-line option parsing library. (obsoleto)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">optparse</span></code></a>.</p>
<p>Esto significa que Python ahora admite tres módulos diferentes para analizar argumentos de línea de comandos: <a class="reference internal" href="../library/getopt.html#module-getopt" title="getopt: Portable parser for command line options; support both short and long option names."><code class="xref py py-mod docutils literal notranslate"><span class="pre">getopt</span></code></a>, <a class="reference internal" href="../library/optparse.html#module-optparse" title="optparse: Command-line option parsing library. (obsoleto)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">optparse</span></code></a>, y <a class="reference internal" href="../library/argparse.html#module-argparse" title="argparse: Command-line option and argument parsing library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">argparse</span></code></a>.  El módulo <a class="reference internal" href="../library/getopt.html#module-getopt" title="getopt: Portable parser for command line options; support both short and long option names."><code class="xref py py-mod docutils literal notranslate"><span class="pre">getopt</span></code></a> se parece mucho a la función <code class="xref c c-func docutils literal notranslate"><span class="pre">getopt()</span></code> de la biblioteca C, por lo que sigue siendo útil si estás escribiendo un prototipo de Python que finalmente se reescribe en C. <a class="reference internal" href="../library/optparse.html#module-optparse" title="optparse: Command-line option parsing library. (obsoleto)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">optparse</span></code></a> se vuelve redundante, pero no hay planes para eliminarlo porque hay muchos scripts que todavía lo usan, y no hay una manera automatizada de actualizar estos scripts.  (Hacer que la API <a class="reference internal" href="../library/argparse.html#module-argparse" title="argparse: Command-line option and argument parsing library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">argparse</span></code></a> sea coherente con la interfaz de <a class="reference internal" href="../library/optparse.html#module-optparse" title="optparse: Command-line option parsing library. (obsoleto)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">optparse</span></code></a> fue discutido pero rechazado como demasiado desordenado y difícil.)</p>
<p>En resumen, si estás escribiendo un nuevo script y no necesitas preocuparte por la compatibilidad con versiones anteriores de Python, usa <a class="reference internal" href="../library/argparse.html#module-argparse" title="argparse: Command-line option and argument parsing library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">argparse</span></code></a> en lugar de <a class="reference internal" href="../library/optparse.html#module-optparse" title="optparse: Command-line option parsing library. (obsoleto)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">optparse</span></code></a>.</p>
<p>Este es un ejemplo:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">argparse</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;Command-line example.&#39;</span><span class="p">)</span>

<span class="c1"># Add optional switches</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-v&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store_true&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;is_verbose&#39;</span><span class="p">,</span>
                    <span class="n">help</span><span class="o">=</span><span class="s1">&#39;produce verbose output&#39;</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-o&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;output&#39;</span><span class="p">,</span>
                    <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;FILE&#39;</span><span class="p">,</span>
                    <span class="n">help</span><span class="o">=</span><span class="s1">&#39;direct output to FILE instead of stdout&#39;</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-C&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;context&#39;</span><span class="p">,</span>
                    <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;NUM&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                    <span class="n">help</span><span class="o">=</span><span class="s1">&#39;display NUM lines of added context&#39;</span><span class="p">)</span>

<span class="c1"># Allow any number of additional arguments.</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;inputs&#39;</span><span class="p">,</span>
                    <span class="n">help</span><span class="o">=</span><span class="s1">&#39;input filenames (default is stdin)&#39;</span><span class="p">)</span>

<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="nb">print</span> <span class="n">args</span><span class="o">.</span><span class="vm">__dict__</span>
</pre></div>
</div>
<p>A menos que lo reemplace, los modificadores <code class="xref std std-option docutils literal notranslate"><span class="pre">-h</span></code> y <code class="xref std std-option docutils literal notranslate"><span class="pre">--help</span></code> se agregan automáticamente, y producen una salida con formato ordenado:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="o">./</span><span class="n">python</span><span class="o">.</span><span class="n">exe</span> <span class="n">argparse</span><span class="o">-</span><span class="n">example</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">help</span>
<span class="n">usage</span><span class="p">:</span> <span class="n">argparse</span><span class="o">-</span><span class="n">example</span><span class="o">.</span><span class="n">py</span> <span class="p">[</span><span class="o">-</span><span class="n">h</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">v</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">o</span> <span class="n">FILE</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">C</span> <span class="n">NUM</span><span class="p">]</span> <span class="p">[</span><span class="n">inputs</span> <span class="p">[</span><span class="n">inputs</span> <span class="o">...</span><span class="p">]]</span>

<span class="n">Command</span><span class="o">-</span><span class="n">line</span> <span class="n">example</span><span class="o">.</span>

<span class="n">positional</span> <span class="n">arguments</span><span class="p">:</span>
  <span class="n">inputs</span>      <span class="nb">input</span> <span class="n">filenames</span> <span class="p">(</span><span class="n">default</span> <span class="ow">is</span> <span class="n">stdin</span><span class="p">)</span>

<span class="n">optional</span> <span class="n">arguments</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>  <span class="n">show</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">exit</span>
  <span class="o">-</span><span class="n">v</span>          <span class="n">produce</span> <span class="n">verbose</span> <span class="n">output</span>
  <span class="o">-</span><span class="n">o</span> <span class="n">FILE</span>     <span class="n">direct</span> <span class="n">output</span> <span class="n">to</span> <span class="n">FILE</span> <span class="n">instead</span> <span class="n">of</span> <span class="n">stdout</span>
  <span class="o">-</span><span class="n">C</span> <span class="n">NUM</span>      <span class="n">display</span> <span class="n">NUM</span> <span class="n">lines</span> <span class="n">of</span> <span class="n">added</span> <span class="n">context</span>
</pre></div>
</div>
<p>Al igual que con <a class="reference internal" href="../library/optparse.html#module-optparse" title="optparse: Command-line option parsing library. (obsoleto)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">optparse</span></code></a>, los modificadores y argumentos de línea de comandos se retornan como un objeto con atributos denominados por los parámetros <em>dest</em>:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="o">-&gt;</span> <span class="o">./</span><span class="n">python</span><span class="o">.</span><span class="n">exe</span> <span class="n">argparse</span><span class="o">-</span><span class="n">example</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">v</span>
<span class="p">{</span><span class="s1">&#39;output&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;is_verbose&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;context&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
 <span class="s1">&#39;inputs&#39;</span><span class="p">:</span> <span class="p">[]}</span>

<span class="o">-&gt;</span> <span class="o">./</span><span class="n">python</span><span class="o">.</span><span class="n">exe</span> <span class="n">argparse</span><span class="o">-</span><span class="n">example</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">v</span> <span class="o">-</span><span class="n">o</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">output</span> <span class="o">-</span><span class="n">C</span> <span class="mi">4</span> <span class="n">file1</span> <span class="n">file2</span>
<span class="p">{</span><span class="s1">&#39;output&#39;</span><span class="p">:</span> <span class="s1">&#39;/tmp/output&#39;</span><span class="p">,</span>
 <span class="s1">&#39;is_verbose&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;context&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
 <span class="s1">&#39;inputs&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;file1&#39;</span><span class="p">,</span> <span class="s1">&#39;file2&#39;</span><span class="p">]}</span>
</pre></div>
</div>
<p><a class="reference internal" href="../library/argparse.html#module-argparse" title="argparse: Command-line option and argument parsing library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">argparse</span></code></a> tiene una validación mucho más fantasiosa que <a class="reference internal" href="../library/optparse.html#module-optparse" title="optparse: Command-line option parsing library. (obsoleto)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">optparse</span></code></a>; puede especificar un número exacto de argumentos como un entero, 0 o más argumentos pasando <code class="docutils literal notranslate"><span class="pre">'*'</span></code>, 1 o más pasando <code class="docutils literal notranslate"><span class="pre">'+'</span></code>, o un argumento opcional con <code class="docutils literal notranslate"><span class="pre">'?'</span></code>.  Un analizador de nivel superior puede contener sub analizadores para definir subcomandos que tienen diferentes conjuntos de modificadores, como en <code class="docutils literal notranslate"><span class="pre">svn</span> <span class="pre">commit</span></code>, <code class="docutils literal notranslate"><span class="pre">svn</span> <span class="pre">checkout</span></code>, etc.  Puede especificar el tipo de un argumento como <a class="reference internal" href="../library/argparse.html#argparse.FileType" title="argparse.FileType"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileType</span></code></a>, que abrirá automáticamente los archivos y entiende que <code class="docutils literal notranslate"><span class="pre">'-'</span></code> significa entrada o salida estándar.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<dl class="simple">
<dt><a class="reference internal" href="../library/argparse.html#module-argparse" title="argparse: Command-line option and argument parsing library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">argparse</span></code></a> documentación</dt><dd><p>La página de documentación del módulo argparse.</p>
</dd>
<dt><a class="reference internal" href="../library/argparse.html#upgrading-optparse-code"><span class="std std-ref">Actualizar el código de optparse</span></a></dt><dd><p>Parte de la documentación de Python, que describe cómo convertir código que usa <a class="reference internal" href="../library/optparse.html#module-optparse" title="optparse: Command-line option parsing library. (obsoleto)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">optparse</span></code></a>.</p>
</dd>
<dt><span class="target" id="index-55"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0389"><strong>PEP 389</strong></a> - argparse - Nuevo módulo de análisis de línea de comandos</dt><dd><p>PEP escrito e implementado por Steven Bethard.</p>
</dd>
</dl>
</div>
</section>
<section id="pep-391-dictionary-based-configuration-for-logging">
<h2>PEP 391: Configuración basada en diccionarios para el registro<a class="headerlink" href="#pep-391-dictionary-based-configuration-for-logging" title="Enlazar permanentemente con este título">¶</a></h2>
<p>El módulo <a class="reference internal" href="../library/logging.html#module-logging" title="logging: Flexible event logging system for applications."><code class="xref py py-mod docutils literal notranslate"><span class="pre">logging</span></code></a> es muy flexible; las aplicaciones pueden definir un árbol de subsistemas de registro, y cada registrador de este árbol puede filtrar ciertos mensajes, formatearlos de forma diferente y dirigir mensajes a un número variable de controladores.</p>
<p>Toda esta flexibilidad puede requerir mucha configuración.  Puede escribir instrucciones Python para crear objetos y establecer sus propiedades, pero una configuración compleja requiere código detallado pero aburrido. <a class="reference internal" href="../library/logging.html#module-logging" title="logging: Flexible event logging system for applications."><code class="xref py py-mod docutils literal notranslate"><span class="pre">logging</span></code></a> también es compatible con una función <code class="xref py py-func docutils literal notranslate"><span class="pre">fileConfig()</span></code> que analiza un archivo, pero el formato de archivo no admite la configuración de filtros, y es más complicado generar mediante programación.</p>
<p>Python 2.7 agrega una función <code class="xref py py-func docutils literal notranslate"><span class="pre">dictConfig()</span></code> que utiliza un diccionario para configurar el registro.  Hay muchas maneras de producir un diccionario de diferentes fuentes: construir uno con código; analizar un archivo que contenga JSON; o utilice una biblioteca de análisis YAML si hay una instalada.  Para obtener más información, consulte <a class="reference internal" href="../library/logging.config.html#logging-config-api"><span class="std std-ref">Funciones de configuración</span></a>.</p>
<p>En el ejemplo siguiente se configuran dos registradores, el registrador raíz y un registrador denominado «network».  Los mensajes enviados al registrador raíz se enviarán al registro del sistema mediante el protocolo syslog, y los mensajes al registrador de la «network» se escribirán en un archivo <code class="file docutils literal notranslate"><span class="pre">network.log</span></code> que se rotará una vez que el registro alcance 1MB.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">logging.config</span>

<span class="n">configdict</span> <span class="o">=</span> <span class="p">{</span>
 <span class="s1">&#39;version&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>    <span class="c1"># Configuration schema in use; must be 1 for now</span>
 <span class="s1">&#39;formatters&#39;</span><span class="p">:</span> <span class="p">{</span>
     <span class="s1">&#39;standard&#39;</span><span class="p">:</span> <span class="p">{</span>
         <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;</span><span class="si">%(asctime)s</span><span class="s1"> </span><span class="si">%(name)-15s</span><span class="s1"> &#39;</span>
                    <span class="s1">&#39;</span><span class="si">%(levelname)-8s</span><span class="s1"> </span><span class="si">%(message)s</span><span class="s1">&#39;</span><span class="p">)}},</span>

 <span class="s1">&#39;handlers&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;netlog&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;backupCount&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
                     <span class="s1">&#39;class&#39;</span><span class="p">:</span> <span class="s1">&#39;logging.handlers.RotatingFileHandler&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;filename&#39;</span><span class="p">:</span> <span class="s1">&#39;/logs/network.log&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;formatter&#39;</span><span class="p">:</span> <span class="s1">&#39;standard&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;level&#39;</span><span class="p">:</span> <span class="s1">&#39;INFO&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;maxBytes&#39;</span><span class="p">:</span> <span class="mi">1000000</span><span class="p">},</span>
              <span class="s1">&#39;syslog&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;class&#39;</span><span class="p">:</span> <span class="s1">&#39;logging.handlers.SysLogHandler&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;formatter&#39;</span><span class="p">:</span> <span class="s1">&#39;standard&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;level&#39;</span><span class="p">:</span> <span class="s1">&#39;ERROR&#39;</span><span class="p">}},</span>

 <span class="c1"># Specify all the subordinate loggers</span>
 <span class="s1">&#39;loggers&#39;</span><span class="p">:</span> <span class="p">{</span>
             <span class="s1">&#39;network&#39;</span><span class="p">:</span> <span class="p">{</span>
                         <span class="s1">&#39;handlers&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;netlog&#39;</span><span class="p">]</span>
             <span class="p">}</span>
 <span class="p">},</span>
 <span class="c1"># Specify properties of the root logger</span>
 <span class="s1">&#39;root&#39;</span><span class="p">:</span> <span class="p">{</span>
          <span class="s1">&#39;handlers&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;syslog&#39;</span><span class="p">]</span>
 <span class="p">},</span>
<span class="p">}</span>

<span class="c1"># Set up configuration</span>
<span class="n">logging</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">dictConfig</span><span class="p">(</span><span class="n">configdict</span><span class="p">)</span>

<span class="c1"># As an example, log two error messages</span>
<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Database not found&#39;</span><span class="p">)</span>

<span class="n">netlogger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;network&#39;</span><span class="p">)</span>
<span class="n">netlogger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Connection failed&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Tres mejoras más pequeñas en el módulo <a class="reference internal" href="../library/logging.html#module-logging" title="logging: Flexible event logging system for applications."><code class="xref py py-mod docutils literal notranslate"><span class="pre">logging</span></code></a>, todas implementadas por Vinay Sajip, son:</p>
<ul class="simple">
<li><p>La clase <a class="reference internal" href="../library/logging.handlers.html#logging.handlers.SysLogHandler" title="logging.handlers.SysLogHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">SysLogHandler</span></code></a> ahora admite syslogging a través de TCP.  El constructor tiene un parámetro <em>socktype</em> que proporciona el tipo de socket que se va a usar, ya sea <a class="reference internal" href="../library/socket.html#socket.SOCK_DGRAM" title="socket.SOCK_DGRAM"><code class="xref py py-const docutils literal notranslate"><span class="pre">socket.SOCK_DGRAM</span></code></a> para UDP o <a class="reference internal" href="../library/socket.html#socket.SOCK_STREAM" title="socket.SOCK_STREAM"><code class="xref py py-const docutils literal notranslate"><span class="pre">socket.SOCK_STREAM</span></code></a> para TCP.  El protocolo predeterminado sigue siendo UDP.</p></li>
<li><p>Las instancias <a class="reference internal" href="../library/logging.html#logging.Logger" title="logging.Logger"><code class="xref py py-class docutils literal notranslate"><span class="pre">Logger</span></code></a> ganaron un método <a class="reference internal" href="../library/logging.html#logging.Logger.getChild" title="logging.Logger.getChild"><code class="xref py py-meth docutils literal notranslate"><span class="pre">getChild()</span></code></a> que recupera un registrador descendiente mediante una ruta de acceso relativa. Por ejemplo, una vez que se recupera un registrador haciendo <code class="docutils literal notranslate"><span class="pre">log</span> <span class="pre">=</span> <span class="pre">getLogger('app')</span></code>, llamando <code class="docutils literal notranslate"><span class="pre">log.getChild('network.listen')</span></code> es equivalente a <code class="docutils literal notranslate"><span class="pre">getLogger('app.network.listen')</span></code>.</p></li>
<li><p>La clase <a class="reference internal" href="../library/logging.html#logging.LoggerAdapter" title="logging.LoggerAdapter"><code class="xref py py-class docutils literal notranslate"><span class="pre">LoggerAdapter</span></code></a> gano un método <code class="xref py py-meth docutils literal notranslate"><span class="pre">isEnabledFor()</span></code> que toma un <em>nivel</em> y retorna si el registrador subyacente procesará un mensaje de ese nivel de importancia.</p></li>
</ul>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<dl class="simple">
<dt><span class="target" id="index-56"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0391"><strong>PEP 391</strong></a> - Configuración basada en diccionarios para el registro</dt><dd><p>PEP escrito e implementado por Vinay Sajip.</p>
</dd>
</dl>
</div>
</section>
<section id="pep-3106-dictionary-views">
<h2>PEP 3106: Vistas de diccionario<a class="headerlink" href="#pep-3106-dictionary-views" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Los métodos de diccionarios <a class="reference internal" href="../library/stdtypes.html#dict.keys" title="dict.keys"><code class="xref py py-meth docutils literal notranslate"><span class="pre">keys()</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#dict.values" title="dict.values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">values()</span></code></a> y <a class="reference internal" href="../library/stdtypes.html#dict.items" title="dict.items"><code class="xref py py-meth docutils literal notranslate"><span class="pre">items()</span></code></a> son diferentes en Python 3.x. Ellos regresan un objeto llamado <em class="dfn">view</em> en lugar de una lista completamente materializada.</p>
<p>No es posible cambiar el retorno de valores de los métodos <a class="reference internal" href="../library/stdtypes.html#dict.keys" title="dict.keys"><code class="xref py py-meth docutils literal notranslate"><span class="pre">keys()</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#dict.values" title="dict.values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">values()</span></code></a> y <a class="reference internal" href="../library/stdtypes.html#dict.items" title="dict.items"><code class="xref py py-meth docutils literal notranslate"><span class="pre">items()</span></code></a> en Python 2.7 porque se rompería demasiado código. En su lugar en las versiones 3.x se fueron agregando bajo los nuevos nombres  <code class="xref py py-meth docutils literal notranslate"><span class="pre">viewkeys()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">viewvalues()</span></code> y <code class="xref py py-meth docutils literal notranslate"><span class="pre">viewitems()</span></code>.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">((</span><span class="n">i</span><span class="o">*</span><span class="mi">10</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">65</span><span class="o">+</span><span class="n">i</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">26</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span>
<span class="go">{0: &#39;A&#39;, 130: &#39;N&#39;, 10: &#39;B&#39;, 140: &#39;O&#39;, 20: ..., 250: &#39;Z&#39;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">viewkeys</span><span class="p">()</span>
<span class="go">dict_keys([0, 130, 10, 140, 20, 150, 30, ..., 250])</span>
</pre></div>
</div>
<p>Las vistas se pueden iterar, pero las vistas de elementos y claves también se comportan como conjuntos. El operador <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> realiza la intersección y <code class="docutils literal notranslate"><span class="pre">|</span></code> realiza una unión:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d1</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">((</span><span class="n">i</span><span class="o">*</span><span class="mi">10</span><span class="p">,</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">65</span><span class="o">+</span><span class="n">i</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">26</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d2</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">((</span><span class="n">i</span><span class="o">**</span><span class="mf">.5</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d1</span><span class="o">.</span><span class="n">viewkeys</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">d2</span><span class="o">.</span><span class="n">viewkeys</span><span class="p">()</span>
<span class="go">set([0.0, 10.0, 20.0, 30.0])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d1</span><span class="o">.</span><span class="n">viewkeys</span><span class="p">()</span> <span class="o">|</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
<span class="go">set([0, 1, 130, 3, 4, 5, 6, ..., 120, 250])</span>
</pre></div>
</div>
<p>La vista realiza un seguimiento del diccionario y su contenido cambia a medida que se modifica el diccionario:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">vk</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">viewkeys</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vk</span>
<span class="go">dict_keys([0, 130, 10, ..., 250])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="p">[</span><span class="mi">260</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&amp;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vk</span>
<span class="go">dict_keys([0, 130, 260, 10, ..., 250])</span>
</pre></div>
</div>
<p>Sin embargo, tenga en cuenta que no puede agregar o eliminar claves mientras está iterando sobre la vista:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">vk</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">d</span><span class="p">[</span><span class="n">k</span><span class="o">*</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">k</span>
<span class="gp">...</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">RuntimeError</span>: <span class="n">dictionary changed size during iteration</span>
</pre></div>
</div>
<p>Puede usar los métodos de vista en el código en Python 2.x, y el convertidor 2to3 los cambiará a los métodos estándar <a class="reference internal" href="../library/stdtypes.html#dict.keys" title="dict.keys"><code class="xref py py-meth docutils literal notranslate"><span class="pre">keys()</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#dict.values" title="dict.values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">values()</span></code></a> y <a class="reference internal" href="../library/stdtypes.html#dict.items" title="dict.items"><code class="xref py py-meth docutils literal notranslate"><span class="pre">items()</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<dl class="simple">
<dt><span class="target" id="index-57"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3106"><strong>PEP 3106</strong></a> - Renovación dict.keys(), .values() y .items()</dt><dd><p>PEP escrito por Guido van Rossum. Portado a 2.7 por Alexandre Vassalotti; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1967">bpo-1967</a>.</p>
</dd>
</dl>
</div>
</section>
<section id="pep-3137-the-memoryview-object">
<h2>PEP 3137: El objeto memoryview<a class="headerlink" href="#pep-3137-the-memoryview-object" title="Enlazar permanentemente con este título">¶</a></h2>
<p>El objeto <a class="reference internal" href="../library/stdtypes.html#memoryview" title="memoryview"><code class="xref py py-class docutils literal notranslate"><span class="pre">memoryview</span></code></a> proporciona una vista del contenido de la memoria de otro objeto que coincide con la interfaz de tipo  <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a>.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">string</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="nb">memoryview</span><span class="p">(</span><span class="n">string</span><span class="o">.</span><span class="n">letters</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span>
<span class="go">&lt;memory at 0x37f850&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>           <span class="c1"># Returns length of underlying object</span>
<span class="go">52</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">m</span><span class="p">[</span><span class="mi">25</span><span class="p">],</span> <span class="n">m</span><span class="p">[</span><span class="mi">26</span><span class="p">]</span>   <span class="c1"># Indexing returns one byte</span>
<span class="go">(&#39;a&#39;, &#39;z&#39;, &#39;A&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m2</span> <span class="o">=</span> <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">26</span><span class="p">]</span>         <span class="c1"># Slicing returns another memoryview</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m2</span>
<span class="go">&lt;memory at 0x37f080&gt;</span>
</pre></div>
</div>
<p>El contenido de la vista se puede convertir en una cadena de bytes o una lista de números enteros:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">m2</span><span class="o">.</span><span class="n">tobytes</span><span class="p">()</span>
<span class="go">&#39;abcdefghijklmnopqrstuvwxyz&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m2</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="go">[97, 98, 99, 100, 101, 102, 103, ... 121, 122]</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>Los objetos <a class="reference internal" href="../library/stdtypes.html#memoryview" title="memoryview"><code class="xref py py-class docutils literal notranslate"><span class="pre">memoryview</span></code></a> permiten modificar el objeto subyacente si es un objeto mutable.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">m2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">75</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">TypeError</span>: <span class="n">cannot modify read-only memory</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="n">string</span><span class="o">.</span><span class="n">letters</span><span class="p">)</span>  <span class="c1"># Creating a mutable object</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span>
<span class="go">bytearray(b&#39;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mb</span> <span class="o">=</span> <span class="nb">memoryview</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mb</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;*&#39;</span>         <span class="c1"># Assign to view, changing the bytearray.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>              <span class="c1"># The bytearray has been changed.</span>
<span class="go">bytearray(b&#39;*bcde&#39;)</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<dl class="simple">
<dt><span class="target" id="index-58"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3137"><strong>PEP 3137</strong></a> - Bytes inmutables y búfer mutable</dt><dd><p>PEP escrito por Guido van Rossum. Implementado por Travis Oliphant, Antoine Pitrou y otros. Portado a 2.7 por Antoine Pitrou; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=2396">bpo-2396</a>.</p>
</dd>
</dl>
</div>
</section>
<section id="other-language-changes">
<h2>Otros cambios de lenguaje<a class="headerlink" href="#other-language-changes" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Algunos de los cambios mas pequeños hechos al núcleo del lenguaje de Python son:</p>
<ul>
<li><p>La sintaxis para literales de conjuntos se ha actualizado desde Python 3.x. Los corchetes se utilizan para rodear el contenido del conjunto mutable resultante; los literales de conjunto se distinguen de los diccionarios por no contener dos puntos ni valores. <code class="docutils literal notranslate"><span class="pre">{}</span></code> sigue representando un diccionario vacío; use <code class="docutils literal notranslate"><span class="pre">set()</span></code> para un conjunto vacío.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">}</span>
<span class="go">set([1, 2, 3, 4, 5])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">set</span><span class="p">()</span> <span class="c1"># empty set</span>
<span class="go">set([])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">{}</span>    <span class="c1"># empty dict</span>
<span class="go">{}</span>
</pre></div>
</div>
<p>Portado por Alexandre Vassalotti; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=2335">bpo-2335</a>.</p>
</li>
<li><p>El diccionario y las comprensiones de conjuntos son otra característica portada desde 3.x, que generaliza las comprensiones de listas / generadores para usar la sintaxis literal para conjuntos y diccionarios.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">{</span><span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">*</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">)}</span>
<span class="go">{0: 0, 1: 1, 2: 4, 3: 9, 4: 16, 5: 25}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">{(</span><span class="s1">&#39;a&#39;</span><span class="o">*</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">)}</span>
<span class="go">set([&#39;&#39;, &#39;a&#39;, &#39;aa&#39;, &#39;aaa&#39;, &#39;aaaa&#39;, &#39;aaaaa&#39;])</span>
</pre></div>
</div>
<p>Portado por Alexandre Vassalotti; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=2333">bpo-2333</a>.</p>
</li>
<li><p>La declaración <a class="reference internal" href="../reference/compound_stmts.html#with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a> ahora puede usar múltiples administradores de contexto en una declaración. Los administradores de contexto se procesan de izquierda a derecha y cada uno se trata como si comenzara una nueva declaración <code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code>. Esto significa que:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">A</span><span class="p">()</span> <span class="k">as</span> <span class="n">a</span><span class="p">,</span> <span class="n">B</span><span class="p">()</span> <span class="k">as</span> <span class="n">b</span><span class="p">:</span>
    <span class="o">...</span> <span class="n">suite</span> <span class="n">of</span> <span class="n">statements</span> <span class="o">...</span>
</pre></div>
</div>
<p>es equivalente a:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">A</span><span class="p">()</span> <span class="k">as</span> <span class="n">a</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">B</span><span class="p">()</span> <span class="k">as</span> <span class="n">b</span><span class="p">:</span>
        <span class="o">...</span> <span class="n">suite</span> <span class="n">of</span> <span class="n">statements</span> <span class="o">...</span>
</pre></div>
</div>
<p>La función <code class="xref py py-func docutils literal notranslate"><span class="pre">contextlib.nested()</span></code> provee una función muy similar, por lo que ya no es necesario y ha quedado obsoleto.</p>
<p>(Propuesta en <a class="reference external" href="https://codereview.appspot.com/53094">https://codereview.appspot.com/53094</a>; implementado por Georg Brandl.)</p>
</li>
<li><p>Las conversiones entre números de punto flotante y cadenas ahora se redondean correctamente en la mayoría de las plataformas. Estas conversiones ocurren en muchos lugares diferentes: <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-func docutils literal notranslate"><span class="pre">str()</span></code></a> en flotantes y números complejos; los constructores <a class="reference internal" href="../library/functions.html#float" title="float"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a> y <a class="reference internal" href="../library/functions.html#complex" title="complex"><code class="xref py py-class docutils literal notranslate"><span class="pre">complex</span></code></a>; formato numérico; serializar y deserializar flotantes y números complejos usando los módulos <a class="reference internal" href="../library/marshal.html#module-marshal" title="marshal: Convert Python objects to streams of bytes and back (with different constraints)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">marshal</span></code></a>, <a class="reference internal" href="../library/pickle.html#module-pickle" title="pickle: Convert Python objects to streams of bytes and back."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pickle</span></code></a> y <a class="reference internal" href="../library/json.html#module-json" title="json: Encode and decode the JSON format."><code class="xref py py-mod docutils literal notranslate"><span class="pre">json</span></code></a>; análisis de literales flotantes e imaginarios en código Python; y conversión <a class="reference internal" href="../library/decimal.html#decimal.Decimal" title="decimal.Decimal"><code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code></a> a flotante.</p>
<p>Relacionado con esto, el <a class="reference internal" href="../library/functions.html#repr" title="repr"><code class="xref py py-func docutils literal notranslate"><span class="pre">repr()</span></code></a> de un número de punto flotante <em>x</em> ahora retorna un resultado basado en la cadena decimal más corta que se garantiza que se redondeará a <em>x</em> con el redondeo correcto (con el modo de redondeo <em>round-half-to-even</em>). Anteriormente, daba una cadena basada en redondear x a 17 dígitos decimales.</p>
<p>La biblioteca de redondeo responsable de esta mejora funciona en Windows y en plataformas Unix utilizando los compiladores gcc, icc o suncc.  Puede haber un pequeño número de plataformas donde no se puede garantizar el correcto funcionamiento de este código, por lo que el código no se utiliza en dichos sistemas.  Puede averiguar qué código se está utilizando marcando <a class="reference internal" href="../library/sys.html#sys.float_repr_style" title="sys.float_repr_style"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.float_repr_style</span></code></a>, que será <code class="docutils literal notranslate"><span class="pre">short</span></code> si el nuevo código está en uso y <code class="docutils literal notranslate"><span class="pre">legacy</span></code> si no lo está.</p>
<p>Implementado por Eric Smith y Mark Dickinson, utilizando la biblioteca de David Gay’s <code class="file docutils literal notranslate"><span class="pre">dtoa.c</span></code>; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7117">bpo-7117</a>.</p>
</li>
<li><p>Las conversiones de enteros largos y enteros regulares a punto flotante ahora redondean de forma diferente, retornando el número de punto flotante más cercano al número.  Esto no importa para los enteros pequeños que se pueden convertir exactamente, pero para los números grandes que inevitablemente perderán precisión, Python 2.7 ahora se aproxima más.  Por ejemplo, Python 2.6 calculaba lo siguiente:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">=</span> <span class="mi">295147905179352891391</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">float</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="go">2.9514790517935283e+20</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">-</span> <span class="n">long</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
<span class="go">65535L</span>
</pre></div>
</div>
<p>El resultado de punto flotante de Python 2.7 es mayor, pero mucho más cerca del valor verdadero:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">=</span> <span class="mi">295147905179352891391</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">float</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="go">2.9514790517935289e+20</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">-</span> <span class="n">long</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
<span class="go">-1L</span>
</pre></div>
</div>
<p>(Implementado por Mark Dickinson; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=3166">bpo-3166</a>.)</p>
<p>La división de enteros también es más precisa en su comportamiento de redondeo.  (También implementado por Mark Dickinson; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1811">bpo-1811</a>.)</p>
</li>
<li><p>Se ha eliminado la coerción implícita para los números complejos; el intérprete ya no intentará nunca llamar a un método <code class="xref py py-meth docutils literal notranslate"><span class="pre">__coerce__()</span></code> en objetos complejos.  (Eliminado por Meador Inge y Mark Dickinson; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5211">bpo-5211</a>.)</p></li>
<li><p>El método <a class="reference internal" href="../library/stdtypes.html#str.format" title="str.format"><code class="xref py py-meth docutils literal notranslate"><span class="pre">str.format()</span></code></a> soporta ahora la numeración automática de los campos de sustitución.  Esto hace que el uso de <a class="reference internal" href="../library/stdtypes.html#str.format" title="str.format"><code class="xref py py-meth docutils literal notranslate"><span class="pre">str.format()</span></code></a> se asemeje más al uso del formateo <code class="docutils literal notranslate"><span class="pre">%s</span></code>:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">:</span><span class="si">{}</span><span class="s1">:</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mi">2009</span><span class="p">,</span> <span class="mi">04</span><span class="p">,</span> <span class="s1">&#39;Sunday&#39;</span><span class="p">)</span>
<span class="go">&#39;2009:4:Sunday&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">:</span><span class="si">{}</span><span class="s1">:</span><span class="si">{day}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mi">2009</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="s1">&#39;Sunday&#39;</span><span class="p">)</span>
<span class="go">&#39;2009:4:Sunday&#39;</span>
</pre></div>
</div>
<p>La numeración automática toma los campos de izquierda a derecha, por lo que el primer especificador <code class="docutils literal notranslate"><span class="pre">{...}</span></code> utilizará el primer argumento de <a class="reference internal" href="../library/stdtypes.html#str.format" title="str.format"><code class="xref py py-meth docutils literal notranslate"><span class="pre">str.format()</span></code></a>, el siguiente especificador utilizará el siguiente argumento, y así sucesivamente.  No se puede mezclar la numeración automática con la explícita - o se numeran todos los campos del especificador o ninguno - pero se puede mezclar la numeración automática con los campos con nombre, como en el segundo ejemplo anterior.  (Contribución de Eric Smith; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5237">bpo-5237</a>.)</p>
<p>Los números complejos ahora soportan correctamente el uso con <a class="reference internal" href="../library/functions.html#format" title="format"><code class="xref py py-func docutils literal notranslate"><span class="pre">format()</span></code></a>, y por defecto están alineados a la derecha. La especificación de una precisión o separación por comas se aplica tanto a la parte real como a la imaginaria del número, pero la anchura de campo y la alineación especificadas se aplican a la totalidad de la salida resultante <code class="docutils literal notranslate"><span class="pre">1,5+3j</span></code>.  (Contribución de Eric Smith; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1588">bpo-1588</a> y <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7988">bpo-7988</a>)</p>
<p>El código de formato “F” ahora siempre formatea su salida utilizando caracteres en mayúsculas, por lo que ahora producirá “INF” y “NAN”. (Contribución de Eric Smith; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=3382">bpo-3382</a>.)</p>
<p>Un cambio de bajo nivel: el método <a class="reference internal" href="../reference/datamodel.html#object.__format__" title="object.__format__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">object.__format__()</span></code></a> ahora desencadena un <a class="reference internal" href="../library/exceptions.html#PendingDeprecationWarning" title="PendingDeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">PendingDeprecationWarning</span></code></a> si se pasa una cadena de formato, porque el método <code class="xref py py-meth docutils literal notranslate"><span class="pre">__format__()</span></code> para <a class="reference internal" href="../library/functions.html#object" title="object"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a> convierte el objeto en una representación de cadena y da formato a eso.  Anteriormente, el método aplicaba silenciosamente la cadena de formato a la representación de cadena, pero eso podía ocultar errores en el código de Python.  Si proporciona información de formato, como una alineación o una precisión, presumiblemente espera que el formato se aplique de alguna manera específica del objeto.  (Arreglado por Eric Smith; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7994">bpo-7994</a>.)</p>
</li>
<li><p>Los tipos <a class="reference internal" href="../library/functions.html#int" title="int"><code class="xref py py-func docutils literal notranslate"><span class="pre">int()</span></code></a> y <code class="xref py py-func docutils literal notranslate"><span class="pre">long()</span></code> ganaron un método <code class="docutils literal notranslate"><span class="pre">bit_length</span></code> que retorna el número de bits necesarios para representar su argumento en binario:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">=</span> <span class="mi">37</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">bin</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="go">&#39;0b100101&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span><span class="o">.</span><span class="n">bit_length</span><span class="p">()</span>
<span class="go">6</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">=</span> <span class="mi">2</span><span class="o">**</span><span class="mi">123</span><span class="o">-</span><span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span><span class="o">.</span><span class="n">bit_length</span><span class="p">()</span>
<span class="go">123</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">bit_length</span><span class="p">()</span>
<span class="go">124</span>
</pre></div>
</div>
<p>(Contribución de Fredrik Johansson y Victor Stinner; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=3439">bpo-3439</a>.)</p>
</li>
<li><p>La instrucción <a class="reference internal" href="../reference/simple_stmts.html#import"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">import</span></code></a> ya no intentará una importación absoluta si se produce un error en una importación relativa (por ejemplo, <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">.os</span> <span class="pre">import</span> <span class="pre">sep</span></code>).  Esto corrige un error, pero posiblemente podría romper ciertas instrucciones <code class="xref std std-keyword docutils literal notranslate"><span class="pre">import</span></code> que solo funcionaban por accidente.  (Arreglado por Meador Inge; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7902">bpo-7902</a>.)</p></li>
<li><p>Ahora es posible que una subclase del tipo integrado <code class="xref py py-class docutils literal notranslate"><span class="pre">unicode</span></code> reemplace el método <code class="xref py py-meth docutils literal notranslate"><span class="pre">__unicode__()</span></code>.  (Implementado por Victor Stinner; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1583863">bpo-1583863</a>.)</p></li>
<li><p>El método <a class="reference internal" href="../library/stdtypes.html#bytearray.translate" title="bytearray.translate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">translate()</span></code></a> del tipo <a class="reference internal" href="../library/stdtypes.html#bytearray" title="bytearray"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytearray</span></code></a> ahora acepta <code class="docutils literal notranslate"><span class="pre">None</span></code> como primer argumento.  (Corregido por Georg Brandl; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=4759">bpo-4759</a>.)</p>
</li>
<li><p>Cuando se usa <code class="docutils literal notranslate"><span class="pre">&#64;classmethod</span></code> y <code class="docutils literal notranslate"><span class="pre">&#64;staticmethod</span></code> para envolver métodos como clase o métodos estáticos, el objeto decorador ahora expone la función decorada como su atributo <code class="xref py py-attr docutils literal notranslate"><span class="pre">__func__</span></code>. (Contribuido por Amaury Forgeot d’Arc, después de una sugerencia de George Sakkis; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5982">bpo-5982</a>.)</p></li>
<li><p>Cuando se establecía un conjunto restringido de atributos utilizando <code class="docutils literal notranslate"><span class="pre">__slots__</span></code>, la eliminación de un atributo no establecido no lanzaba <a class="reference internal" href="../library/exceptions.html#AttributeError" title="AttributeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">AttributeError</span></code></a> como cabría esperar.  Corregido por Benjamin Peterson; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7604">bpo-7604</a>)</p></li>
<li><p>Ahora se admiten dos nuevas codificaciones: «cp720», utilizada principalmente para el texto árabe; y «cp858», una variante de CP 850 que añade el símbolo del euro.  (CP720 contribuido por Alexander Belchenko y Amaury Forgeot d’Arc en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1616979">bpo-1616979</a>; CP858 contribuido por Tim Hatch en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8016">bpo-8016</a>)</p></li>
<li><p>El objeto <code class="xref py py-class docutils literal notranslate"><span class="pre">file</span></code> ahora establecerá el atributo <code class="xref py py-attr docutils literal notranslate"><span class="pre">filename</span></code> en la excepción <a class="reference internal" href="../library/exceptions.html#IOError" title="IOError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">IOError</span></code></a> cuando se intente abrir un directorio en plataformas POSIX (anotado por Jan Kaliszewski; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=4764">bpo-4764</a>), y ahora comprueba explícitamente y prohíbe la escritura en objetos de archivo de sólo lectura en lugar de confiar en que la biblioteca C detecte e informe del error (corregido por Stefan Krah; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5677">bpo-5677</a>).</p></li>
<li><p>El tokenizador de Python ahora traduce los finales de línea por sí mismo, por lo que la función incorporada <a class="reference internal" href="../library/functions.html#compile" title="compile"><code class="xref py py-func docutils literal notranslate"><span class="pre">compile()</span></code></a> ahora acepta código que utilice cualquier convención de final de línea.  Además, ya no requiere que el código termine en una nueva línea.</p></li>
<li><p>Los paréntesis adicionales en las definiciones de función son ilegales en Python 3.x, lo que significa que se obtiene un error de sintaxis de <code class="docutils literal notranslate"><span class="pre">def</span> <span class="pre">f((x)):</span> <span class="pre">pass</span></code>.  En el modo de advertencia Python3, Python 2.7 ahora advertirá sobre este uso no común. (Anotado por James Lingard; :issue:”7362”.)</p></li>
<li><p>Ahora es posible crear referencias débiles a objetos de clase de estilo antiguo.  Las clases de estilo nuevo siempre eran de referencia débil.  (Corregido por Antoine Pitrou; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8268">bpo-8268</a>.)</p></li>
<li><p>Cuando se recicla un objeto de módulo, el diccionario del módulo ahora solo se borra si nadie más tiene una referencia al diccionario (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7140">bpo-7140</a>).</p></li>
</ul>
<section id="interpreter-changes">
<span id="new-27-interpreter"></span><h3>Cambios en el intérprete<a class="headerlink" href="#interpreter-changes" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Una nueva variable de entorno, <span class="target" id="index-59"></span><a class="reference internal" href="../using/cmdline.html#envvar-PYTHONWARNINGS"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONWARNINGS</span></code></a>, permite controlar las advertencias.  Debe establecerse en una cadena que contenga la configuración de advertencia, equivalente a las utilizadas con el modificador <a class="reference internal" href="../using/cmdline.html#cmdoption-W"><code class="xref std std-option docutils literal notranslate"><span class="pre">-W</span></code></a>, separado por comas. (Contribuido por Brian Curtin; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7301">bpo-7301</a>.)</p>
<p>Por ejemplo, la siguiente configuración imprimirá las advertencias cada vez que se produzcan, pero convertirá las advertencias del módulo <code class="xref py py-mod docutils literal notranslate"><span class="pre">Cookie</span></code> en un error.  (La sintaxis exacta para establecer una variable de entorno varía según los sistemas operativos y los shells)</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">PYTHONWARNINGS</span><span class="o">=</span><span class="nb">all</span><span class="p">,</span><span class="n">error</span><span class="p">:::</span><span class="n">Cookie</span><span class="p">:</span><span class="mi">0</span>
</pre></div>
</div>
</section>
<section id="optimizations">
<h3>Optimizaciones<a class="headerlink" href="#optimizations" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Se han añadido varias mejoras de rendimiento:</p>
<ul>
<li><p>Se agregó un nuevo código de operación para realizar la configuración inicial de las instrucciones <a class="reference internal" href="../reference/compound_stmts.html#with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a>, buscando los métodos <code class="xref py py-meth docutils literal notranslate"><span class="pre">__enter__()</span></code> y <code class="xref py py-meth docutils literal notranslate"><span class="pre">__exit__()</span></code>.  (Contribución de Benjamin Peterson.)</p></li>
<li><p>El recolector de basura ahora funciona mejor para un patrón de uso común: cuando se asignan muchos objetos sin desasignar ninguno de ellos.  Antes, la recogida de basura tardaba un tiempo cuadrático, pero ahora el número de recogidas de basura completas se reduce a medida que crece el número de objetos en el montón. La nueva lógica sólo realiza una pasada completa de recogida de basura cuando la generación intermedia ha sido recogida 10 veces y cuando el número de objetos supervivientes de la generación intermedia supera el 10% del número de objetos de la generación más antigua.  (Sugerido por Martin von Löwis e implementado por Antoine Pitrou; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=4074">bpo-4074</a>.)</p></li>
<li><p>El recolector de basura intenta evitar el seguimiento de contenedores simples que no pueden formar parte de un ciclo. En Python 2.7, esto es ahora cierto para tuplas y diccionarios que contienen tipos atómicos (como enteros, cadenas, etc.). Transitoriamente, un dict que contenga tuplas de tipos atómicos tampoco será rastreado. Esto ayuda a reducir el coste de cada recogida de basura al disminuir el número de objetos que debe considerar y recorrer el recolector. (Contribución de Antoine Pitrou; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=4688">bpo-4688</a>.)</p></li>
<li><p>Los enteros largos se almacenan ahora internamente en base 2**15 o en base 2**30, determinándose la base en el momento de la construcción.  Anteriormente, siempre se almacenaban en base 2**15.  El uso de la base 2**30 proporciona mejoras significativas en el rendimiento de las máquinas de 64 bits, pero los resultados de las pruebas comparativas en las máquinas de 32 bits han sido contradictorios.  Por lo tanto, el valor por defecto es utilizar la base 2**30 en máquinas de 64 bits y la base 2**15 en máquinas de 32 bits; en Unix, hay una nueva opción de configuración <code class="xref std std-option docutils literal notranslate"><span class="pre">--enable-big-digits</span></code> que puede utilizarse para anular este valor por defecto.</p>
<p>Aparte de las mejoras de rendimiento, este cambio debería ser invisible para los usuarios finales, con una excepción: para fines de prueba y depuración hay un nuevo structseq <code class="xref py py-data docutils literal notranslate"><span class="pre">sys.long_info</span></code> que proporciona información sobre el formato interno, dando el número de bits por dígito y el tamaño en bytes del tipo C utilizado para almacenar cada dígito:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sys</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sys</span><span class="o">.</span><span class="n">long_info</span>
<span class="go">sys.long_info(bits_per_digit=30, sizeof_digit=4)</span>
</pre></div>
</div>
<p>(Contribución de Mark Dickinson; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=4258">bpo-4258</a>.)</p>
<p>Otro conjunto de cambios hizo que los objetos largos fueran unos pocos bytes más pequeños: 2 bytes menos en sistemas de 32 bits y 6 bytes en los de 64 bits. (Contribución de Mark Dickinson; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5260">bpo-5260</a>.)</p>
</li>
<li><p>El algoritmo de división de enteros largos se ha hecho más rápido ajustando el bucle interno, haciendo desplazamientos en lugar de multiplicaciones, y arreglando una iteración extra innecesaria. Varias pruebas de referencia muestran un aumento de velocidad de entre el 50% a y el 150% en las divisiones de enteros largos y en las operaciones de módulo. (Contribución de Mark Dickinson; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5512">bpo-5512</a>). Las operaciones a nivel de bit también son significativamente más rápidas (parche inicial de Gregory Smith; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1087418">bpo-1087418</a>).</p></li>
<li><p>La implementación de <code class="docutils literal notranslate"><span class="pre">%</span></code> comprueba si el operando de la izquierda es una cadena de Python y lo convierte en un caso especial; esto resulta en un aumento de rendimiento del 1–3% p para aplicaciones que utilizan frecuentemente <code class="docutils literal notranslate"><span class="pre">%</span></code> con cadenas, como las bibliotecas de plantillas. (Implementado por Collin Winter; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5176">bpo-5176</a>.)</p></li>
<li><p>Las comprensiones de listas con una condición <code class="docutils literal notranslate"><span class="pre">if</span></code> se compilan en código de bytes más rápido.  (Parche de Antoine Pitrou, portado a la 2.7 por Jeffrey Yasskin; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=4715">bpo-4715</a>)</p></li>
<li><p>La conversión de un entero o un entero largo a una cadena decimal se ha hecho más rápida mediante la conversión en base 10 en lugar de utilizar una función de conversión generalizada que soporta bases arbitrarias. (Parche de Gawain Bolton; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=6713">bpo-6713</a>.)</p></li>
<li><p>Los métodos <code class="xref py py-meth docutils literal notranslate"><span class="pre">split()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">replace()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">rindex()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">rpartition()</span></code> y <code class="xref py py-meth docutils literal notranslate"><span class="pre">rsplit()</span></code> de los tipos tipo cadena (cadenas, cadenas Unicode y objetos <a class="reference internal" href="../library/stdtypes.html#bytearray" title="bytearray"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytearray</span></code></a>) utilizan ahora un algoritmo rápido de búsqueda inversa en lugar de un escaneo carácter por carácter.  Esto es a veces más rápido por un factor de 10.  (Añadido por Florent Xicluna; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7462">bpo-7462</a> y <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7622">bpo-7622</a>)</p></li>
<li><p>Los módulos <a class="reference internal" href="../library/pickle.html#module-pickle" title="pickle: Convert Python objects to streams of bytes and back."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pickle</span></code></a> y <code class="xref py py-mod docutils literal notranslate"><span class="pre">cPickle</span></code> ahora internan automáticamente las cadenas usadas para los nombres de los atributos, reduciendo el uso de memoria de los objetos resultantes del desempaquetamiento.  (Contribución de Jake McGuire; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5084">bpo-5084</a>.)</p></li>
<li><p>El módulo <code class="xref py py-mod docutils literal notranslate"><span class="pre">cPickle</span></code> ahora hace especial hincapié en los diccionarios, reduciendo casi a la mitad el tiempo necesario para hacerlos. (Contribución de Collin Winter; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5670">bpo-5670</a>.)</p></li>
</ul>
</section>
</section>
<section id="new-and-improved-modules">
<h2>Módulos nuevos y mejorados<a class="headerlink" href="#new-and-improved-modules" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Como en cada versión, la biblioteca estándar de Python ha recibido una serie de mejoras y correcciones de errores.  Aquí hay una lista parcial de los cambios más notables, ordenados alfabéticamente por nombre de módulo. Consulta el archivo <code class="file docutils literal notranslate"><span class="pre">Misc/NEWS</span></code> en el árbol de código fuente para una lista más completa de cambios, o mira los registros de Subversion para todos los detalles.</p>
<ul>
<li><p>La clase base de depuración del módulo <a class="reference internal" href="../library/bdb.html#module-bdb" title="bdb: Debugger framework."><code class="xref py py-mod docutils literal notranslate"><span class="pre">bdb</span></code></a> <a class="reference internal" href="../library/bdb.html#bdb.Bdb" title="bdb.Bdb"><code class="xref py py-class docutils literal notranslate"><span class="pre">Bdb</span></code></a> obtuvo una función para omitir módulos.  El constructor ahora toma un iterable que contiene patrones de estilo glob como <code class="docutils literal notranslate"><span class="pre">django.*</span></code>; el depurador no entrará en los marcos de pila de un módulo que coincida con uno de estos patrones. (Aportado por Maru Newby tras una sugerencia de Senthil Kumaran; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5142">bpo-5142</a>.)</p></li>
<li><p>El módulo <a class="reference internal" href="../library/binascii.html#module-binascii" title="binascii: Tools for converting between binary and various ASCII-encoded binary representations."><code class="xref py py-mod docutils literal notranslate"><span class="pre">binascii</span></code></a> soporta ahora la API del buffer, por lo que puede utilizarse con instancias de <a class="reference internal" href="../library/stdtypes.html#memoryview" title="memoryview"><code class="xref py py-class docutils literal notranslate"><span class="pre">memoryview</span></code></a> y otros objetos de buffer similares. (Tomado de la 3.x por Florent Xicluna; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7703">bpo-7703</a>.)</p></li>
<li><p>Updated module: the <code class="xref py py-mod docutils literal notranslate"><span class="pre">bsddb</span></code> module has been updated from 4.7.2devel9
to version 4.8.4 of
<a class="reference external" href="https://www.jcea.es/programacion/pybsddb.htm">the pybsddb package</a>.
The new version features better Python 3.x compatibility, various bug fixes,
and adds several new BerkeleyDB flags and methods.
(Updated by Jesús Cea Avión; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8156">bpo-8156</a>.  The pybsddb
changelog can be read at <a class="reference external" href="https://hg.jcea.es/pybsddb/file/tip/ChangeLog">https://hg.jcea.es/pybsddb/file/tip/ChangeLog</a>.)</p></li>
<li><p>El módulo <a class="reference internal" href="../library/bz2.html#module-bz2" title="bz2: Interfaces for bzip2 compression and decompression."><code class="xref py py-mod docutils literal notranslate"><span class="pre">bz2</span></code></a> de <a class="reference internal" href="../library/bz2.html#bz2.BZ2File" title="bz2.BZ2File"><code class="xref py py-class docutils literal notranslate"><span class="pre">BZ2File</span></code></a> ahora soporta el protocolo de gestión de contexto, por lo que se puede escribir <code class="docutils literal notranslate"><span class="pre">con</span> <span class="pre">bz2.BZ2File(...)</span> <span class="pre">como</span> <span class="pre">f:</span></code>. (Contribución de Hagen Fürstenau; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=3860">bpo-3860</a>.)</p></li>
<li><p>Nueva clase: la clase <a class="reference internal" href="../library/collections.html#collections.Counter" title="collections.Counter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Counter</span></code></a> del módulo <a class="reference internal" href="../library/collections.html#module-collections" title="collections: Container datatypes"><code class="xref py py-mod docutils literal notranslate"><span class="pre">collections</span></code></a> es útil para el recuento de datos. Las instancias de <a class="reference internal" href="../library/collections.html#collections.Counter" title="collections.Counter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Counter</span></code></a> se comportan mayoritariamente como los diccionarios, pero retornan cero si faltan claves en lugar de lanzar un <a class="reference internal" href="../library/exceptions.html#KeyError" title="KeyError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KeyError</span></code></a>:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">letter</span> <span class="ow">in</span> <span class="s1">&#39;here is a sample of english text&#39;</span><span class="p">:</span>
<span class="gp">... </span>  <span class="n">c</span><span class="p">[</span><span class="n">letter</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> 
<span class="go">Counter({&#39; &#39;: 6, &#39;e&#39;: 5, &#39;s&#39;: 3, &#39;a&#39;: 2, &#39;i&#39;: 2, &#39;h&#39;: 2,</span>
<span class="go">&#39;l&#39;: 2, &#39;t&#39;: 2, &#39;g&#39;: 1, &#39;f&#39;: 1, &#39;m&#39;: 1, &#39;o&#39;: 1, &#39;n&#39;: 1,</span>
<span class="go">&#39;p&#39;: 1, &#39;r&#39;: 1, &#39;x&#39;: 1})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;e&#39;</span><span class="p">]</span>
<span class="go">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;z&#39;</span><span class="p">]</span>
<span class="go">0</span>
</pre></div>
</div>
<p>Hay tres métodos adicionales de <a class="reference internal" href="../library/collections.html#collections.Counter" title="collections.Counter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Counter</span></code></a>. <a class="reference internal" href="../library/collections.html#collections.Counter.most_common" title="collections.Counter.most_common"><code class="xref py py-meth docutils literal notranslate"><span class="pre">most_common()</span></code></a> retorna los N elementos más comunes y sus recuentos. <a class="reference internal" href="../library/collections.html#collections.Counter.elements" title="collections.Counter.elements"><code class="xref py py-meth docutils literal notranslate"><span class="pre">elements()</span></code></a> retorna un iterador sobre los elementos contenidos, repitiendo cada elemento tantas veces como su recuento. <a class="reference internal" href="../library/collections.html#collections.Counter.subtract" title="collections.Counter.subtract"><code class="xref py py-meth docutils literal notranslate"><span class="pre">subtract()</span></code></a> toma un iterable y resta uno por cada elemento en lugar de sumarlo; si el argumento es un diccionario u otra <code class="xref py py-class docutils literal notranslate"><span class="pre">Counter</span></code>, los recuentos se restan.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="go">[(&#39; &#39;, 6), (&#39;e&#39;, 5), (&#39;s&#39;, 3), (&#39;a&#39;, 2), (&#39;i&#39;, 2)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">elements</span><span class="p">()</span> <span class="o">-&gt;</span>
<span class="go">   &#39;a&#39;, &#39;a&#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;, &#39; &#39;,</span>
<span class="go">   &#39;e&#39;, &#39;e&#39;, &#39;e&#39;, &#39;e&#39;, &#39;e&#39;, &#39;g&#39;, &#39;f&#39;, &#39;i&#39;, &#39;i&#39;,</span>
<span class="go">   &#39;h&#39;, &#39;h&#39;, &#39;m&#39;, &#39;l&#39;, &#39;l&#39;, &#39;o&#39;, &#39;n&#39;, &#39;p&#39;, &#39;s&#39;,</span>
<span class="go">   &#39;s&#39;, &#39;s&#39;, &#39;r&#39;, &#39;t&#39;, &#39;t&#39;, &#39;x&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;e&#39;</span><span class="p">]</span>
<span class="go">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">subtract</span><span class="p">(</span><span class="s1">&#39;very heavy on the letter e&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;e&#39;</span><span class="p">]</span>    <span class="c1"># Count is now lower</span>
<span class="go">-1</span>
</pre></div>
</div>
<p>Contribución de Raymond Hettinger; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1696199">bpo-1696199</a>.</p>
<p>Nueva clase: <a class="reference internal" href="../library/collections.html#collections.OrderedDict" title="collections.OrderedDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">OrderedDict</span></code></a> se describe en la sección anterior <a class="reference internal" href="#pep-0372"><span class="std std-ref">PEP 372: Adición de un diccionario ordenado a las colecciones</span></a>.</p>
<p>Nuevo método: El tipo de datos <a class="reference internal" href="../library/collections.html#collections.deque" title="collections.deque"><code class="xref py py-class docutils literal notranslate"><span class="pre">deque</span></code></a> tiene ahora un método <a class="reference internal" href="../library/collections.html#collections.deque.count" title="collections.deque.count"><code class="xref py py-meth docutils literal notranslate"><span class="pre">count()</span></code></a> que retorna el número de elementos contenidos igual al argumento suministrado <em>x</em>, y un método <a class="reference internal" href="../library/collections.html#collections.deque.reverse" title="collections.deque.reverse"><code class="xref py py-meth docutils literal notranslate"><span class="pre">reverse()</span></code></a> que invierte los elementos del deque en su lugar. <a class="reference internal" href="../library/collections.html#collections.deque" title="collections.deque"><code class="xref py py-class docutils literal notranslate"><span class="pre">deque</span></code></a> también expone su longitud máxima como el atributo de sólo lectura <a class="reference internal" href="../library/collections.html#collections.deque.maxlen" title="collections.deque.maxlen"><code class="xref py py-attr docutils literal notranslate"><span class="pre">maxlen</span></code></a>. (Ambas características han sido añadidas por Raymond Hettinger)</p>
<p>La clase <a class="reference internal" href="../library/collections.html#collections.namedtuple" title="collections.namedtuple"><code class="xref py py-class docutils literal notranslate"><span class="pre">namedtuple</span></code></a> tiene ahora un parámetro opcional <em>rename</em>. Si <em>rename</em> es verdadero, los nombres de campo que no son válidos porque se han repetido o no son identificadores legales de Python serán renombrados a nombres legales que se derivan de la posición del campo dentro de la lista de campos:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">namedtuple</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;field1&#39;</span><span class="p">,</span> <span class="s1">&#39;$illegal&#39;</span><span class="p">,</span> <span class="s1">&#39;for&#39;</span><span class="p">,</span> <span class="s1">&#39;field2&#39;</span><span class="p">],</span> <span class="n">rename</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span><span class="o">.</span><span class="n">_fields</span>
<span class="go">(&#39;field1&#39;, &#39;_1&#39;, &#39;_2&#39;, &#39;field2&#39;)</span>
</pre></div>
</div>
<p>(Añadido por Raymond Hettinger; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1818">bpo-1818</a>.)</p>
<p>Por último, la clase base abstracta <code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code> ahora retorna <a class="reference internal" href="../library/constants.html#NotImplemented" title="NotImplemented"><code class="xref py py-const docutils literal notranslate"><span class="pre">NotImplemented</span></code></a> si un mapeo se compara con otro tipo que no es un <code class="xref py py-class docutils literal notranslate"><span class="pre">Mapping</span></code>. (Corregido por Daniel Stutzbach; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8729">bpo-8729</a>.)</p>
</li>
<li><p>Los constructores de las clases de análisis en el módulo <code class="xref py py-mod docutils literal notranslate"><span class="pre">ConfigParser</span></code> toman ahora un parámetro <em>allow_no_value</em>, por defecto falso; si es verdadero, se permitirán las opciones sin valores.  Por ejemplo:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ConfigParser</span><span class="o">,</span> <span class="nn">StringIO</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sample_config</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="gp">... </span><span class="s2">[mysqld]</span>
<span class="gp">... </span><span class="s2">user = mysql</span>
<span class="gp">... </span><span class="s2">pid-file = /var/run/mysqld/mysqld.pid</span>
<span class="gp">... </span><span class="s2">skip-bdb</span>
<span class="gp">... </span><span class="s2">&quot;&quot;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span> <span class="o">=</span> <span class="n">ConfigParser</span><span class="o">.</span><span class="n">RawConfigParser</span><span class="p">(</span><span class="n">allow_no_value</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span><span class="o">.</span><span class="n">readfp</span><span class="p">(</span><span class="n">StringIO</span><span class="o">.</span><span class="n">StringIO</span><span class="p">(</span><span class="n">sample_config</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;mysqld&#39;</span><span class="p">,</span> <span class="s1">&#39;user&#39;</span><span class="p">)</span>
<span class="go">&#39;mysql&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;mysqld&#39;</span><span class="p">,</span> <span class="s1">&#39;skip-bdb&#39;</span><span class="p">)</span>
<span class="go">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;mysqld&#39;</span><span class="p">,</span> <span class="s1">&#39;unknown&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  <span class="c">...</span>
<span class="gr">NoOptionError</span>: <span class="n">No option &#39;unknown&#39; in section: &#39;mysqld&#39;</span>
</pre></div>
</div>
<p>(Contribución de Mats Kindahl; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7005">bpo-7005</a>.)</p>
</li>
<li><p>Función obsoleta: <code class="xref py py-func docutils literal notranslate"><span class="pre">contextlib.nested()</span></code>, que permite manejar más de un gestor de contexto con una sola expresión <a class="reference internal" href="../reference/compound_stmts.html#with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a>, ha sido deprecada, porque la expresión <code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code> soporta ahora múltiples gestores de contexto.</p></li>
<li><p>El módulo <code class="xref py py-mod docutils literal notranslate"><span class="pre">cookielib</span></code> ahora ignora las cookies que tienen un campo de versión no válido, uno que no contiene un valor entero.  (Corregido por John J. Lee; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=3924">bpo-3924</a>.)</p></li>
<li><p>La función <a class="reference internal" href="../library/copy.html#copy.deepcopy" title="copy.deepcopy"><code class="xref py py-func docutils literal notranslate"><span class="pre">deepcopy()</span></code></a> del módulo <a class="reference internal" href="../library/copy.html#module-copy" title="copy: Shallow and deep copy operations."><code class="xref py py-mod docutils literal notranslate"><span class="pre">copy</span></code></a> ahora copiará correctamente los métodos de instancia vinculados.  (Implementado por Robert Collins; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1515">bpo-1515</a>.)</p></li>
<li><p>El módulo <a class="reference internal" href="../library/ctypes.html#module-ctypes" title="ctypes: A foreign function library for Python."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ctypes</span></code></a> ahora convierte siempre <code class="docutils literal notranslate"><span class="pre">None</span></code> a un puntero C <code class="docutils literal notranslate"><span class="pre">NULL</span></code> para los argumentos declarados como punteros.  (Cambiado por Thomas Heller; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=4606">bpo-4606</a>.) La biblioteca subyacente <a class="reference external" href="https://sourceware.org/libffi/">libffi</a> ha sido actualizada a la versión 3.0.9, que contiene varias correcciones para diferentes plataformas.  (Actualizado por Matthias Klose; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8142">bpo-8142</a>.)</p></li>
<li><p>Nuevo método: la clase <a class="reference internal" href="../library/datetime.html#datetime.timedelta" title="datetime.timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">timedelta</span></code></a> del módulo <a class="reference internal" href="../library/datetime.html#module-datetime" title="datetime: Basic date and time types."><code class="xref py py-mod docutils literal notranslate"><span class="pre">datetime</span></code></a> ha ganado un método <a class="reference internal" href="../library/datetime.html#datetime.timedelta.total_seconds" title="datetime.timedelta.total_seconds"><code class="xref py py-meth docutils literal notranslate"><span class="pre">total_seconds()</span></code></a> que retorna el número de segundos de la duración.  (Contribución de Brian Quinlan; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5788">bpo-5788</a>.)</p></li>
<li><p>Nuevo método: la clase <a class="reference internal" href="../library/decimal.html#decimal.Decimal" title="decimal.Decimal"><code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code></a> ganó un método de clase <a class="reference internal" href="../library/decimal.html#decimal.Decimal.from_float" title="decimal.Decimal.from_float"><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_float()</span></code></a> que realiza una conversión exacta de un número de punto flotante a un <a class="reference internal" href="../library/decimal.html#decimal.Decimal" title="decimal.Decimal"><code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code></a>. Esta conversión exacta busca la aproximación decimal más cercana al valor de la representación de punto flotante; el valor decimal resultante incluirá, por tanto, la inexactitud, si la hubiera. Por ejemplo, <code class="docutils literal notranslate"><span class="pre">Decimal.from_float(0.1)</span></code> retorna <code class="docutils literal notranslate"><span class="pre">Decimal('0.1000000000000000055511151231257827021181583404541015625')</span></code>. (Implementado por Raymond Hettinger; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=4796">bpo-4796</a>.)</p>
<p>La comparación de instancias de <a class="reference internal" href="../library/decimal.html#decimal.Decimal" title="decimal.Decimal"><code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code></a> con números de punto flotante produce ahora resultados sensibles basados en los valores numéricos de los operandos.  Anteriormente, estas comparaciones volvían a las reglas por defecto de Python para comparar objetos, que producían resultados arbitrarios basados en su tipo.  Tenga en cuenta que todavía no puede combinar <code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code> y punto flotante en otras operaciones como la suma, ya que debe elegir explícitamente cómo convertir entre float y <a class="reference internal" href="../library/decimal.html#decimal.Decimal" title="decimal.Decimal"><code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code></a>.  (Corregido por Mark Dickinson; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=2531">bpo-2531</a>.)</p>
<p>El constructor de <a class="reference internal" href="../library/decimal.html#decimal.Decimal" title="decimal.Decimal"><code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code></a> acepta ahora números en coma flotante (añadido por Raymond Hettinger; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8257">bpo-8257</a>) y caracteres Unicode no europeos, como los dígitos arábigos-índicos (contribución de Mark Dickinson; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=6595">bpo-6595</a>).</p>
<p>La mayoría de los métodos de la clase <a class="reference internal" href="../library/decimal.html#decimal.Context" title="decimal.Context"><code class="xref py py-class docutils literal notranslate"><span class="pre">Context</span></code></a> ahora aceptan enteros así como instancias de <a class="reference internal" href="../library/decimal.html#decimal.Decimal" title="decimal.Decimal"><code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code></a>; las únicas excepciones son los métodos <a class="reference internal" href="../library/decimal.html#decimal.Context.canonical" title="decimal.Context.canonical"><code class="xref py py-meth docutils literal notranslate"><span class="pre">canonical()</span></code></a> y <a class="reference internal" href="../library/decimal.html#decimal.Context.is_canonical" title="decimal.Context.is_canonical"><code class="xref py py-meth docutils literal notranslate"><span class="pre">is_canonical()</span></code></a>.  (Parche de Juan José Conti; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7633">bpo-7633</a>.)</p>
<p>Cuando se utilizan instancias <a class="reference internal" href="../library/decimal.html#decimal.Decimal" title="decimal.Decimal"><code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code></a> con el método <a class="reference internal" href="../library/stdtypes.html#str.format" title="str.format"><code class="xref py py-meth docutils literal notranslate"><span class="pre">format()</span></code></a> de una cadena, la alineación por defecto era antes la izquierda.  Esto se ha cambiado a la alineación derecha, que es más sensible para los tipos numéricos.  (Cambiado por Mark Dickinson; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=6857">bpo-6857</a>.)</p>
<p>Las comparaciones que implican un valor NaN de señalización (o <code class="docutils literal notranslate"><span class="pre">sNAN</span></code>) señalan ahora <code class="xref py py-const docutils literal notranslate"><span class="pre">InvalidOperation</span></code> en lugar de retornar silenciosamente un valor verdadero o falso dependiendo del operador de comparación.  Los valores NaN silenciosos (o <code class="docutils literal notranslate"><span class="pre">NaN</span></code>) son ahora hashable.  (Corregido por Mark Dickinson; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7279">bpo-7279</a>.)</p>
</li>
<li><p>El módulo <a class="reference internal" href="../library/difflib.html#module-difflib" title="difflib: Helpers for computing differences between objects."><code class="xref py py-mod docutils literal notranslate"><span class="pre">difflib</span></code></a> produce ahora una salida más compatible con las herramientas modernas <strong class="command">diff</strong>/<strong class="command">patch</strong> mediante un pequeño cambio, utilizando un carácter de tabulación en lugar de espacios como separador en la cabecera que da el nombre del fichero.  (Corregido por Anatoly Techtonik; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7585">bpo-7585</a>.)</p></li>
<li><p>El comando Distutils <code class="docutils literal notranslate"><span class="pre">sdist</span></code> ahora siempre regenera el archivo <code class="file docutils literal notranslate"><span class="pre">MANIFEST</span></code>, ya que aunque los archivos <code class="file docutils literal notranslate"><span class="pre">MANIFEST.in</span></code> o <code class="file docutils literal notranslate"><span class="pre">setup.py</span></code> no hayan sido modificados, el usuario podría haber creado algunos archivos nuevos que deberían ser incluidos. (Corregido por Tarek Ziadé; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8688">bpo-8688</a>.)</p></li>
<li><p>La bandera <code class="xref py py-const docutils literal notranslate"><span class="pre">IGNORE_EXCEPTION_DETAIL</span></code> del módulo <a class="reference internal" href="../library/doctest.html#module-doctest" title="doctest: Test pieces of code within docstrings."><code class="xref py py-mod docutils literal notranslate"><span class="pre">doctest</span></code></a> ahora ignorará el nombre del módulo que contiene la excepción que se está probando.  (Parche de Lennart Regebro; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7490">bpo-7490</a>.)</p></li>
<li><p>La clase <a class="reference internal" href="../library/email.html#module-email" title="email: Package supporting the parsing, manipulating, and generating email messages."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email</span></code></a> del módulo <a class="reference internal" href="../library/email.compat32-message.html#email.message.Message" title="email.message.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a> aceptará ahora una carga útil con valor Unicode, convirtiendo automáticamente la carga útil a la codificación especificada por <code class="xref py py-attr docutils literal notranslate"><span class="pre">output_charset</span></code>. (Añadido por R. David Murray; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1368247">bpo-1368247</a>.)</p></li>
<li><p>La clase <a class="reference internal" href="../library/fractions.html#fractions.Fraction" title="fractions.Fraction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Fraction</span></code></a> acepta ahora una instancia de float o <a class="reference internal" href="../library/decimal.html#decimal.Decimal" title="decimal.Decimal"><code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code></a>, o dos números racionales, como argumentos para su constructor.  (Implementado por Mark Dickinson; los racionales se añadieron en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5812">bpo-5812</a>, y float/decimal en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8294">bpo-8294</a>)</p>
<p>Las comparaciones de ordenación (<code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code>) entre fracciones y números complejos ahora lanzan un <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a>. Esto corrige un descuido, haciendo que la <a class="reference internal" href="../library/fractions.html#fractions.Fraction" title="fractions.Fraction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Fraction</span></code></a> coincida con los otros tipos numéricos.</p>
</li>
<li><p>Nueva clase: <a class="reference internal" href="../library/ftplib.html#ftplib.FTP_TLS" title="ftplib.FTP_TLS"><code class="xref py py-class docutils literal notranslate"><span class="pre">FTP_TLS</span></code></a> en el módulo <a class="reference internal" href="../library/ftplib.html#module-ftplib" title="ftplib: FTP protocol client (requires sockets)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ftplib</span></code></a> proporciona conexiones FTP seguras utilizando la encapsulación TLS de la autenticación, así como las posteriores transferencias de control y datos. (Contribuido por Giampaolo Rodola; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=2054">bpo-2054</a>.)</p>
<p>El método <a class="reference internal" href="../library/ftplib.html#ftplib.FTP.storbinary" title="ftplib.FTP.storbinary"><code class="xref py py-meth docutils literal notranslate"><span class="pre">storbinary()</span></code></a> para subidas binarias puede ahora reiniciar las subidas gracias a un parámetro <em>rest</em> añadido (parche de Pablo Mouzo; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=6845">bpo-6845</a>)</p>
</li>
<li><p>Nuevo decorador de clases: <a class="reference internal" href="../library/functools.html#functools.total_ordering" title="functools.total_ordering"><code class="xref py py-func docutils literal notranslate"><span class="pre">total_ordering()</span></code></a> en el módulo <a class="reference internal" href="../library/functools.html#module-functools" title="functools: Higher-order functions and operations on callable objects."><code class="xref py py-mod docutils literal notranslate"><span class="pre">functools</span></code></a> toma una clase que define un método <code class="xref py py-meth docutils literal notranslate"><span class="pre">__eq__()</span></code> y uno de los métodos <code class="xref py py-meth docutils literal notranslate"><span class="pre">__lt__()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">__le__()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">__gt__()</span></code>, o <code class="xref py py-meth docutils literal notranslate"><span class="pre">__ge__()</span></code>, y genera los métodos de comparación que faltan.  Dado que el método <code class="xref py py-meth docutils literal notranslate"><span class="pre">__cmp__()</span></code> queda obsoleto en Python 3.x, este decorador facilita la definición de clases ordenadas. (Añadido por Raymond Hettinger; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5479">bpo-5479</a>.)</p>
<p>Nueva función: <a class="reference internal" href="../library/functools.html#functools.cmp_to_key" title="functools.cmp_to_key"><code class="xref py py-func docutils literal notranslate"><span class="pre">cmp_to_key()</span></code></a> tomará una función de comparación de estilo antiguo que espera dos argumentos y retornará una nueva llamada que puede usarse como parámetro <em>clave</em> para funciones como <a class="reference internal" href="../library/functions.html#sorted" title="sorted"><code class="xref py py-func docutils literal notranslate"><span class="pre">sorted()</span></code></a>, <a class="reference internal" href="../library/functions.html#min" title="min"><code class="xref py py-func docutils literal notranslate"><span class="pre">min()</span></code></a> y <a class="reference internal" href="../library/functions.html#max" title="max"><code class="xref py py-func docutils literal notranslate"><span class="pre">max()</span></code></a>, etc.  El principal uso previsto es ayudar a hacer el código compatible con Python 3.x. (Añadido por Raymond Hettinger.)</p>
</li>
<li><p>Nueva función: la <a class="reference internal" href="../library/gc.html#module-gc" title="gc: Interface to the cycle-detecting garbage collector."><code class="xref py py-func docutils literal notranslate"><span class="pre">gc()</span></code></a> del módulo <a class="reference internal" href="../library/gc.html#gc.is_tracked" title="gc.is_tracked"><code class="xref py py-mod docutils literal notranslate"><span class="pre">is_tracked</span></code></a> retorna true si una instancia dada es rastreada por el recolector de basura, false en caso contrario. (Contribución de Antoine Pitrou; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=4688">bpo-4688</a>.)</p></li>
<li><p>El módulo <a class="reference internal" href="../library/gzip.html#module-gzip" title="gzip: Interfaces for gzip compression and decompression using file objects."><code class="xref py py-mod docutils literal notranslate"><span class="pre">gzip</span></code></a> <a class="reference internal" href="../library/gzip.html#gzip.GzipFile" title="gzip.GzipFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">GzipFile</span></code></a> soporta ahora el protocolo de gestión de contexto, por lo que se puede escribir <code class="docutils literal notranslate"><span class="pre">con</span> <span class="pre">gzip.GzipFile(...)</span> <span class="pre">como</span> <span class="pre">f:</span></code> (contribución de Hagen Fürstenau; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=3860">bpo-3860</a>), y ahora implementa el ABC de <a class="reference internal" href="../library/io.html#io.BufferedIOBase" title="io.BufferedIOBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">io.BufferedIOBase</span></code></a>, por lo que se puede envolver con <a class="reference internal" href="../library/io.html#io.BufferedReader" title="io.BufferedReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">io.BufferedReader</span></code></a> para un procesamiento más rápido (contribución de Nir Aides; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7471">bpo-7471</a>). Ahora también es posible anular la hora de modificación registrada en un archivo gzipped proporcionando una marca de tiempo opcional al constructor.  (Contribución de Jacques Frechet; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=4272">bpo-4272</a>.)</p>
<p>Los archivos en formato gzip pueden ser rellenados con bytes cero al final; el módulo <a class="reference internal" href="../library/gzip.html#module-gzip" title="gzip: Interfaces for gzip compression and decompression using file objects."><code class="xref py py-mod docutils literal notranslate"><span class="pre">gzip</span></code></a> ahora consumirá estos bytes al final.  (Corregido por Tadek Pietraszek y Brian Curtin; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=2846">bpo-2846</a>)</p>
</li>
<li><p>Nuevo atributo: el módulo <a class="reference internal" href="../library/hashlib.html#module-hashlib" title="hashlib: Secure hash and message digest algorithms."><code class="xref py py-mod docutils literal notranslate"><span class="pre">hashlib</span></code></a> tiene ahora un atributo <code class="xref py py-attr docutils literal notranslate"><span class="pre">algorithms</span></code> que contiene una tupla que nombra los algoritmos soportados. En Python 2.7, <code class="docutils literal notranslate"><span class="pre">hashlib.algorithms</span></code> contiene <code class="docutils literal notranslate"><span class="pre">('md5',</span> <span class="pre">'sha1',</span> <span class="pre">'sha224',</span> <span class="pre">'sha256',</span> <span class="pre">'sha384',</span> <span class="pre">'sha512')</span></code>. (Contribución de Carl Chenet; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7418">bpo-7418</a>.)</p></li>
<li><p>La clase <code class="xref py py-class docutils literal notranslate"><span class="pre">HTTPResponse</span></code> por defecto utilizada por el módulo <code class="xref py py-mod docutils literal notranslate"><span class="pre">httplib</span></code> ahora soporta el almacenamiento en búfer, lo que resulta en una lectura mucho más rápida de las respuestas HTTP. (Contribuido por Kristján Valur Jónsson; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=4879">bpo-4879</a>.)</p>
<p>Las clases <code class="xref py py-class docutils literal notranslate"><span class="pre">HTTPConnection</span></code> y <code class="xref py py-class docutils literal notranslate"><span class="pre">HTTPSConnection</span></code> soportan ahora un parámetro <em>dirección_de_origen</em>, una 2-tupla <code class="docutils literal notranslate"><span class="pre">(host,</span> <span class="pre">port)</span></code> que da la dirección de origen que se utilizará para la conexión. (Contribuido por Eldon Ziegler; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=3972">bpo-3972</a>.)</p>
</li>
<li><p>El módulo <code class="xref py py-mod docutils literal notranslate"><span class="pre">ihooks</span></code> ahora soporta importaciones relativas.  Tenga en cuenta que <code class="xref py py-mod docutils literal notranslate"><span class="pre">ihooks</span></code> es un módulo más antiguo para personalizar las importaciones, sustituido por el módulo <code class="xref py py-mod docutils literal notranslate"><span class="pre">imputil</span></code> añadido en Python 2.0. (El soporte de importaciones relativas fue añadido por Neil Schemenauer)</p>
</li>
<li><p>El módulo <a class="reference internal" href="../library/imaplib.html#module-imaplib" title="imaplib: IMAP4 protocol client (requires sockets)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">imaplib</span></code></a> ahora soporta direcciones IPv6. (Contribución de Derek Morr; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1655">bpo-1655</a>.)</p></li>
<li><p>Nueva función: la <a class="reference internal" href="../library/inspect.html#inspect.getcallargs" title="inspect.getcallargs"><code class="xref py py-func docutils literal notranslate"><span class="pre">getcallargs()</span></code></a> del módulo <a class="reference internal" href="../library/inspect.html#module-inspect" title="inspect: Extract information and source code from live objects."><code class="xref py py-mod docutils literal notranslate"><span class="pre">inspect</span></code></a> toma una llamada y sus argumentos posicionales y de palabra clave, y calcula qué parámetros de la llamada recibirán cada argumento, retornando un diccionario que asigna los nombres de los argumentos a sus valores.  Por ejemplo:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">inspect</span> <span class="kn">import</span> <span class="n">getcallargs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="o">*</span><span class="n">pos</span><span class="p">,</span> <span class="o">**</span><span class="n">named</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">getcallargs</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="go">{&#39;a&#39;: 1, &#39;b&#39;: 2, &#39;pos&#39;: (3,), &#39;named&#39;: {}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">getcallargs</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="go">{&#39;a&#39;: 2, &#39;b&#39;: 1, &#39;pos&#39;: (), &#39;named&#39;: {&#39;x&#39;: 4}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">getcallargs</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">TypeError</span>: <span class="n">f() takes at least 1 argument (0 given)</span>
</pre></div>
</div>
<p>Contribución de George Sakkis; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=3135">bpo-3135</a>.</p>
</li>
<li><p>Módulo actualizado: La librería <a class="reference internal" href="../library/io.html#module-io" title="io: Core tools for working with streams."><code class="xref py py-mod docutils literal notranslate"><span class="pre">io</span></code></a> ha sido actualizada a la versión que viene con Python 3.1.  Para la versión 3.1, la biblioteca de E/S fue reescrita completamente en C y es de 2 a 20 veces más rápida dependiendo de la tarea que se realice.  La versión original de Python fue renombrada como módulo <code class="xref py py-mod docutils literal notranslate"><span class="pre">_pyio</span></code>.</p>
<p>Un pequeño cambio resultante: la clase <a class="reference internal" href="../library/io.html#io.TextIOBase" title="io.TextIOBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">io.TextIOBase</span></code></a> tiene ahora un atributo <code class="xref py py-attr docutils literal notranslate"><span class="pre">errors</span></code> que da la configuración de error utilizada para los errores de codificación y decodificación (uno de <code class="docutils literal notranslate"><span class="pre">’strict’</span></code>, <code class="docutils literal notranslate"><span class="pre">’replace’</span></code>, <code class="docutils literal notranslate"><span class="pre">'ignore'</span></code>).</p>
<p>La clase <a class="reference internal" href="../library/io.html#io.FileIO" title="io.FileIO"><code class="xref py py-class docutils literal notranslate"><span class="pre">io.FileIO</span></code></a> ahora lanza un <a class="reference internal" href="../library/exceptions.html#OSError" title="OSError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OSError</span></code></a> cuando se le pasa un descriptor de fichero no válido.  (Implementado por Benjamin Peterson; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=4991">bpo-4991</a>.) El método <a class="reference internal" href="../library/io.html#io.IOBase.truncate" title="io.IOBase.truncate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">truncate()</span></code></a> ahora preserva la posición del archivo; antes cambiaba la posición del archivo al final del nuevo archivo.  (Corregido por Pascal Chambon; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=6939">bpo-6939</a>.)</p>
</li>
<li><p>Nueva función: <code class="docutils literal notranslate"><span class="pre">itertools.compress(data,</span> <span class="pre">selectors)</span></code> toma dos iteradores.  Los elementos de <em>datos</em> se retornan si el valor correspondiente en <em>selectores</em> es verdadero:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">itertools</span><span class="o">.</span><span class="n">compress</span><span class="p">(</span><span class="s1">&#39;ABCDEF&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span> <span class="o">=&gt;</span>
  <span class="n">A</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">E</span><span class="p">,</span> <span class="n">F</span>
</pre></div>
</div>
<p>Nueva función: <code class="docutils literal notranslate"><span class="pre">itertools.combinations_with_replacement(iter,</span> <span class="pre">r)</span></code> retorna todas las posibles combinaciones de elementos de longitud <em>r</em> del iterable <em>iter</em>.  A diferencia de <a class="reference internal" href="../library/itertools.html#itertools.combinations" title="itertools.combinations"><code class="xref py py-func docutils literal notranslate"><span class="pre">combinations()</span></code></a>, los elementos individuales pueden repetirse en las combinaciones generadas:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">itertools</span><span class="o">.</span><span class="n">combinations_with_replacement</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">=&gt;</span>
  <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">),</span>
  <span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Tenga en cuenta que los elementos se tratan como únicos en función de su posición en la entrada, no de sus valores reales.</p>
<p>La función <a class="reference internal" href="../library/itertools.html#itertools.count" title="itertools.count"><code class="xref py py-func docutils literal notranslate"><span class="pre">itertools.count()</span></code></a> tiene ahora un argumento <em>step</em> que permite incrementar por valores distintos de 1. <a class="reference internal" href="../library/itertools.html#itertools.count" title="itertools.count"><code class="xref py py-func docutils literal notranslate"><span class="pre">count()</span></code></a> también permite ahora argumentos de palabra clave, y utilizar valores no enteros como números de punto flotante o instancias de <a class="reference internal" href="../library/decimal.html#decimal.Decimal" title="decimal.Decimal"><code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code></a>.  (Implementado por Raymond Hettinger; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5032">bpo-5032</a>.)</p>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">itertools.combinaciones()</span></code> y <code class="xref py py-func docutils literal notranslate"><span class="pre">itertools.producto()</span></code> anteriormente lanzaban <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> para valores de <em>r</em> mayores que el iterable de entrada.  Esto se consideraba un error de especificación, por lo que ahora retornan un iterador vacío.  (Corregido por Raymond Hettinger; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=4816">bpo-4816</a>.)</p>
</li>
<li><p>Módulo actualizado: El módulo <a class="reference internal" href="../library/json.html#module-json" title="json: Encode and decode the JSON format."><code class="xref py py-mod docutils literal notranslate"><span class="pre">json</span></code></a> ha sido actualizado a la versión 2.0.9 del paquete simplejson, que incluye una extensión en C que hace más rápida la codificación y decodificación. (Contribuido por Bob Ippolito; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=4136">bpo-4136</a>.)</p>
<p>Para soportar el nuevo tipo <a class="reference internal" href="../library/collections.html#collections.OrderedDict" title="collections.OrderedDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.OrderedDict</span></code></a>, <a class="reference internal" href="../library/json.html#json.load" title="json.load"><code class="xref py py-func docutils literal notranslate"><span class="pre">json.load()</span></code></a> tiene ahora un parámetro opcional <em>object_pairs_hook</em> que será llamado con cualquier objeto literal que decodifique a una lista de pares. (Contribución de Raymond Hettinger; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5381">bpo-5381</a>.)</p>
</li>
<li><p>La clase <a class="reference internal" href="../library/mailbox.html#module-mailbox" title="mailbox: Manipulate mailboxes in various formats"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mailbox</span></code></a> del módulo <a class="reference internal" href="../library/mailbox.html#mailbox.Maildir" title="mailbox.Maildir"><code class="xref py py-class docutils literal notranslate"><span class="pre">Maildir</span></code></a> ahora registra la marca de tiempo de los directorios que lee, y sólo los relee si la hora de modificación ha cambiado posteriormente.  Esto mejora el rendimiento al evitar escaneos innecesarios de directorios.  (Corregido por A.M. Kuchling y Antoine Pitrou; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1607951">bpo-1607951</a>, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=6896">bpo-6896</a>)</p></li>
<li><p>Nuevas funciones: el módulo <a class="reference internal" href="../library/math.html#module-math" title="math: Mathematical functions (sin() etc.)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">math</span></code></a> ganó <a class="reference internal" href="../library/math.html#math.erf" title="math.erf"><code class="xref py py-func docutils literal notranslate"><span class="pre">erf()</span></code></a> y <a class="reference internal" href="../library/math.html#math.erfc" title="math.erfc"><code class="xref py py-func docutils literal notranslate"><span class="pre">erfc()</span></code></a> para la función de error y la función de error complementaria, <a class="reference internal" href="../library/math.html#math.expm1" title="math.expm1"><code class="xref py py-func docutils literal notranslate"><span class="pre">expm1()</span></code></a> que calcula <code class="docutils literal notranslate"><span class="pre">e**x</span> <span class="pre">-</span> <span class="pre">1</span></code> con más precisión que usando <a class="reference internal" href="../library/math.html#math.exp" title="math.exp"><code class="xref py py-func docutils literal notranslate"><span class="pre">exp()</span></code></a> y restando 1, <a class="reference internal" href="../library/math.html#math.gamma" title="math.gamma"><code class="xref py py-func docutils literal notranslate"><span class="pre">gamma()</span></code></a> para la función Gamma, y <a class="reference internal" href="../library/math.html#math.lgamma" title="math.lgamma"><code class="xref py py-func docutils literal notranslate"><span class="pre">lgamma()</span></code></a> para el logaritmo natural de la función Gamma. (Contribución de Mark Dickinson y nirinA raseliarison; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=3366">bpo-3366</a>.)</p></li>
<li><p>A las clases <a class="reference internal" href="../library/multiprocessing.html#module-multiprocessing" title="multiprocessing: Process-based parallelism."><code class="xref py py-mod docutils literal notranslate"><span class="pre">multiprocessing</span></code></a> del módulo <code class="xref py py-class docutils literal notranslate"><span class="pre">Manager*</span></code> se les puede pasar ahora una llamada que se realizará cada vez que se inicie un subproceso, junto con un conjunto de argumentos que se pasarán a la llamada. (Contribuido por lekma; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5585">bpo-5585</a>.)</p>
<p>La clase <code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code>, que controla un grupo de procesos de trabajadores, tiene ahora un parámetro opcional <em>maxtasksperchild</em>.  Los procesos de trabajo realizarán el número especificado de tareas y luego saldrán, haciendo que la clase <code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code> inicie un nuevo trabajador.  Esto es útil si las tareas pueden perder memoria u otros recursos, o si algunas tareas harán que el trabajador se vuelva muy grande. (Contribuido por Charles Cazabon; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=6963">bpo-6963</a>.)</p>
</li>
<li><p>El módulo <a class="reference internal" href="../library/nntplib.html#module-nntplib" title="nntplib: NNTP protocol client (requires sockets). (obsoleto)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">nntplib</span></code></a> ahora soporta direcciones IPv6. (Contribución de Derek Morr; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1664">bpo-1664</a>.)</p></li>
<li><p>Nuevas funciones: el módulo <a class="reference internal" href="../library/os.html#module-os" title="os: Miscellaneous operating system interfaces."><code class="xref py py-mod docutils literal notranslate"><span class="pre">os</span></code></a> envuelve las siguientes llamadas al sistema POSIX: <a class="reference internal" href="../library/os.html#os.getresgid" title="os.getresgid"><code class="xref py py-func docutils literal notranslate"><span class="pre">getresgid()</span></code></a> y <a class="reference internal" href="../library/os.html#os.getresuid" title="os.getresuid"><code class="xref py py-func docutils literal notranslate"><span class="pre">getresuid()</span></code></a>, que retornan los GIDs y UIDs reales, efectivos y guardados; <a class="reference internal" href="../library/os.html#os.setresgid" title="os.setresgid"><code class="xref py py-func docutils literal notranslate"><span class="pre">setresgid()</span></code></a> y <a class="reference internal" href="../library/os.html#os.setresuid" title="os.setresuid"><code class="xref py py-func docutils literal notranslate"><span class="pre">setresuid()</span></code></a>, que establecen los GIDs y UIDs reales, efectivos y guardados a nuevos valores; <a class="reference internal" href="../library/os.html#os.initgroups" title="os.initgroups"><code class="xref py py-func docutils literal notranslate"><span class="pre">initgroups()</span></code></a>, que inicializan la lista de acceso a grupos para el proceso actual.  (Funciones GID/UID contribuidas por Travis H.; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=6508">bpo-6508</a>.  Soporte para initgroups añadido por Jean-Paul Calderone; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7333">bpo-7333</a>)</p>
<p>La función <a class="reference internal" href="../library/os.html#os.fork" title="os.fork"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.fork()</span></code></a> ahora reinicializa el bloqueo de importación en el proceso hijo; esto soluciona los problemas en Solaris cuando <a class="reference internal" href="../library/os.html#os.fork" title="os.fork"><code class="xref py py-func docutils literal notranslate"><span class="pre">fork()</span></code></a> se llama desde un hilo.  (Corregido por Zsolt Cserna; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7242">bpo-7242</a>.)</p>
</li>
<li><p>En el módulo <a class="reference internal" href="../library/os.path.html#module-os.path" title="os.path: Operations on pathnames."><code class="xref py py-mod docutils literal notranslate"><span class="pre">os.path</span></code></a>, las funciones <a class="reference internal" href="../library/os.path.html#os.path.normpath" title="os.path.normpath"><code class="xref py py-func docutils literal notranslate"><span class="pre">normpath()</span></code></a> y <a class="reference internal" href="../library/os.path.html#os.path.abspath" title="os.path.abspath"><code class="xref py py-func docutils literal notranslate"><span class="pre">abspath()</span></code></a> ahora preservan Unicode; si su ruta de entrada es una cadena Unicode, el valor de retorno es también una cadena Unicode. (<a class="reference internal" href="../library/os.path.html#os.path.normpath" title="os.path.normpath"><code class="xref py py-meth docutils literal notranslate"><span class="pre">normpath()</span></code></a> arreglado por Matt Giuca en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5827">bpo-5827</a>; <a class="reference internal" href="../library/os.path.html#os.path.abspath" title="os.path.abspath"><code class="xref py py-meth docutils literal notranslate"><span class="pre">abspath()</span></code></a> arreglado por Ezio Melotti en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=3426">bpo-3426</a>)</p></li>
<li><p>El módulo <a class="reference internal" href="../library/pydoc.html#module-pydoc" title="pydoc: Documentation generator and online help system."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pydoc</span></code></a> tiene ahora ayuda para los distintos símbolos que utiliza Python.  Ahora puedes hacer <code class="docutils literal notranslate"><span class="pre">help('&lt;&lt;')</span></code> o <code class="docutils literal notranslate"><span class="pre">help('&#64;')</span></code>, por ejemplo. (Contribución de David Laban; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=4739">bpo-4739</a>.)</p></li>
<li><p>Las funciones <a class="reference internal" href="../library/re.html#module-re" title="re: Regular expression operations."><code class="xref py py-mod docutils literal notranslate"><span class="pre">re</span></code></a> del módulo <a class="reference internal" href="../library/re.html#re.split" title="re.split"><code class="xref py py-func docutils literal notranslate"><span class="pre">split()</span></code></a>, <a class="reference internal" href="../library/re.html#re.sub" title="re.sub"><code class="xref py py-func docutils literal notranslate"><span class="pre">sub()</span></code></a> y <a class="reference internal" href="../library/re.html#re.subn" title="re.subn"><code class="xref py py-func docutils literal notranslate"><span class="pre">subn()</span></code></a> aceptan ahora un argumento opcional <em>flags</em>, por coherencia con las demás funciones del módulo.  (Añadido por Gregory P. Smith)</p></li>
<li><p>Nueva función: <a class="reference internal" href="../library/runpy.html#runpy.run_path" title="runpy.run_path"><code class="xref py py-func docutils literal notranslate"><span class="pre">run_path()</span></code></a> en el módulo <a class="reference internal" href="../library/runpy.html#module-runpy" title="runpy: Locate and run Python modules without importing them first."><code class="xref py py-mod docutils literal notranslate"><span class="pre">runpy</span></code></a> ejecutará el código en un argumento <em>ruta</em> proporcionado.  <em>path</em> puede ser la ruta de un fichero fuente de Python (<code class="file docutils literal notranslate"><span class="pre">ejemplo.py</span></code>), un fichero bytecode compilado (<code class="file docutils literal notranslate"><span class="pre">ejemplo.pyc</span></code>), un directorio (<code class="file docutils literal notranslate"><span class="pre">./package/</span></code>), o un archivo zip (<code class="file docutils literal notranslate"><span class="pre">ejemplo.zip</span></code>).  Si se proporciona un directorio o una ruta zip, se añadirá al frente de <code class="docutils literal notranslate"><span class="pre">sys.path</span></code> y se importará el módulo <a class="reference internal" href="../library/__main__.html#module-__main__" title="__main__: The environment where top-level code is run. Covers command-line interfaces, import-time behavior, and ``__name__ == '__main__'``."><code class="xref py py-mod docutils literal notranslate"><span class="pre">__main__</span></code></a>.  Se espera que el directorio o zip contenga un <code class="file docutils literal notranslate"><span class="pre">__main__.py</span></code>; si no es así, algún otro <code class="file docutils literal notranslate"><span class="pre">__main__.py</span></code> podría ser importado desde una ubicación posterior en <code class="docutils literal notranslate"><span class="pre">sys.path</span></code>.  Esto hace que más de la maquinaria de <a class="reference internal" href="../library/runpy.html#module-runpy" title="runpy: Locate and run Python modules without importing them first."><code class="xref py py-mod docutils literal notranslate"><span class="pre">runpy</span></code></a> esté disponible para los scripts que quieran imitar la forma en que la línea de comandos de Python procesa un nombre de ruta explícito. (Añadido por Nick Coghlan; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=6816">bpo-6816</a>.)</p></li>
<li><p>Nueva función: en el módulo <a class="reference internal" href="../library/shutil.html#module-shutil" title="shutil: High-level file operations, including copying."><code class="xref py py-mod docutils literal notranslate"><span class="pre">shutil</span></code></a>, <a class="reference internal" href="../library/shutil.html#shutil.make_archive" title="shutil.make_archive"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_archive()</span></code></a> toma un nombre de fichero, un tipo de archivo (formato zip o tar) y una ruta de directorio, y crea un archivo con el contenido del directorio. (Añadido por Tarek Ziadé.)</p>
<p>Las funciones <a class="reference internal" href="../library/shutil.html#module-shutil" title="shutil: High-level file operations, including copying."><code class="xref py py-mod docutils literal notranslate"><span class="pre">shutil</span></code></a> <a class="reference internal" href="../library/shutil.html#shutil.copyfile" title="shutil.copyfile"><code class="xref py py-func docutils literal notranslate"><span class="pre">copyfile()</span></code></a> y <a class="reference internal" href="../library/shutil.html#shutil.copytree" title="shutil.copytree"><code class="xref py py-func docutils literal notranslate"><span class="pre">copytree()</span></code></a> ahora lanzan una excepción <code class="xref py py-exc docutils literal notranslate"><span class="pre">SpecialFileError</span></code> cuando se les pide que copien una tubería con nombre.  Anteriormente, el código trataba las tuberías con nombre como un archivo normal, abriéndolas para su lectura, lo que bloqueaba indefinidamente.  (Corregido por Antoine Pitrou; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=3002">bpo-3002</a>.)</p>
</li>
<li><p>El módulo <a class="reference internal" href="../library/signal.html#module-signal" title="signal: Set handlers for asynchronous events."><code class="xref py py-mod docutils literal notranslate"><span class="pre">signal</span></code></a> ya no reinstala el manejador de señales a menos que sea realmente necesario, lo que corrige un error que podía hacer imposible atrapar la señal EINTR de forma robusta.  (Corregido por Charles-Francois Natali; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8354">bpo-8354</a>.)</p></li>
<li><p>Nuevas funciones: en el módulo <a class="reference internal" href="../library/site.html#module-site" title="site: Module responsible for site-specific configuration."><code class="xref py py-mod docutils literal notranslate"><span class="pre">site</span></code></a>, tres nuevas funciones retornan varias rutas específicas del sitio y del usuario. <a class="reference internal" href="../library/site.html#site.getsitepackages" title="site.getsitepackages"><code class="xref py py-func docutils literal notranslate"><span class="pre">getsitepackages()</span></code></a> retorna una lista que contiene todos los directorios globales de paquetes del sitio, <a class="reference internal" href="../library/site.html#site.getusersitepackages" title="site.getusersitepackages"><code class="xref py py-func docutils literal notranslate"><span class="pre">getusersitepackages()</span></code></a> retorna la ruta del directorio de paquetes del sitio del usuario, y <a class="reference internal" href="../library/site.html#site.getuserbase" title="site.getuserbase"><code class="xref py py-func docutils literal notranslate"><span class="pre">getuserbase()</span></code></a> retorna el valor de la variable de entorno <span class="target" id="index-60"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">USER_BASE</span></code>, dando la ruta a un directorio que puede ser utilizado para almacenar datos. (Contribuido por Tarek Ziadé; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=6693">bpo-6693</a>.)</p>
<p>El módulo <a class="reference internal" href="../library/site.html#module-site" title="site: Module responsible for site-specific configuration."><code class="xref py py-mod docutils literal notranslate"><span class="pre">site</span></code></a> ahora informa de las excepciones que se producen cuando se importa el módulo <code class="xref py py-mod docutils literal notranslate"><span class="pre">sitecustomize</span></code>, y ya no atrapará y tragará la excepción <a class="reference internal" href="../library/exceptions.html#KeyboardInterrupt" title="KeyboardInterrupt"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KeyboardInterrupt</span></code></a>.  (Corregido por Victor Stinner; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=3137">bpo-3137</a>.)</p>
</li>
<li><p>La función <a class="reference internal" href="../library/socket.html#socket.create_connection" title="socket.create_connection"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_connection()</span></code></a> ganó un parámetro <em>dirección_de_origen</em>, una 2-tupla <code class="docutils literal notranslate"><span class="pre">(host,</span> <span class="pre">port)</span></code> que da la dirección de origen que se utilizará para la conexión. (Contribuido por Eldon Ziegler; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=3972">bpo-3972</a>.)</p>
<p>Los métodos <a class="reference internal" href="../library/socket.html#socket.socket.recv_into" title="socket.socket.recv_into"><code class="xref py py-meth docutils literal notranslate"><span class="pre">recv_into()</span></code></a> y <a class="reference internal" href="../library/socket.html#socket.socket.recvfrom_into" title="socket.socket.recvfrom_into"><code class="xref py py-meth docutils literal notranslate"><span class="pre">recvfrom_into()</span></code></a> ahora escribirán en objetos que soporten la API de búfer, más útilmente los objetos <a class="reference internal" href="../library/stdtypes.html#bytearray" title="bytearray"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytearray</span></code></a> y <a class="reference internal" href="../library/stdtypes.html#memoryview" title="memoryview"><code class="xref py py-class docutils literal notranslate"><span class="pre">memoryview</span></code></a>.  (Implementado por Antoine Pitrou; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8104">bpo-8104</a>.)</p>
</li>
<li><p>La clase <code class="xref py py-mod docutils literal notranslate"><span class="pre">SocketServer</span></code> del módulo <code class="xref py py-class docutils literal notranslate"><span class="pre">TCPServer</span></code> soporta ahora los tiempos de espera de los sockets y la desactivación del algoritmo Nagle. El atributo de clase <code class="xref py py-attr docutils literal notranslate"><span class="pre">disable_nagle_algorithm</span></code> tiene por defecto el valor <code class="docutils literal notranslate"><span class="pre">False</span></code>; si se anula para que sea verdadero, las nuevas conexiones de solicitud tendrán la opción TCP_NODELAY establecida para evitar el almacenamiento en búfer de muchos envíos pequeños en un solo paquete TCP. El atributo de clase <code class="xref py py-attr docutils literal notranslate"><span class="pre">timeout</span></code> puede contener un tiempo de espera en segundos que se aplicará al socket de petición; si no se recibe ninguna petición en ese tiempo, se llamará a <code class="xref py py-meth docutils literal notranslate"><span class="pre">handle_timeout()</span></code> y se retornará <code class="xref py py-meth docutils literal notranslate"><span class="pre">handle_request()</span></code>. (Contribución de Kristján Valur Jónsson; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=6192">bpo-6192</a> y <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=6267">bpo-6267</a>)</p></li>
<li><p>Módulo actualizado: el módulo <a class="reference internal" href="../library/sqlite3.html#module-sqlite3" title="sqlite3: A DB-API 2.0 implementation using SQLite 3.x."><code class="xref py py-mod docutils literal notranslate"><span class="pre">sqlite3</span></code></a> ha sido actualizado a la versión 2.6.0 del paquete <a class="reference external" href="https://github.com/ghaering/pysqlite">pysqlite</a>. La versión 2.6.0 incluye una serie de correcciones de errores y añade la posibilidad de cargar extensiones de SQLite desde bibliotecas compartidas. Llame al método <code class="docutils literal notranslate"><span class="pre">enable_load_extension(True)</span></code> para habilitar las extensiones, y luego llame a <a class="reference internal" href="../library/sqlite3.html#sqlite3.Connection.load_extension" title="sqlite3.Connection.load_extension"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_extension()</span></code></a> para cargar una biblioteca compartida en particular. (Actualizado por Gerhard Häring.)</p></li>
<li><p>Los objetos <a class="reference internal" href="../library/ssl.html#ssl.SSLSocket" title="ssl.SSLSocket"><code class="xref py py-class docutils literal notranslate"><span class="pre">SSLSocket</span></code></a> del módulo <a class="reference internal" href="../library/ssl.html#module-ssl" title="ssl: TLS/SSL wrapper for socket objects"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ssl</span></code></a> soportan ahora la API del buffer, lo que soluciona un fallo del conjunto de pruebas (corregido por Antoine Pitrou; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7133">bpo-7133</a>) y establece automáticamente la <code class="xref c c-macro docutils literal notranslate"><span class="pre">SSL_MODE_AUTO_RETRY</span></code> de OpenSSL, lo que evitará que se retorne un código de error de las operaciones <code class="xref py py-meth docutils literal notranslate"><span class="pre">recv()</span></code> que desencadenen una renegociación SSL (corregido por Antoine Pitrou; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8222">bpo-8222</a>).</p>
<p>The <a class="reference internal" href="../library/ssl.html#ssl.wrap_socket" title="ssl.wrap_socket"><code class="xref py py-func docutils literal notranslate"><span class="pre">ssl.wrap_socket()</span></code></a> constructor function now takes a
<em>ciphers</em> argument that’s a string listing the encryption algorithms
to be allowed; the format of the string is described
<a class="reference external" href="https://www.openssl.org/docs/man1.0.2/man1/ciphers.html">in the OpenSSL documentation</a>.
(Added by Antoine Pitrou; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8322">bpo-8322</a>.)</p>
<p>Otro cambio hace que la extensión cargue todos los cifrados y algoritmos de compendio de OpenSSL para que estén todos disponibles.  Algunos certificados SSL no podían ser verificados, reportando un error de «algoritmo desconocido».  (Informado por Beda Kosata, y corregido por Antoine Pitrou; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8484">bpo-8484</a>)</p>
<p>La versión de OpenSSL que se está utilizando está ahora disponible como los atributos del módulo <a class="reference internal" href="../library/ssl.html#ssl.OPENSSL_VERSION" title="ssl.OPENSSL_VERSION"><code class="xref py py-data docutils literal notranslate"><span class="pre">ssl.OPENSSL_VERSION</span></code></a> (una cadena), <a class="reference internal" href="../library/ssl.html#ssl.OPENSSL_VERSION_INFO" title="ssl.OPENSSL_VERSION_INFO"><code class="xref py py-data docutils literal notranslate"><span class="pre">ssl.OPENSSL_VERSION_INFO</span></code></a> (una 5-tupla), y <a class="reference internal" href="../library/ssl.html#ssl.OPENSSL_VERSION_NUMBER" title="ssl.OPENSSL_VERSION_NUMBER"><code class="xref py py-data docutils literal notranslate"><span class="pre">ssl.OPENSSL_VERSION_NUMBER</span></code></a> (un entero).  (Añadido por Antoine Pitrou; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8321">bpo-8321</a>.)</p>
</li>
<li><p>El módulo <a class="reference internal" href="../library/struct.html#module-struct" title="struct: Interpret bytes as packed binary data."><code class="xref py py-mod docutils literal notranslate"><span class="pre">struct</span></code></a> ya no ignorará silenciosamente los errores de desbordamiento cuando un valor es demasiado grande para un código de formato entero particular (uno de <code class="docutils literal notranslate"><span class="pre">bBhHiIlLqQ</span></code>); ahora siempre lanza una excepción <a class="reference internal" href="../library/struct.html#struct.error" title="struct.error"><code class="xref py py-exc docutils literal notranslate"><span class="pre">struct.error</span></code></a>.  (Cambiado por Mark Dickinson; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1523">bpo-1523</a>.) La función <a class="reference internal" href="../library/struct.html#struct.pack" title="struct.pack"><code class="xref py py-func docutils literal notranslate"><span class="pre">pack()</span></code></a> también intentará utilizar <code class="xref py py-meth docutils literal notranslate"><span class="pre">__index__()</span></code> para convertir y empaquetar los no enteros antes de intentar el método <code class="xref py py-meth docutils literal notranslate"><span class="pre">__int__()</span></code> o informar de un error. (Cambiado por Mark Dickinson; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8300">bpo-8300</a>.)</p></li>
<li><p>Nueva función: la función <a class="reference internal" href="../library/subprocess.html#subprocess.check_output" title="subprocess.check_output"><code class="xref py py-func docutils literal notranslate"><span class="pre">check_output()</span></code></a> del módulo <a class="reference internal" href="../library/subprocess.html#module-subprocess" title="subprocess: Subprocess management."><code class="xref py py-mod docutils literal notranslate"><span class="pre">subprocess</span></code></a> ejecuta un comando con un conjunto de argumentos especificado y retorna la salida del comando como una cadena de texto cuando el comando se ejecuta sin errores, o lanza una excepción <a class="reference internal" href="../library/subprocess.html#subprocess.CalledProcessError" title="subprocess.CalledProcessError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">CalledProcessError</span></code></a> en caso contrario.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">subprocess</span><span class="o">.</span><span class="n">check_output</span><span class="p">([</span><span class="s1">&#39;df&#39;</span><span class="p">,</span> <span class="s1">&#39;-h&#39;</span><span class="p">,</span> <span class="s1">&#39;.&#39;</span><span class="p">])</span>
<span class="go">&#39;Filesystem     Size   Used  Avail Capacity  Mounted on\n</span>
<span class="go">/dev/disk0s2    52G    49G   3.0G    94%    /\n&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">subprocess</span><span class="o">.</span><span class="n">check_output</span><span class="p">([</span><span class="s1">&#39;df&#39;</span><span class="p">,</span> <span class="s1">&#39;-h&#39;</span><span class="p">,</span> <span class="s1">&#39;/bogus&#39;</span><span class="p">])</span>
<span class="go">  ...</span>
<span class="go">subprocess.CalledProcessError: Command &#39;[&#39;df&#39;, &#39;-h&#39;, &#39;/bogus&#39;]&#39; returned non-zero exit status 1</span>
</pre></div>
</div>
<p>(Contribución de Gregory P. Smith.)</p>
<p>El módulo <a class="reference internal" href="../library/subprocess.html#module-subprocess" title="subprocess: Subprocess management."><code class="xref py py-mod docutils literal notranslate"><span class="pre">subprocess</span></code></a> ahora reintentará sus llamadas internas al sistema al recibir una señal <code class="xref py py-const docutils literal notranslate"><span class="pre">EINTR</span></code>.  (Informado por varias personas; parche final de Gregory P. Smith en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1068268">bpo-1068268</a>)</p>
</li>
<li><p>Nueva función: <a class="reference internal" href="../library/symtable.html#symtable.Symbol.is_declared_global" title="symtable.Symbol.is_declared_global"><code class="xref py py-func docutils literal notranslate"><span class="pre">is_declared_global()</span></code></a> en el módulo <a class="reference internal" href="../library/symtable.html#module-symtable" title="symtable: Interface to the compiler's internal symbol tables."><code class="xref py py-mod docutils literal notranslate"><span class="pre">symtable</span></code></a> retorna true para las variables declaradas explícitamente como globales, false para las que son implícitamente globales. (Contribución de Jeremy Hylton)</p></li>
<li><p>El módulo <a class="reference internal" href="../library/syslog.html#module-syslog" title="syslog: An interface to the Unix syslog library routines. (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">syslog</span></code></a> utilizará ahora el valor de <code class="docutils literal notranslate"><span class="pre">sys.argv[0]</span></code> como identificador en lugar del anterior valor por defecto de <code class="docutils literal notranslate"><span class="pre">'python</span></code>. (Cambiado por Sean Reifschneider; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8451">bpo-8451</a>.)</p></li>
<li><p>El valor de <code class="docutils literal notranslate"><span class="pre">sys.version_info</span></code> es ahora una tupla con nombre, con atributos llamados <code class="xref py py-attr docutils literal notranslate"><span class="pre">major</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">minor</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">micro</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">releaselevel</span></code>, y <code class="xref py py-attr docutils literal notranslate"><span class="pre">serial</span></code>.  (Contribución de Ross Light; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=4285">bpo-4285</a>.)</p>
<p><a class="reference internal" href="../library/sys.html#sys.getwindowsversion" title="sys.getwindowsversion"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.getwindowsversion()</span></code></a> también retorna una tupla con nombre, con atributos llamados <code class="xref py py-attr docutils literal notranslate"><span class="pre">major</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">minor</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">build</span></code>, <a class="reference internal" href="../library/platform.html#module-platform" title="platform: Retrieves as much platform identifying data as possible."><code class="xref py py-attr docutils literal notranslate"><span class="pre">platform</span></code></a>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">service_pack</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">service_pack_major</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">service_pack_minor</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">suite_mask</span></code>, y <code class="xref py py-attr docutils literal notranslate"><span class="pre">product_type</span></code>.  (Contribución de Brian Curtin; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7766">bpo-7766</a>.)</p>
</li>
<li><p>El manejo de errores por defecto del módulo <a class="reference internal" href="../library/tarfile.html#module-tarfile" title="tarfile: Read and write tar-format archive files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">tarfile</span></code></a> ha cambiado, para no suprimir los errores fatales.  El nivel de error por defecto era antes 0, lo que significaba que los errores sólo daban lugar a que se escribiera un mensaje en el registro de depuración, pero como el registro de depuración no está activado por defecto, estos errores pasan desapercibidos.  El nivel de error por defecto es ahora 1, que lanza una excepción si hay un error. (Cambiado por Lars Gustäbel; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7357">bpo-7357</a>.)</p>
<p><a class="reference internal" href="../library/tarfile.html#module-tarfile" title="tarfile: Read and write tar-format archive files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">tarfile</span></code></a> ahora soporta el filtrado de los objetos <a class="reference internal" href="../library/tarfile.html#tarfile.TarInfo" title="tarfile.TarInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">TarInfo</span></code></a> que se añaden a un fichero tar.  Cuando llame a <a class="reference internal" href="../library/tarfile.html#tarfile.TarFile.add" title="tarfile.TarFile.add"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add()</span></code></a>, puede suministrar un argumento opcional <em>filtro</em> que es una llamada.  Al <em>filtro</em> se le pasará la clase <a class="reference internal" href="../library/tarfile.html#tarfile.TarInfo" title="tarfile.TarInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">TarInfo</span></code></a> de cada fichero que se añada, y podrá modificarlo y retornarlo. Si la llamada retorna <code class="docutils literal notranslate"><span class="pre">Nada</span></code>, el fichero será excluido del archivo resultante.  Esto es más potente que el argumento <em>exclude</em> existente, que por lo tanto ha sido obviado. (Añadido por Lars Gustäbel; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=6856">bpo-6856</a>.) La clase <a class="reference internal" href="../library/tarfile.html#tarfile.TarFile" title="tarfile.TarFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">TarFile</span></code></a> también soporta ahora el protocolo de gestión de contexto. (Añadido por Lars Gustäbel; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7232">bpo-7232</a>.)</p>
</li>
<li><p>El método <a class="reference internal" href="../library/threading.html#threading.Event.wait" title="threading.Event.wait"><code class="xref py py-meth docutils literal notranslate"><span class="pre">wait()</span></code></a> de la clase <a class="reference internal" href="../library/threading.html#threading.Event" title="threading.Event"><code class="xref py py-class docutils literal notranslate"><span class="pre">threading.Event</span></code></a> ahora retorna la bandera interna al salir.  Esto significa que el método normalmente retornará true porque <a class="reference internal" href="../library/threading.html#threading.Event.wait" title="threading.Event.wait"><code class="xref py py-meth docutils literal notranslate"><span class="pre">wait()</span></code></a> se supone que bloquea hasta que la bandera interna se convierte en true.  El valor de retorno sólo será falso si se proporcionó un tiempo de espera y la operación expiró. (Contribuido por Tim Lesher; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1674032">bpo-1674032</a>.)</p></li>
<li><p>La base de datos Unicode proporcionada por el módulo <a class="reference internal" href="../library/unicodedata.html#module-unicodedata" title="unicodedata: Access the Unicode Database."><code class="xref py py-mod docutils literal notranslate"><span class="pre">unicodedata</span></code></a> se utiliza ahora internamente para determinar qué caracteres son numéricos, espacios en blanco o representan saltos de línea.  La base de datos también incluye información del archivo de datos <code class="file docutils literal notranslate"><span class="pre">Unihan.txt</span></code> (parche de Anders Chrigström y Amaury Forgeot d’Arc; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1571184">bpo-1571184</a>) y se ha actualizado a la versión 5.2.0 (actualizado por Florent Xicluna; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8024">bpo-8024</a>).</p></li>
<li><p>La <code class="xref py py-func docutils literal notranslate"><span class="pre">urlsplit()</span></code> del módulo <code class="xref py py-mod docutils literal notranslate"><span class="pre">urlparse</span></code> maneja ahora los esquemas de URL desconocidos de una manera que cumple con <span class="target" id="index-61"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc3986.html"><strong>RFC 3986</strong></a>: si la URL es de la forma <code class="docutils literal notranslate"><span class="pre">&quot;&lt;something&gt;://...&quot;</span></code>, el texto que precede a <code class="docutils literal notranslate"><span class="pre">://</span></code> se trata como el esquema, incluso si es un esquema inventado que el módulo no conoce.  Este cambio puede romper el código que funcionaba con el antiguo comportamiento.  Por ejemplo, Python 2.6.4 o 2.5 retornará lo siguiente:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">urlparse</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">urlparse</span><span class="o">.</span><span class="n">urlsplit</span><span class="p">(</span><span class="s1">&#39;invented://host/filename?query&#39;</span><span class="p">)</span>
<span class="go">(&#39;invented&#39;, &#39;&#39;, &#39;//host/filename?query&#39;, &#39;&#39;, &#39;&#39;)</span>
</pre></div>
</div>
<p>Python 2.7 (y Python 2.6.5) retornará:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">urlparse</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">urlparse</span><span class="o">.</span><span class="n">urlsplit</span><span class="p">(</span><span class="s1">&#39;invented://host/filename?query&#39;</span><span class="p">)</span>
<span class="go">(&#39;invented&#39;, &#39;host&#39;, &#39;/filename?query&#39;, &#39;&#39;, &#39;&#39;)</span>
</pre></div>
</div>
<p>(Python 2.7 en realidad produce una salida ligeramente diferente, ya que retorna una tupla con nombre en lugar de una tupla estándar)</p>
<p>El módulo <code class="xref py py-mod docutils literal notranslate"><span class="pre">urlparse</span></code> también soporta las direcciones literales IPv6 definidas por <span class="target" id="index-62"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc2732.html"><strong>RFC 2732</strong></a> (contribuido por Senthil Kumaran; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=2987">bpo-2987</a>).</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">urlparse</span><span class="o">.</span><span class="n">urlparse</span><span class="p">(</span><span class="s1">&#39;http://[1080::8:800:200C:417A]/foo&#39;</span><span class="p">)</span>
<span class="go">ParseResult(scheme=&#39;http&#39;, netloc=&#39;[1080::8:800:200C:417A]&#39;,</span>
<span class="go">            path=&#39;/foo&#39;, params=&#39;&#39;, query=&#39;&#39;, fragment=&#39;&#39;)</span>
</pre></div>
</div>
</li>
<li><p>Nueva clase: la clase <a class="reference internal" href="../library/weakref.html#weakref.WeakSet" title="weakref.WeakSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">WeakSet</span></code></a> del módulo <a class="reference internal" href="../library/weakref.html#module-weakref" title="weakref: Support for weak references and weak dictionaries."><code class="xref py py-mod docutils literal notranslate"><span class="pre">weakref</span></code></a> es un conjunto que sólo contiene referencias débiles a sus elementos; los elementos serán eliminados una vez que no haya referencias que apunten a ellos. (Implementado originalmente en Python 3.x por Raymond Hettinger, y Portado a 2.7 por Michael Foord)</p></li>
<li><p>La biblioteca ElementTree, <code class="xref py py-mod docutils literal notranslate"><span class="pre">xml.etree</span></code>, ya no escapa los ampersands y los paréntesis angulares cuando se emite una instrucción de procesamiento XML (que tiene el aspecto de <code class="docutils literal notranslate"><span class="pre">&lt;?xml-stylesheet</span> <span class="pre">href=&quot;#style1&quot;?&gt;</span></code>) o un comentario (que tiene el aspecto de <code class="docutils literal notranslate"><span class="pre">&lt;!--</span> <span class="pre">comment</span> <span class="pre">--&gt;</span></code>). (Parche de Neil Muller; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=2746">bpo-2746</a>.)</p></li>
<li><p>El cliente y el servidor XML-RPC, proporcionados por los módulos <code class="xref py py-mod docutils literal notranslate"><span class="pre">xmlrpclib</span></code> y <code class="xref py py-mod docutils literal notranslate"><span class="pre">SimpleXMLRPCServer</span></code>, han mejorado su rendimiento al soportar HTTP/1.1 keep-alive y al utilizar opcionalmente la codificación gzip para comprimir el XML que se intercambia.  La compresión gzip está controlada por el atributo <code class="xref py py-attr docutils literal notranslate"><span class="pre">encode_threshold</span></code> de <code class="xref py py-class docutils literal notranslate"><span class="pre">SimpleXMLRPCRestHandler</span></code>, que contiene un tamaño en bytes; las respuestas más grandes que esto serán comprimidas. (Contribuido por Kristján Valur Jónsson; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=6267">bpo-6267</a>.)</p></li>
<li><p>El módulo <a class="reference internal" href="../library/zipfile.html#module-zipfile" title="zipfile: Read and write ZIP-format archive files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">zipfile</span></code></a> de <a class="reference internal" href="../library/zipfile.html#zipfile.ZipFile" title="zipfile.ZipFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">ZipFile</span></code></a> soporta ahora el protocolo de gestión de contexto, por lo que se puede escribir <code class="docutils literal notranslate"><span class="pre">con</span> <span class="pre">zipfile.ZipFile(...)</span> <span class="pre">como</span> <span class="pre">f:</span></code>. (Contribución de Brian Curtin; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5511">bpo-5511</a>.)</p>
<p><a class="reference internal" href="../library/zipfile.html#module-zipfile" title="zipfile: Read and write ZIP-format archive files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">zipfile</span></code></a> ahora también soporta el archivado de directorios vacíos y los extrae correctamente.  (Corregido por Kuba Wieczorek; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=4710">bpo-4710</a>.) La lectura de ficheros de un archivo es más rápida, y la intercalación de <a class="reference internal" href="../library/zipfile.html#zipfile.ZipFile.read" title="zipfile.ZipFile.read"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read()</span></code></a> y <code class="xref py py-meth docutils literal notranslate"><span class="pre">readline()</span></code> ahora funciona correctamente. (Contribución de Nir Aides; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7610">bpo-7610</a>.)</p>
<p>La función <a class="reference internal" href="../library/zipfile.html#zipfile.is_zipfile" title="zipfile.is_zipfile"><code class="xref py py-func docutils literal notranslate"><span class="pre">is_zipfile()</span></code></a> acepta ahora un objeto archivo, además de los nombres de ruta aceptados en versiones anteriores.  (Contribución de Gabriel Genellina; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=4756">bpo-4756</a>.)</p>
<p>El método <code class="xref py py-meth docutils literal notranslate"><span class="pre">writestr()</span></code> tiene ahora un parámetro opcional <em>compress_type</em> que permite anular el método de compresión por defecto especificado en el constructor <code class="xref py py-class docutils literal notranslate"><span class="pre">ZipFile</span></code>.  (Contribución de Ronald Oussoren; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=6003">bpo-6003</a>.)</p>
</li>
</ul>
<section id="new-module-importlib">
<span id="importlib-section"></span><h3>Nuevo módulo: importlib<a class="headerlink" href="#new-module-importlib" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Python 3.1 incluye el paquete <a class="reference internal" href="../library/importlib.html#module-importlib" title="importlib: The implementation of the import machinery."><code class="xref py py-mod docutils literal notranslate"><span class="pre">importlib</span></code></a>, una reimplementación de la lógica subyacente a la expresión <a class="reference internal" href="../reference/simple_stmts.html#import"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">import</span></code></a> de Python. <a class="reference internal" href="../library/importlib.html#module-importlib" title="importlib: The implementation of the import machinery."><code class="xref py py-mod docutils literal notranslate"><span class="pre">importlib</span></code></a> es útil para los implementadores de intérpretes de Python y para los usuarios que deseen escribir nuevos importadores que puedan participar en el proceso de importación.  Python 2.7 no contiene el paquete <a class="reference internal" href="../library/importlib.html#module-importlib" title="importlib: The implementation of the import machinery."><code class="xref py py-mod docutils literal notranslate"><span class="pre">importlib</span></code></a> completo, sino que tiene un pequeño subconjunto que contiene una única función, <a class="reference internal" href="../library/importlib.html#importlib.import_module" title="importlib.import_module"><code class="xref py py-func docutils literal notranslate"><span class="pre">import_module()</span></code></a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">import_module(name,</span> <span class="pre">package=None)</span></code> importa un módulo.  <em>name</em> es una cadena que contiene el nombre del módulo o paquete.  Es posible realizar importaciones relativas proporcionando una cadena que comience con un carácter <code class="docutils literal notranslate"><span class="pre">.</span></code>, como <code class="docutils literal notranslate"><span class="pre">..utils.errors</span></code>.  Para las importaciones relativas, el argumento <em>paquete</em> debe ser proporcionado y es el nombre del paquete que se utilizará como ancla para la importación relativa. <a class="reference internal" href="../library/importlib.html#importlib.import_module" title="importlib.import_module"><code class="xref py py-func docutils literal notranslate"><span class="pre">import_module()</span></code></a> inserta el módulo importado en <code class="docutils literal notranslate"><span class="pre">sys.modules</span></code> y retorna el objeto módulo.</p>
<p>He aquí algunos ejemplos:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">importlib</span> <span class="kn">import</span> <span class="n">import_module</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">anydbm</span> <span class="o">=</span> <span class="n">import_module</span><span class="p">(</span><span class="s1">&#39;anydbm&#39;</span><span class="p">)</span>  <span class="c1"># Standard absolute import</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">anydbm</span>
<span class="go">&lt;module &#39;anydbm&#39; from &#39;/p/python/Lib/anydbm.py&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Relative import</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">file_util</span> <span class="o">=</span> <span class="n">import_module</span><span class="p">(</span><span class="s1">&#39;..file_util&#39;</span><span class="p">,</span> <span class="s1">&#39;distutils.command&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">file_util</span>
<span class="go">&lt;module &#39;distutils.file_util&#39; from &#39;/python/Lib/distutils/file_util.pyc&#39;&gt;</span>
</pre></div>
</div>
<p><a class="reference internal" href="../library/importlib.html#module-importlib" title="importlib: The implementation of the import machinery."><code class="xref py py-mod docutils literal notranslate"><span class="pre">importlib</span></code></a> fue implementado por Brett Cannon e introducido en Python 3.1.</p>
</section>
<section id="new-module-sysconfig">
<h3>Nuevo módulo: sysconfig<a class="headerlink" href="#new-module-sysconfig" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El módulo <a class="reference internal" href="../library/sysconfig.html#module-sysconfig" title="sysconfig: Python's configuration information"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sysconfig</span></code></a> ha sido retirado del paquete Distutils, convirtiéndose en un nuevo módulo de alto nivel por derecho propio. <a class="reference internal" href="../library/sysconfig.html#module-sysconfig" title="sysconfig: Python's configuration information"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sysconfig</span></code></a> proporciona funciones para obtener información sobre el proceso de construcción de Python: interruptores del compilador, rutas de instalación, el nombre de la plataforma y si Python se está ejecutando desde su directorio fuente.</p>
<p>Algunas de las funciones del módulo son:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../library/sysconfig.html#sysconfig.get_config_var" title="sysconfig.get_config_var"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_config_var()</span></code></a> retorna variables del Makefile de Python y del fichero <code class="file docutils literal notranslate"><span class="pre">pyconfig.h</span></code>.</p></li>
<li><p><a class="reference internal" href="../library/sysconfig.html#sysconfig.get_config_vars" title="sysconfig.get_config_vars"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_config_vars()</span></code></a> retorna un diccionario que contiene todas las variables de configuración.</p></li>
<li><p><a class="reference internal" href="../library/sysconfig.html#sysconfig.get_path" title="sysconfig.get_path"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_path()</span></code></a> retorna la ruta configurada para un tipo de módulo concreto: la biblioteca estándar, módulos específicos del sitio, módulos específicos de la plataforma, etc.</p></li>
<li><p><a class="reference internal" href="../library/sysconfig.html#sysconfig.is_python_build" title="sysconfig.is_python_build"><code class="xref py py-func docutils literal notranslate"><span class="pre">is_python_build()</span></code></a> retorna true si está ejecutando un binario desde un árbol de fuentes de Python, y false en caso contrario.</p></li>
</ul>
<p>Consulte la documentación de <a class="reference internal" href="../library/sysconfig.html#module-sysconfig" title="sysconfig: Python's configuration information"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sysconfig</span></code></a> para más detalles y para una lista completa de funciones.</p>
<p>El paquete Distutils y <a class="reference internal" href="../library/sysconfig.html#module-sysconfig" title="sysconfig: Python's configuration information"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sysconfig</span></code></a> son ahora mantenidos por Tarek Ziadé, que también ha iniciado un paquete Distutils2 (repositorio de fuentes en <a class="reference external" href="https://hg.python.org/distutils2/">https://hg.python.org/distutils2/</a>) para desarrollar una versión de próxima generación de Distutils.</p>
</section>
<section id="ttk-themed-widgets-for-tk">
<h3>ttk: Widgets temáticos para Tk<a class="headerlink" href="#ttk-themed-widgets-for-tk" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Tcl/Tk 8.5 incluye un conjunto de widgets temáticos que reimplementan los widgets básicos de Tk pero tienen una apariencia más personalizable y, por tanto, pueden parecerse más a los widgets de la plataforma nativa.  Este conjunto de widgets se llamaba originalmente Tile, pero fue renombrado a Ttk (por «Tk temático») al ser añadido a la versión 8.5 de Tcl/Tck.</p>
<p>Para saber más, lea la documentación del módulo <code class="xref py py-mod docutils literal notranslate"><span class="pre">ttk</span></code>.  También puedes leer la página del manual Tcl/Tk que describe el motor de temas Ttk, disponible en <a class="reference external" href="https://www.tcl.tk/man/tcl8.5/TkCmd/ttk_intro.htm">https://www.tcl.tk/man/tcl8.5/TkCmd/ttk_intro.htm</a>. Algunas capturas de pantalla del código Python/Ttk en uso están en <a class="reference external" href="https://code.google.com/archive/p/python-ttk/wikis/Screenshots.wiki">https://code.google.com/archive/p/python-ttk/wikis/Screenshots.wiki</a>.</p>
<p>El módulo <code class="xref py py-mod docutils literal notranslate"><span class="pre">ttk</span></code> fue escrito por Guilherme Polo y añadido en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=2983">bpo-2983</a>.  Una versión alternativa llamada <code class="docutils literal notranslate"><span class="pre">Tile.py</span></code>, escrita por Martin Franklin y mantenida por Kevin Walzer, fue propuesta para su inclusión en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=2618">bpo-2618</a>, pero los autores argumentaron que el trabajo de Guilherme Polo era más completo.</p>
</section>
<section id="updated-module-unittest">
<span id="unittest-section"></span><h3>Módulo actualizado: unittest<a class="headerlink" href="#updated-module-unittest" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El módulo <a class="reference internal" href="../library/unittest.html#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal notranslate"><span class="pre">unittest</span></code></a> se ha mejorado mucho; se han añadido muchas funciones nuevas.  La mayoría de estas características fueron implementadas por Michael Foord, a menos que se indique lo contrario.  La versión mejorada del módulo puede descargarse por separado para su uso con las versiones 2.4 a 2.6 de Python, empaquetada como paquete <code class="xref py py-mod docutils literal notranslate"><span class="pre">unittest2</span></code>, en <a class="reference external" href="https://pypi.org/project/unittest2">https://pypi.org/project/unittest2</a>.</p>
<p>When used from the command line, the module can automatically discover
tests.  It’s not as fancy as <a class="reference external" href="https://pytest.org">py.test</a> or
<a class="reference external" href="https://nose.readthedocs.io/">nose</a>, but provides a
simple way to run tests kept within a set of package directories.  For example,
the following command will search the <code class="file docutils literal notranslate"><span class="pre">test/</span></code> subdirectory for
any importable test files named <code class="docutils literal notranslate"><span class="pre">test*.py</span></code>:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">unittest</span> <span class="n">discover</span> <span class="o">-</span><span class="n">s</span> <span class="n">test</span>
</pre></div>
</div>
<p>Consulte la documentación del módulo <a class="reference internal" href="../library/unittest.html#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal notranslate"><span class="pre">unittest</span></code></a> para más detalles. (Desarrollado en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=6001">bpo-6001</a>.)</p>
<p>La función <a class="reference internal" href="../library/unittest.html#unittest.main" title="unittest.main"><code class="xref py py-func docutils literal notranslate"><span class="pre">main()</span></code></a> soporta algunas otras opciones nuevas:</p>
<ul>
<li><p><a class="reference internal" href="../library/unittest.html#cmdoption-unittest-b"><code class="xref std std-option docutils literal notranslate"><span class="pre">-b</span></code></a> o <code class="xref std std-option docutils literal notranslate"><span class="pre">--buffer</span></code> almacenará en búfer la salida estándar y los flujos de error estándar durante cada prueba. Si la prueba pasa, se descartará cualquier salida resultante; en caso de falla, se mostrará la salida almacenada en búfer.</p></li>
<li><p><a class="reference internal" href="../library/unittest.html#cmdoption-unittest-c"><code class="xref std std-option docutils literal notranslate"><span class="pre">-c</span></code></a> o <code class="xref std std-option docutils literal notranslate"><span class="pre">--catch</span></code> hará que la interrupción de control-C se maneje con más gracia.  En lugar de interrumpir el proceso de prueba inmediatamente, se completará la prueba que se esté ejecutando en ese momento y luego se informará de los resultados parciales hasta la interrupción. Si está impaciente, una segunda pulsación de control-C provocará una interrupción inmediata.&lt;/unittest&gt;</p>
<p>Este manejador de control-C intenta evitar que se produzcan problemas cuando el código que se está probando o las pruebas que se están ejecutando han definido un manejador de señales propio, advirtiendo que ya se ha establecido un manejador de señales y llamándolo.  Si esto no te funciona, hay un decorador <a class="reference internal" href="../library/unittest.html#unittest.removeHandler" title="unittest.removeHandler"><code class="xref py py-func docutils literal notranslate"><span class="pre">removeHandler()</span></code></a> que puede utilizarse para marcar las pruebas que deben tener el manejador de control-C desactivado.</p>
</li>
<li><p><a class="reference internal" href="../library/unittest.html#cmdoption-unittest-f"><code class="xref std std-option docutils literal notranslate"><span class="pre">-f</span></code></a> o <code class="xref std std-option docutils literal notranslate"><span class="pre">--failfast</span></code> hace que la ejecución de la prueba se detenga inmediatamente cuando una prueba falla en lugar de continuar ejecutando más pruebas.  (Sugerido por Cliff Dyer e implementado por Michael Foord; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8074">bpo-8074</a>)&lt;/unittest&gt;</p></li>
</ul>
<p>Los mensajes de progreso ahora muestran “x” para los fallos esperados y “u” para los éxitos inesperados cuando se ejecuta en modo verboso. (Contribución de Benjamin Peterson)</p>
<p>Los casos de prueba pueden lanzar la excepción <a class="reference internal" href="../library/unittest.html#unittest.SkipTest" title="unittest.SkipTest"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SkipTest</span></code></a> para saltarse una prueba (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1034053">bpo-1034053</a>).</p>
<p>Los mensajes de error para los fallos <a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertEqual" title="unittest.TestCase.assertEqual"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertEqual()</span></code></a>, <a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertTrue" title="unittest.TestCase.assertTrue"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertTrue()</span></code></a>, y <a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertFalse" title="unittest.TestCase.assertFalse"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertFalse()</span></code></a> ahora proporcionan más información.  Si estableces el atributo <a class="reference internal" href="../library/unittest.html#unittest.TestCase.longMessage" title="unittest.TestCase.longMessage"><code class="xref py py-attr docutils literal notranslate"><span class="pre">longMessage</span></code></a> de tus clases <a class="reference internal" href="../library/unittest.html#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestCase</span></code></a> a true, tanto el mensaje de error estándar como cualquier mensaje adicional que proporciones se imprimirán para los fallos.  (Añadido por Michael Foord; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5663">bpo-5663</a>.)</p>
<p>El método <a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertRaises" title="unittest.TestCase.assertRaises"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertRaises()</span></code></a> ahora retorna un manejador de contexto cuando se llama sin proporcionar un objeto invocable para ejecutar.  Por ejemplo, puede escribir esto:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">KeyError</span><span class="p">):</span>
    <span class="p">{}[</span><span class="s1">&#39;foo&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>(Implementado por Antoine Pitrou; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=4444">bpo-4444</a>.)</p>
<p>Ahora se soportan las funciones de configuración y desmontaje a nivel de módulo y de clase. Los módulos pueden contener funciones <code class="xref py py-func docutils literal notranslate"><span class="pre">setUpModule()</span></code> y <code class="xref py py-func docutils literal notranslate"><span class="pre">tearDownModule()</span></code>.  Las clases pueden tener métodos <a class="reference internal" href="../library/unittest.html#unittest.TestCase.setUpClass" title="unittest.TestCase.setUpClass"><code class="xref py py-meth docutils literal notranslate"><span class="pre">setUpClass()</span></code></a> y <a class="reference internal" href="../library/unittest.html#unittest.TestCase.tearDownClass" title="unittest.TestCase.tearDownClass"><code class="xref py py-meth docutils literal notranslate"><span class="pre">tearDownClass()</span></code></a> que deben ser definidos como métodos de clase (usando <code class="docutils literal notranslate"><span class="pre">&#64;classmethod</span></code> o equivalente).  Estas funciones y métodos se invocan cuando el ejecutor de pruebas cambia a un caso de prueba en un módulo o clase diferente.</p>
<p>Se han añadido los métodos <a class="reference internal" href="../library/unittest.html#unittest.TestCase.addCleanup" title="unittest.TestCase.addCleanup"><code class="xref py py-meth docutils literal notranslate"><span class="pre">addCleanup()</span></code></a> y <a class="reference internal" href="../library/unittest.html#unittest.TestCase.doCleanups" title="unittest.TestCase.doCleanups"><code class="xref py py-meth docutils literal notranslate"><span class="pre">doCleanups()</span></code></a>. <a class="reference internal" href="../library/unittest.html#unittest.TestCase.addCleanup" title="unittest.TestCase.addCleanup"><code class="xref py py-meth docutils literal notranslate"><span class="pre">addCleanup()</span></code></a> permite añadir funciones de limpieza que serán llamadas incondicionalmente (después de <a class="reference internal" href="../library/unittest.html#unittest.TestCase.setUp" title="unittest.TestCase.setUp"><code class="xref py py-meth docutils literal notranslate"><span class="pre">setUp()</span></code></a> si <a class="reference internal" href="../library/unittest.html#unittest.TestCase.setUp" title="unittest.TestCase.setUp"><code class="xref py py-meth docutils literal notranslate"><span class="pre">setUp()</span></code></a> falla, en caso contrario después de <a class="reference internal" href="../library/unittest.html#unittest.TestCase.tearDown" title="unittest.TestCase.tearDown"><code class="xref py py-meth docutils literal notranslate"><span class="pre">tearDown()</span></code></a>). Esto permite una asignación y desasignación de recursos mucho más sencilla durante las pruebas (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5679">bpo-5679</a>).</p>
<p>Se añadieron varios métodos nuevos que proporcionan pruebas más especializadas.  Muchos de estos métodos fueron escritos por ingenieros de Google para utilizarlos en sus conjuntos de pruebas; Gregory P. Smith, Michael Foord y GvR trabajaron en la fusión de los mismos en la versión de Python de <a class="reference internal" href="../library/unittest.html#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal notranslate"><span class="pre">unittest</span></code></a>.</p>
<ul class="simple">
<li><p><a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertIsNone" title="unittest.TestCase.assertIsNone"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertIsNone()</span></code></a> y <a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertIsNotNone" title="unittest.TestCase.assertIsNotNone"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertIsNotNone()</span></code></a> toman una expresión y verifican que el resultado es o no es <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertIs" title="unittest.TestCase.assertIs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertIs()</span></code></a> y <a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertIsNot" title="unittest.TestCase.assertIsNot"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertIsNot()</span></code></a> toman dos valores y comprueban si los dos valores se evalúan al mismo objeto o no. (Añadido por Michael Foord; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=2578">bpo-2578</a>.)</p></li>
<li><p><a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertIsInstance" title="unittest.TestCase.assertIsInstance"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertIsInstance()</span></code></a> y <a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertNotIsInstance" title="unittest.TestCase.assertNotIsInstance"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertNotIsInstance()</span></code></a> comprueban si el objeto resultante es una instancia de una clase concreta, o de una tupla de clases.  (Añadido por Georg Brandl; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7031">bpo-7031</a>.)</p></li>
<li><p><a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertGreater" title="unittest.TestCase.assertGreater"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertGreater()</span></code></a>, <a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertGreaterEqual" title="unittest.TestCase.assertGreaterEqual"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertGreaterEqual()</span></code></a>, <a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertLess" title="unittest.TestCase.assertLess"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertLess()</span></code></a>, y <a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertLessEqual" title="unittest.TestCase.assertLessEqual"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertLessEqual()</span></code></a> comparan dos cantidades.</p></li>
<li><p><a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertMultiLineEqual" title="unittest.TestCase.assertMultiLineEqual"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertMultiLineEqual()</span></code></a> compara dos cadenas, y si no son iguales, muestra una comparación útil que resalta las diferencias en las dos cadenas.  Esta comparación se utiliza ahora por defecto cuando las cadenas Unicode se comparan con <a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertEqual" title="unittest.TestCase.assertEqual"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertEqual()</span></code></a>.</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertRegexpMatches()</span></code> y <code class="xref py py-meth docutils literal notranslate"><span class="pre">assertNotRegexpMatches()</span></code> comprueba si el primer argumento es una cadena que coincide o no con la expresión regular proporcionada como segundo argumento (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8038">bpo-8038</a>).</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertRaisesRegexp()</span></code> comprueba si se produce una excepción en particular, y luego también comprueba que la representación de la cadena de la excepción coincide con la expresión regular proporcionada.</p></li>
<li><p><a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertIn" title="unittest.TestCase.assertIn"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertIn()</span></code></a> y <a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertNotIn" title="unittest.TestCase.assertNotIn"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertNotIn()</span></code></a> comprueban si <em>primero</em> está o no está en <em>segundo</em>.</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertItemsEqual()</span></code> comprueba si dos secuencias proporcionadas contienen los mismos elementos.</p></li>
<li><p><a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertSetEqual" title="unittest.TestCase.assertSetEqual"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertSetEqual()</span></code></a> compara si dos conjuntos son iguales, y sólo informa de las diferencias entre los conjuntos en caso de error.</p></li>
<li><p>De forma similar, <a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertListEqual" title="unittest.TestCase.assertListEqual"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertListEqual()</span></code></a> y <a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertTupleEqual" title="unittest.TestCase.assertTupleEqual"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertTupleEqual()</span></code></a> comparan los tipos especificados y explican cualquier diferencia sin imprimir necesariamente sus valores completos; estos métodos se utilizan ahora por defecto cuando se comparan listas y tuplas utilizando <a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertEqual" title="unittest.TestCase.assertEqual"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertEqual()</span></code></a>. De forma más general, <a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertSequenceEqual" title="unittest.TestCase.assertSequenceEqual"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertSequenceEqual()</span></code></a> compara dos secuencias y puede comprobar opcionalmente si ambas secuencias son de un tipo determinado.</p></li>
<li><p><a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertDictEqual" title="unittest.TestCase.assertDictEqual"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertDictEqual()</span></code></a> compara dos diccionarios e informa de las diferencias; ahora se utiliza por defecto cuando se comparan dos diccionarios utilizando <a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertEqual" title="unittest.TestCase.assertEqual"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertEqual()</span></code></a>. <code class="xref py py-meth docutils literal notranslate"><span class="pre">assertDictContainsSubset()</span></code> comprueba si todos los pares clave/valor de <em>primero</em> se encuentran en <em>segundo</em>.</p></li>
<li><p><a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertAlmostEqual" title="unittest.TestCase.assertAlmostEqual"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertAlmostEqual()</span></code></a> and <a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertNotAlmostEqual" title="unittest.TestCase.assertNotAlmostEqual"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertNotAlmostEqual()</span></code></a> test
whether <em>first</em> and <em>second</em> are approximately equal.  This method
can either round their difference to an optionally specified number
of <em>places</em> (the default is 7) and compare it to zero, or require
the difference to be smaller than a supplied <em>delta</em> value.</p></li>
<li><p><a class="reference internal" href="../library/unittest.html#unittest.TestLoader.loadTestsFromName" title="unittest.TestLoader.loadTestsFromName"><code class="xref py py-meth docutils literal notranslate"><span class="pre">loadTestsFromName()</span></code></a> respeta correctamente el atributo <a class="reference internal" href="../library/unittest.html#unittest.TestLoader.suiteClass" title="unittest.TestLoader.suiteClass"><code class="xref py py-attr docutils literal notranslate"><span class="pre">suiteClass</span></code></a> de la <a class="reference internal" href="../library/unittest.html#unittest.TestLoader" title="unittest.TestLoader"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestLoader</span></code></a>. (Corregido por Mark Roddy; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=6866">bpo-6866</a>.)</p></li>
<li><p>Un nuevo hook permite extender el método <a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertEqual" title="unittest.TestCase.assertEqual"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertEqual()</span></code></a> para manejar nuevos tipos de datos.  El método <a class="reference internal" href="../library/unittest.html#unittest.TestCase.addTypeEqualityFunc" title="unittest.TestCase.addTypeEqualityFunc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">addTypeEqualityFunc()</span></code></a> toma un objeto de tipo y una función. La función se utilizará cuando los dos objetos que se comparan sean del tipo especificado.  Esta función debe comparar los dos objetos y lanzar una excepción si no coinciden; es una buena idea que la función proporcione información adicional acerca de por qué los dos objetos no coinciden, al igual que los nuevos métodos de comparación de secuencias.</p></li>
</ul>
<p><a class="reference internal" href="../library/unittest.html#unittest.main" title="unittest.main"><code class="xref py py-func docutils literal notranslate"><span class="pre">unittest.main()</span></code></a> ahora toma un argumento opcional <code class="docutils literal notranslate"><span class="pre">exit</span></code>.  Si es falso, <a class="reference internal" href="../library/unittest.html#unittest.main" title="unittest.main"><code class="xref py py-func docutils literal notranslate"><span class="pre">main()</span></code></a> no llama a <a class="reference internal" href="../library/sys.html#sys.exit" title="sys.exit"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.exit()</span></code></a>, permitiendo que <a class="reference internal" href="../library/unittest.html#unittest.main" title="unittest.main"><code class="xref py py-func docutils literal notranslate"><span class="pre">main()</span></code></a> sea utilizado desde el intérprete interactivo. (Contribuido por J. Pablo Fernández; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=3379">bpo-3379</a>.)</p>
<p><a class="reference internal" href="../library/unittest.html#unittest.TestResult" title="unittest.TestResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestResult</span></code></a> tiene nuevos métodos <a class="reference internal" href="../library/unittest.html#unittest.TestResult.startTestRun" title="unittest.TestResult.startTestRun"><code class="xref py py-meth docutils literal notranslate"><span class="pre">startTestRun()</span></code></a> y <a class="reference internal" href="../library/unittest.html#unittest.TestResult.stopTestRun" title="unittest.TestResult.stopTestRun"><code class="xref py py-meth docutils literal notranslate"><span class="pre">stopTestRun()</span></code></a> que se llaman inmediatamente antes y después de la ejecución de una prueba.  (Contribución de Robert Collins; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5728">bpo-5728</a>.)</p>
<p>Con todos estos cambios, el archivo <code class="file docutils literal notranslate"><span class="pre">unittest.py</span></code> se estaba volviendo incómodamente grande, por lo que el módulo se convirtió en un paquete y el código se dividió en varios archivos (por Benjamin Peterson).  Esto no afecta a la forma de importar o utilizar el módulo.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<dl class="simple">
<dt><a class="reference external" href="https://web.archive.org/web/20210619163128/http://www.voidspace.org.uk/python/articles/unittest2.shtml">https://web.archive.org/web/20210619163128/http://www.voidspace.org.uk/python/articles/unittest2.shtml</a></dt><dd><p>Describe las nuevas funciones, cómo utilizarlas y la justificación de varias decisiones de diseño.  (Por Michael Foord.)</p>
</dd>
</dl>
</div>
</section>
<section id="updated-module-elementtree-1-3">
<span id="elementtree-section"></span><h3>Módulo actualizado: ElementTree 1.3<a class="headerlink" href="#updated-module-elementtree-1-3" title="Enlazar permanentemente con este título">¶</a></h3>
<p>La versión de la biblioteca ElementTree incluida en Python se ha actualizado a la versión 1.3.  Algunas de las nuevas características son:</p>
<ul>
<li><p>Las diversas funciones de análisis ahora toman un argumento de palabra clave <em>parser</em> que da una instancia de <a class="reference internal" href="../library/xml.etree.elementtree.html#xml.etree.ElementTree.XMLParser" title="xml.etree.ElementTree.XMLParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">XMLParser</span></code></a> que se utilizará.  Esto hace posible anular la codificación interna del archivo:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">XMLParser</span><span class="p">(</span><span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">XML</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;&lt;root/&gt;&quot;&quot;&quot;</span><span class="p">,</span> <span class="n">parser</span><span class="o">=</span><span class="n">p</span><span class="p">)</span>
</pre></div>
</div>
<p>Los errores en el análisis de XML ahora lanzan una excepción <code class="xref py py-exc docutils literal notranslate"><span class="pre">ParseError</span></code>, cuyas instancias tienen un atributo <code class="xref py py-attr docutils literal notranslate"><span class="pre">position</span></code> que contiene una tupla (<em>línea</em>, <em>columna</em>) que da la ubicación del problema.</p>
</li>
<li><p>El código de ElementTree para convertir árboles a una cadena ha sido significativamente rediseñado, haciéndolo aproximadamente dos veces más rápido en muchos casos.  Los <a class="reference internal" href="../library/xml.etree.elementtree.html#xml.etree.ElementTree.ElementTree.write" title="xml.etree.ElementTree.ElementTree.write"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ElementTree.write()</span></code></a> y <code class="xref py py-meth docutils literal notranslate"><span class="pre">Element.write()</span></code> tienen ahora un parámetro <em>method</em> que puede ser «xml» (el predeterminado), «html» o «text».  El modo HTML mostrará los elementos vacíos como <code class="docutils literal notranslate"><span class="pre">&lt;empty&gt;&lt;/empty&gt;</span></code> en lugar de <code class="docutils literal notranslate"><span class="pre">&lt;empty/&gt;</span></code>, y el modo texto saltará los elementos y sólo mostrará los trozos de texto.  Si estableces el atributo <code class="xref py py-attr docutils literal notranslate"><span class="pre">tag</span></code> de un elemento como <code class="docutils literal notranslate"><span class="pre">None</span></code> pero dejas sus hijos en su sitio, el elemento será omitido cuando el árbol sea escrito, por lo que no necesitarás hacer un reordenamiento más extenso para eliminar un solo elemento.</p>
<p>También se ha mejorado la gestión de los espacios de nombres. Ahora todas las declaraciones``xmlns:&lt;whatever&gt;`` se emiten en el elemento raíz, y no dispersas en el XML resultante.  Se puede establecer el espacio de nombres por defecto para un árbol mediante el atributo <code class="xref py py-attr docutils literal notranslate"><span class="pre">default_namespace</span></code> y se pueden registrar nuevos prefijos con <a class="reference internal" href="../library/xml.etree.elementtree.html#xml.etree.ElementTree.register_namespace" title="xml.etree.ElementTree.register_namespace"><code class="xref py py-meth docutils literal notranslate"><span class="pre">register_namespace()</span></code></a>.  En el modo XML, puede utilizar el parámetro true/false <em>xml_declaration</em> para suprimir la declaración XML.</p>
</li>
<li><p>Nuevo método <a class="reference internal" href="../library/xml.etree.elementtree.html#xml.etree.ElementTree.Element" title="xml.etree.ElementTree.Element"><code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code></a>: <a class="reference internal" href="../library/xml.etree.elementtree.html#xml.etree.ElementTree.Element.extend" title="xml.etree.ElementTree.Element.extend"><code class="xref py py-meth docutils literal notranslate"><span class="pre">extend()</span></code></a> añade los elementos de una secuencia a los hijos del elemento.  Los propios elementos se comportan como secuencias, por lo que es fácil mover los hijos de un elemento a otro:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">xml.etree</span> <span class="kn">import</span> <span class="n">ElementTree</span> <span class="k">as</span> <span class="n">ET</span>

<span class="n">t</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">XML</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;&lt;list&gt;</span>
<span class="s2">  &lt;item&gt;1&lt;/item&gt; &lt;item&gt;2&lt;/item&gt;  &lt;item&gt;3&lt;/item&gt;</span>
<span class="s2">&lt;/list&gt;&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">new</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">XML</span><span class="p">(</span><span class="s1">&#39;&lt;root/&gt;&#39;</span><span class="p">)</span>
<span class="n">new</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>

<span class="c1"># Outputs &lt;root&gt;&lt;item&gt;1&lt;/item&gt;...&lt;/root&gt;</span>
<span class="nb">print</span> <span class="n">ET</span><span class="o">.</span><span class="n">tostring</span><span class="p">(</span><span class="n">new</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Nuevo método <code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code>: <a class="reference internal" href="../library/xml.etree.elementtree.html#xml.etree.ElementTree.Element.iter" title="xml.etree.ElementTree.Element.iter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">iter()</span></code></a> retorna los hijos del elemento como generador.  También es posible escribir <code class="docutils literal notranslate"><span class="pre">for</span> <span class="pre">child</span> <span class="pre">in</span> <span class="pre">elem:</span></code> para hacer un bucle sobre los hijos de un elemento.  El método existente <code class="xref py py-meth docutils literal notranslate"><span class="pre">getiterator()</span></code> ha quedado obsoleto, al igual que <code class="xref py py-meth docutils literal notranslate"><span class="pre">getchildren()</span></code> que construye y retorna una lista de hijos.</p></li>
<li><p>Nuevo método <code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code>: <a class="reference internal" href="../library/xml.etree.elementtree.html#xml.etree.ElementTree.Element.itertext" title="xml.etree.ElementTree.Element.itertext"><code class="xref py py-meth docutils literal notranslate"><span class="pre">itertext()</span></code></a> retorna todos los trozos de texto que son descendientes del elemento.  Por ejemplo:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">XML</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;&lt;list&gt;</span>
<span class="s2">  &lt;item&gt;1&lt;/item&gt; &lt;item&gt;2&lt;/item&gt;  &lt;item&gt;3&lt;/item&gt;</span>
<span class="s2">&lt;/list&gt;&quot;&quot;&quot;</span><span class="p">)</span>

<span class="c1"># Outputs [&#39;\n  &#39;, &#39;1&#39;, &#39; &#39;, &#39;2&#39;, &#39;  &#39;, &#39;3&#39;, &#39;\n&#39;]</span>
<span class="nb">print</span> <span class="nb">list</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">itertext</span><span class="p">())</span>
</pre></div>
</div>
</li>
<li><p>Deprecado: el uso de un elemento como booleano (es decir, <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">elem:</span></code>) retornaba true si el elemento tenía algún hijo, o false si no había ningún hijo.  Este comportamiento es confuso – <code class="docutils literal notranslate"><span class="pre">None</span></code> es falso, pero también lo es un elemento sin hijos? – por lo que ahora provocará un <a class="reference internal" href="../library/exceptions.html#FutureWarning" title="FutureWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">FutureWarning</span></code></a>.  En tu código, deberías ser explícito: escribe <code class="docutils literal notranslate"><span class="pre">len(elem)</span> <span class="pre">!=</span> <span class="pre">0</span></code> si te interesa el número de hijos, o <code class="docutils literal notranslate"><span class="pre">elem</span> <span class="pre">no</span> <span class="pre">es</span> <span class="pre">None</span></code>.</p></li>
</ul>
<p>Fredrik Lundh develops ElementTree and produced the 1.3 version;
you can read his article describing 1.3 at
<a class="reference external" href="https://web.archive.org/web/20200703234532/http://effbot.org/zone/elementtree-13-intro.htm">https://web.archive.org/web/20200703234532/http://effbot.org/zone/elementtree-13-intro.htm</a>.
Florent Xicluna updated the version included with
Python, after discussions on python-dev and in <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=6472">bpo-6472</a>.)</p>
</section>
</section>
<section id="build-and-c-api-changes">
<h2>Cambios en la API de construcción y C<a class="headerlink" href="#build-and-c-api-changes" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Los cambios en el proceso de construcción de Python y en la API de C incluyen:</p>
<ul>
<li><p>La última versión del depurador de GNU, GDB 7, puede ser <a class="reference external" href="https://sourceware.org/gdb/current/onlinedocs/gdb/Python.html">scripted usando Python</a>. Cuando comience a depurar un programa ejecutable P, GDB buscará un archivo llamado <code class="docutils literal notranslate"><span class="pre">P-gdb.py</span></code> y lo leerá automáticamente.  Dave Malcolm contribuyó con un archivo <code class="file docutils literal notranslate"><span class="pre">python-gdb.py</span></code> que añade una serie de comandos útiles cuando se depura el propio Python.  Por ejemplo, <code class="docutils literal notranslate"><span class="pre">py-up</span></code> y <code class="docutils literal notranslate"><span class="pre">py-down</span></code> suben o bajan un marco de pila de Python, que normalmente corresponde a varios marcos de pila de C.  <code class="docutils literal notranslate"><span class="pre">py-print</span></code> imprime el valor de una variable de Python, y <code class="docutils literal notranslate"><span class="pre">py-bt</span></code> imprime el seguimiento de la pila de Python.  (Añadido como resultado de <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8032">bpo-8032</a>.)</p></li>
<li><p>Si utiliza el archivo <code class="file docutils literal notranslate"><span class="pre">.gdbinit</span></code> proporcionado con Python, la macro «pyo» en la versión 2.7 ahora funciona correctamente cuando el hilo que se está depurando no tiene el GIL; la macro ahora lo adquiere antes de imprimir. (Contribución de Victor Stinner; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=3632">bpo-3632</a>.)</p></li>
<li><p><a class="reference internal" href="../c-api/init.html#c.Py_AddPendingCall" title="Py_AddPendingCall"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_AddPendingCall()</span></code></a> ahora es seguro para los hilos, permitiendo que cualquier hilo trabajador envíe notificaciones al hilo principal de Python.  Esto es particularmente útil para las operaciones asíncronas de IO. (Contribuido por Kristján Valur Jónsson; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=4293">bpo-4293</a>.)</p></li>
<li><p>Nueva función: <a class="reference internal" href="../c-api/code.html#c.PyCode_NewEmpty" title="PyCode_NewEmpty"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyCode_NewEmpty()</span></code></a> crea un objeto de código vacío; sólo se requiere el nombre del archivo, el nombre de la función y el número de la primera línea. Esto es útil para los módulos de extensión que intentan construir una pila de rastreo más útil.  Anteriormente tales extensiones necesitaban llamar a <a class="reference internal" href="../c-api/code.html#c.PyCode_New" title="PyCode_New"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyCode_New()</span></code></a>, que tenía muchos más argumentos.  (Añadido por Jeffrey Yasskin)</p></li>
<li><p>Nueva función: <a class="reference internal" href="../c-api/exceptions.html#c.PyErr_NewExceptionWithDoc" title="PyErr_NewExceptionWithDoc"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyErr_NewExceptionWithDoc()</span></code></a> crea una nueva clase de excepción, igual que la existente <a class="reference internal" href="../c-api/exceptions.html#c.PyErr_NewException" title="PyErr_NewException"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyErr_NewException()</span></code></a>, pero toma un argumento extra <code class="docutils literal notranslate"><span class="pre">char</span> <span class="pre">*</span></code> que contiene el docstring de la nueva clase de excepción.  (Añadido por “lekma” en el bug tracker de Python; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7033">bpo-7033</a>)</p></li>
<li><p>Nueva función: <a class="reference internal" href="../c-api/reflection.html#c.PyFrame_GetLineNumber" title="PyFrame_GetLineNumber"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetLineNumber()</span></code></a> toma un objeto frame y retorna el número de línea que el frame está ejecutando actualmente. Anteriormente, el código tenía que obtener el índice de la instrucción de código de bytes que se estaba ejecutando, y luego buscar el número de línea correspondiente a esa dirección.  (Añadido por Jeffrey Yasskin)</p></li>
<li><p>New functions: <a class="reference internal" href="../c-api/long.html#c.PyLong_AsLongAndOverflow" title="PyLong_AsLongAndOverflow"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyLong_AsLongAndOverflow()</span></code></a> and
<a class="reference internal" href="../c-api/long.html#c.PyLong_AsLongLongAndOverflow" title="PyLong_AsLongLongAndOverflow"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyLong_AsLongLongAndOverflow()</span></code></a>  approximates a Python long
integer as a C <code class="xref c c-expr docutils literal notranslate"><span class="pre">long</span></code> or <code class="xref c c-expr docutils literal notranslate"><span class="pre">long</span> <span class="pre">long</span></code>.
If the number is too large to fit into
the output type, an <em>overflow</em> flag is set and returned to the caller.
(Contributed by Case Van Horsen; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7528">bpo-7528</a> and <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7767">bpo-7767</a>.)</p></li>
<li><p>Nueva función: a raíz de la reescritura de la conversión de cadena a flotante, se ha añadido una nueva función <a class="reference internal" href="../c-api/conversion.html#c.PyOS_string_to_double" title="PyOS_string_to_double"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyOS_string_to_double()</span></code></a>.  Las antiguas funciones <code class="xref c c-func docutils literal notranslate"><span class="pre">PyOS_ascii_strtod()</span></code> y <code class="xref c c-func docutils literal notranslate"><span class="pre">PyOS_ascii_atof()</span></code> han quedado obsoletas.</p></li>
<li><p>Nueva función: <a class="reference internal" href="../c-api/init.html#c.PySys_SetArgvEx" title="PySys_SetArgvEx"><code class="xref c c-func docutils literal notranslate"><span class="pre">PySys_SetArgvEx()</span></code></a> establece el valor de <code class="docutils literal notranslate"><span class="pre">sys.argv</span></code> y puede opcionalmente actualizar <code class="docutils literal notranslate"><span class="pre">sys.path</span></code> para incluir el directorio que contiene el script nombrado por <code class="docutils literal notranslate"><span class="pre">sys.argv[0]</span></code> dependiendo del valor de un parámetro <em>updatepath</em>.</p>
<p>Esta función se añadió para cerrar un agujero de seguridad para las aplicaciones que incrustan Python.  La antigua función, <a class="reference internal" href="../c-api/init.html#c.PySys_SetArgv" title="PySys_SetArgv"><code class="xref c c-func docutils literal notranslate"><span class="pre">PySys_SetArgv()</span></code></a>, siempre actualizaba <code class="docutils literal notranslate"><span class="pre">sys.path</span></code>, y a veces añadía el directorio actual.  Esto significaba que, si ejecutabas una aplicación que incrustaba Python en un directorio controlado por otra persona, los atacantes podían poner un módulo de caballo de Troya en el directorio (digamos, un archivo llamado <code class="file docutils literal notranslate"><span class="pre">os.py</span></code>) que tu aplicación luego importaría y ejecutaría.</p>
<p>Si mantienes una aplicación C/C++ que incrusta Python, comprueba si estás llamando a <a class="reference internal" href="../c-api/init.html#c.PySys_SetArgv" title="PySys_SetArgv"><code class="xref c c-func docutils literal notranslate"><span class="pre">PySys_SetArgv()</span></code></a> y considera cuidadosamente si la aplicación debería estar usando <a class="reference internal" href="../c-api/init.html#c.PySys_SetArgvEx" title="PySys_SetArgvEx"><code class="xref c c-func docutils literal notranslate"><span class="pre">PySys_SetArgvEx()</span></code></a> con <em>updatepath</em> establecido en false.</p>
<p>Problema de seguridad reportado como <a class="reference external" href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2008-5983">CVE-2008-5983</a>; discutido en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5753">bpo-5753</a>, y solucionado por Antoine Pitrou.</p>
</li>
<li><p>Nuevas macros: los ficheros de cabecera de Python definen ahora las siguientes macros: <code class="xref c c-macro docutils literal notranslate"><span class="pre">Py_ISALNUM</span></code>, <code class="xref c c-macro docutils literal notranslate"><span class="pre">Py_ISALPHA</span></code>, <code class="xref c c-macro docutils literal notranslate"><span class="pre">Py_ISDIGIT</span></code>, <code class="xref c c-macro docutils literal notranslate"><span class="pre">Py_ISLOWER</span></code>, <code class="xref c c-macro docutils literal notranslate"><span class="pre">Py_ISSPACE</span></code>, <code class="xref c c-macro docutils literal notranslate"><span class="pre">Py_ISUPPER</span></code>, <code class="xref c c-macro docutils literal notranslate"><span class="pre">Py_ISXDIGIT</span></code>, <code class="xref c c-macro docutils literal notranslate"><span class="pre">Py_TOLOWER</span></code> y <code class="xref c c-macro docutils literal notranslate"><span class="pre">Py_TOUPPER</span></code>. Todas estas funciones son análogas a las macros estándar de C para clasificar caracteres, pero ignoran la configuración regional actual, porque en varios lugares Python necesita analizar los caracteres de forma independiente de la configuración regional.  (Añadido por Eric Smith; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5793">bpo-5793</a>.)</p>
</li>
<li><p>Función eliminada: <code class="xref c c-macro docutils literal notranslate"><span class="pre">PyEval_CallObject</span></code> ahora sólo está disponible como macro.  Se mantenía una versión de la función para preservar la compatibilidad con el enlace ABI, pero eso fue en 1997; seguramente se puede eliminar ahora.  (Eliminado por Antoine Pitrou; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8276">bpo-8276</a>.)</p></li>
<li><p>New format codes: the <code class="xref c c-func docutils literal notranslate"><span class="pre">PyFormat_FromString()</span></code>,
<code class="xref c c-func docutils literal notranslate"><span class="pre">PyFormat_FromStringV()</span></code>, and <a class="reference internal" href="../c-api/exceptions.html#c.PyErr_Format" title="PyErr_Format"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyErr_Format()</span></code></a> functions now
accept <code class="docutils literal notranslate"><span class="pre">%lld</span></code> and <code class="docutils literal notranslate"><span class="pre">%llu</span></code> format codes for displaying
C’s <code class="xref c c-expr docutils literal notranslate"><span class="pre">long</span> <span class="pre">long</span></code> types.
(Contributed by Mark Dickinson; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7228">bpo-7228</a>.)</p></li>
<li><p>Se ha cambiado la complicada interacción entre los hilos y la bifurcación de procesos.  Anteriormente, el proceso hijo creado por <a class="reference internal" href="../library/os.html#os.fork" title="os.fork"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.fork()</span></code></a> podía fallar porque el hijo se creaba con un solo hilo en ejecución, el hilo que realizaba el <a class="reference internal" href="../library/os.html#os.fork" title="os.fork"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.fork()</span></code></a>. Si otros hilos estuvieran manteniendo un bloqueo, como el bloqueo de importación de Python, cuando se realizara el fork, el bloqueo seguiría marcado como «mantenido» en el nuevo proceso.  Pero en el proceso hijo nada liberaría el bloqueo, ya que los otros hilos no estaban replicados, y el proceso hijo ya no podría realizar importaciones.</p>
<p>Python 2.7 adquiere el bloqueo de importación antes de realizar un <a class="reference internal" href="../library/os.html#os.fork" title="os.fork"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.fork()</span></code></a>, y también limpiará cualquier bloqueo creado usando el módulo <a class="reference internal" href="../library/threading.html#module-threading" title="threading: Thread-based parallelism."><code class="xref py py-mod docutils literal notranslate"><span class="pre">threading</span></code></a>.  Los módulos de extensión C que tienen bloqueos internos, o que llaman a <code class="xref c c-func docutils literal notranslate"><span class="pre">fork()</span></code> ellos mismos, no se beneficiarán de esta limpieza.</p>
<p>(Corregido por Thomas Wouters; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1590864">bpo-1590864</a>.)</p>
</li>
<li><p>La función <a class="reference internal" href="../c-api/init.html#c.Py_Finalize" title="Py_Finalize"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_Finalize()</span></code></a> ahora llama a la función interna <code class="xref py py-func docutils literal notranslate"><span class="pre">threading._shutdown()</span></code>; esto evita que se produzcan algunas excepciones cuando un intérprete se cierra. (Parche de Adam Olsen; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1722344">bpo-1722344</a>.)</p></li>
<li><p>Cuando se utiliza la estructura <a class="reference internal" href="../c-api/structures.html#c.PyMemberDef" title="PyMemberDef"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyMemberDef</span></code></a> para definir los atributos de un tipo, Python ya no permitirá que se intente borrar o establecer un atributo <code class="xref py py-const docutils literal notranslate"><span class="pre">T_STRING_INPLACE</span></code>.</p>
</li>
<li><p>Los símbolos globales definidos por el módulo <a class="reference internal" href="../library/ctypes.html#module-ctypes" title="ctypes: A foreign function library for Python."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ctypes</span></code></a> llevan ahora el prefijo <code class="docutils literal notranslate"><span class="pre">Py</span></code>, o bien <code class="docutils literal notranslate"><span class="pre">_ctypes</span></code>.  (Implementado por Thomas Heller; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=3102">bpo-3102</a>.)</p></li>
<li><p>Nueva opción de configuración: la opción <code class="xref std std-option docutils literal notranslate"><span class="pre">--with-system-expat</span></code> permite construir el módulo <code class="xref py py-mod docutils literal notranslate"><span class="pre">pyexpat</span></code> para utilizar la biblioteca Expat del sistema. (Contribuido por Arfrever Frehtes Taifersar Arahesis; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7609">bpo-7609</a>.)</p></li>
<li><p>Nueva opción de configuración: la opción <code class="xref std std-option docutils literal notranslate"><span class="pre">--with-valgrind</span></code> ahora desactivará el asignador pymalloc, que es difícil de analizar correctamente por el detector de errores de memoria de Valgrind. Por lo tanto, Valgrind detectará mejor las fugas de memoria y los desbordamientos. (Contribución de James Henstridge; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=2422">bpo-2422</a>.)</p></li>
<li><p>Nueva opción de configuración: ahora puede suministrar una cadena vacía a <code class="xref std std-option docutils literal notranslate"><span class="pre">--with-dbmliborder=</span></code> para desactivar todos los módulos DBM.  (Añadido por Arfrever Frehtes Taifersar Arahesis; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=6491">bpo-6491</a>)</p></li>
<li><p>El script <strong class="program">configure</strong> comprueba ahora los errores de redondeo en coma flotante en ciertos chips Intel de 32 bits y define una definición del preprocesador <code class="xref c c-macro docutils literal notranslate"><span class="pre">X87_DOUBLE_ROUNDING</span></code>.  Ningún código utiliza actualmente esta definición, pero está disponible si alguien desea utilizarla. (Añadido por Mark Dickinson; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=2937">bpo-2937</a>.)</p>
<p><strong class="program">configure</strong> ahora también establece una variable Makefile <span class="target" id="index-63"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">LDCXXSHARED</span></code> para soportar el enlazado de C++.  (Contribuido por Arfrever Frehtes Taifersar Arahesis; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1222585">bpo-1222585</a>.)</p>
</li>
<li><p>El proceso de construcción ahora crea los archivos necesarios para el soporte de pkg-config.  (Contribución de Clinton Roy; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=3585">bpo-3585</a>.)</p></li>
<li><p>El proceso de construcción ahora soporta Subversion 1.7.  (Contribuido por Arfrever Frehtes Taifersar Arahesis; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=6094">bpo-6094</a>.)</p></li>
</ul>
<section id="capsules">
<span id="whatsnew27-capsules"></span><h3>Cápsulas<a class="headerlink" href="#capsules" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Python 3.1 añade un nuevo tipo de datos C, <a class="reference internal" href="../c-api/capsule.html#c.PyCapsule" title="PyCapsule"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyCapsule</span></code></a>, para proporcionar una API C a un módulo de extensión.  Una cápsula es esencialmente el soporte de un puntero C <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*</span></code>, y está disponible como un atributo del módulo; por ejemplo, la API del módulo <a class="reference internal" href="../library/socket.html#module-socket" title="socket: Low-level networking interface."><code class="xref py py-mod docutils literal notranslate"><span class="pre">socket</span></code></a> se expone como <code class="docutils literal notranslate"><span class="pre">socket.CAPI</span></code>, y <a class="reference internal" href="../library/unicodedata.html#module-unicodedata" title="unicodedata: Access the Unicode Database."><code class="xref py py-mod docutils literal notranslate"><span class="pre">unicodedata</span></code></a> expone <code class="docutils literal notranslate"><span class="pre">ucnhash_CAPI</span></code>.  Otras extensiones pueden importar el módulo, acceder a su diccionario para obtener el objeto cápsula, y luego obtener el puntero <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*</span></code>, que normalmente apuntará a una matriz de punteros a las diversas funciones de la API del módulo.</p>
<p>Existe un tipo de datos ya utilizado para esto, <code class="xref c c-type docutils literal notranslate"><span class="pre">PyCObject</span></code>, pero no proporciona seguridad de tipo.  Un código malvado escrito en Python puro podría causar un fallo de segmentación tomando un <code class="xref c c-type docutils literal notranslate"><span class="pre">PyCObject</span></code> del módulo A y sustituyéndolo de alguna manera por el <code class="xref c c-type docutils literal notranslate"><span class="pre">PyCObject</span></code> del módulo B. Las cápsulas conocen su propio nombre, y obtener el puntero requiere proporcionar el nombre:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">vtable</span><span class="p">;</span><span class="w"></span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">PyCapsule_IsValid</span><span class="p">(</span><span class="n">capsule</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;mymodule.CAPI&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">PyErr_SetString</span><span class="p">(</span><span class="n">PyExc_ValueError</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;argument type invalid&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="n">vtable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PyCapsule_GetPointer</span><span class="p">(</span><span class="n">capsule</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;mymodule.CAPI&quot;</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Se asegura que <code class="docutils literal notranslate"><span class="pre">vtable</span></code> apunta a lo que se espera. Si se pasara una cápsula diferente, <a class="reference internal" href="../c-api/capsule.html#c.PyCapsule_IsValid" title="PyCapsule_IsValid"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyCapsule_IsValid()</span></code></a> detectaría el nombre erróneo y retornaría false.  Consulta <a class="reference internal" href="../extending/extending.html#using-capsules"><span class="std std-ref">Proporcionar una API C para un módulo de extensión</span></a> para más información sobre el uso de estos objetos.</p>
<p>Python 2.7 ahora utiliza cápsulas internamente para proporcionar varias APIs de módulos de extensión, pero el <code class="xref c c-func docutils literal notranslate"><span class="pre">PyCObject_AsVoidPtr()</span></code> fue modificado para manejar cápsulas, preservando la compatibilidad en tiempo de compilación con la interfaz <code class="xref c c-type docutils literal notranslate"><span class="pre">CObject</span></code>.  El uso de <code class="xref c c-func docutils literal notranslate"><span class="pre">PyCObject_AsVoidPtr()</span></code> señalará un <a class="reference internal" href="../library/exceptions.html#PendingDeprecationWarning" title="PendingDeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">PendingDeprecationWarning</span></code></a>, que es silencioso por defecto.</p>
<p>Implementado en Python 3.1 y portado a 2.7 por Larry Hastings; discutido en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5630">bpo-5630</a>.</p>
</section>
<section id="port-specific-changes-windows">
<h3>Cambios específicos en los puertos: Windows<a class="headerlink" href="#port-specific-changes-windows" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>El módulo <a class="reference internal" href="../library/msvcrt.html#module-msvcrt" title="msvcrt: Miscellaneous useful routines from the MS VC++ runtime. (Windows)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">msvcrt</span></code></a> contiene ahora algunas constantes del fichero de cabecera <code class="file docutils literal notranslate"><span class="pre">crtassem.h</span></code>: <code class="xref py py-data docutils literal notranslate"><span class="pre">CRT_ASSEMBLY_VERSION</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">VC_ASSEMBLY_PUBLICKEYTOKEN</span></code>, y <code class="xref py py-data docutils literal notranslate"><span class="pre">LIBRARIES_ASSEMBLY_NAME_PREFIX</span></code>. (Contribución de David Cournapeau; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=4365">bpo-4365</a>.)</p></li>
<li><p>The <code class="xref py py-mod docutils literal notranslate"><span class="pre">_winreg</span></code> module for accessing the registry now implements
the <code class="xref py py-func docutils literal notranslate"><span class="pre">CreateKeyEx()</span></code> and <code class="xref py py-func docutils literal notranslate"><span class="pre">DeleteKeyEx()</span></code>
functions, extended versions of previously supported functions that
take several extra arguments.  The <code class="xref py py-func docutils literal notranslate"><span class="pre">DisableReflectionKey()</span></code>,
<code class="xref py py-func docutils literal notranslate"><span class="pre">EnableReflectionKey()</span></code>, and <code class="xref py py-func docutils literal notranslate"><span class="pre">QueryReflectionKey()</span></code>
were also tested and documented.
(Implemented by Brian Curtin: <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7347">bpo-7347</a>.)</p></li>
<li><p>La nueva API <code class="xref c c-func docutils literal notranslate"><span class="pre">_beginthreadex()</span></code> se utiliza para iniciar hilos, y ahora se utilizan las funciones nativas de almacenamiento local de hilos. (Contribuido por Kristján Valur Jónsson; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=3582">bpo-3582</a>.)</p></li>
<li><p>La función <a class="reference internal" href="../library/os.html#os.kill" title="os.kill"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.kill()</span></code></a> ahora funciona en Windows.  El valor de la señal puede ser las constantes <code class="xref py py-const docutils literal notranslate"><span class="pre">CTRL_C_EVENT</span></code>, <code class="xref py py-const docutils literal notranslate"><span class="pre">CTRL_BREAK_EVENT</span></code>, o cualquier número entero.  Las dos primeras constantes enviarán los eventos de pulsación de teclas <kbd class="kbd docutils literal notranslate"><kbd class="kbd docutils literal notranslate">Control</kbd>-<kbd class="kbd docutils literal notranslate">C</kbd></kbd> y <kbd class="kbd docutils literal notranslate"><kbd class="kbd docutils literal notranslate">Control</kbd>-<kbd class="kbd docutils literal notranslate">Break</kbd></kbd> a los subprocesos; cualquier otro valor utilizará la API <code class="xref c c-func docutils literal notranslate"><span class="pre">TerminateProcess()</span></code>.  (Contribuido por Miki Tebeka; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1220212">bpo-1220212</a>.)</p></li>
<li><p>La función <a class="reference internal" href="../library/os.html#os.listdir" title="os.listdir"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.listdir()</span></code></a> ahora falla correctamente si la ruta está vacía.  (Corregido por Hirokazu Yamamoto; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5913">bpo-5913</a>.)</p></li>
<li><p>El módulo <code class="xref py py-mod docutils literal notranslate"><span class="pre">mimelib</span></code> ahora leerá la base de datos MIME del registro de Windows cuando se inicialice. (Parche de Gabriel Genellina; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=4969">bpo-4969</a>.)</p></li>
</ul>
</section>
<section id="port-specific-changes-mac-os-x">
<h3>Cambios específicos en los puertos: Mac OS X<a class="headerlink" href="#port-specific-changes-mac-os-x" title="Enlazar permanentemente con este título">¶</a></h3>
<ul>
<li><p>La ruta <code class="docutils literal notranslate"><span class="pre">/Library/Python/2.7/site-packages</span></code> se añade ahora a <code class="docutils literal notranslate"><span class="pre">sys.path</span></code>, para compartir los paquetes añadidos entre la instalación del sistema y una copia de la misma versión instalada por el usuario. (Cambiado por Ronald Oussoren; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=4865">bpo-4865</a>.)</p>
<blockquote>
<div><div class="versionchanged">
<p><span class="versionmodified changed">Distinto en la versión 2.7.13: </span>A partir de la versión 2.7.13, se ha eliminado este cambio. <code class="docutils literal notranslate"><span class="pre">/Library/Python/2.7/site-packages</span></code>, el directorio site-packages utilizado por el sistema Python 2.7 suministrado por Apple ya no se añade a <code class="docutils literal notranslate"><span class="pre">sys.path</span></code> para los Python instalados por el usuario, como los instaladores de python.org.  A partir de macOS 10.12, Apple ha cambiado la configuración del directorio site-packages del sistema, lo que puede hacer que falle la instalación de componentes pip, como setuptools.  Los paquetes instalados para el sistema Python ya no se compartirán con los Python instalados por el usuario. (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=28440">bpo-28440</a>)</p>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="port-specific-changes-freebsd">
<h3>Cambios específicos en los puertos: FreeBSD<a class="headerlink" href="#port-specific-changes-freebsd" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>La constante <code class="xref py py-const docutils literal notranslate"><span class="pre">SO_SETFIB</span></code> de FreeBSD 7.1, utilizada con <code class="xref py py-func docutils literal notranslate"><span class="pre">getsockopt()</span></code>/<code class="xref py py-func docutils literal notranslate"><span class="pre">setsockopt()</span></code> para seleccionar una tabla de enrutamiento alternativa, está ahora disponible en el módulo <a class="reference internal" href="../library/socket.html#module-socket" title="socket: Low-level networking interface."><code class="xref py py-mod docutils literal notranslate"><span class="pre">socket</span></code></a>.  (Añadido por Kyle VanderBeek; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8235">bpo-8235</a>.)</p></li>
</ul>
</section>
</section>
<section id="other-changes-and-fixes">
<h2>Otros cambios y correcciones<a class="headerlink" href="#other-changes-and-fixes" title="Enlazar permanentemente con este título">¶</a></h2>
<ul class="simple">
<li><p>Dos scripts de evaluación, <code class="file docutils literal notranslate"><span class="pre">iobench</span></code> y <code class="file docutils literal notranslate"><span class="pre">ccbench</span></code>, han sido añadidos al directorio <code class="file docutils literal notranslate"><span class="pre">Tools</span></code>. <code class="file docutils literal notranslate"><span class="pre">iobench</span></code> mide la velocidad de los objetos de E/S de los archivos retornados por <a class="reference internal" href="../library/functions.html#open" title="open"><code class="xref py py-func docutils literal notranslate"><span class="pre">open()</span></code></a> al realizar varias operaciones, y <code class="file docutils literal notranslate"><span class="pre">ccbench</span></code> es una evaluación de concurrencia que trata de medir el rendimiento de la computación, la latencia del cambio de hilos y el ancho de banda del procesamiento de E/S al realizar varias tareas utilizando un número variable de hilos.</p></li>
<li><p>El script <code class="file docutils literal notranslate"><span class="pre">Tools/i18n/msgfmt.py</span></code> ahora entiende las formas plurales en los archivos <code class="file docutils literal notranslate"><span class="pre">.po</span></code>.  (Corregido por Martin von Löwis; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5464">bpo-5464</a>.)</p></li>
<li><p>Cuando se importa un módulo desde un archivo <code class="file docutils literal notranslate"><span class="pre">.pyc</span></code> o <code class="file docutils literal notranslate"><span class="pre">.pyo</span></code> con una contraparte <code class="file docutils literal notranslate"><span class="pre">.py</span></code> existente, los atributos <code class="xref py py-attr docutils literal notranslate"><span class="pre">co_filename</span></code> de los objetos de código resultantes se sobrescriben cuando el nombre de archivo original es obsoleto.  Esto puede ocurrir si el archivo ha sido renombrado, movido, o se accede a él a través de diferentes rutas.  (Parche de Ziga Seilnacht y Jean-Paul Calderone; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1180193">bpo-1180193</a>.)</p></li>
<li><p>El script <code class="file docutils literal notranslate"><span class="pre">regrtest.py</span></code> ahora toma una opción <code class="xref std std-option docutils literal notranslate"><span class="pre">--randseed=</span></code> que toma un entero que será usado como semilla aleatoria para la opción <code class="xref std std-option docutils literal notranslate"><span class="pre">-r</span></code> que ejecuta las pruebas en orden aleatorio. La opción <code class="xref std std-option docutils literal notranslate"><span class="pre">-r</span></code> también informa de la semilla que se ha utilizado (Añadido por Collin Winter.)</p></li>
<li><p>Otra opción <code class="file docutils literal notranslate"><span class="pre">regrtest.py</span></code> es <code class="xref std std-option docutils literal notranslate"><span class="pre">-j</span></code>, que toma un número entero que especifica cuántas pruebas se ejecutan en paralelo. Esto permite reducir el tiempo total de ejecución en máquinas multinúcleo. Esta opción es compatible con varias otras opciones, incluyendo la opción <code class="xref std std-option docutils literal notranslate"><span class="pre">-R</span></code> que es conocida por producir tiempos de ejecución largos. (Añadido por Antoine Pitrou, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=6152">bpo-6152</a>.) También puede utilizarse con una nueva opción <code class="xref std std-option docutils literal notranslate"><span class="pre">-F</span></code> que ejecuta las pruebas seleccionadas en un bucle hasta que fallen.  (Añadido por Antoine Pitrou; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7312">bpo-7312</a>.)</p></li>
<li><p>Cuando se ejecuta como un script, el módulo <code class="file docutils literal notranslate"><span class="pre">py_compile.py</span></code> ahora acepta <code class="docutils literal notranslate"><span class="pre">'-'</span></code> como argumento, que leerá la entrada estándar para la lista de nombres de archivos a compilar.  (Contribuido por Piotr Ożarowski; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8233">bpo-8233</a>.)</p></li>
</ul>
</section>
<section id="porting-to-python-2-7">
<h2>Adaptación a Python 2.7<a class="headerlink" href="#porting-to-python-2-7" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Esta sección enumera los cambios descritos anteriormente y otras correcciones de errores que pueden requerir cambios en su código:</p>
<ul class="simple">
<li><p>La función <a class="reference internal" href="../library/stdtypes.html#range" title="range"><code class="xref py py-func docutils literal notranslate"><span class="pre">range()</span></code></a> procesa sus argumentos de forma más consistente; ahora llamará a <code class="xref py py-meth docutils literal notranslate"><span class="pre">__int__()</span></code> en los argumentos no flotantes y no enteros que se le suministren.  (Corregido por Alexander Belopolsky; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1533">bpo-1533</a>.)</p></li>
<li><p>El método string <a class="reference internal" href="../library/functions.html#format" title="format"><code class="xref py py-meth docutils literal notranslate"><span class="pre">format()</span></code></a> ha cambiado la precisión por defecto utilizada para los números de punto flotante y complejos de 6 decimales a 12, que coincide con la precisión utilizada por <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-func docutils literal notranslate"><span class="pre">str()</span></code></a>. (Cambiado por Eric Smith; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5920">bpo-5920</a>.)</p></li>
<li><p>Debido a una optimización de la sentencia <a class="reference internal" href="../reference/compound_stmts.html#with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a>, los métodos especiales <code class="xref py py-meth docutils literal notranslate"><span class="pre">__enter__()</span></code> y <code class="xref py py-meth docutils literal notranslate"><span class="pre">__exit__()</span></code> deben pertenecer al tipo del objeto, y no pueden adjuntarse directamente a la instancia del objeto.  Esto afecta a las clases de nuevo estilo (derivadas de <a class="reference internal" href="../library/functions.html#object" title="object"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a>) y a los tipos de extensión de C.  (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=6101">bpo-6101</a>.)</p></li>
<li><p>Debido a un error en Python 2.6, el parámetro <em>exc_value</em> de los métodos <code class="xref py py-meth docutils literal notranslate"><span class="pre">__exit__()</span></code> era a menudo la representación en cadena de la excepción, no una instancia.  Esto fue corregido en 2.7, así que <em>exc_value</em> será una instancia como se esperaba.  (Corregido por Florent Xicluna; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7853">bpo-7853</a>.)</p></li>
<li><p>Cuando se establecía un conjunto restringido de atributos utilizando <code class="docutils literal notranslate"><span class="pre">__slots__</span></code>, la eliminación de un atributo no establecido no lanzaba <a class="reference internal" href="../library/exceptions.html#AttributeError" title="AttributeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">AttributeError</span></code></a> como cabría esperar.  Corregido por Benjamin Peterson; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7604">bpo-7604</a>)</p></li>
</ul>
<p>En la biblioteca estándar:</p>
<ul>
<li><p>Las operaciones con instancias <a class="reference internal" href="../library/datetime.html#datetime.datetime" title="datetime.datetime"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code></a> que daban como resultado un año que caía fuera del rango soportado no siempre lanzaban <a class="reference internal" href="../library/exceptions.html#OverflowError" title="OverflowError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OverflowError</span></code></a>.  Estos errores se comprueban ahora con más cuidado y se lanzará la excepción. (Informado por Mark Leander, parche de Anand B. Pillai y Alexander Belopolsky; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7150">bpo-7150</a>)</p></li>
<li><p>Cuando se utilizan instancias <a class="reference internal" href="../library/decimal.html#decimal.Decimal" title="decimal.Decimal"><code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code></a> con el método <a class="reference internal" href="../library/functions.html#format" title="format"><code class="xref py py-meth docutils literal notranslate"><span class="pre">format()</span></code></a> de una cadena, la alineación por defecto era antes la alineación a la izquierda.  Se ha cambiado a alineación derecha, lo que podría cambiar la salida de sus programas. (Cambiado por Mark Dickinson; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=6857">bpo-6857</a>.)</p>
<p>Las comparaciones que implican un valor NaN de señalización (o <code class="docutils literal notranslate"><span class="pre">sNAN</span></code>) señalan ahora <a class="reference internal" href="../library/decimal.html#decimal.InvalidOperation" title="decimal.InvalidOperation"><code class="xref py py-const docutils literal notranslate"><span class="pre">InvalidOperation</span></code></a> en lugar de retornar silenciosamente un valor verdadero o falso dependiendo del operador de comparación.  Los valores NaN silenciosos (o <code class="docutils literal notranslate"><span class="pre">NaN</span></code>) son ahora hashable.  (Corregido por Mark Dickinson; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7279">bpo-7279</a>.)</p>
</li>
<li><p>La biblioteca ElementTree, <code class="xref py py-mod docutils literal notranslate"><span class="pre">xml.etree</span></code>, ya no escapa los ampersands y los paréntesis angulares cuando se emite una instrucción de procesamiento XML (que tiene el aspecto de <code class="docutils literal notranslate"><span class="pre">&lt;?xml-stylesheet</span> <span class="pre">href=&quot;#style1&quot;?&gt;</span></code>) o un comentario (que tiene el aspecto de <code class="docutils literal notranslate"><span class="pre">&lt;!--</span> <span class="pre">comment</span> <span class="pre">--&gt;</span></code>). (Parche de Neil Muller; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=2746">bpo-2746</a>.)</p></li>
<li><p>El método <code class="xref py py-meth docutils literal notranslate"><span class="pre">readline()</span></code> de los objetos <code class="xref py py-class docutils literal notranslate"><span class="pre">StringIO</span></code> ahora no hace nada cuando se solicita una longitud negativa, como hacen otros objetos tipo archivo.  (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7348">bpo-7348</a>).</p></li>
<li><p>El módulo <a class="reference internal" href="../library/syslog.html#module-syslog" title="syslog: An interface to the Unix syslog library routines. (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">syslog</span></code></a> utilizará ahora el valor de <code class="docutils literal notranslate"><span class="pre">sys.argv[0]</span></code> como identificador en lugar del anterior valor por defecto de <code class="docutils literal notranslate"><span class="pre">'python</span></code>. (Cambiado por Sean Reifschneider; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8451">bpo-8451</a>.)</p></li>
<li><p>El manejo de errores por defecto del módulo <a class="reference internal" href="../library/tarfile.html#module-tarfile" title="tarfile: Read and write tar-format archive files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">tarfile</span></code></a> ha cambiado, para no suprimir los errores fatales.  El nivel de error por defecto era antes 0, lo que significaba que los errores sólo daban lugar a que se escribiera un mensaje en el registro de depuración, pero como el registro de depuración no está activado por defecto, estos errores pasan desapercibidos.  El nivel de error por defecto es ahora 1, que lanza una excepción si hay un error. (Cambiado por Lars Gustäbel; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7357">bpo-7357</a>.)</p></li>
<li><p>La <code class="xref py py-func docutils literal notranslate"><span class="pre">urlsplit()</span></code> del módulo <code class="xref py py-mod docutils literal notranslate"><span class="pre">urlparse</span></code> maneja ahora los esquemas de URL desconocidos de una manera que cumple con <span class="target" id="index-64"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc3986.html"><strong>RFC 3986</strong></a>: si la URL es de la forma <code class="docutils literal notranslate"><span class="pre">&quot;&lt;something&gt;://...&quot;</span></code>, el texto que precede a <code class="docutils literal notranslate"><span class="pre">://</span></code> se trata como el esquema, incluso si es un esquema inventado que el módulo no conoce.  Este cambio puede romper el código que funcionaba con el antiguo comportamiento.  Por ejemplo, Python 2.6.4 o 2.5 retornará lo siguiente:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">urlparse</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">urlparse</span><span class="o">.</span><span class="n">urlsplit</span><span class="p">(</span><span class="s1">&#39;invented://host/filename?query&#39;</span><span class="p">)</span>
<span class="go">(&#39;invented&#39;, &#39;&#39;, &#39;//host/filename?query&#39;, &#39;&#39;, &#39;&#39;)</span>
</pre></div>
</div>
<p>Python 2.7 (y Python 2.6.5) retornará:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">urlparse</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">urlparse</span><span class="o">.</span><span class="n">urlsplit</span><span class="p">(</span><span class="s1">&#39;invented://host/filename?query&#39;</span><span class="p">)</span>
<span class="go">(&#39;invented&#39;, &#39;host&#39;, &#39;/filename?query&#39;, &#39;&#39;, &#39;&#39;)</span>
</pre></div>
</div>
<p>(Python 2.7 en realidad produce una salida ligeramente diferente, ya que retorna una tupla con nombre en lugar de una tupla estándar)</p>
</li>
</ul>
<p>Para las extensiones en C:</p>
<ul class="simple">
<li><p>Las extensiones de C que utilizan códigos de formato entero con la familia de funciones <code class="docutils literal notranslate"><span class="pre">PyArg_Parse*</span></code> ahora lanzarán una excepción <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> en lugar de provocar un <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a> (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5080">bpo-5080</a>).</p></li>
<li><p>Utilice la nueva función <a class="reference internal" href="../c-api/conversion.html#c.PyOS_string_to_double" title="PyOS_string_to_double"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyOS_string_to_double()</span></code></a> en lugar de las antiguas funciones <code class="xref c c-func docutils literal notranslate"><span class="pre">PyOS_ascii_strtod()</span></code> y <code class="xref c c-func docutils literal notranslate"><span class="pre">PyOS_ascii_atof()</span></code>, que ya están obsoletas.</p></li>
</ul>
<p>Para aplicaciones que incrustan Python:</p>
<ul class="simple">
<li><p>Se ha añadido la función <a class="reference internal" href="../c-api/init.html#c.PySys_SetArgvEx" title="PySys_SetArgvEx"><code class="xref c c-func docutils literal notranslate"><span class="pre">PySys_SetArgvEx()</span></code></a>, que permite a las aplicaciones cerrar un agujero de seguridad cuando se utiliza la función <a class="reference internal" href="../c-api/init.html#c.PySys_SetArgv" title="PySys_SetArgv"><code class="xref c c-func docutils literal notranslate"><span class="pre">PySys_SetArgv()</span></code></a> existente.  Compruebe si está llamando a <a class="reference internal" href="../c-api/init.html#c.PySys_SetArgv" title="PySys_SetArgv"><code class="xref c c-func docutils literal notranslate"><span class="pre">PySys_SetArgv()</span></code></a> y considere cuidadosamente si la aplicación debería estar usando <a class="reference internal" href="../c-api/init.html#c.PySys_SetArgvEx" title="PySys_SetArgvEx"><code class="xref c c-func docutils literal notranslate"><span class="pre">PySys_SetArgvEx()</span></code></a> con <em>updatepath</em> establecido en false.</p></li>
</ul>
</section>
<section id="new-features-added-to-python-2-7-maintenance-releases">
<span id="py27-maintenance-enhancements"></span><h2>Nuevas funciones añadidas a las versiones de mantenimiento de Python 2.7<a class="headerlink" href="#new-features-added-to-python-2-7-maintenance-releases" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Se pueden añadir nuevas características a las versiones de mantenimiento de Python 2.7 cuando la situación lo requiera realmente. Cualquier adición debe pasar por el proceso de Propuesta de Mejora de Python, y hacer un caso convincente de por qué no se puede abordar adecuadamente mediante la adición de la nueva característica únicamente a Python 3, o bien mediante su publicación en el Índice de Paquetes de Python.</p>
<p>Además de las propuestas específicas enumeradas a continuación, existe una exención general que permite añadir nuevas advertencias <code class="docutils literal notranslate"><span class="pre">-3</span></code> en cualquier versión de mantenimiento de Python 2.7.</p>
<section id="two-new-environment-variables-for-debug-mode">
<h3>Dos nuevas variables de entorno para el modo de depuración<a class="headerlink" href="#two-new-environment-variables-for-debug-mode" title="Enlazar permanentemente con este título">¶</a></h3>
<p>En el modo de depuración, la estadística <code class="docutils literal notranslate"><span class="pre">[xxx</span> <span class="pre">refs]</span></code> no se escribe por defecto, la variable de entorno <span class="target" id="index-65"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONSHOWREFCOUNT</span></code> ahora también debe ser establecida. (Contribución de Victor Stinner; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=31733">bpo-31733</a>.)</p>
<p>Cuando Python se compila con <code class="docutils literal notranslate"><span class="pre">COUNT_ALLOC</span></code> definido, los recuentos de asignaciones ya no se vuelcan por defecto: la variable de entorno <span class="target" id="index-66"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONSHOWALLOCCOUNT</span></code> ahora también debe ser establecida. Además, los recuentos de asignación se vuelcan ahora en stderr, en lugar de en stdout. (Contribución de Victor Stinner; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=31692">bpo-31692</a>.)</p>
<div class="versionadded">
<p><span class="versionmodified added">Nuevo en la versión 2.7.15.</span></p>
</div>
</section>
<section id="pep-434-idle-enhancement-exception-for-all-branches">
<h3>PEP 434: Excepción de mejora de IDLE para todas las ramas<a class="headerlink" href="#pep-434-idle-enhancement-exception-for-all-branches" title="Enlazar permanentemente con este título">¶</a></h3>
<p><span class="target" id="index-67"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0434"><strong>PEP 434</strong></a> describe una exención general para los cambios realizados en el entorno de desarrollo de IDLE que se envía junto con Python. Esta exención hace posible que los desarrolladores de IDLE proporcionen una experiencia de usuario más consistente en todas las versiones soportadas de Python 2 y 3.</p>
<p>Para conocer los detalles de los cambios de IDLE, consulte el archivo NEWS de la versión en cuestión.</p>
</section>
<section id="pep-466-network-security-enhancements-for-python-2-7">
<h3>PEP 466: Mejoras en la seguridad de la red para Python 2.7<a class="headerlink" href="#pep-466-network-security-enhancements-for-python-2-7" title="Enlazar permanentemente con este título">¶</a></h3>
<p><span class="target" id="index-68"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0466"><strong>PEP 466</strong></a> describe una serie de propuestas de mejora de la seguridad de la red que han sido aprobadas para su inclusión en las versiones de mantenimiento de Python 2.7, y el primero de esos cambios aparecerá en la versión 2.7.7 de Python.</p>
<p>Funciones relacionadas con <cite>466</cite> añadidas en Python 2.7.7:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../library/hmac.html#hmac.compare_digest" title="hmac.compare_digest"><code class="xref py py-func docutils literal notranslate"><span class="pre">hmac.compare_digest()</span></code></a> fue portado desde Python 3 para hacer una operación de comparación resistente a los ataques de tiempo disponible para las aplicaciones de Python 2. (Contribuido por Alex Gaynor; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=21306">bpo-21306</a>.)</p></li>
<li><p>OpenSSL 1.0.1g fue actualizado en los instaladores oficiales de Windows publicados en python.org. (Contribuido por Zachary Ware; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=21462">bpo-21462</a>.)</p></li>
</ul>
<p>Funciones relacionadas con <cite>466</cite> añadidas en Python 2.7.8:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../library/hashlib.html#hashlib.pbkdf2_hmac" title="hashlib.pbkdf2_hmac"><code class="xref py py-func docutils literal notranslate"><span class="pre">hashlib.pbkdf2_hmac()</span></code></a> fue portado desde Python 3 para hacer que un algoritmo de hash adecuado para el almacenamiento seguro de contraseñas esté ampliamente disponible para las aplicaciones de Python 2. (Contribuido por Alex Gaynor; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=21304">bpo-21304</a>.)</p></li>
<li><p>OpenSSL 1.0.1h fue actualizado para los instaladores oficiales de Windows publicados en python.org. (contribuido por Zachary Ware en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=21671">bpo-21671</a> para CVE-2014-0224)</p></li>
</ul>
<p>Funciones relacionadas con <cite>466</cite> añadidas en Python 2.7.9:</p>
<ul>
<li><p>La mayor parte del módulo <a class="reference internal" href="../library/ssl.html#module-ssl" title="ssl: TLS/SSL wrapper for socket objects"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ssl</span></code></a> de Python 3.4 ha sido portado a esta versión. Esto significa que <a class="reference internal" href="../library/ssl.html#module-ssl" title="ssl: TLS/SSL wrapper for socket objects"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ssl</span></code></a> ahora soporta la Indicación de Nombre de Servidor, la configuración de TLS1.x, el acceso al almacén de certificados de la plataforma, la clase <a class="reference internal" href="../library/ssl.html#ssl.SSLContext" title="ssl.SSLContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">SSLContext</span></code></a>, y otras características. (Contribución de Alex Gaynor y David Reid; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=21308">bpo-21308</a>.)</p>
<p>Consulte las notas «Versión añadida: 2.7.9» en la documentación del módulo para obtener detalles específicos.</p>
</li>
<li><p><a class="reference internal" href="../library/os.html#os.urandom" title="os.urandom"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.urandom()</span></code></a> ha sido modificado para almacenar en caché un descriptor de fichero en <code class="docutils literal notranslate"><span class="pre">/dev/urandom</span></code> en lugar de reabrir <code class="docutils literal notranslate"><span class="pre">/dev/urandom</span></code> en cada llamada. (Contribuido por Alex Gaynor; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=21305">bpo-21305</a>.)</p></li>
<li><p><a class="reference internal" href="../library/hashlib.html#hashlib.algorithms_guaranteed" title="hashlib.algorithms_guaranteed"><code class="xref py py-data docutils literal notranslate"><span class="pre">hashlib.algorithms_guaranteed</span></code></a> y <a class="reference internal" href="../library/hashlib.html#hashlib.algorithms_available" title="hashlib.algorithms_available"><code class="xref py py-data docutils literal notranslate"><span class="pre">hashlib.algorithms_available</span></code></a> han sido portados desde Python 3 para facilitar a las aplicaciones de Python 2 la selección del algoritmo hash más potente disponible. (Contribuido por Alex Gaynor en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=21307">bpo-21307</a>)</p></li>
</ul>
</section>
<section id="pep-477-backport-ensurepip-pep-453-to-python-2-7">
<h3>PEP 477: Backport ensurepip (PEP 453) a Python 2.7<a class="headerlink" href="#pep-477-backport-ensurepip-pep-453-to-python-2-7" title="Enlazar permanentemente con este título">¶</a></h3>
<p><span class="target" id="index-69"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0477"><strong>PEP 477</strong></a> aprueba la inclusión del módulo <span class="target" id="index-70"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0453"><strong>PEP 453</strong></a> ensurepip y la documentación mejorada que ha permitido en las versiones de mantenimiento de Python 2.7, apareciendo primero en la versión 2.7.9 de Python.</p>
<section id="bootstrapping-pip-by-default">
<h4>Puesta en marcha de pip por defecto<a class="headerlink" href="#bootstrapping-pip-by-default" title="Enlazar permanentemente con este título">¶</a></h4>
<p>El nuevo módulo <a class="reference internal" href="../library/ensurepip.html#module-ensurepip" title="ensurepip: Bootstrapping the &quot;pip&quot; installer into an existing Python installation or virtual environment."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ensurepip</span></code></a> (definido en <span class="target" id="index-71"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0453"><strong>PEP 453</strong></a>) proporciona un mecanismo estándar multiplataforma para arrancar el instalador pip en las instalaciones de Python. La versión de <code class="docutils literal notranslate"><span class="pre">pip</span></code> incluida con Python 2.7.9 es <code class="docutils literal notranslate"><span class="pre">pip</span></code> 1.5.6, y las futuras versiones de mantenimiento de 2.7.x actualizarán la versión incluida a la última versión de <code class="docutils literal notranslate"><span class="pre">pip</span></code> que esté disponible en el momento de crear la versión candidata.</p>
<p>Por defecto, los comandos <code class="docutils literal notranslate"><span class="pre">pip</span></code>, <code class="docutils literal notranslate"><span class="pre">pipX</span></code> y <code class="docutils literal notranslate"><span class="pre">pipX.Y</span></code> se instalarán en todas las plataformas (donde X.Y representa la versión de la instalación de Python), junto con el paquete de Python <code class="docutils literal notranslate"><span class="pre">pip</span></code> y sus dependencias.</p>
<p>Para las construcciones de CPython <a class="reference internal" href="../using/unix.html#building-python-on-unix"><span class="std std-ref">source en sistemas POSIX</span></a>, los comandos <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">install</span></code> y <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">altinstall</span></code> no arrancan <code class="docutils literal notranslate"><span class="pre">pip</span></code> por defecto.  Este comportamiento puede ser controlado a través de las opciones de configuración, y anulado a través de las opciones del Makefile.&lt;/building-python-on-unix&gt;</p>
<p>En Windows y Mac OS X, los instaladores de CPython ahora instalan por defecto <code class="docutils literal notranslate"><span class="pre">pip</span></code> junto con el propio CPython (los usuarios pueden optar por no instalarlo durante el proceso de instalación). Los usuarios de Windows tendrán que optar por las modificaciones automáticas del <code class="docutils literal notranslate"><span class="pre">PATH</span></code> para que <code class="docutils literal notranslate"><span class="pre">pip</span></code> esté disponible por defecto desde la línea de comandos, de lo contrario se puede acceder a través del lanzador de Python para Windows como <code class="docutils literal notranslate"><span class="pre">py</span> <span class="pre">-m</span> <span class="pre">pip</span></code>.</p>
<p><a class="reference external" href="https://www.python.org/dev/peps/pep-0477/#disabling-ensurepip-by-downstream-distributors">Como se discute en el PEP</a>, los empaquetadores de plataformas pueden optar por no instalar estos comandos por defecto, siempre y cuando, cuando se invoquen, proporcionen instrucciones claras y sencillas sobre cómo instalarlos en esa plataforma (normalmente utilizando el gestor de paquetes del sistema).</p>
</section>
<section id="documentation-changes">
<h4>Cambios en la documentación<a class="headerlink" href="#documentation-changes" title="Enlazar permanentemente con este título">¶</a></h4>
<p>As part of this change, the <a class="reference internal" href="../installing/index.html#installing-index"><span class="std std-ref">Instalando módulos de Python</span></a> and
<a class="reference internal" href="../distributing/index.html#distributing-index"><span class="std std-ref">Distribuir módulos de Python</span></a> sections of the documentation have been
completely redesigned as short getting started and FAQ documents. Most
packaging documentation has now been moved out to the Python Packaging
Authority maintained <a class="reference external" href="https://packaging.python.org">Python Packaging User Guide</a> and the documentation of the individual
projects.</p>
<p>Sin embargo, como esta migración está aún incompleta, las versiones anteriores de esas guías siguen disponibles como <a class="reference internal" href="../install/index.html#install-index"><span class="std std-ref">Instalación de Módulos de Python (versión antigua)</span></a> y <a class="reference internal" href="../distutils/index.html#distutils-index"><span class="std std-ref">Distribución de módulos de Python (versión heredada)</span></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<dl class="simple">
<dt><span class="target" id="index-72"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0453"><strong>PEP 453</strong></a> – Arranque explícito de pip en instalaciones de Python</dt><dd><p>PEP escrito por Donald Stufft y Nick Coghlan, implementado por Donald Stufft, Nick Coghlan, Martin von Löwis y Ned Deily.</p>
</dd>
</dl>
</div>
</section>
</section>
<section id="pep-476-enabling-certificate-verification-by-default-for-stdlib-http-clients">
<h3>PEP 476: Habilitar la verificación de certificados por defecto para los clientes http stdlib<a class="headerlink" href="#pep-476-enabling-certificate-verification-by-default-for-stdlib-http-clients" title="Enlazar permanentemente con este título">¶</a></h3>
<p><span class="target" id="index-73"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0476"><strong>PEP 476</strong></a> ha actualizado <code class="xref py py-mod docutils literal notranslate"><span class="pre">httplib</span></code> y los módulos que lo utilizan, como <code class="xref py py-mod docutils literal notranslate"><span class="pre">urllib2</span></code> y <code class="xref py py-mod docutils literal notranslate"><span class="pre">xmlrpclib</span></code>, para que ahora verifiquen que el servidor presenta un certificado que está firmado por una Autoridad de Certificación en el almacén de confianza de la plataforma y cuyo nombre de host coincide con el nombre de host que se solicita por defecto, mejorando significativamente la seguridad de muchas aplicaciones. Este cambio se realizó en la versión 2.7.9 de Python.</p>
<p>Para las aplicaciones que requieren el antiguo comportamiento anterior, pueden pasar un contexto alternativo:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">urllib2</span>
<span class="kn">import</span> <span class="nn">ssl</span>

<span class="c1"># This disables all verification</span>
<span class="n">context</span> <span class="o">=</span> <span class="n">ssl</span><span class="o">.</span><span class="n">_create_unverified_context</span><span class="p">()</span>

<span class="c1"># This allows using a specific certificate for the host, which doesn&#39;t need</span>
<span class="c1"># to be in the trust store</span>
<span class="n">context</span> <span class="o">=</span> <span class="n">ssl</span><span class="o">.</span><span class="n">create_default_context</span><span class="p">(</span><span class="n">cafile</span><span class="o">=</span><span class="s2">&quot;/path/to/file.crt&quot;</span><span class="p">)</span>

<span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="s2">&quot;https://invalid-cert&quot;</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="pep-493-https-verification-migration-tools-for-python-2-7">
<h3>PEP 493: Herramientas de migración de verificación HTTPS para Python 2.7<a class="headerlink" href="#pep-493-https-verification-migration-tools-for-python-2-7" title="Enlazar permanentemente con este título">¶</a></h3>
<p><span class="target" id="index-74"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0493"><strong>PEP 493</strong></a> proporciona herramientas de migración adicionales para soportar un proceso de actualización de la infraestructura más incremental para los entornos que contienen aplicaciones y servicios que dependen del procesamiento históricamente permisivo de los certificados de servidor cuando se establecen conexiones HTTPS de cliente.  Estas adiciones se realizaron en la versión 2.7.12 de Python.</p>
<p>Estas herramientas están pensadas para su uso en casos en los que las aplicaciones y servicios afectados no pueden modificarse para pasar explícitamente un contexto SSL más permisivo al establecer la conexión.</p>
<p>Para las aplicaciones y servicios que no pueden ser modificados en absoluto, la nueva variable de entorno <code class="docutils literal notranslate"><span class="pre">PYTHONHTTPSVERIFY</span></code> puede establecerse a <code class="docutils literal notranslate"><span class="pre">0</span></code> para revertir todo un proceso de Python al comportamiento permisivo por defecto de Python 2.7.8 y anteriores.</p>
<p>Para los casos en los que el código de establecimiento de la conexión no puede modificarse, pero sí la aplicación en general, la nueva función <code class="xref py py-func docutils literal notranslate"><span class="pre">ssl._https_verify_certificates()</span></code> puede utilizarse para ajustar el comportamiento por defecto en tiempo de ejecución.</p>
</section>
<section id="new-make-regen-all-build-target">
<h3>Nuevo objetivo de construcción <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">regen-all</span></code><a class="headerlink" href="#new-make-regen-all-build-target" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Para simplificar la compilación cruzada, y para asegurar que CPython pueda ser compilado de forma fiable sin requerir que una versión existente de Python esté ya disponible, el sistema de construcción basado en autotools ya no intenta recompilar implícitamente los archivos generados basándose en los tiempos de modificación de los archivos.</p>
<p>En su lugar, se ha añadido un nuevo comando <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">regen-all</span></code> para forzar la regeneración de estos archivos cuando se desee (por ejemplo, después de que se haya construido una versión inicial de Python basada en las versiones pregeneradas).</p>
<p>También se definen objetivos de regeneración más selectivos - ver <a class="reference external" href="https://github.com/python/cpython/tree/3.10/Makefile.pre.in">Makefile.pre.in</a> para más detalles.</p>
<p>(Contribución de Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=23404">bpo-23404</a>.)</p>
<div class="versionadded">
<p><span class="versionmodified added">Nuevo en la versión 2.7.14.</span></p>
</div>
</section>
<section id="removal-of-make-touch-build-target">
<h3>Eliminación del objetivo de construcción <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">touch</span></code><a class="headerlink" href="#removal-of-make-touch-build-target" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Se ha eliminado el objetivo de compilación <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">touch</span></code> que anteriormente se utilizaba para solicitar la regeneración implícita de los archivos generados mediante la actualización de sus tiempos de modificación.</p>
<p>Se ha sustituido por el nuevo objetivo <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">regen-all</span></code>.</p>
<p>(Contribución de Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=23404">bpo-23404</a>.)</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Distinto en la versión 2.7.14.</span></p>
</div>
</section>
</section>
<section id="acknowledgements">
<span id="acks27"></span><h2>Agradecimientos<a class="headerlink" href="#acknowledgements" title="Enlazar permanentemente con este título">¶</a></h2>
<p>El autor desea agradecer a las siguientes personas sus sugerencias, correcciones y ayuda en varios borradores de este artículo: Nick Coghlan, Philip Jenvey, Ryan Lovett, R. David Murray y Hugh Secker-Walker.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">Tabla de contenido</a></h3>
  <ul>
<li><a class="reference internal" href="#">Qué hay de nuevo en Python 2.7</a><ul>
<li><a class="reference internal" href="#the-future-for-python-2-x">El futuro de Python 2.x</a></li>
<li><a class="reference internal" href="#changes-to-the-handling-of-deprecation-warnings">Cambios en el manejo de las advertencias de desuso</a></li>
<li><a class="reference internal" href="#python-3-1-features">Características de Python 3.1</a></li>
<li><a class="reference internal" href="#pep-372-adding-an-ordered-dictionary-to-collections">PEP 372: Adición de un diccionario ordenado a las colecciones</a></li>
<li><a class="reference internal" href="#pep-378-format-specifier-for-thousands-separator">PEP 378: Especificador de formato para separador de miles</a></li>
<li><a class="reference internal" href="#pep-389-the-argparse-module-for-parsing-command-lines">PEP 389: El módulo argparse para el análisis de líneas de comando</a></li>
<li><a class="reference internal" href="#pep-391-dictionary-based-configuration-for-logging">PEP 391: Configuración basada en diccionarios para el registro</a></li>
<li><a class="reference internal" href="#pep-3106-dictionary-views">PEP 3106: Vistas de diccionario</a></li>
<li><a class="reference internal" href="#pep-3137-the-memoryview-object">PEP 3137: El objeto memoryview</a></li>
<li><a class="reference internal" href="#other-language-changes">Otros cambios de lenguaje</a><ul>
<li><a class="reference internal" href="#interpreter-changes">Cambios en el intérprete</a></li>
<li><a class="reference internal" href="#optimizations">Optimizaciones</a></li>
</ul>
</li>
<li><a class="reference internal" href="#new-and-improved-modules">Módulos nuevos y mejorados</a><ul>
<li><a class="reference internal" href="#new-module-importlib">Nuevo módulo: importlib</a></li>
<li><a class="reference internal" href="#new-module-sysconfig">Nuevo módulo: sysconfig</a></li>
<li><a class="reference internal" href="#ttk-themed-widgets-for-tk">ttk: Widgets temáticos para Tk</a></li>
<li><a class="reference internal" href="#updated-module-unittest">Módulo actualizado: unittest</a></li>
<li><a class="reference internal" href="#updated-module-elementtree-1-3">Módulo actualizado: ElementTree 1.3</a></li>
</ul>
</li>
<li><a class="reference internal" href="#build-and-c-api-changes">Cambios en la API de construcción y C</a><ul>
<li><a class="reference internal" href="#capsules">Cápsulas</a></li>
<li><a class="reference internal" href="#port-specific-changes-windows">Cambios específicos en los puertos: Windows</a></li>
<li><a class="reference internal" href="#port-specific-changes-mac-os-x">Cambios específicos en los puertos: Mac OS X</a></li>
<li><a class="reference internal" href="#port-specific-changes-freebsd">Cambios específicos en los puertos: FreeBSD</a></li>
</ul>
</li>
<li><a class="reference internal" href="#other-changes-and-fixes">Otros cambios y correcciones</a></li>
<li><a class="reference internal" href="#porting-to-python-2-7">Adaptación a Python 2.7</a></li>
<li><a class="reference internal" href="#new-features-added-to-python-2-7-maintenance-releases">Nuevas funciones añadidas a las versiones de mantenimiento de Python 2.7</a><ul>
<li><a class="reference internal" href="#two-new-environment-variables-for-debug-mode">Dos nuevas variables de entorno para el modo de depuración</a></li>
<li><a class="reference internal" href="#pep-434-idle-enhancement-exception-for-all-branches">PEP 434: Excepción de mejora de IDLE para todas las ramas</a></li>
<li><a class="reference internal" href="#pep-466-network-security-enhancements-for-python-2-7">PEP 466: Mejoras en la seguridad de la red para Python 2.7</a></li>
<li><a class="reference internal" href="#pep-477-backport-ensurepip-pep-453-to-python-2-7">PEP 477: Backport ensurepip (PEP 453) a Python 2.7</a><ul>
<li><a class="reference internal" href="#bootstrapping-pip-by-default">Puesta en marcha de pip por defecto</a></li>
<li><a class="reference internal" href="#documentation-changes">Cambios en la documentación</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pep-476-enabling-certificate-verification-by-default-for-stdlib-http-clients">PEP 476: Habilitar la verificación de certificados por defecto para los clientes http stdlib</a></li>
<li><a class="reference internal" href="#pep-493-https-verification-migration-tools-for-python-2-7">PEP 493: Herramientas de migración de verificación HTTPS para Python 2.7</a></li>
<li><a class="reference internal" href="#new-make-regen-all-build-target">Nuevo objetivo de construcción <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">regen-all</span></code></a></li>
<li><a class="reference internal" href="#removal-of-make-touch-build-target">Eliminación del objetivo de construcción <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">touch</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#acknowledgements">Agradecimientos</a></li>
</ul>
</li>
</ul>

  <h4>Tema anterior</h4>
  <p class="topless"><a href="3.0.html"
                        title="capítulo anterior">Qué hay de nuevo en Python 3.0</a></p>
  <h4>Próximo tema</h4>
  <p class="topless"><a href="2.6.html"
                        title="próximo capítulo">Qué hay de nuevo en Python 2.6</a></p>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Reporta un Bug</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/3.10/Doc/whatsnew/2.7.rst"
            rel="nofollow">Ver Fuente
        </a>
      </li>
    </ul>
  </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice general"
             >índice</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Índice de Módulos Python"
             >módulos</a> |</li>
        <li class="right" >
          <a href="2.6.html" title="Qué hay de nuevo en Python 2.6"
             >siguiente</a> |</li>
        <li class="right" >
          <a href="3.0.html" title="Qué hay de nuevo en Python 3.0"
             >anterior</a> |</li>

          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.10.10 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" >Qué hay de nuevo en Python</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Qué hay de nuevo en Python 2.7</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Búsqueda rápida" aria-label="Búsqueda rápida" type="text" name="q" />
          <input type="submit" value="Ir" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
                     |
                </li>
            
      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="../copyright.html">Copyright</a> 2001-2023, Python Software Foundation.
    <br />
    This page is licensed under the Python Software Foundation License Version 2.
    <br />
    Examples, recipes, and other code in the documentation are additionally licensed under the Zero Clause BSD License.
    <br />
    See <a href="/license.html">History and License</a> for more information.<br />
    <br />

    La Python Software Foundation es una organización sin fines de lucro.
<a href="https://www.python.org/psf/donations/">Por favor, haga una donación.</a>
<br />
    <br />

    Última actualización el mar 27, 2023.
    <a href="/bugs.html">Found a bug</a>?
    <br />

    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.4.3.
    </div>

  </body>
</html>