
<!DOCTYPE html>

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<meta property="og:title" content="Qué hay de nuevo en Python 3.9" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://docs.python.org/3/whatsnew/3.9.html" />
<meta property="og:site_name" content="Python documentation" />
<meta property="og:description" content="Editor, Łukasz Langa,. Este artículo explica las nuevas funciones de Python 3.9, en comparación con 3.8. Python 3.9 se lanzó el 5 de octubre de 2020. Para obtener detalles completos, consulte el ch..." />
<meta property="og:image" content="https://docs.python.org/3/_static/og-image.png" />
<meta property="og:image:alt" content="Python documentation" />
<meta name="description" content="Editor, Łukasz Langa,. Este artículo explica las nuevas funciones de Python 3.9, en comparación con 3.8. Python 3.9 se lanzó el 5 de octubre de 2020. Para obtener detalles completos, consulte el ch..." />
<meta property="og:image:width" content="200" />
<meta property="og:image:height" content="200" />
<meta name="theme-color" content="#3776ab" />

    <title>Qué hay de nuevo en Python 3.9 &#8212; documentación de Python - 3.11.2</title><meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/pydoctheme.css?digest=2d3badd06fe70b34b68db01f99471ce1624ffe4a" />
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/translations.js"></script>
    
    <script src="../_static/sidebar.js"></script>
    
    <link rel="search" type="application/opensearchdescription+xml"
          title="Buscar en documentación de Python - 3.11.2"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="Sobre este documento" href="../about.html" />
    <link rel="index" title="Índice" href="../genindex.html" />
    <link rel="search" title="Búsqueda" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="Qué hay de nuevo en Python 3.8" href="3.8.html" />
    <link rel="prev" title="Qué hay de nuevo en Python 3.10" href="3.10.html" />
    <link rel="canonical" href="https://docs.python.org/3/whatsnew/3.9.html" />
    
      
    

    
    <style>
      @media only screen {
        table.full-width-table {
            width: 100%;
        }
      }
    </style>
<link rel="shortcut icon" type="image/png" href="../_static/py.svg" />
            <script type="text/javascript" src="../_static/copybutton.js"></script>
            <script type="text/javascript" src="../_static/menu.js"></script> 

  </head>
<body>
<div class="mobile-nav">
    <input type="checkbox" id="menuToggler" class="toggler__input" aria-controls="navigation"
           aria-pressed="false" aria-expanded="false" role="button" aria-label="Menu" />
    <label for="menuToggler" class="toggler__label">
        <span></span>
    </label>
    <nav class="nav-content" role="navigation">
         <a href="https://www.python.org/" class="nav-logo">
             <img src="../_static/py.svg" alt="Logo"/>
         </a>
        <div class="version_switcher_placeholder"></div>
        <form role="search" class="search" action="../search.html" method="get">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="search-icon">
                <path fill-rule="nonzero"
                        d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 001.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 00-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 005.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" fill="#444"></path>
            </svg>
            <input type="text" name="q" aria-label="Búsqueda rápida"/>
            <input type="submit" value="Ir"/>
        </form>
    </nav>
    <div class="menu-wrapper">
        <nav class="menu" role="navigation" aria-label="main navigation">
            <div class="language_switcher_placeholder"></div>
  <div>
    <h3><a href="../contents.html">Tabla de contenido</a></h3>
    <ul>
<li><a class="reference internal" href="#">Qué hay de nuevo en Python 3.9</a><ul>
<li><a class="reference internal" href="#summary-release-highlights">Resumen: aspectos destacados de la versión</a></li>
<li><a class="reference internal" href="#you-should-check-for-deprecationwarning-in-your-code">Debe verificar DeprecationWarning en su código</a></li>
<li><a class="reference internal" href="#new-features">Nuevas características</a><ul>
<li><a class="reference internal" href="#dictionary-merge-update-operators">Operadores de combinación y actualización de diccionarios</a></li>
<li><a class="reference internal" href="#new-string-methods-to-remove-prefixes-and-suffixes">Nuevos métodos de cadena para eliminar prefijos y sufijos</a></li>
<li><a class="reference internal" href="#type-hinting-generics-in-standard-collections">Tipos genéricos de sugerencia en colecciones estándar</a></li>
<li><a class="reference internal" href="#new-parser">Nuevo analizador</a></li>
</ul>
</li>
<li><a class="reference internal" href="#other-language-changes">Otros cambios de idioma</a></li>
<li><a class="reference internal" href="#new-modules">Nuevos módulos</a><ul>
<li><a class="reference internal" href="#zoneinfo">zoneinfo</a></li>
<li><a class="reference internal" href="#graphlib">Graphlib</a></li>
</ul>
</li>
<li><a class="reference internal" href="#improved-modules">Módulos mejorados</a><ul>
<li><a class="reference internal" href="#ast">ast</a></li>
<li><a class="reference internal" href="#asyncio">asyncio</a></li>
<li><a class="reference internal" href="#compileall">compilar todo</a></li>
<li><a class="reference internal" href="#concurrent-futures">Futuros concurrentes</a></li>
<li><a class="reference internal" href="#curses">maldiciones</a></li>
<li><a class="reference internal" href="#datetime">fecha y hora</a></li>
<li><a class="reference internal" href="#distutils">distutils</a></li>
<li><a class="reference internal" href="#fcntl">fcntl</a></li>
<li><a class="reference internal" href="#ftplib">ftplib</a></li>
<li><a class="reference internal" href="#gc">GC</a></li>
<li><a class="reference internal" href="#hashlib">hashlib</a></li>
<li><a class="reference internal" href="#http">http</a></li>
<li><a class="reference internal" href="#idle-and-idlelib">IDLE e idlelib</a></li>
<li><a class="reference internal" href="#imaplib">imaplib</a></li>
<li><a class="reference internal" href="#importlib">importlib</a></li>
<li><a class="reference internal" href="#inspect">inspeccionar</a></li>
<li><a class="reference internal" href="#ipaddress">dirección IP</a></li>
<li><a class="reference internal" href="#math">Matemáticas</a></li>
<li><a class="reference internal" href="#multiprocessing">multiprocesamiento</a></li>
<li><a class="reference internal" href="#nntplib">nntplib</a></li>
<li><a class="reference internal" href="#os">os</a></li>
<li><a class="reference internal" href="#pathlib">Pathlib</a></li>
<li><a class="reference internal" href="#pdb">pdb</a></li>
<li><a class="reference internal" href="#poplib">poplib</a></li>
<li><a class="reference internal" href="#pprint">pprint</a></li>
<li><a class="reference internal" href="#pydoc">Pydoc</a></li>
<li><a class="reference internal" href="#random">aleatorio</a></li>
<li><a class="reference internal" href="#signal">señal</a></li>
<li><a class="reference internal" href="#smtplib">smtplib</a></li>
<li><a class="reference internal" href="#socket">enchufe</a></li>
<li><a class="reference internal" href="#time">tiempo</a></li>
<li><a class="reference internal" href="#sys">sys</a></li>
<li><a class="reference internal" href="#tracemalloc">tracemalloc</a></li>
<li><a class="reference internal" href="#typing">mecanografía</a></li>
<li><a class="reference internal" href="#unicodedata">unicodedata</a></li>
<li><a class="reference internal" href="#venv">venv</a></li>
<li><a class="reference internal" href="#xml">xml</a></li>
</ul>
</li>
<li><a class="reference internal" href="#optimizations">Optimizaciones</a></li>
<li><a class="reference internal" href="#deprecated">Obsoleto</a></li>
<li><a class="reference internal" href="#removed">Remoto</a></li>
<li><a class="reference internal" href="#porting-to-python-3-9">Portar a Python 3.9</a><ul>
<li><a class="reference internal" href="#changes-in-the-python-api">Cambios en la API de Python</a></li>
<li><a class="reference internal" href="#changes-in-the-c-api">Cambios en la API de C</a></li>
<li><a class="reference internal" href="#cpython-bytecode-changes">Cambios en el código de bytes de CPython</a></li>
</ul>
</li>
<li><a class="reference internal" href="#build-changes">Construir cambios</a></li>
<li><a class="reference internal" href="#c-api-changes">Cambios en la API de C</a><ul>
<li><a class="reference internal" href="#id1">Nuevas características</a></li>
<li><a class="reference internal" href="#id2">Portar a Python 3.9</a></li>
<li><a class="reference internal" href="#id3">Remoto</a></li>
</ul>
</li>
<li><a class="reference internal" href="#notable-changes-in-python-3-9-1">Cambios notables en Python 3.9.1</a><ul>
<li><a class="reference internal" href="#id4">mecanografía</a></li>
<li><a class="reference internal" href="#macos-11-0-big-sur-and-apple-silicon-mac-support">Compatibilidad con macOS 11.0 (Big Sur) y Apple Silicon Mac</a></li>
</ul>
</li>
<li><a class="reference internal" href="#notable-changes-in-python-3-9-2">Cambios notables en Python 3.9.2</a><ul>
<li><a class="reference internal" href="#collections-abc">colecciones.abc</a></li>
<li><a class="reference internal" href="#urllib-parse">urllib.parse</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Tema anterior</h4>
    <p class="topless"><a href="3.10.html"
                          title="capítulo anterior">Qué hay de nuevo en Python 3.10</a></p>
  </div>
  <div>
    <h4>Próximo tema</h4>
    <p class="topless"><a href="3.8.html"
                          title="próximo capítulo">Qué hay de nuevo en Python 3.8</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Reporta un bug</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/3.11/Doc/whatsnew/3.9.rst"
            rel="nofollow">Ver fuente
        </a>
      </li>
    </ul>
  </div>
        </nav>
    </div>
</div>

  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice general"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Índice de Módulos Python"
             >módulos</a> |</li>
        <li class="right" >
          <a href="3.8.html" title="Qué hay de nuevo en Python 3.8"
             accesskey="N">siguiente</a> |</li>
        <li class="right" >
          <a href="3.10.html" title="Qué hay de nuevo en Python 3.10"
             accesskey="P">anterior</a> |</li>

          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.11.2 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Qué hay de nuevo en Python</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Qué hay de nuevo en Python 3.9</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Búsqueda rápida" aria-label="Búsqueda rápida" type="text" name="q" />
          <input type="submit" value="Ir" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
                     |
                </li>
            
      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="what-s-new-in-python-3-9">
<h1>Qué hay de nuevo en Python 3.9<a class="headerlink" href="#what-s-new-in-python-3-9" title="Enlazar permanentemente con este título">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Editor</dt>
<dd class="field-odd"><p>Łukasz Langa</p>
</dd>
</dl>
<p>Este artículo explica las nuevas funciones de Python 3.9, en comparación con 3.8. Python 3.9 se lanzó el 5 de octubre de 2020.</p>
<p>Para obtener detalles completos, consulte el <a class="reference internal" href="changelog.html#changelog"><span class="std std-ref">changelog</span></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<p><span class="target" id="index-55"></span><a class="pep reference external" href="https://peps.python.org/pep-0596/"><strong>PEP 596</strong></a> - Programa de lanzamiento de Python 3.9</p>
</div>
<section id="summary-release-highlights">
<h2>Resumen: aspectos destacados de la versión<a class="headerlink" href="#summary-release-highlights" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Nuevas funciones de sintaxis:</p>
<ul class="simple">
<li><p><span class="target" id="index-56"></span><a class="pep reference external" href="https://peps.python.org/pep-0584/"><strong>PEP 584</strong></a>, operadores unión agregados a <code class="docutils literal notranslate"><span class="pre">dict</span></code>;</p></li>
<li><p><span class="target" id="index-57"></span><a class="pep reference external" href="https://peps.python.org/pep-0585/"><strong>PEP 585</strong></a>, genéricos de sugerencia de tipo en colecciones estándar;</p></li>
<li><p><span class="target" id="index-58"></span><a class="pep reference external" href="https://peps.python.org/pep-0614/"><strong>PEP 614</strong></a>, restricciones gramaticales relajadas para los decoradores.</p></li>
</ul>
<p>Nuevas funciones integradas:</p>
<ul class="simple">
<li><p><span class="target" id="index-59"></span><a class="pep reference external" href="https://peps.python.org/pep-0616/"><strong>PEP 616</strong></a>, métodos de cadena para eliminar prefijos y sufijos.</p></li>
</ul>
<p>Nuevas funciones en la biblioteca estándar:</p>
<ul class="simple">
<li><p><span class="target" id="index-60"></span><a class="pep reference external" href="https://peps.python.org/pep-0593/"><strong>PEP 593</strong></a>, función flexible y anotaciones variables;</p></li>
<li><p>Se agregó <a class="reference internal" href="../library/os.html#os.pidfd_open" title="os.pidfd_open"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.pidfd_open()</span></code></a> que permite la gestión de procesos sin razas ni señales.</p></li>
</ul>
<p>Mejoras en el intérprete:</p>
<ul class="simple">
<li><p><span class="target" id="index-61"></span><a class="pep reference external" href="https://peps.python.org/pep-0573/"><strong>PEP 573</strong></a>, acceso rápido al estado del módulo desde métodos de tipos de extensión C;</p></li>
<li><p><span class="target" id="index-62"></span><a class="pep reference external" href="https://peps.python.org/pep-0617/"><strong>PEP 617</strong></a>, CPython ahora usa un nuevo analizador basado en PEG;</p></li>
<li><p>varias incorporaciones de Python (rango, tupla, conjunto, conjunto frozenset, lista, dict) ahora se aceleran usando <span class="target" id="index-63"></span><a class="pep reference external" href="https://peps.python.org/pep-0590/"><strong>PEP 590</strong></a> vectorcall;</p></li>
<li><p>la recolección de basura no bloquea los objetos resucitados;</p></li>
<li><p>varios módulos de Python (<code class="xref py py-mod docutils literal notranslate"><span class="pre">_abc</span></code>, <a class="reference internal" href="../library/audioop.html#module-audioop" title="audioop: Manipulate raw audio data. (obsoleto)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">audioop</span></code></a>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">_bz2</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">_codecs</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">_contextvars</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">_crypt</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">_functools</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">_json</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">_locale</span></code>, <a class="reference internal" href="../library/math.html#module-math" title="math: Mathematical functions (sin() etc.)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">math</span></code></a>, <a class="reference internal" href="../library/operator.html#module-operator" title="operator: Functions corresponding to the standard operators."><code class="xref py py-mod docutils literal notranslate"><span class="pre">operator</span></code></a>, <a class="reference internal" href="../library/resource.html#module-resource" title="resource: An interface to provide resource usage information on the current process. (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">resource</span></code></a>, <a class="reference internal" href="../library/time.html#module-time" title="time: Time access and conversions."><code class="xref py py-mod docutils literal notranslate"><span class="pre">time</span></code></a>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">_weakref</span></code>) ahora utilizan la inicialización multifase según lo definido por PEP 489;</p></li>
<li><p>varios módulos de biblioteca estándar (<a class="reference internal" href="../library/audioop.html#module-audioop" title="audioop: Manipulate raw audio data. (obsoleto)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">audioop</span></code></a>, <a class="reference internal" href="../library/ast.html#module-ast" title="ast: Abstract Syntax Tree classes and manipulation."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ast</span></code></a>, <a class="reference internal" href="../library/grp.html#module-grp" title="grp: The group database (getgrnam() and friends). (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">grp</span></code></a>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">_hashlib</span></code>, <a class="reference internal" href="../library/pwd.html#module-pwd" title="pwd: The password database (getpwnam() and friends). (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pwd</span></code></a>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">_posixsubprocess</span></code>, <a class="reference internal" href="../library/random.html#module-random" title="random: Generate pseudo-random numbers with various common distributions."><code class="xref py py-mod docutils literal notranslate"><span class="pre">random</span></code></a>, <a class="reference internal" href="../library/select.html#module-select" title="select: Wait for I/O completion on multiple streams."><code class="xref py py-mod docutils literal notranslate"><span class="pre">select</span></code></a>, <a class="reference internal" href="../library/struct.html#module-struct" title="struct: Interpret bytes as packed binary data."><code class="xref py py-mod docutils literal notranslate"><span class="pre">struct</span></code></a>, <a class="reference internal" href="../library/termios.html#module-termios" title="termios: POSIX style tty control. (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">termios</span></code></a>, <a class="reference internal" href="../library/zlib.html#module-zlib" title="zlib: Low-level interface to compression and decompression routines compatible with gzip."><code class="xref py py-mod docutils literal notranslate"><span class="pre">zlib</span></code></a>) ahora utilizan la ABI estable definida por PEP 384.</p></li>
</ul>
<p>Nuevos módulos de biblioteca:</p>
<ul class="simple">
<li><p><span class="target" id="index-64"></span><a class="pep reference external" href="https://peps.python.org/pep-0615/"><strong>PEP 615</strong></a>, la base de datos de zona horaria de IANA ahora está presente en la biblioteca estándar en el módulo <a class="reference internal" href="../library/zoneinfo.html#module-zoneinfo" title="zoneinfo: IANA time zone support"><code class="xref py py-mod docutils literal notranslate"><span class="pre">zoneinfo</span></code></a>;</p></li>
<li><p>ahora se proporciona una implementación de una especie de gráfico topológico en el nuevo módulo <a class="reference internal" href="../library/graphlib.html#module-graphlib" title="graphlib: Functionality to operate with graph-like structures"><code class="xref py py-mod docutils literal notranslate"><span class="pre">graphlib</span></code></a>.</p></li>
</ul>
<p>Cambios en el proceso de lanzamiento:</p>
<ul class="simple">
<li><p><span class="target" id="index-65"></span><a class="pep reference external" href="https://peps.python.org/pep-0602/"><strong>PEP 602</strong></a>, CPython adopta un ciclo de lanzamiento anual.</p></li>
</ul>
</section>
<section id="you-should-check-for-deprecationwarning-in-your-code">
<h2>Debe verificar DeprecationWarning en su código<a class="headerlink" href="#you-should-check-for-deprecationwarning-in-your-code" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Cuando todavía se admitía Python 2.7, se conservaba una gran cantidad de funciones en Python 3 por compatibilidad con versiones anteriores de Python 2.7. Con el fin de la compatibilidad con Python 2, estas capas de compatibilidad con versiones anteriores se eliminaron o se eliminarán pronto. La mayoría de ellos emitió una advertencia <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a> durante varios años. Por ejemplo, usar <code class="docutils literal notranslate"><span class="pre">collections.Mapping</span></code> en lugar de <code class="docutils literal notranslate"><span class="pre">collections.abc.Mapping</span></code> emite un <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a> desde Python 3.3, lanzado en 2012.</p>
<p>Pruebe su aplicación con la opción de línea de comandos <a class="reference internal" href="../using/cmdline.html#cmdoption-W"><code class="xref std std-option docutils literal notranslate"><span class="pre">-W</span></code></a> <code class="docutils literal notranslate"><span class="pre">default</span></code> para ver <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a> y <a class="reference internal" href="../library/exceptions.html#PendingDeprecationWarning" title="PendingDeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">PendingDeprecationWarning</span></code></a>, o incluso con <a class="reference internal" href="../using/cmdline.html#cmdoption-W"><code class="xref std std-option docutils literal notranslate"><span class="pre">-W</span></code></a> <code class="docutils literal notranslate"><span class="pre">error</span></code> para tratarlos como errores. <a class="reference internal" href="../library/warnings.html#warning-filter"><span class="std std-ref">Warnings Filter</span></a> se puede utilizar para ignorar las advertencias del código de terceros.</p>
<p>Python 3.9 es la última versión que proporciona esas capas de compatibilidad con versiones anteriores de Python 2, para dar más tiempo a los mantenedores de proyectos de Python para organizar la eliminación del soporte de Python 2 y agregar soporte para Python 3.9.</p>
<p>Los alias de <a class="reference internal" href="../library/collections.abc.html#collections-abstract-base-classes"><span class="std std-ref">Abstract Base Classes</span></a> en el módulo <a class="reference internal" href="../library/collections.html#module-collections" title="collections: Container datatypes"><code class="xref py py-mod docutils literal notranslate"><span class="pre">collections</span></code></a>, como el alias de <code class="docutils literal notranslate"><span class="pre">collections.Mapping</span></code> de <a class="reference internal" href="../library/collections.abc.html#collections.abc.Mapping" title="collections.abc.Mapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.abc.Mapping</span></code></a>, se mantienen para una última versión por compatibilidad con versiones anteriores. Se eliminarán de Python 3.10.</p>
<p>De manera más general, intente ejecutar sus pruebas en el <a class="reference internal" href="../library/devmode.html#devmode"><span class="std std-ref">Python Development Mode</span></a>, lo que ayuda a preparar su código para que sea compatible con la próxima versión de Python.</p>
<p>Nota: también se eliminaron varias obsoletas en esta versión de Python. Consulte la sección <a class="reference internal" href="#removed-in-python-39"><span class="std std-ref">Remoto</span></a>.</p>
</section>
<section id="new-features">
<h2>Nuevas características<a class="headerlink" href="#new-features" title="Enlazar permanentemente con este título">¶</a></h2>
<section id="dictionary-merge-update-operators">
<h3>Operadores de combinación y actualización de diccionarios<a class="headerlink" href="#dictionary-merge-update-operators" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Los operadores de fusión (<code class="docutils literal notranslate"><span class="pre">|</span></code>) y actualización (<code class="docutils literal notranslate"><span class="pre">|=</span></code>) se han agregado a la clase <a class="reference internal" href="../library/stdtypes.html#dict" title="dict"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> incorporada. Estos complementan los métodos <code class="docutils literal notranslate"><span class="pre">dict.update</span></code> y <code class="docutils literal notranslate"><span class="pre">{**d1,</span> <span class="pre">**d2}</span></code> existentes para fusionar diccionarios.</p>
<p>Ejemplo:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;key1&quot;</span><span class="p">:</span> <span class="s2">&quot;value1 from x&quot;</span><span class="p">,</span> <span class="s2">&quot;key2&quot;</span><span class="p">:</span> <span class="s2">&quot;value2 from x&quot;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;key2&quot;</span><span class="p">:</span> <span class="s2">&quot;value2 from y&quot;</span><span class="p">,</span> <span class="s2">&quot;key3&quot;</span><span class="p">:</span> <span class="s2">&quot;value3 from y&quot;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">|</span> <span class="n">y</span>
<span class="go">{&#39;key1&#39;: &#39;value1 from x&#39;, &#39;key2&#39;: &#39;value2 from y&#39;, &#39;key3&#39;: &#39;value3 from y&#39;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">|</span> <span class="n">x</span>
<span class="go">{&#39;key2&#39;: &#39;value2 from x&#39;, &#39;key3&#39;: &#39;value3 from y&#39;, &#39;key1&#39;: &#39;value1 from x&#39;}</span>
</pre></div>
</div>
<p>Consulte <span class="target" id="index-66"></span><a class="pep reference external" href="https://peps.python.org/pep-0584/"><strong>PEP 584</strong></a> para obtener una descripción completa. (Contribuido por Brandt Bucher en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36144">bpo-36144</a>.)</p>
</section>
<section id="new-string-methods-to-remove-prefixes-and-suffixes">
<h3>Nuevos métodos de cadena para eliminar prefijos y sufijos<a class="headerlink" href="#new-string-methods-to-remove-prefixes-and-suffixes" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Se han agregado <a class="reference internal" href="../library/stdtypes.html#str.removeprefix" title="str.removeprefix"><code class="xref py py-meth docutils literal notranslate"><span class="pre">str.removeprefix(prefix)</span></code></a> y <a class="reference internal" href="../library/stdtypes.html#str.removesuffix" title="str.removesuffix"><code class="xref py py-meth docutils literal notranslate"><span class="pre">str.removesuffix(suffix)</span></code></a> para eliminar fácilmente un prefijo o sufijo innecesario de una cadena. También se han agregado los métodos correspondientes <code class="docutils literal notranslate"><span class="pre">bytes</span></code>, <code class="docutils literal notranslate"><span class="pre">bytearray</span></code> y <code class="docutils literal notranslate"><span class="pre">collections.UserString</span></code>. Consulte <span class="target" id="index-67"></span><a class="pep reference external" href="https://peps.python.org/pep-0616/"><strong>PEP 616</strong></a> para obtener una descripción completa. (Contribuido por Dennis Sweeney en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39939">bpo-39939</a>.)</p>
</section>
<section id="type-hinting-generics-in-standard-collections">
<h3>Tipos genéricos de sugerencia en colecciones estándar<a class="headerlink" href="#type-hinting-generics-in-standard-collections" title="Enlazar permanentemente con este título">¶</a></h3>
<p>En las anotaciones de tipo, ahora puede usar tipos de colección integrados como <code class="docutils literal notranslate"><span class="pre">list</span></code> y <code class="docutils literal notranslate"><span class="pre">dict</span></code> como tipos genéricos en lugar de importar los tipos en mayúsculas correspondientes (por ejemplo, <code class="docutils literal notranslate"><span class="pre">List</span></code> o <code class="docutils literal notranslate"><span class="pre">Dict</span></code>) desde <code class="docutils literal notranslate"><span class="pre">typing</span></code>. Algunos otros tipos de la biblioteca estándar ahora también son genéricos, por ejemplo, <code class="docutils literal notranslate"><span class="pre">queue.Queue</span></code>.</p>
<p>Ejemplo:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">greet_all</span><span class="p">(</span><span class="n">names</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>Consulte <span class="target" id="index-68"></span><a class="pep reference external" href="https://peps.python.org/pep-0585/"><strong>PEP 585</strong></a> para obtener más detalles. (Contribuido por Guido van Rossum, Ethan Smith y Batuhan Taşkaya en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39481">bpo-39481</a>.)</p>
</section>
<section id="new-parser">
<h3>Nuevo analizador<a class="headerlink" href="#new-parser" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Python 3.9 usa un nuevo analizador, basado en <a class="reference external" href="https://en.wikipedia.org/wiki/Parsing_expression_grammar">PEG</a> en lugar de <a class="reference external" href="https://en.wikipedia.org/wiki/LL_parser">LL(1)</a>. El rendimiento del analizador nuevo es aproximadamente comparable al del analizador anterior, pero el formalismo PEG es más flexible que LL (1) cuando se trata de diseñar nuevas funciones de lenguaje. Comenzaremos a usar esta flexibilidad en Python 3.10 y versiones posteriores.</p>
<p>El módulo <a class="reference internal" href="../library/ast.html#module-ast" title="ast: Abstract Syntax Tree classes and manipulation."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ast</span></code></a> usa el nuevo analizador y produce el mismo AST que el analizador anterior.</p>
<p>En Python 3.10, el analizador anterior se eliminará y también lo hará toda la funcionalidad que depende de él (principalmente el módulo <code class="xref py py-mod docutils literal notranslate"><span class="pre">parser</span></code>, que ha estado en desuso durante mucho tiempo). En Python 3.9 <em>only</em>, puede volver al analizador LL (1) utilizando un modificador de línea de comando (<code class="docutils literal notranslate"><span class="pre">-X</span> <span class="pre">oldparser</span></code>) o una variable de entorno (<code class="docutils literal notranslate"><span class="pre">PYTHONOLDPARSER=1</span></code>).</p>
<p>Consulte <span class="target" id="index-69"></span><a class="pep reference external" href="https://peps.python.org/pep-0617/"><strong>PEP 617</strong></a> para obtener más detalles. (Contribuido por Guido van Rossum, Pablo Galindo y Lysandros Nikolaou en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40334">bpo-40334</a>.)</p>
</section>
</section>
<section id="other-language-changes">
<h2>Otros cambios de idioma<a class="headerlink" href="#other-language-changes" title="Enlazar permanentemente con este título">¶</a></h2>
<ul>
<li><p><a class="reference internal" href="../library/functions.html#import__" title="__import__"><code class="xref py py-func docutils literal notranslate"><span class="pre">__import__()</span></code></a> ahora lanza <a class="reference internal" href="../library/exceptions.html#ImportError" title="ImportError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ImportError</span></code></a> en lugar de <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a>, que solía ocurrir cuando una importación relativa pasaba de su paquete de nivel superior. (Contribuido por Ngalim Siregar en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37444">bpo-37444</a>.)</p></li>
<li><p>Python ahora obtiene la ruta absoluta del nombre de archivo del script especificado en la línea de comando (por ejemplo: <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">script.py</span></code>): el módulo <code class="docutils literal notranslate"><span class="pre">__file__</span></code> attribute of the <a class="reference internal" href="../library/__main__.html#module-__main__" title="__main__: The environment where top-level code is run. Covers command-line interfaces, import-time behavior, and ``__name__ == '__main__'``."><code class="xref py py-mod docutils literal notranslate"><span class="pre">__main__</span></code></a> se convirtió en una ruta absoluta, en lugar de una ruta relativa. Estas rutas ahora siguen siendo válidas después de que las tramas del módulo <a class="reference internal" href="../library/os.html#os.chdir" title="os.chdir"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.chdir()</span></code></a>. Como efecto alterno, la traza también muestra la ruta absoluta para los marcos del módulo <a class="reference internal" href="../library/__main__.html#module-__main__" title="__main__: The environment where top-level code is run. Covers command-line interfaces, import-time behavior, and ``__name__ == '__main__'``."><code class="xref py py-mod docutils literal notranslate"><span class="pre">__main__</span></code></a> en este caso. (Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=20443">bpo-20443</a>.)</p></li>
<li><p>En <a class="reference internal" href="../library/devmode.html#devmode"><span class="std std-ref">Python Development Mode</span></a> y en <a class="reference internal" href="../using/configure.html#debug-build"><span class="std std-ref">debug build</span></a>, los argumentos de <em>encoding</em> and <em>errors</em> ahora se comprueban para las operaciones de codificación y decodificación de cadenas. Ejemplos: <a class="reference internal" href="../library/functions.html#open" title="open"><code class="xref py py-func docutils literal notranslate"><span class="pre">open()</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#str.encode" title="str.encode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">str.encode()</span></code></a> y <a class="reference internal" href="../library/stdtypes.html#bytes.decode" title="bytes.decode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">bytes.decode()</span></code></a>.</p>
<p>De forma predeterminada, para un mejor rendimiento, el argumento <em>errors</em> argument is only checked at the first encoding/decoding error and the <em>encoding</em> a veces se ignora para cadenas vacías. (Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37388">bpo-37388</a>.)</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;&quot;.replace(&quot;&quot;,</span> <span class="pre">s,</span> <span class="pre">n)</span></code> ahora devuelve <code class="docutils literal notranslate"><span class="pre">s</span></code> en lugar de una cadena vacía para todos los <code class="docutils literal notranslate"><span class="pre">n</span></code> distintos de cero. Ahora es compatible con <code class="docutils literal notranslate"><span class="pre">&quot;&quot;.replace(&quot;&quot;,</span> <span class="pre">s)</span></code>. Hay cambios similares para los objetos <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> y <a class="reference internal" href="../library/stdtypes.html#bytearray" title="bytearray"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytearray</span></code></a>. (Contribuido por Serhiy Storchaka en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=28029">bpo-28029</a>.)</p></li>
<li><p>Cualquier expresión válida ahora se puede utilizar como <a class="reference internal" href="../glossary.html#term-decorator"><span class="xref std std-term">decorator</span></a>. Anteriormente, la gramática era mucho más restrictiva. Consulte <span class="target" id="index-70"></span><a class="pep reference external" href="https://peps.python.org/pep-0614/"><strong>PEP 614</strong></a> para obtener más detalles. (Contribuido por Brandt Bucher en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39702">bpo-39702</a>.)</p></li>
<li><p>Ayuda mejorada para el módulo <a class="reference internal" href="../library/typing.html#module-typing" title="typing: Support for type hints (see :pep:`484`)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">typing</span></code></a>. Las cadenas de documentos ahora se muestran para todas las formas especiales y alias genéricos especiales (como <code class="docutils literal notranslate"><span class="pre">Union</span></code> y <code class="docutils literal notranslate"><span class="pre">List</span></code>). El uso de <a class="reference internal" href="../library/functions.html#help" title="help"><code class="xref py py-func docutils literal notranslate"><span class="pre">help()</span></code></a> con un alias genérico como <code class="docutils literal notranslate"><span class="pre">List[int]</span></code> mostrará la ayuda para el tipo concreto correspondiente (<code class="docutils literal notranslate"><span class="pre">list</span></code> en este caso). (Contribuido por Serhiy Storchaka en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40257">bpo-40257</a>.)</p></li>
<li><p>La ejecución en paralelo de <a class="reference internal" href="../reference/expressions.html#agen.aclose" title="agen.aclose"><code class="xref py py-meth docutils literal notranslate"><span class="pre">aclose()</span></code></a> / <a class="reference internal" href="../reference/expressions.html#agen.asend" title="agen.asend"><code class="xref py py-meth docutils literal notranslate"><span class="pre">asend()</span></code></a> / <a class="reference internal" href="../reference/expressions.html#agen.athrow" title="agen.athrow"><code class="xref py py-meth docutils literal notranslate"><span class="pre">athrow()</span></code></a> ahora está prohibida, y <code class="docutils literal notranslate"><span class="pre">ag_running</span></code> ahora refleja el estado de ejecución real del generador asíncrono. (Contribuido por Yury Selivanov en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=30773">bpo-30773</a>.)</p></li>
<li><p>Los errores inesperados al llamar al método <code class="docutils literal notranslate"><span class="pre">__iter__</span></code> ya no están enmascarados por <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> en el operador <a class="reference internal" href="../reference/expressions.html#in"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">in</span></code></a> y funciones <a class="reference internal" href="../library/operator.html#operator.contains" title="operator.contains"><code class="xref py py-func docutils literal notranslate"><span class="pre">contains()</span></code></a>, <a class="reference internal" href="../library/operator.html#operator.indexOf" title="operator.indexOf"><code class="xref py py-func docutils literal notranslate"><span class="pre">indexOf()</span></code></a> y <a class="reference internal" href="../library/operator.html#operator.countOf" title="operator.countOf"><code class="xref py py-func docutils literal notranslate"><span class="pre">countOf()</span></code></a> del módulo <a class="reference internal" href="../library/operator.html#module-operator" title="operator: Functions corresponding to the standard operators."><code class="xref py py-mod docutils literal notranslate"><span class="pre">operator</span></code></a>. (Contribuido por Serhiy Storchaka en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40824">bpo-40824</a>.)</p></li>
<li><p>Las expresiones lambda sin paréntesis ya no pueden ser la parte de expresión en una cláusula <code class="docutils literal notranslate"><span class="pre">if</span></code> en comprensiones y expresiones generadoras. Consulte <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41848">bpo-41848</a> y <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43755">bpo-43755</a> para obtener más detalles.</p></li>
</ul>
</section>
<section id="new-modules">
<h2>Nuevos módulos<a class="headerlink" href="#new-modules" title="Enlazar permanentemente con este título">¶</a></h2>
<section id="zoneinfo">
<h3>zoneinfo<a class="headerlink" href="#zoneinfo" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El módulo <a class="reference internal" href="../library/zoneinfo.html#module-zoneinfo" title="zoneinfo: IANA time zone support"><code class="xref py py-mod docutils literal notranslate"><span class="pre">zoneinfo</span></code></a> brinda soporte para la base de datos de zona horaria de IANA a la biblioteca estándar. Agrega <a class="reference internal" href="../library/zoneinfo.html#zoneinfo.ZoneInfo" title="zoneinfo.ZoneInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">zoneinfo.ZoneInfo</span></code></a>, una implementación de <a class="reference internal" href="../library/datetime.html#datetime.tzinfo" title="datetime.tzinfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.tzinfo</span></code></a> concreta respaldada por los datos de la zona horaria del sistema.</p>
<p>Ejemplo:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zoneinfo</span> <span class="kn">import</span> <span class="n">ZoneInfo</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Daylight saving time</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2020</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">ZoneInfo</span><span class="p">(</span><span class="s2">&quot;America/Los_Angeles&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
<span class="go">2020-10-31 12:00:00-07:00</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dt</span><span class="o">.</span><span class="n">tzname</span><span class="p">()</span>
<span class="go">&#39;PDT&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Standard time</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dt</span> <span class="o">+=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
<span class="go">2020-11-07 12:00:00-08:00</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">tzname</span><span class="p">())</span>
<span class="go">PST</span>
</pre></div>
</div>
<p>Como fuente de datos alternativa para las plataformas que no envían la base de datos de la IANA, el módulo <a class="reference external" href="https://pypi.org/project/tzdata/"><code class="docutils literal notranslate"><span class="pre">tzdata</span></code></a> se lanzó como un paquete propio, distribuido a través de PyPI y mantenido por el equipo central de CPython.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<dl class="simple">
<dt><span class="target" id="index-71"></span><a class="pep reference external" href="https://peps.python.org/pep-0615/"><strong>PEP 615</strong></a>: compatibilidad con la base de datos de zona horaria de IANA en la biblioteca estándar</dt><dd><p>PEP escrito e implementado por Paul Ganssle</p>
</dd>
</dl>
</div>
</section>
<section id="graphlib">
<h3>Graphlib<a class="headerlink" href="#graphlib" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Se agregó un nuevo módulo, <a class="reference internal" href="../library/graphlib.html#module-graphlib" title="graphlib: Functionality to operate with graph-like structures"><code class="xref py py-mod docutils literal notranslate"><span class="pre">graphlib</span></code></a>, que contiene la clase <a class="reference internal" href="../library/graphlib.html#graphlib.TopologicalSorter" title="graphlib.TopologicalSorter"><code class="xref py py-class docutils literal notranslate"><span class="pre">graphlib.TopologicalSorter</span></code></a> para ofrecer funcionalidad para realizar la clasificación topológica de gráficos. (Contribuido por Pablo Galindo, Tim Peters y Larry Hastings en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=17005">bpo-17005</a>.)</p>
</section>
</section>
<section id="improved-modules">
<h2>Módulos mejorados<a class="headerlink" href="#improved-modules" title="Enlazar permanentemente con este título">¶</a></h2>
<section id="ast">
<h3>ast<a class="headerlink" href="#ast" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Se agregó la opción <em>indent</em> a <a class="reference internal" href="../library/ast.html#ast.dump" title="ast.dump"><code class="xref py py-func docutils literal notranslate"><span class="pre">dump()</span></code></a> que le permite producir una salida con sangría de varias líneas. (Contribuido por Serhiy Storchaka en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37995">bpo-37995</a>.)</p>
<p>Se agregó <a class="reference internal" href="../library/ast.html#ast.unparse" title="ast.unparse"><code class="xref py py-func docutils literal notranslate"><span class="pre">ast.unparse()</span></code></a> como una función en el módulo <a class="reference internal" href="../library/ast.html#module-ast" title="ast: Abstract Syntax Tree classes and manipulation."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ast</span></code></a> que se puede usar para descomprimir un objeto <a class="reference internal" href="../library/ast.html#ast.AST" title="ast.AST"><code class="xref py py-class docutils literal notranslate"><span class="pre">ast.AST</span></code></a> y producir una cadena con código que produciría un objeto <a class="reference internal" href="../library/ast.html#ast.AST" title="ast.AST"><code class="xref py py-class docutils literal notranslate"><span class="pre">ast.AST</span></code></a> equivalente cuando se analiza. (Contribuido por Pablo Galindo y Batuhan Taskaya en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38870">bpo-38870</a>.)</p>
<p>Se agregaron cadenas de documentación a los nodos AST que contienen la firma ASDL utilizada para construir ese nodo. (Contribuido por Batuhan Taskaya en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39638">bpo-39638</a>.)</p>
</section>
<section id="asyncio">
<h3>asyncio<a class="headerlink" href="#asyncio" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Debido a importantes problemas de seguridad, el parámetro <em>reuse_address</em> de <a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.loop.create_datagram_endpoint" title="asyncio.loop.create_datagram_endpoint"><code class="xref py py-meth docutils literal notranslate"><span class="pre">asyncio.loop.create_datagram_endpoint()</span></code></a> ya no es compatible. Esto se debe al comportamiento de la opción de socket <code class="docutils literal notranslate"><span class="pre">SO_REUSEADDR</span></code> en UDP. Para obtener más detalles, consulte la documentación de <code class="docutils literal notranslate"><span class="pre">loop.create_datagram_endpoint()</span></code>. (Contribuido por Kyle Stanley, Antoine Pitrou y Yury Selivanov en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37228">bpo-37228</a>.)</p>
<p>Se agregó un nuevo <a class="reference internal" href="../glossary.html#term-coroutine"><span class="xref std std-term">coroutine</span></a> <a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.loop.shutdown_default_executor" title="asyncio.loop.shutdown_default_executor"><code class="xref py py-meth docutils literal notranslate"><span class="pre">shutdown_default_executor()</span></code></a> que programa un apagado para el ejecutor predeterminado que espera en el <a class="reference internal" href="../library/concurrent.futures.html#concurrent.futures.ThreadPoolExecutor" title="concurrent.futures.ThreadPoolExecutor"><code class="xref py py-class docutils literal notranslate"><span class="pre">ThreadPoolExecutor</span></code></a> para finalizar el cierre. Además, <a class="reference internal" href="../library/asyncio-runner.html#asyncio.run" title="asyncio.run"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.run()</span></code></a> se ha actualizado para utilizar el nuevo <a class="reference internal" href="../glossary.html#term-coroutine"><span class="xref std std-term">coroutine</span></a>. (Contribuido por Kyle Stanley en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34037">bpo-34037</a>.)</p>
<p>Se agregó <a class="reference internal" href="../library/asyncio-policy.html#asyncio.PidfdChildWatcher" title="asyncio.PidfdChildWatcher"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncio.PidfdChildWatcher</span></code></a>, una implementación de observador de niños específica de Linux que sondea los descriptores de archivos de proceso. (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38692">bpo-38692</a>)</p>
<p>Se agregó un nuevo <a class="reference internal" href="../glossary.html#term-coroutine"><span class="xref std std-term">coroutine</span></a> <a class="reference internal" href="../library/asyncio-task.html#asyncio.to_thread" title="asyncio.to_thread"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.to_thread()</span></code></a>. Se utiliza principalmente para ejecutar funciones vinculadas a IO en un hilo separado para evitar bloquear el bucle de eventos, y esencialmente funciona como una versión de alto nivel de <a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.loop.run_in_executor" title="asyncio.loop.run_in_executor"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run_in_executor()</span></code></a> que puede tomar directamente argumentos de palabras clave. (Contribuido por Kyle Stanley y Yury Selivanov en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=32309">bpo-32309</a>.)</p>
<p>Al cancelar la tarea debido a un tiempo de espera, <a class="reference internal" href="../library/asyncio-task.html#asyncio.wait_for" title="asyncio.wait_for"><code class="xref py py-meth docutils literal notranslate"><span class="pre">asyncio.wait_for()</span></code></a> ahora esperará hasta que se complete la cancelación también en el caso de que <em>timeout</em> sea &lt;= 0, como ocurre con los tiempos de espera positivos. (Contribuido por Elvis Pranskevichus en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=32751">bpo-32751</a>.)</p>
<p><a class="reference internal" href="../library/asyncio.html#module-asyncio" title="asyncio: Asynchronous I/O."><code class="xref py py-mod docutils literal notranslate"><span class="pre">asyncio</span></code></a> ahora lanza <code class="xref py py-exc docutils literal notranslate"><span class="pre">TyperError</span></code> al llamar a métodos incompatibles con un socket <a class="reference internal" href="../library/ssl.html#ssl.SSLSocket" title="ssl.SSLSocket"><code class="xref py py-class docutils literal notranslate"><span class="pre">ssl.SSLSocket</span></code></a>. (Contribuido por Ido Michael en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37404">bpo-37404</a>.)</p>
</section>
<section id="compileall">
<h3>compilar todo<a class="headerlink" href="#compileall" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Se agregó una nueva posibilidad de usar enlaces duros para archivos <code class="docutils literal notranslate"><span class="pre">.pyc</span></code> duplicados: parámetro <em>hardlink_dupes</em> y opción de línea de comando –hardlink-dupes. (Contribuido por Lumír “Frenzy” Balhar en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40495">bpo-40495</a>.)</p>
<p>Se agregaron nuevas opciones para la manipulación de rutas en los archivos <code class="docutils literal notranslate"><span class="pre">.pyc</span></code> resultantes: parámetros <em>stripdir</em>, <em>prependdir</em>, <em>limit_sl_dest</em> y opciones de línea de comando -s, -p, -e. Se agregó la posibilidad de especificar la opción para un nivel de optimización varias veces. (Contribuido por Lumír “Frenzy” Balhar en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38112">bpo-38112</a>.)</p>
</section>
<section id="concurrent-futures">
<h3>Futuros concurrentes<a class="headerlink" href="#concurrent-futures" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Se agregó un nuevo parámetro <em>cancel_futures</em> a <a class="reference internal" href="../library/concurrent.futures.html#concurrent.futures.Executor.shutdown" title="concurrent.futures.Executor.shutdown"><code class="xref py py-meth docutils literal notranslate"><span class="pre">concurrent.futures.Executor.shutdown()</span></code></a> que cancela todos los futuros pendientes que no han comenzado a ejecutarse, en lugar de esperar a que se completen antes de apagar el ejecutor. (Contribuido por Kyle Stanley en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39349">bpo-39349</a>.)</p>
<p>Se eliminaron los subprocesos del demonio de <a class="reference internal" href="../library/concurrent.futures.html#concurrent.futures.ThreadPoolExecutor" title="concurrent.futures.ThreadPoolExecutor"><code class="xref py py-class docutils literal notranslate"><span class="pre">ThreadPoolExecutor</span></code></a> y <a class="reference internal" href="../library/concurrent.futures.html#concurrent.futures.ProcessPoolExecutor" title="concurrent.futures.ProcessPoolExecutor"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProcessPoolExecutor</span></code></a>. Esto mejora la compatibilidad con los subinterpretadores y la previsibilidad en sus procesos de cierre. (Contribuido por Kyle Stanley en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39812">bpo-39812</a>.)</p>
<p>Los trabajadores en <a class="reference internal" href="../library/concurrent.futures.html#concurrent.futures.ProcessPoolExecutor" title="concurrent.futures.ProcessPoolExecutor"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProcessPoolExecutor</span></code></a> ahora se generan a pedido, solo cuando no hay trabajadores inactivos disponibles para reutilizar. Esto optimiza la sobrecarga de inicio y reduce la cantidad de tiempo de CPU perdido para los trabajadores inactivos. (Contribuido por Kyle Stanley en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39207">bpo-39207</a>.)</p>
</section>
<section id="curses">
<h3>maldiciones<a class="headerlink" href="#curses" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Se agregaron funciones <a class="reference internal" href="../library/curses.html#curses.get_escdelay" title="curses.get_escdelay"><code class="xref py py-func docutils literal notranslate"><span class="pre">curses.get_escdelay()</span></code></a>, <a class="reference internal" href="../library/curses.html#curses.set_escdelay" title="curses.set_escdelay"><code class="xref py py-func docutils literal notranslate"><span class="pre">curses.set_escdelay()</span></code></a>, <a class="reference internal" href="../library/curses.html#curses.get_tabsize" title="curses.get_tabsize"><code class="xref py py-func docutils literal notranslate"><span class="pre">curses.get_tabsize()</span></code></a> y <a class="reference internal" href="../library/curses.html#curses.set_tabsize" title="curses.set_tabsize"><code class="xref py py-func docutils literal notranslate"><span class="pre">curses.set_tabsize()</span></code></a>. (Contribuido por Anthony Sottile en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38312">bpo-38312</a>.)</p>
</section>
<section id="datetime">
<h3>fecha y hora<a class="headerlink" href="#datetime" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Los métodos <a class="reference internal" href="../library/datetime.html#datetime.date.isocalendar" title="datetime.date.isocalendar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">isocalendar()</span></code></a> de <a class="reference internal" href="../library/datetime.html#datetime.date" title="datetime.date"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.date</span></code></a> y <a class="reference internal" href="../library/datetime.html#datetime.datetime.isocalendar" title="datetime.datetime.isocalendar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">isocalendar()</span></code></a> de <a class="reference internal" href="../library/datetime.html#datetime.datetime" title="datetime.datetime"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.datetime</span></code></a> ahora devuelven un <a class="reference internal" href="../library/collections.html#collections.namedtuple" title="collections.namedtuple"><code class="xref py py-func docutils literal notranslate"><span class="pre">namedtuple()</span></code></a> en lugar de un <a class="reference internal" href="../library/stdtypes.html#tuple" title="tuple"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></a>. (Contribuido por Dong-hee Na en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=24416">bpo-24416</a>.)</p>
</section>
<section id="distutils">
<h3>distutils<a class="headerlink" href="#distutils" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El comando: command: <cite>upload</cite> ahora crea resúmenes de hash SHA2-256 y Blake2b-256. Omite MD5 en plataformas que bloquean el resumen de MD5. (Contribuido por Christian Heimes en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40698">bpo-40698</a>.)</p>
</section>
<section id="fcntl">
<h3>fcntl<a class="headerlink" href="#fcntl" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Se agregaron las constantes <code class="xref py py-data docutils literal notranslate"><span class="pre">F_OFD_GETLK</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">F_OFD_SETLK</span></code> y <code class="xref py py-data docutils literal notranslate"><span class="pre">F_OFD_SETLKW</span></code>. (Contribuido por Dong-hee Na en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38602">bpo-38602</a>.)</p>
</section>
<section id="ftplib">
<h3>ftplib<a class="headerlink" href="#ftplib" title="Enlazar permanentemente con este título">¶</a></h3>
<p><a class="reference internal" href="../library/ftplib.html#ftplib.FTP" title="ftplib.FTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">FTP</span></code></a> y <a class="reference internal" href="../library/ftplib.html#ftplib.FTP_TLS" title="ftplib.FTP_TLS"><code class="xref py py-class docutils literal notranslate"><span class="pre">FTP_TLS</span></code></a> ahora lanzan un <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValueError</span></code></a> si el tiempo de espera dado para su constructor es cero para evitar la creación de un socket sin bloqueo. (Contribuido por Dong-hee Na en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39259">bpo-39259</a>.)</p>
</section>
<section id="gc">
<h3>GC<a class="headerlink" href="#gc" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Cuando el recolector de basura realiza una recolección en la que resucitan algunos objetos (se puede acceder a ellos desde fuera de los ciclos aislados después de que se hayan ejecutado los finalizadores), no bloquee la recolección de todos los objetos que aún no se pueden alcanzar. (Contribuido por Pablo Galindo y Tim Peters en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38379">bpo-38379</a>.)</p>
<p>Se agregó una nueva función <a class="reference internal" href="../library/gc.html#gc.is_finalized" title="gc.is_finalized"><code class="xref py py-func docutils literal notranslate"><span class="pre">gc.is_finalized()</span></code></a> para verificar si el recolector de basura ha finalizado un objeto. (Contribuido por Pablo Galindo en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39322">bpo-39322</a>.)</p>
</section>
<section id="hashlib">
<h3>hashlib<a class="headerlink" href="#hashlib" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El módulo <a class="reference internal" href="../library/hashlib.html#module-hashlib" title="hashlib: Secure hash and message digest algorithms."><code class="xref py py-mod docutils literal notranslate"><span class="pre">hashlib</span></code></a> ahora puede usar hashes SHA3 y SHAKE XOF de OpenSSL cuando esté disponible. (Contribuido por Christian Heimes en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37630">bpo-37630</a>.)</p>
<p>Los módulos hash incorporados ahora pueden desactivarse con <code class="docutils literal notranslate"><span class="pre">./configure</span> <span class="pre">--without-builtin-hashlib-hashes</span></code> o activarse selectivamente con p. Ej. <code class="docutils literal notranslate"><span class="pre">./configure</span> <span class="pre">--with-builtin-hashlib-hashes=sha3,blake2</span></code> para forzar el uso de la implementación basada en OpenSSL. (Contribuido por Christian Heimes en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40479">bpo-40479</a>)</p>
</section>
<section id="http">
<h3>http<a class="headerlink" href="#http" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Los códigos de estado HTTP <code class="docutils literal notranslate"><span class="pre">103</span> <span class="pre">EARLY_HINTS</span></code>, <code class="docutils literal notranslate"><span class="pre">418</span> <span class="pre">IM_A_TEAPOT</span></code> y <code class="docutils literal notranslate"><span class="pre">425</span> <span class="pre">TOO_EARLY</span></code> se agregan a <a class="reference internal" href="../library/http.html#http.HTTPStatus" title="http.HTTPStatus"><code class="xref py py-class docutils literal notranslate"><span class="pre">http.HTTPStatus</span></code></a>. (Contribuido por Dong-hee Na en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39509">bpo-39509</a> y Ross Rhodes en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39507">bpo-39507</a>.)</p>
</section>
<section id="idle-and-idlelib">
<h3>IDLE e idlelib<a class="headerlink" href="#idle-and-idlelib" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Opción agregada para apagar el cursor parpadeando. (Contribuido por Zackery Spytz en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=4603">bpo-4603</a>.)</p>
<p>La tecla Escape ahora cierra las ventanas de finalización IDLE. (Contribuido por Johnny Najera en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38944">bpo-38944</a>.)</p>
<p>Se agregaron palabras clave a la lista de finalización del nombre del módulo. (Contribuido por Terry J. Reedy en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37765">bpo-37765</a>.)</p>
<p>Novedades de la versión de mantenimiento 3.9</p>
<p>Hacer que IDLE invoque <a class="reference internal" href="../library/sys.html#sys.excepthook" title="sys.excepthook"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.excepthook()</span></code></a> (cuando se inicia sin “-n”). Anteriormente se ignoraban los hooks de usuario.  (Contribuido por Ken Hilton en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=43008">bpo-43008</a>.)</p>
<p>Los cambios anteriores se han actualizado a las versiones de mantenimiento 3.8.</p>
<p>Reorganizar el diálogo de configuración. Dividir la pestaña General en Windows y Shell/Ed. Mover las fuentes de ayuda, que amplían el menú Ayuda, a la pestaña Extensiones. Hacer espacio para nuevas opciones y acortar el diálogo. Esto último hace que el diálogo se adapte mejor a las pantallas pequeñas. (Contribuido por Terry Jan Reedy en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40468">bpo-40468</a>.) Mover la configuración del espacio de sangría de la pestaña Fuente a la nueva pestaña Windows. (Contribuido por Mark Roseman y Terry Jan Reedy en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=33962">bpo-33962</a>.)</p>
<p>Aplicar el resaltado de sintaxis a los archivos <code class="docutils literal notranslate"><span class="pre">.pyi</span></code>. (Contribución de Alex Waygood y Terry Jan Reedy en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=45447">bpo-45447</a>)</p>
</section>
<section id="imaplib">
<h3>imaplib<a class="headerlink" href="#imaplib" title="Enlazar permanentemente con este título">¶</a></h3>
<p><a class="reference internal" href="../library/imaplib.html#imaplib.IMAP4" title="imaplib.IMAP4"><code class="xref py py-class docutils literal notranslate"><span class="pre">IMAP4</span></code></a> y <a class="reference internal" href="../library/imaplib.html#imaplib.IMAP4_SSL" title="imaplib.IMAP4_SSL"><code class="xref py py-class docutils literal notranslate"><span class="pre">IMAP4_SSL</span></code></a> ahora tienen un parámetro <em>timeout</em> parameter for their constructors. También el método <a class="reference internal" href="../library/imaplib.html#imaplib.IMAP4.open" title="imaplib.IMAP4.open"><code class="xref py py-meth docutils literal notranslate"><span class="pre">open()</span></code></a> ahora tiene un parámetro opcional <em>timeout</em> con este cambio. Los métodos anulados de <a class="reference internal" href="../library/imaplib.html#imaplib.IMAP4_SSL" title="imaplib.IMAP4_SSL"><code class="xref py py-class docutils literal notranslate"><span class="pre">IMAP4_SSL</span></code></a> y <a class="reference internal" href="../library/imaplib.html#imaplib.IMAP4_stream" title="imaplib.IMAP4_stream"><code class="xref py py-class docutils literal notranslate"><span class="pre">IMAP4_stream</span></code></a> se aplicaron a este cambio. (Contribuido por Dong-hee Na en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38615">bpo-38615</a>.)</p>
<p>Se agrega <a class="reference internal" href="../library/imaplib.html#imaplib.IMAP4.unselect" title="imaplib.IMAP4.unselect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">imaplib.IMAP4.unselect()</span></code></a>. <a class="reference internal" href="../library/imaplib.html#imaplib.IMAP4.unselect" title="imaplib.IMAP4.unselect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">imaplib.IMAP4.unselect()</span></code></a> libera los recursos del servidor asociados con el buzón de correo seleccionado y devuelve el servidor al estado autenticado. Este comando realiza las mismas acciones que <a class="reference internal" href="../library/imaplib.html#imaplib.IMAP4.close" title="imaplib.IMAP4.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">imaplib.IMAP4.close()</span></code></a>, excepto que ningún mensaje se elimina permanentemente del buzón de correo seleccionado actualmente. (Contribuido por Dong-hee Na en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40375">bpo-40375</a>.)</p>
</section>
<section id="importlib">
<h3>importlib<a class="headerlink" href="#importlib" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Para mejorar la coherencia con las declaraciones de importación, <a class="reference internal" href="../library/importlib.html#importlib.util.resolve_name" title="importlib.util.resolve_name"><code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.util.resolve_name()</span></code></a> ahora lanza <a class="reference internal" href="../library/exceptions.html#ImportError" title="ImportError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ImportError</span></code></a> en lugar de <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> para intentos de importación relativa no válidos. (Contribuido por Ngalim Siregar en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37444">bpo-37444</a>.)</p>
<p>Los cargadores de importación que publican objetos de módulo inmutables ahora pueden publicar paquetes inmutables además de módulos individuales. (Contribuido por Dino Viehland en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39336">bpo-39336</a>.)</p>
<p>Se agregó la función <a class="reference internal" href="../library/importlib.resources.html#importlib.resources.files" title="importlib.resources.files"><code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.resources.files()</span></code></a> con soporte para subdirectorios en los datos del paquete, compatible con el backport en <code class="docutils literal notranslate"><span class="pre">importlib_resources</span></code> versión 1.5. (Contribuido por Jason R. Coombs en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39791">bpo-39791</a>.)</p>
<p><code class="docutils literal notranslate"><span class="pre">importlib.metadata</span></code> actualizado de <code class="docutils literal notranslate"><span class="pre">importlib_metadata</span></code> versión 1.6.1.</p>
</section>
<section id="inspect">
<h3>inspeccionar<a class="headerlink" href="#inspect" title="Enlazar permanentemente con este título">¶</a></h3>
<p><a class="reference internal" href="../library/inspect.html#inspect.BoundArguments.arguments" title="inspect.BoundArguments.arguments"><code class="xref py py-attr docutils literal notranslate"><span class="pre">inspect.BoundArguments.arguments</span></code></a> se cambia de <code class="docutils literal notranslate"><span class="pre">OrderedDict</span></code> a dictado regular. (Contribuido por Inada Naoki en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36350">bpo-36350</a> y <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39775">bpo-39775</a>.)</p>
</section>
<section id="ipaddress">
<h3>dirección IP<a class="headerlink" href="#ipaddress" title="Enlazar permanentemente con este título">¶</a></h3>
<p><a class="reference internal" href="../library/ipaddress.html#module-ipaddress" title="ipaddress: IPv4/IPv6 manipulation library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ipaddress</span></code></a> ahora admite direcciones de ámbito IPv6 (dirección IPv6 con sufijo <code class="docutils literal notranslate"><span class="pre">%&lt;scope_id&gt;</span></code>).</p>
<p>Las direcciones IPv6 con alcance se pueden analizar mediante <a class="reference internal" href="../library/ipaddress.html#ipaddress.IPv6Address" title="ipaddress.IPv6Address"><code class="xref py py-class docutils literal notranslate"><span class="pre">ipaddress.IPv6Address</span></code></a>. Si está presente, la identificación de la zona del alcance está disponible a través del atributo <a class="reference internal" href="../library/ipaddress.html#ipaddress.IPv6Address.scope_id" title="ipaddress.IPv6Address.scope_id"><code class="xref py py-attr docutils literal notranslate"><span class="pre">scope_id</span></code></a>. (Contribuido por Oleksandr Pavliuk en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34788">bpo-34788</a>.)</p>
<p>A partir de Python 3.9.5, el módulo <a class="reference internal" href="../library/ipaddress.html#module-ipaddress" title="ipaddress: IPv4/IPv6 manipulation library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ipaddress</span></code></a> ya no acepta ceros a la izquierda en cadenas de direcciones IPv4. (Contribuido por Christian Heimes en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36384">bpo-36384</a>).</p>
</section>
<section id="math">
<h3>Matemáticas<a class="headerlink" href="#math" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Se amplió la función <a class="reference internal" href="../library/math.html#math.gcd" title="math.gcd"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.gcd()</span></code></a> para manejar múltiples argumentos. Anteriormente, solo respaldaba dos argumentos. (Contribuido por Serhiy Storchaka en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39648">bpo-39648</a>.)</p>
<p><a class="reference internal" href="../library/math.html#math.lcm" title="math.lcm"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.lcm()</span></code></a> agregado: devuelve el mínimo común múltiplo de argumentos especificados. (Contribuido por Mark Dickinson, Ananthakrishnan y Serhiy Storchaka en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39479">bpo-39479</a> y <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39648">bpo-39648</a>.)</p>
<p><a class="reference internal" href="../library/math.html#math.nextafter" title="math.nextafter"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.nextafter()</span></code></a> agregado: devuelve el siguiente valor de punto flotante después de <em>x</em> towards <em>y</em>. (Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39288">bpo-39288</a>.)</p>
<p><a class="reference internal" href="../library/math.html#math.ulp" title="math.ulp"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.ulp()</span></code></a> agregado: devuelve el valor del bit menos significativo de un flotador. (Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39310">bpo-39310</a>.)</p>
</section>
<section id="multiprocessing">
<h3>multiprocesamiento<a class="headerlink" href="#multiprocessing" title="Enlazar permanentemente con este título">¶</a></h3>
<p>La clase <a class="reference internal" href="../library/multiprocessing.html#multiprocessing.SimpleQueue" title="multiprocessing.SimpleQueue"><code class="xref py py-class docutils literal notranslate"><span class="pre">multiprocessing.SimpleQueue</span></code></a> tiene un nuevo método <a class="reference internal" href="../library/multiprocessing.html#multiprocessing.SimpleQueue.close" title="multiprocessing.SimpleQueue.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">close()</span></code></a> para cerrar explícitamente la cola. (Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=30966">bpo-30966</a>.)</p>
</section>
<section id="nntplib">
<h3>nntplib<a class="headerlink" href="#nntplib" title="Enlazar permanentemente con este título">¶</a></h3>
<p><a class="reference internal" href="../library/nntplib.html#nntplib.NNTP" title="nntplib.NNTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">NNTP</span></code></a> y <a class="reference internal" href="../library/nntplib.html#nntplib.NNTP_SSL" title="nntplib.NNTP_SSL"><code class="xref py py-class docutils literal notranslate"><span class="pre">NNTP_SSL</span></code></a> ahora lanzan un <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValueError</span></code></a> si el tiempo de espera dado para su constructor es cero para evitar la creación de un socket sin bloqueo. (Contribuido por Dong-hee Na en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39259">bpo-39259</a>.)</p>
</section>
<section id="os">
<h3>os<a class="headerlink" href="#os" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Se agregaron <a class="reference internal" href="../library/os.html#os.CLD_KILLED" title="os.CLD_KILLED"><code class="xref py py-data docutils literal notranslate"><span class="pre">CLD_KILLED</span></code></a> y <a class="reference internal" href="../library/os.html#os.CLD_STOPPED" title="os.CLD_STOPPED"><code class="xref py py-data docutils literal notranslate"><span class="pre">CLD_STOPPED</span></code></a> para <code class="xref py py-attr docutils literal notranslate"><span class="pre">si_code</span></code>. (Contribuido por Dong-hee Na en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38493">bpo-38493</a>.)</p>
<p>Se expusieron los <a class="reference internal" href="../library/os.html#os.pidfd_open" title="os.pidfd_open"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.pidfd_open()</span></code></a> (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38692">bpo-38692</a>) y <a class="reference internal" href="../library/os.html#os.P_PIDFD" title="os.P_PIDFD"><code class="xref py py-data docutils literal notranslate"><span class="pre">os.P_PIDFD</span></code></a> (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38713">bpo-38713</a>) específicos de Linux para la gestión de procesos con descriptores de archivos.</p>
<p>La función <a class="reference internal" href="../library/os.html#os.unsetenv" title="os.unsetenv"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.unsetenv()</span></code></a> ahora también está disponible en Windows. (Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39413">bpo-39413</a>.)</p>
<p>Las funciones <a class="reference internal" href="../library/os.html#os.putenv" title="os.putenv"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.putenv()</span></code></a> y <a class="reference internal" href="../library/os.html#os.unsetenv" title="os.unsetenv"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.unsetenv()</span></code></a> ahora están siempre disponibles. (Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39395">bpo-39395</a>.)</p>
<p>Función <a class="reference internal" href="../library/os.html#os.waitstatus_to_exitcode" title="os.waitstatus_to_exitcode"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.waitstatus_to_exitcode()</span></code></a> agregada: convierte un estado de espera en un código de salida. (Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40094">bpo-40094</a>.)</p>
</section>
<section id="pathlib">
<h3>Pathlib<a class="headerlink" href="#pathlib" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Se agregó <a class="reference internal" href="../library/pathlib.html#pathlib.Path.readlink" title="pathlib.Path.readlink"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pathlib.Path.readlink()</span></code></a> que actúa de manera similar a <a class="reference internal" href="../library/os.html#os.readlink" title="os.readlink"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.readlink()</span></code></a>. (Contribuido por Girts Folkmanis en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=30618">bpo-30618</a>)</p>
</section>
<section id="pdb">
<h3>pdb<a class="headerlink" href="#pdb" title="Enlazar permanentemente con este título">¶</a></h3>
<p>En Windows, ahora <a class="reference internal" href="../library/pdb.html#pdb.Pdb" title="pdb.Pdb"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pdb</span></code></a> es compatible con <code class="docutils literal notranslate"><span class="pre">~/.pdbrc</span></code>. (Contribuido por Tim Hopper y Dan Lidral-Porter en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=20523">bpo-20523</a>.)</p>
</section>
<section id="poplib">
<h3>poplib<a class="headerlink" href="#poplib" title="Enlazar permanentemente con este título">¶</a></h3>
<p><a class="reference internal" href="../library/poplib.html#poplib.POP3" title="poplib.POP3"><code class="xref py py-class docutils literal notranslate"><span class="pre">POP3</span></code></a> y <a class="reference internal" href="../library/poplib.html#poplib.POP3_SSL" title="poplib.POP3_SSL"><code class="xref py py-class docutils literal notranslate"><span class="pre">POP3_SSL</span></code></a> ahora lanzan un <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValueError</span></code></a> si el tiempo de espera dado para su constructor es cero para evitar la creación de un socket sin bloqueo. (Contribuido por Dong-hee Na en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39259">bpo-39259</a>.)</p>
</section>
<section id="pprint">
<h3>pprint<a class="headerlink" href="#pprint" title="Enlazar permanentemente con este título">¶</a></h3>
<p><a class="reference internal" href="../library/pprint.html#module-pprint" title="pprint: Data pretty printer."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pprint</span></code></a> ahora puede imprimir <a class="reference internal" href="../library/types.html#types.SimpleNamespace" title="types.SimpleNamespace"><code class="xref py py-class docutils literal notranslate"><span class="pre">types.SimpleNamespace</span></code></a> de forma bonita. (Contribuido por Carl Bordum Hansen en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37376">bpo-37376</a>.)</p>
</section>
<section id="pydoc">
<h3>Pydoc<a class="headerlink" href="#pydoc" title="Enlazar permanentemente con este título">¶</a></h3>
<p>La cadena de documentación ahora se muestra no solo para la clase, función, método, etc., sino para cualquier objeto que tenga su propio atributo <code class="docutils literal notranslate"><span class="pre">__doc__</span></code>. (Contribuido por Serhiy Storchaka en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40257">bpo-40257</a>.)</p>
</section>
<section id="random">
<h3>aleatorio<a class="headerlink" href="#random" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Se agregó un nuevo método <code class="xref py py-attr docutils literal notranslate"><span class="pre">random.Random.randbytes</span></code>: generar bytes aleatorios. (Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40286">bpo-40286</a>.)</p>
</section>
<section id="signal">
<h3>señal<a class="headerlink" href="#signal" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Expuso el <a class="reference internal" href="../library/signal.html#signal.pidfd_send_signal" title="signal.pidfd_send_signal"><code class="xref py py-func docutils literal notranslate"><span class="pre">signal.pidfd_send_signal()</span></code></a> específico de Linux para enviar señales a un proceso utilizando un descriptor de archivo en lugar de un pid. (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38712">bpo-38712</a>)</p>
</section>
<section id="smtplib">
<h3>smtplib<a class="headerlink" href="#smtplib" title="Enlazar permanentemente con este título">¶</a></h3>
<p><a class="reference internal" href="../library/smtplib.html#smtplib.SMTP" title="smtplib.SMTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">SMTP</span></code></a> y <a class="reference internal" href="../library/smtplib.html#smtplib.SMTP_SSL" title="smtplib.SMTP_SSL"><code class="xref py py-class docutils literal notranslate"><span class="pre">SMTP_SSL</span></code></a> ahora lanzan un <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValueError</span></code></a> si el tiempo de espera dado para su constructor es cero para evitar la creación de un socket sin bloqueo. (Contribuido por Dong-hee Na en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39259">bpo-39259</a>.)</p>
<p>El constructor <a class="reference internal" href="../library/smtplib.html#smtplib.LMTP" title="smtplib.LMTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">LMTP</span></code></a> ahora tiene un parámetro <em>timeout</em> opcional. (Contribuido por Dong-hee Na en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39329">bpo-39329</a>.)</p>
</section>
<section id="socket">
<h3>enchufe<a class="headerlink" href="#socket" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El módulo <a class="reference internal" href="../library/socket.html#module-socket" title="socket: Low-level networking interface."><code class="xref py py-mod docutils literal notranslate"><span class="pre">socket</span></code></a> ahora exporta la constante <a class="reference internal" href="../library/socket.html#socket.CAN_RAW_JOIN_FILTERS" title="socket.CAN_RAW_JOIN_FILTERS"><code class="xref py py-data docutils literal notranslate"><span class="pre">CAN_RAW_JOIN_FILTERS</span></code></a> en Linux 4.1 y superior. (Contribuido por Stefan Tatschner y Zackery Spytz en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=25780">bpo-25780</a>.)</p>
<p>El módulo de socket ahora admite el protocolo <a class="reference internal" href="../library/socket.html#socket.CAN_J1939" title="socket.CAN_J1939"><code class="xref py py-data docutils literal notranslate"><span class="pre">CAN_J1939</span></code></a> en plataformas que lo admiten. (Contribuido por Karl Ding en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40291">bpo-40291</a>.)</p>
<p>El módulo de enchufe ahora tiene las funciones <a class="reference internal" href="../library/socket.html#socket.send_fds" title="socket.send_fds"><code class="xref py py-func docutils literal notranslate"><span class="pre">socket.send_fds()</span></code></a> y <a class="reference internal" href="../library/socket.html#socket.recv_fds" title="socket.recv_fds"><code class="xref py py-func docutils literal notranslate"><span class="pre">socket.recv_fds()</span></code></a>. (Contribuido por Joannah Nanjekye, Shinya Okano y Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=28724">bpo-28724</a>.)</p>
</section>
<section id="time">
<h3>tiempo<a class="headerlink" href="#time" title="Enlazar permanentemente con este título">¶</a></h3>
<p>En AIX, <a class="reference internal" href="../library/time.html#time.thread_time" title="time.thread_time"><code class="xref py py-func docutils literal notranslate"><span class="pre">thread_time()</span></code></a> ahora se implementa con <code class="docutils literal notranslate"><span class="pre">thread_cputime()</span></code> que tiene una resolución de nanosegundos, en lugar de <code class="docutils literal notranslate"><span class="pre">clock_gettime(CLOCK_THREAD_CPUTIME_ID)</span></code> que tiene una resolución de 10 ms. (Contribuido por Batuhan Taskaya en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40192">bpo-40192</a>)</p>
</section>
<section id="sys">
<h3>sys<a class="headerlink" href="#sys" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Se agregó un nuevo atributo <a class="reference internal" href="../library/sys.html#sys.platlibdir" title="sys.platlibdir"><code class="xref py py-attr docutils literal notranslate"><span class="pre">sys.platlibdir</span></code></a>: nombre del directorio de biblioteca específico de la plataforma. Se utiliza para construir la ruta de la biblioteca estándar y las rutas de los módulos de extensión instalados. Es igual a <code class="docutils literal notranslate"><span class="pre">&quot;lib&quot;</span></code> en la mayoría de las plataformas. En Fedora y SuSE, es igual a <code class="docutils literal notranslate"><span class="pre">&quot;lib64&quot;</span></code> en plataformas de 64 bits. (Contribuido por Jan Matějek, Matěj Cepl, Charalampos Stratakis y Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1294959">bpo-1294959</a>.)</p>
<p>Anteriormente, <a class="reference internal" href="../library/sys.html#sys.stderr" title="sys.stderr"><code class="xref py py-attr docutils literal notranslate"><span class="pre">sys.stderr</span></code></a> estaba bloqueado en búfer cuando no era interactivo. Ahora <code class="docutils literal notranslate"><span class="pre">stderr</span></code> tiene como valor predeterminado que siempre tenga búfer de línea. (Contribuido por Jendrik Seipp en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=13601">bpo-13601</a>.)</p>
</section>
<section id="tracemalloc">
<h3>tracemalloc<a class="headerlink" href="#tracemalloc" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Se agregó <a class="reference internal" href="../library/tracemalloc.html#tracemalloc.reset_peak" title="tracemalloc.reset_peak"><code class="xref py py-func docutils literal notranslate"><span class="pre">tracemalloc.reset_peak()</span></code></a> para establecer el tamaño máximo de los bloques de memoria rastreados al tamaño actual, para medir el pico de piezas de código específicas. (Contribuido por Huon Wilson en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40630">bpo-40630</a>.)</p>
</section>
<section id="typing">
<h3>mecanografía<a class="headerlink" href="#typing" title="Enlazar permanentemente con este título">¶</a></h3>
<p><span class="target" id="index-72"></span><a class="pep reference external" href="https://peps.python.org/pep-0593/"><strong>PEP 593</strong></a> introdujo un tipo <a class="reference internal" href="../library/typing.html#typing.Annotated" title="typing.Annotated"><code class="xref py py-data docutils literal notranslate"><span class="pre">typing.Annotated</span></code></a> para decorar tipos existentes con metadatos específicos del contexto y el nuevo parámetro <code class="docutils literal notranslate"><span class="pre">include_extras</span></code> en <a class="reference internal" href="../library/typing.html#typing.get_type_hints" title="typing.get_type_hints"><code class="xref py py-func docutils literal notranslate"><span class="pre">typing.get_type_hints()</span></code></a> para acceder a los metadatos en tiempo de ejecución. (Contribuido por Till Varoquaux y Konstantin Kashin.)</p>
</section>
<section id="unicodedata">
<h3>unicodedata<a class="headerlink" href="#unicodedata" title="Enlazar permanentemente con este título">¶</a></h3>
<p>La base de datos Unicode se ha actualizado a la versión 13.0.0. (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39926">bpo-39926</a>).</p>
</section>
<section id="venv">
<h3>venv<a class="headerlink" href="#venv" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Los scripts de activación proporcionados por <a class="reference internal" href="../library/venv.html#module-venv" title="venv: Creation of virtual environments."><code class="xref py py-mod docutils literal notranslate"><span class="pre">venv</span></code></a> ahora especifican su personalización de solicitud de manera consistente utilizando siempre el valor especificado por <code class="docutils literal notranslate"><span class="pre">__VENV_PROMPT__</span></code>. Anteriormente, algunos scripts usaban <code class="docutils literal notranslate"><span class="pre">__VENV_PROMPT__</span></code> incondicionalmente, otros solo si estaba configurado (que era el caso predeterminado) y uno usaba <code class="docutils literal notranslate"><span class="pre">__VENV_NAME__</span></code> en su lugar. (Contribuido por Brett Cannon en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37663">bpo-37663</a>.)</p>
</section>
<section id="xml">
<h3>xml<a class="headerlink" href="#xml" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Los caracteres de espacio en blanco dentro de los atributos ahora se conservan al serializar <a class="reference internal" href="../library/xml.etree.elementtree.html#module-xml.etree.ElementTree" title="xml.etree.ElementTree: Implementation of the ElementTree API."><code class="xref py py-mod docutils literal notranslate"><span class="pre">xml.etree.ElementTree</span></code></a> en un archivo XML. Los EOLN ya no se normalizan a «n». Este es el resultado de la discusión sobre cómo interpretar la sección 2.11 de la especificación XML. (Contribuido por Mefistotelis en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39011">bpo-39011</a>.)</p>
</section>
</section>
<section id="optimizations">
<h2>Optimizaciones<a class="headerlink" href="#optimizations" title="Enlazar permanentemente con este título">¶</a></h2>
<ul>
<li><p>Optimización del idioma para la asignación de una variable temporal en las comprensiones. Ahora <code class="docutils literal notranslate"><span class="pre">for</span> <span class="pre">y</span> <span class="pre">in</span> <span class="pre">[expr]</span></code> en comprensiones es tan rápido como una simple asignación <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">expr</span></code>. Por ejemplo:</p>
<blockquote>
<div><p>sumas = [s para s en [0] para x en datos para s en [s + x]]</p>
</div></blockquote>
<p>A diferencia del operador <code class="docutils literal notranslate"><span class="pre">:=</span></code>, este idioma no filtra una variable al alcance externo.</p>
<p>(Contribuido por Serhiy Storchaka en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=32856">bpo-32856</a>.)</p>
</li>
<li><p>Manejo de señal optimizado en aplicaciones multiproceso. Si un subproceso diferente al subproceso principal recibe una señal, el bucle de evaluación del código de bytes ya no se interrumpe en cada instrucción de código de bytes para verificar si hay señales pendientes que no se pueden manejar. Solo el hilo principal del intérprete principal puede manejar señales.</p>
<p>Anteriormente, el ciclo de evaluación del código de bytes se interrumpía en cada instrucción hasta que el hilo principal manejaba las señales. (Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40010">bpo-40010</a>.)</p>
</li>
<li><p>Optimicé el módulo <a class="reference internal" href="../library/subprocess.html#module-subprocess" title="subprocess: Subprocess management."><code class="xref py py-mod docutils literal notranslate"><span class="pre">subprocess</span></code></a> en FreeBSD usando <code class="docutils literal notranslate"><span class="pre">closefrom()</span></code>. (Contribuido por Ed Maste, Conrad Meyer, Kyle Evans, Kubilay Kocak y Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38061">bpo-38061</a>.)</p></li>
<li><p><a class="reference internal" href="../c-api/long.html#c.PyLong_FromDouble" title="PyLong_FromDouble"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyLong_FromDouble()</span></code></a> ahora es hasta 1,87 veces más rápido para valores que se ajustan a <span class="c-expr sig sig-inline c"><span class="kt">long</span></span>. (Contribuido por Sergey Fedoseev en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37986">bpo-37986</a>.)</p></li>
<li><p>Varias incorporaciones de Python (<a class="reference internal" href="../library/stdtypes.html#range" title="range"><code class="xref py py-class docutils literal notranslate"><span class="pre">range</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#tuple" title="tuple"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#set" title="set"><code class="xref py py-class docutils literal notranslate"><span class="pre">set</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#frozenset" title="frozenset"><code class="xref py py-class docutils literal notranslate"><span class="pre">frozenset</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#list" title="list"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#dict" title="dict"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>) ahora se aceleran mediante el protocolo de llamada vectorial <span class="target" id="index-73"></span><a class="pep reference external" href="https://peps.python.org/pep-0590/"><strong>PEP 590</strong></a>. (Contribuido por Dong-hee Na, Mark Shannon, Jeroen Demeyer y Petr Viktorin en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37207">bpo-37207</a>.)</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">difference_update()</span></code> optimizado para el caso en el que el otro conjunto es mucho más grande que el conjunto base. (Sugerido por Evgeny Kapun con código aportado por Michele Orrù en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8425">bpo-8425</a>.)</p></li>
<li><p>El asignador de objetos pequeños de Python (<code class="docutils literal notranslate"><span class="pre">obmalloc.c</span></code>) ahora permite (no más de) que una arena vacía permanezca disponible para su reutilización inmediata, sin devolverla al sistema operativo. Esto evita la paliza en bucles simples donde una arena podría crearse y destruirse de nuevo en cada iteración. (Contribuido por Tim Peters en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37257">bpo-37257</a>.)</p></li>
<li><p><a class="reference internal" href="../glossary.html#term-floor-division"><span class="xref std std-term">floor division</span></a> de operación flotante ahora tiene un mejor rendimiento. También se actualiza el mensaje de <a class="reference internal" href="../library/exceptions.html#ZeroDivisionError" title="ZeroDivisionError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ZeroDivisionError</span></code></a> para esta operación. (Contribuido por Dong-hee Na en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39434">bpo-39434</a>.)</p></li>
<li><p>La decodificación de cadenas cortas ASCII con códecs UTF-8 y ascii ahora es aproximadamente un 15% más rápida. (Contribuido por Inada Naoki en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37348">bpo-37348</a>.)</p></li>
</ul>
<p>A continuación, se muestra un resumen de las mejoras de rendimiento desde Python 3.4 hasta Python 3.9:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Python version                       3.4     3.5     3.6     3.7     3.8    3.9
--------------                       ---     ---     ---     ---     ---    ---

Variable and attribute read access:
    read_local                       7.1     7.1     5.4     5.1     3.9    3.9
    read_nonlocal                    7.1     8.1     5.8     5.4     4.4    4.5
    read_global                     15.5    19.0    14.3    13.6     7.6    7.8
    read_builtin                    21.1    21.6    18.5    19.0     7.5    7.8
    read_classvar_from_class        25.6    26.5    20.7    19.5    18.4   17.9
    read_classvar_from_instance     22.8    23.5    18.8    17.1    16.4   16.9
    read_instancevar                32.4    33.1    28.0    26.3    25.4   25.3
    read_instancevar_slots          27.8    31.3    20.8    20.8    20.2   20.5
    read_namedtuple                 73.8    57.5    45.0    46.8    18.4   18.7
    read_boundmethod                37.6    37.9    29.6    26.9    27.7   41.1

Variable and attribute write access:
    write_local                      8.7     9.3     5.5     5.3     4.3    4.3
    write_nonlocal                  10.5    11.1     5.6     5.5     4.7    4.8
    write_global                    19.7    21.2    18.0    18.0    15.8   16.7
    write_classvar                  92.9    96.0   104.6   102.1    39.2   39.8
    write_instancevar               44.6    45.8    40.0    38.9    35.5   37.4
    write_instancevar_slots         35.6    36.1    27.3    26.6    25.7   25.8

Data structure read access:
    read_list                       24.2    24.5    20.8    20.8    19.0   19.5
    read_deque                      24.7    25.5    20.2    20.6    19.8   20.2
    read_dict                       24.3    25.7    22.3    23.0    21.0   22.4
    read_strdict                    22.6    24.3    19.5    21.2    18.9   21.5

Data structure write access:
    write_list                      27.1    28.5    22.5    21.6    20.0   20.0
    write_deque                     28.7    30.1    22.7    21.8    23.5   21.7
    write_dict                      31.4    33.3    29.3    29.2    24.7   25.4
    write_strdict                   28.4    29.9    27.5    25.2    23.1   24.5

Stack (or queue) operations:
    list_append_pop                 93.4   112.7    75.4    74.2    50.8   50.6
    deque_append_pop                43.5    57.0    49.4    49.2    42.5   44.2
    deque_append_popleft            43.7    57.3    49.7    49.7    42.8   46.4

Timing loop:
    loop_overhead                    0.5     0.6     0.4     0.3     0.3    0.3
</pre></div>
</div>
<p>Estos resultados se generaron a partir del script de referencia de acceso variable en: <code class="docutils literal notranslate"><span class="pre">Tools/scripts/var_access_benchmark.py</span></code>. El script de referencia muestra tiempos en nanosegundos. Los puntos de referencia se midieron en un <a class="reference external" href="https://ark.intel.com/content/www/us/en/ark/products/76088/intel-core-i7-4960hq-processor-6m-cache-up-to-3-80-ghz.html">Intel® Core™ i7-4960HQ processor</a> que ejecuta las compilaciones de macOS de 64 bits que se encuentran en <a class="reference external" href="https://www.python.org/downloads/mac-osx/">python.org</a>.</p>
</section>
<section id="deprecated">
<h2>Obsoleto<a class="headerlink" href="#deprecated" title="Enlazar permanentemente con este título">¶</a></h2>
<ul>
<li><p>El comando distutils <code class="docutils literal notranslate"><span class="pre">bdist_msi</span></code> ahora está en desuso, use <code class="docutils literal notranslate"><span class="pre">bdist_wheel</span></code> (paquetes de ruedas) en su lugar. (Contribuido por Hugo van Kemenade en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39586">bpo-39586</a>.)</p></li>
<li><p>Actualmente, <a class="reference internal" href="../library/math.html#math.factorial" title="math.factorial"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.factorial()</span></code></a> acepta instancias de <a class="reference internal" href="../library/functions.html#float" title="float"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a> con valores enteros no negativos (como <code class="docutils literal notranslate"><span class="pre">5.0</span></code>). Sube un <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> para flotadores no integrales y negativos. Ahora está en desuso. En futuras versiones de Python, lanzará un <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> para todos los flotadores. (Contribuido por Serhiy Storchaka en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37315">bpo-37315</a>.)</p></li>
<li><p>Los módulos <code class="xref py py-mod docutils literal notranslate"><span class="pre">parser</span></code> y <code class="xref py py-mod docutils literal notranslate"><span class="pre">symbol</span></code> están obsoletos y se eliminarán en futuras versiones de Python. Para la mayoría de los casos de uso, los usuarios pueden aprovechar la etapa de generación y compilación del árbol de sintaxis abstracta (AST), utilizando el módulo <a class="reference internal" href="../library/ast.html#module-ast" title="ast: Abstract Syntax Tree classes and manipulation."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ast</span></code></a>.</p></li>
<li><p>Las funciones de la API pública de C <code class="xref c c-func docutils literal notranslate"><span class="pre">PyParser_SimpleParseStringFlags()</span></code>, <code class="xref c c-func docutils literal notranslate"><span class="pre">PyParser_SimpleParseStringFlagsFilename()</span></code>, <code class="xref c c-func docutils literal notranslate"><span class="pre">PyParser_SimpleParseFileFlags()</span></code> y <code class="xref c c-func docutils literal notranslate"><span class="pre">PyNode_Compile()</span></code> están en desuso y se eliminarán en Python 3.10 junto con el analizador anterior.</p></li>
<li><p>El uso de <a class="reference internal" href="../library/constants.html#NotImplemented" title="NotImplemented"><code class="xref py py-data docutils literal notranslate"><span class="pre">NotImplemented</span></code></a> en un contexto booleano ha quedado obsoleto, ya que es casi exclusivamente el resultado de implementaciones incorrectas de comparadores ricos. Se convertirá en <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> en una versión futura de Python. (Contribuido por Josh Rosenberg en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35712">bpo-35712</a>.)</p></li>
<li><p>El módulo <a class="reference internal" href="../library/random.html#module-random" title="random: Generate pseudo-random numbers with various common distributions."><code class="xref py py-mod docutils literal notranslate"><span class="pre">random</span></code></a> actualmente acepta cualquier tipo hash como posible valor semilla. Desafortunadamente, no se garantiza que algunos de esos tipos tengan un valor hash determinista. Después de Python 3.9, el módulo restringirá sus semillas a <a class="reference internal" href="../library/constants.html#None" title="None"><code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></a>, <a class="reference internal" href="../library/functions.html#int" title="int"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>, <a class="reference internal" href="../library/functions.html#float" title="float"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> y <a class="reference internal" href="../library/stdtypes.html#bytearray" title="bytearray"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytearray</span></code></a>.</p></li>
<li><p>Abrir el archivo <a class="reference internal" href="../library/gzip.html#gzip.GzipFile" title="gzip.GzipFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">GzipFile</span></code></a> para escritura sin especificar el argumento <em>mode</em> argument is deprecated.  In future Python versions it will always be opened for reading by default.  Specify the <em>mode</em> para abrirlo para escribir y silenciar una advertencia. (Contribuido por Serhiy Storchaka en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=28286">bpo-28286</a>.)</p></li>
<li><p>En desuso del método <code class="docutils literal notranslate"><span class="pre">split</span> <span class="pre">()</span></code> de <code class="xref py py-class docutils literal notranslate"><span class="pre">_tkinter.TkappType</span></code> en favor del método <code class="docutils literal notranslate"><span class="pre">splitlist()</span></code> que tiene un comportamiento más consistente y predecible. (Contribuido por Serhiy Storchaka en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38371">bpo-38371</a>.)</p></li>
<li><p>El paso explícito de objetos de rutina a <a class="reference internal" href="../library/asyncio-task.html#asyncio.wait" title="asyncio.wait"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.wait()</span></code></a> ha quedado obsoleto y se eliminará en la versión 3.11. (Contribuido por Yury Selivanov y Kyle Stanley en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34790">bpo-34790</a>.)</p></li>
<li><p>Los estándares binhex4 y hexbin4 ahora están en desuso. El módulo <code class="xref py py-mod docutils literal notranslate"><span class="pre">binhex</span></code> y las siguientes funciones <a class="reference internal" href="../library/binascii.html#module-binascii" title="binascii: Tools for converting between binary and various ASCII-encoded binary representations."><code class="xref py py-mod docutils literal notranslate"><span class="pre">binascii</span></code></a> ahora están en desuso:</p>
<ul class="simple">
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">b2a_hqx()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">a2b_hqx()</span></code></p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">rlecode_hqx()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">rledecode_hqx()</span></code></p></li>
</ul>
<p>(Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39353">bpo-39353</a>.)</p>
</li>
<li><p>Las clases <a class="reference internal" href="../library/ast.html#module-ast" title="ast: Abstract Syntax Tree classes and manipulation."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ast</span></code></a> <code class="docutils literal notranslate"><span class="pre">slice</span></code>, <code class="docutils literal notranslate"><span class="pre">Index</span></code> y <code class="docutils literal notranslate"><span class="pre">ExtSlice</span></code> se consideran obsoletas y se eliminarán en futuras versiones de Python. El propio <code class="docutils literal notranslate"><span class="pre">value</span></code> debe utilizarse en lugar de <code class="docutils literal notranslate"><span class="pre">Index(value)</span></code>. Se debe utilizar <code class="docutils literal notranslate"><span class="pre">Tuple(slices,</span> <span class="pre">Load())</span></code> en lugar de <code class="docutils literal notranslate"><span class="pre">ExtSlice(slices)</span></code>. (Contribuido por Serhiy Storchaka en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34822">bpo-34822</a>.)</p></li>
<li><p>Las clases <a class="reference internal" href="../library/ast.html#module-ast" title="ast: Abstract Syntax Tree classes and manipulation."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ast</span></code></a> <code class="docutils literal notranslate"><span class="pre">Suite</span></code>, <code class="docutils literal notranslate"><span class="pre">Param</span></code>, <code class="docutils literal notranslate"><span class="pre">AugLoad</span></code> y <code class="docutils literal notranslate"><span class="pre">AugStore</span></code> se consideran obsoletas y se eliminarán en futuras versiones de Python. No fueron generados por el analizador y no aceptados por el generador de código en Python 3. (Contribuido por Batuhan Taskaya en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39639">bpo-39639</a> y <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39969">bpo-39969</a> y Serhiy Storchaka en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39988">bpo-39988</a>).</p></li>
<li><p>Las funciones <a class="reference internal" href="../c-api/init.html#c.PyEval_InitThreads" title="PyEval_InitThreads"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyEval_InitThreads()</span></code></a> y <a class="reference internal" href="../c-api/init.html#c.PyEval_ThreadsInitialized" title="PyEval_ThreadsInitialized"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyEval_ThreadsInitialized()</span></code></a> ahora están en desuso y se eliminarán en Python 3.11. Llamar a <a class="reference internal" href="../c-api/init.html#c.PyEval_InitThreads" title="PyEval_InitThreads"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyEval_InitThreads()</span></code></a> ahora no hace nada. <a class="reference internal" href="../glossary.html#term-GIL"><span class="xref std std-term">GIL</span></a> es inicializado por <a class="reference internal" href="../c-api/init.html#c.Py_Initialize" title="Py_Initialize"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_Initialize()</span></code></a> desde Python 3.7. (Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39877">bpo-39877</a>.)</p></li>
<li><p>Pasar <code class="docutils literal notranslate"><span class="pre">None</span></code> como primer argumento a la función <a class="reference internal" href="../library/shlex.html#shlex.split" title="shlex.split"><code class="xref py py-func docutils literal notranslate"><span class="pre">shlex.split()</span></code></a> ha quedado obsoleto. (Contribuido por Zackery Spytz en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=33262">bpo-33262</a>.)</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">smtpd.MailmanProxy()</span></code> ahora está en desuso porque no se puede utilizar sin un módulo externo, <code class="docutils literal notranslate"><span class="pre">mailman</span></code>. (Contribuido por Samuel Colvin en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35800">bpo-35800</a>.)</p></li>
<li><p>El módulo <a class="reference internal" href="../library/2to3.html#module-lib2to3" title="lib2to3: The 2to3 library"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lib2to3</span></code></a> ahora emite un <a class="reference internal" href="../library/exceptions.html#PendingDeprecationWarning" title="PendingDeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">PendingDeprecationWarning</span></code></a>. Python 3.9 cambió a un analizador PEG (consulte <span class="target" id="index-74"></span><a class="pep reference external" href="https://peps.python.org/pep-0617/"><strong>PEP 617</strong></a>), y Python 3.10 puede incluir una nueva sintaxis de lenguaje que no es analizable por el analizador LL (1) de lib2to3. El módulo <code class="docutils literal notranslate"><span class="pre">lib2to3</span></code> puede eliminarse de la biblioteca estándar en una versión futura de Python. Considere alternativas de terceros como <a class="reference external" href="https://libcst.readthedocs.io/">LibCST</a> o <a class="reference external" href="https://parso.readthedocs.io/">parso</a>. (Contribuido por Carl Meyer en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40360">bpo-40360</a>.)</p></li>
<li><p>El parámetro <em>random</em> de <a class="reference internal" href="../library/random.html#random.shuffle" title="random.shuffle"><code class="xref py py-func docutils literal notranslate"><span class="pre">random.shuffle()</span></code></a> ha quedado obsoleto. (Contribuido por Raymond Hettinger en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40465">bpo-40465</a>)</p></li>
</ul>
</section>
<section id="removed">
<span id="removed-in-python-39"></span><h2>Remoto<a class="headerlink" href="#removed" title="Enlazar permanentemente con este título">¶</a></h2>
<ul class="simple">
<li><p>Se ha eliminado la versión errónea en <code class="xref py py-data docutils literal notranslate"><span class="pre">unittest.mock.__version__</span></code>.</p></li>
<li><p><a class="reference internal" href="../library/nntplib.html#nntplib.NNTP" title="nntplib.NNTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">nntplib.NNTP</span></code></a>: Se han eliminado los métodos <code class="docutils literal notranslate"><span class="pre">xpath()</span></code> y <code class="docutils literal notranslate"><span class="pre">xgtitle()</span></code>. Estos métodos están obsoletos desde Python 3.3. Generalmente, estas extensiones no son compatibles o no están habilitadas por los administradores del servidor NNTP. Para <code class="docutils literal notranslate"><span class="pre">xgtitle()</span></code>, utilice <a class="reference internal" href="../library/nntplib.html#nntplib.NNTP.descriptions" title="nntplib.NNTP.descriptions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">nntplib.NNTP.descriptions()</span></code></a> o <a class="reference internal" href="../library/nntplib.html#nntplib.NNTP.description" title="nntplib.NNTP.description"><code class="xref py py-meth docutils literal notranslate"><span class="pre">nntplib.NNTP.description()</span></code></a> en su lugar. (Contribuido por Dong-hee Na en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39366">bpo-39366</a>.)</p></li>
<li><p><a class="reference internal" href="../library/array.html#array.array" title="array.array"><code class="xref py py-class docutils literal notranslate"><span class="pre">array.array</span></code></a>: Se han eliminado los métodos <code class="docutils literal notranslate"><span class="pre">tostring()</span></code> y <code class="docutils literal notranslate"><span class="pre">fromstring()</span></code>. Eran alias de <code class="docutils literal notranslate"><span class="pre">tobytes()</span></code> y <code class="docutils literal notranslate"><span class="pre">frombytes()</span></code>, obsoletos desde Python 3.2. (Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38916">bpo-38916</a>.)</p></li>
<li><p>Se ha eliminado la función <code class="docutils literal notranslate"><span class="pre">sys.callstats()</span></code> sin documentar. Desde Python 3.7, quedó obsoleto y siempre devolvió <a class="reference internal" href="../library/constants.html#None" title="None"><code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></a>. Requería una opción de compilación especial <code class="docutils literal notranslate"><span class="pre">CALL_PROFILE</span></code> que ya se eliminó en Python 3.7. (Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37414">bpo-37414</a>.)</p></li>
<li><p>Se han eliminado las funciones <code class="docutils literal notranslate"><span class="pre">sys.getcheckinterval()</span></code> y <code class="docutils literal notranslate"><span class="pre">sys.setcheckinterval()</span></code>. Fueron obsoletos desde Python 3.2. Utilice <a class="reference internal" href="../library/sys.html#sys.getswitchinterval" title="sys.getswitchinterval"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.getswitchinterval()</span></code></a> y <a class="reference internal" href="../library/sys.html#sys.setswitchinterval" title="sys.setswitchinterval"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.setswitchinterval()</span></code></a> en su lugar. (Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37392">bpo-37392</a>.)</p></li>
<li><p>Se ha eliminado la función C <code class="docutils literal notranslate"><span class="pre">PyImport_Cleanup()</span></code>. Se documentó como: «Vacíe la tabla del módulo. Solo para uso interno». (Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36710">bpo-36710</a>.)</p></li>
<li><p>Se han eliminado los módulos <code class="docutils literal notranslate"><span class="pre">_dummy_thread</span></code> y <code class="docutils literal notranslate"><span class="pre">dummy_threading</span></code>. Estos módulos quedaron obsoletos desde Python 3.7, que requiere compatibilidad con subprocesos. (Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37312">bpo-37312</a>.)</p></li>
<li><p>Se han eliminado el alias de <code class="docutils literal notranslate"><span class="pre">aifc.openfp()</span></code> a <code class="docutils literal notranslate"><span class="pre">aifc.open()</span></code>, el alias de <code class="docutils literal notranslate"><span class="pre">sunau.openfp()</span></code> a <code class="docutils literal notranslate"><span class="pre">sunau.open()</span></code> y el alias de <code class="docutils literal notranslate"><span class="pre">wave.openfp()</span></code> a <a class="reference internal" href="../library/wave.html#wave.open" title="wave.open"><code class="xref py py-func docutils literal notranslate"><span class="pre">wave.open()</span></code></a>. Fueron obsoletos desde Python 3.7. (Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37320">bpo-37320</a>.)</p></li>
<li><p>Se ha eliminado el método <code class="xref py py-meth docutils literal notranslate"><span class="pre">isAlive()</span></code> de <a class="reference internal" href="../library/threading.html#threading.Thread" title="threading.Thread"><code class="xref py py-class docutils literal notranslate"><span class="pre">threading.Thread</span></code></a>. Quedó en desuso desde Python 3.8. Utilice <a class="reference internal" href="../library/threading.html#threading.Thread.is_alive" title="threading.Thread.is_alive"><code class="xref py py-meth docutils literal notranslate"><span class="pre">is_alive()</span></code></a> en su lugar. (Contribuido por Dong-hee Na en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37804">bpo-37804</a>.)</p></li>
<li><p>Se han eliminado los métodos <code class="docutils literal notranslate"><span class="pre">getchildren()</span></code> y <code class="docutils literal notranslate"><span class="pre">getiterator()</span></code> de las clases <a class="reference internal" href="../library/xml.etree.elementtree.html#xml.etree.ElementTree.ElementTree" title="xml.etree.ElementTree.ElementTree"><code class="xref py py-class docutils literal notranslate"><span class="pre">ElementTree</span></code></a> y <a class="reference internal" href="../library/xml.etree.elementtree.html#xml.etree.ElementTree.Element" title="xml.etree.ElementTree.Element"><code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code></a> en el módulo <a class="reference internal" href="../library/xml.etree.elementtree.html#module-xml.etree.ElementTree" title="xml.etree.ElementTree: Implementation of the ElementTree API."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ElementTree</span></code></a>. Fueron obsoletos en Python 3.2. Utilice <code class="docutils literal notranslate"><span class="pre">iter(x)</span></code> o <code class="docutils literal notranslate"><span class="pre">list(x)</span></code> en lugar de <code class="docutils literal notranslate"><span class="pre">x.getchildren()</span></code> y <code class="docutils literal notranslate"><span class="pre">x.iter()</span></code> o <code class="docutils literal notranslate"><span class="pre">list(x.iter())</span></code> en lugar de <code class="docutils literal notranslate"><span class="pre">x.getiterator()</span></code>. (Contribuido por Serhiy Storchaka en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36543">bpo-36543</a>.)</p></li>
<li><p>Se eliminó la antigua API <a class="reference internal" href="../library/plistlib.html#module-plistlib" title="plistlib: Generate and parse Apple plist files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">plistlib</span></code></a>, quedó en desuso desde Python 3.4. Utilice las funciones <a class="reference internal" href="../library/plistlib.html#plistlib.load" title="plistlib.load"><code class="xref py py-func docutils literal notranslate"><span class="pre">load()</span></code></a>, <a class="reference internal" href="../library/plistlib.html#plistlib.loads" title="plistlib.loads"><code class="xref py py-func docutils literal notranslate"><span class="pre">loads()</span></code></a>, <a class="reference internal" href="../library/plistlib.html#plistlib.dump" title="plistlib.dump"><code class="xref py py-func docutils literal notranslate"><span class="pre">dump()</span></code></a> y <a class="reference internal" href="../library/plistlib.html#plistlib.dumps" title="plistlib.dumps"><code class="xref py py-func docutils literal notranslate"><span class="pre">dumps()</span></code></a>. Además, se eliminó el parámetro <em>use_builtin_types</em>; en su lugar, siempre se utilizan objetos <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> estándar. (Contribuido por Jon Janzen en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36409">bpo-36409</a>.)</p></li>
<li><p>Se ha eliminado la función C <code class="docutils literal notranslate"><span class="pre">PyGen_NeedsFinalizing</span></code>. No se documentó, probó ni usó en ningún lugar dentro de CPython después de la implementación de <span class="target" id="index-75"></span><a class="pep reference external" href="https://peps.python.org/pep-0442/"><strong>PEP 442</strong></a>. Parche de Joannah Nanjekye. (Contribuido por Joannah Nanjekye en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=15088">bpo-15088</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">base64.encodestring()</span></code> y <code class="docutils literal notranslate"><span class="pre">base64.decodestring()</span></code>, los alias obsoletos desde Python 3.1, se han eliminado: utilice <a class="reference internal" href="../library/base64.html#base64.encodebytes" title="base64.encodebytes"><code class="xref py py-func docutils literal notranslate"><span class="pre">base64.encodebytes()</span></code></a> y <a class="reference internal" href="../library/base64.html#base64.decodebytes" title="base64.decodebytes"><code class="xref py py-func docutils literal notranslate"><span class="pre">base64.decodebytes()</span></code></a> en su lugar. (Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39351">bpo-39351</a>.)</p></li>
<li><p>La función <code class="docutils literal notranslate"><span class="pre">fractions.gcd()</span></code> se ha eliminado, está obsoleta desde Python 3.5 (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=22486">bpo-22486</a>): utilice <a class="reference internal" href="../library/math.html#math.gcd" title="math.gcd"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.gcd()</span></code></a> en su lugar. (Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39350">bpo-39350</a>.)</p></li>
<li><p>Se ha eliminado el parámetro <em>buffering</em> de <a class="reference internal" href="../library/bz2.html#bz2.BZ2File" title="bz2.BZ2File"><code class="xref py py-class docutils literal notranslate"><span class="pre">bz2.BZ2File</span></code></a>. Desde Python 3.0, se ignoró y su uso emitió un <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a>. Pase un objeto de archivo abierto para controlar cómo se abre el archivo. (Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39357">bpo-39357</a>.)</p></li>
<li><p>Se ha eliminado el parámetro <em>encoding</em> de <a class="reference internal" href="../library/json.html#json.loads" title="json.loads"><code class="xref py py-func docutils literal notranslate"><span class="pre">json.loads()</span></code></a>. A partir de Python 3.1, fue obsoleto e ignorado; su uso ha emitido un <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a> desde Python 3.8. (Contribuido por Inada Naoki en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39377">bpo-39377</a>)</p></li>
<li><p>Las declaraciones <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">(await</span> <span class="pre">asyncio.lock):</span></code> y <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">(yield</span> <span class="pre">from</span> <span class="pre">asyncio.lock):</span></code> ya no son compatibles, utilice <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span> <span class="pre">lock</span></code> en su lugar. Lo mismo es correcto para <code class="docutils literal notranslate"><span class="pre">asyncio.Condition</span></code> y <code class="docutils literal notranslate"><span class="pre">asyncio.Semaphore</span></code>. (Contribuido por Andrew Svetlov en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34793">bpo-34793</a>.)</p></li>
<li><p>Se han eliminado la función <code class="xref py py-func docutils literal notranslate"><span class="pre">sys.getcounts()</span></code>, la opción de línea de comando <code class="docutils literal notranslate"><span class="pre">-X</span> <span class="pre">showalloccount</span></code> y el campo <code class="docutils literal notranslate"><span class="pre">show_alloc_count</span></code> de la estructura C <a class="reference internal" href="../c-api/init_config.html#c.PyConfig" title="PyConfig"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyConfig</span></code></a>. Necesitaban una compilación especial de Python definiendo la macro <code class="docutils literal notranslate"><span class="pre">COUNT_ALLOCS</span></code>. (Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39489">bpo-39489</a>.)</p></li>
<li><p>Se ha eliminado el atributo <code class="docutils literal notranslate"><span class="pre">_field_types</span></code> de la clase <a class="reference internal" href="../library/typing.html#typing.NamedTuple" title="typing.NamedTuple"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.NamedTuple</span></code></a>. Quedó en desuso desde Python 3.8. En su lugar, utilice el atributo <code class="docutils literal notranslate"><span class="pre">__annotations__</span></code>. (Contribuido por Serhiy Storchaka en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40182">bpo-40182</a>.)</p></li>
<li><p>Se ha eliminado el método <code class="xref py py-meth docutils literal notranslate"><span class="pre">symtable.SymbolTable.has_exec()</span></code>. Quedó en desuso desde 2006 y solo devuelve <code class="docutils literal notranslate"><span class="pre">False</span></code> cuando se llama. (Contribuido por Batuhan Taskaya en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40208">bpo-40208</a>)</p></li>
<li><p>Se han eliminado <code class="xref py py-meth docutils literal notranslate"><span class="pre">asyncio.Task.current_task()</span></code> y <code class="xref py py-meth docutils literal notranslate"><span class="pre">asyncio.Task.all_tasks()</span></code>. Fueron obsoletos desde Python 3.7 y puede usar <a class="reference internal" href="../library/asyncio-task.html#asyncio.current_task" title="asyncio.current_task"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.current_task()</span></code></a> y <a class="reference internal" href="../library/asyncio-task.html#asyncio.all_tasks" title="asyncio.all_tasks"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.all_tasks()</span></code></a> en su lugar. (Contribución de Rémi Lapeyre en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40967">bpo-40967</a>)</p></li>
<li><p>El método <code class="docutils literal notranslate"><span class="pre">unescape()</span></code> en la clase <a class="reference internal" href="../library/html.parser.html#html.parser.HTMLParser" title="html.parser.HTMLParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">html.parser.HTMLParser</span></code></a> se ha eliminado (quedó obsoleto desde Python 3.4). <a class="reference internal" href="../library/html.html#html.unescape" title="html.unescape"><code class="xref py py-func docutils literal notranslate"><span class="pre">html.unescape()</span></code></a> debe usarse para convertir referencias de caracteres a los caracteres Unicode correspondientes.</p></li>
</ul>
</section>
<section id="porting-to-python-3-9">
<h2>Portar a Python 3.9<a class="headerlink" href="#porting-to-python-3-9" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Esta sección enumera los cambios descritos anteriormente y otras correcciones de errores que pueden requerir cambios en su código.</p>
<section id="changes-in-the-python-api">
<h3>Cambios en la API de Python<a class="headerlink" href="#changes-in-the-python-api" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../library/functions.html#import__" title="__import__"><code class="xref py py-func docutils literal notranslate"><span class="pre">__import__()</span></code></a> y <a class="reference internal" href="../library/importlib.html#importlib.util.resolve_name" title="importlib.util.resolve_name"><code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.util.resolve_name()</span></code></a> ahora lanzan <a class="reference internal" href="../library/exceptions.html#ImportError" title="ImportError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ImportError</span></code></a> donde anteriormente lanzaban <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a>. Las personas que llaman que detectan el tipo de excepción específico y son compatibles con Python 3.9 y versiones anteriores deberán detectar ambas usando <code class="docutils literal notranslate"><span class="pre">except</span> <span class="pre">(ImportError,</span> <span class="pre">ValueError):</span></code>.</p></li>
<li><p>Los scripts de activación de <a class="reference internal" href="../library/venv.html#module-venv" title="venv: Creation of virtual environments."><code class="xref py py-mod docutils literal notranslate"><span class="pre">venv</span></code></a> ya no son casos especiales cuando <code class="docutils literal notranslate"><span class="pre">__VENV_PROMPT__</span></code> se establece en <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>.</p></li>
<li><p>El método <a class="reference internal" href="../library/select.html#select.epoll.unregister" title="select.epoll.unregister"><code class="xref py py-meth docutils literal notranslate"><span class="pre">select.epoll.unregister()</span></code></a> ya no ignora el error <a class="reference internal" href="../library/errno.html#errno.EBADF" title="errno.EBADF"><code class="xref py py-data docutils literal notranslate"><span class="pre">EBADF</span></code></a>. (Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39239">bpo-39239</a>.)</p></li>
<li><p>Se ha eliminado el parámetro <em>compresslevel</em> <a class="reference internal" href="../library/bz2.html#bz2.BZ2File" title="bz2.BZ2File"><code class="xref py py-class docutils literal notranslate"><span class="pre">bz2.BZ2File</span></code></a> se convirtió solo en un parámetro de llave, ya que <em>buffering</em> se quitó. (Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39357">bpo-39357</a>.)</p></li>
<li><p>AST simplificado para suscripción. Los índices simples se representarán por su valor, los segmentos extendidos se representarán como tuplas. <code class="docutils literal notranslate"><span class="pre">Index(value)</span></code> devolverá un <code class="docutils literal notranslate"><span class="pre">value</span></code> en sí mismo, <code class="docutils literal notranslate"><span class="pre">ExtSlice(slices)</span></code> devolverá <code class="docutils literal notranslate"><span class="pre">Tuple(slices,</span> <span class="pre">Load())</span></code>. (Contribuido por Serhiy Storchaka en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34822">bpo-34822</a>.)</p></li>
<li><p>El módulo <a class="reference internal" href="../library/importlib.html#module-importlib" title="importlib: The implementation of the import machinery."><code class="xref py py-mod docutils literal notranslate"><span class="pre">importlib</span></code></a> ahora ignora la variable de entorno <span class="target" id="index-76"></span><a class="reference internal" href="../using/cmdline.html#envvar-PYTHONCASEOK"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONCASEOK</span></code></a> cuando se utilizan las opciones de línea de comando <a class="reference internal" href="../using/cmdline.html#cmdoption-E"><code class="xref std std-option docutils literal notranslate"><span class="pre">-E</span></code></a> o <a class="reference internal" href="../using/cmdline.html#cmdoption-I"><code class="xref std std-option docutils literal notranslate"><span class="pre">-I</span></code></a>.</p></li>
<li><p>El parámetro <em>encoding</em> se ha agregado a las clases <a class="reference internal" href="../library/ftplib.html#ftplib.FTP" title="ftplib.FTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">ftplib.FTP</span></code></a> y <a class="reference internal" href="../library/ftplib.html#ftplib.FTP_TLS" title="ftplib.FTP_TLS"><code class="xref py py-class docutils literal notranslate"><span class="pre">ftplib.FTP_TLS</span></code></a> como un parámetro de solo palabra clave, y la codificación predeterminada se cambia de Latin-1 a UTF-8 para seguir: rfc: <cite>2640</cite>.</p></li>
<li><p><a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.loop.shutdown_default_executor" title="asyncio.loop.shutdown_default_executor"><code class="xref py py-meth docutils literal notranslate"><span class="pre">asyncio.loop.shutdown_default_executor()</span></code></a> se ha agregado a <a class="reference internal" href="../library/asyncio-eventloop.html#asyncio.AbstractEventLoop" title="asyncio.AbstractEventLoop"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractEventLoop</span></code></a>, lo que significa que los bucles de eventos alternativos que heredan de él deben tener definido este método. (Contribuido por Kyle Stanley en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34037">bpo-34037</a>.)</p></li>
<li><p>Los valores constantes de los indicadores futuros en el módulo <a class="reference internal" href="../library/__future__.html#module-__future__" title="__future__: Future statement definitions"><code class="xref py py-mod docutils literal notranslate"><span class="pre">__future__</span></code></a> se actualizan para evitar la colisión con los indicadores del compilador. Anteriormente, <code class="docutils literal notranslate"><span class="pre">PyCF_ALLOW_TOP_LEVEL_AWAIT</span></code> chocaba con <code class="docutils literal notranslate"><span class="pre">CO_FUTURE_DIVISION</span></code>. (Contribuido por Batuhan Taskaya en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39562">bpo-39562</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">array('u')</span></code> ahora usa <code class="docutils literal notranslate"><span class="pre">wchar_t</span></code> como tipo C en lugar de <code class="docutils literal notranslate"><span class="pre">Py_UNICODE</span></code>. Este cambio no afecta su comportamiento porque <code class="docutils literal notranslate"><span class="pre">Py_UNICODE</span></code> es alias de <code class="docutils literal notranslate"><span class="pre">wchar_t</span></code> desde Python 3.3. (Contribuido por Inada Naoki en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34538">bpo-34538</a>.)</p></li>
<li><p>La API <a class="reference internal" href="../library/logging.html#logging.getLogger" title="logging.getLogger"><code class="xref py py-func docutils literal notranslate"><span class="pre">logging.getLogger()</span></code></a> ahora devuelve el registrador raíz cuando se le pasó el nombre <code class="docutils literal notranslate"><span class="pre">'root'</span></code>, mientras que anteriormente devolvía un registrador no raíz llamado <code class="docutils literal notranslate"><span class="pre">'root'</span></code>. Esto podría afectar los casos en los que el código de usuario desea explícitamente un registrador no root llamado <code class="docutils literal notranslate"><span class="pre">'root'</span></code>, o crea una instancia de un registrador usando <code class="docutils literal notranslate"><span class="pre">logging.getLogger(__name__)</span></code> en algún módulo de nivel superior llamado <code class="docutils literal notranslate"><span class="pre">'root.py'</span></code>. (Contribuido por Vinay Sajip en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37742">bpo-37742</a>.)</p></li>
<li><p>El manejo de división de <a class="reference internal" href="../library/pathlib.html#pathlib.PurePath" title="pathlib.PurePath"><code class="xref py py-class docutils literal notranslate"><span class="pre">PurePath</span></code></a> ahora devuelve <code class="docutils literal notranslate"><span class="pre">NotImplemented</span></code> en lugar de lanzar un <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> cuando se pasa algo que no sea una instancia de <code class="docutils literal notranslate"><span class="pre">str</span></code> o <a class="reference internal" href="../library/pathlib.html#pathlib.PurePath" title="pathlib.PurePath"><code class="xref py py-class docutils literal notranslate"><span class="pre">PurePath</span></code></a>. Esto permite crear clases compatibles que no hereden de esos tipos mencionados. (Contribución de Roger Aiudi en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34775">bpo-34775</a>).</p></li>
<li><p>A partir de Python 3.9.5, el módulo <a class="reference internal" href="../library/ipaddress.html#module-ipaddress" title="ipaddress: IPv4/IPv6 manipulation library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ipaddress</span></code></a> ya no acepta ceros a la izquierda en las cadenas de direcciones IPv4. Los ceros iniciales son ambiguos y algunas bibliotecas los interpretan como notación octal. Por ejemplo, la función heredada <a class="reference internal" href="../library/socket.html#socket.inet_aton" title="socket.inet_aton"><code class="xref py py-func docutils literal notranslate"><span class="pre">socket.inet_aton()</span></code></a> trata los ceros iniciales como una notación octal. La implementación glibc del <a class="reference internal" href="../library/socket.html#socket.inet_pton" title="socket.inet_pton"><code class="xref py py-func docutils literal notranslate"><span class="pre">inet_pton()</span></code></a> moderno no acepta ceros a la izquierda. (Contribuido por Christian Heimes en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36384">bpo-36384</a>).</p></li>
<li><p><a class="reference internal" href="../library/codecs.html#codecs.lookup" title="codecs.lookup"><code class="xref py py-func docutils literal notranslate"><span class="pre">codecs.lookup()</span></code></a> ahora normaliza el nombre de codificación de la misma manera que <code class="xref py py-func docutils literal notranslate"><span class="pre">encodings.normalize_encoding()</span></code>, excepto que <a class="reference internal" href="../library/codecs.html#codecs.lookup" title="codecs.lookup"><code class="xref py py-func docutils literal notranslate"><span class="pre">codecs.lookup()</span></code></a> también convierte el nombre a minúsculas. Por ejemplo, el nombre de codificación <code class="docutils literal notranslate"><span class="pre">&quot;latex+latin1&quot;</span></code> ahora está normalizado a <code class="docutils literal notranslate"><span class="pre">&quot;latex_latin1&quot;</span></code>. (Contribuido por Jordon Xu en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37751">bpo-37751</a>.)</p></li>
</ul>
</section>
<section id="changes-in-the-c-api">
<h3>Cambios en la API de C<a class="headerlink" href="#changes-in-the-c-api" title="Enlazar permanentemente con este título">¶</a></h3>
<ul>
<li><p>Las instancias de <a class="reference internal" href="../c-api/typeobj.html#heap-types"><span class="std std-ref">heap-allocated types</span></a> (como las creadas con <a class="reference internal" href="../c-api/type.html#c.PyType_FromSpec" title="PyType_FromSpec"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyType_FromSpec()</span></code></a> y API similares) contienen una referencia a su objeto de tipo desde Python 3.8. Como se indica en los «Cambios en la API C» de Python 3.8, para la gran mayoría de los casos, no debería haber efectos secundarios, pero para los tipos que tienen una función personalizada <a class="reference internal" href="../c-api/typeobj.html#c.PyTypeObject.tp_traverse" title="PyTypeObject.tp_traverse"><code class="xref c c-member docutils literal notranslate"><span class="pre">tp_traverse</span></code></a>, asegúrese de que todas las funciones <code class="docutils literal notranslate"><span class="pre">tp_traverse</span></code> personalizadas de los tipos asignados al montón visitan el tipo del objeto.</p>
<blockquote>
<div><p>Ejemplo:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"></span>
<span class="nf">foo_traverse</span><span class="p">(</span><span class="n">foo_struct</span><span class="w"> </span><span class="o">*</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="n">visitproc</span><span class="w"> </span><span class="n">visit</span><span class="p">,</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">arg</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="c1">// Rest of the traverse function</span>
<span class="cp">#if PY_VERSION_HEX &gt;= 0x03090000</span>
<span class="w">    </span><span class="c1">// This was not needed before Python 3.9 (Python issue 35810 and 40217)</span>
<span class="w">    </span><span class="n">Py_VISIT</span><span class="p">(</span><span class="n">Py_TYPE</span><span class="p">(</span><span class="n">self</span><span class="p">));</span><span class="w"></span>
<span class="cp">#endif</span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div></blockquote>
<p>Si su función transversal delega en <code class="docutils literal notranslate"><span class="pre">tp_traverse</span></code> de su clase base (u otro tipo), asegúrese de que <code class="docutils literal notranslate"><span class="pre">Py_TYPE(self)</span></code> se visite solo una vez. Tenga en cuenta que solo se espera que <a class="reference internal" href="../c-api/typeobj.html#heap-types"><span class="std std-ref">heap type</span></a> visite el tipo en <code class="docutils literal notranslate"><span class="pre">tp_traverse</span></code>.</p>
<blockquote>
<div><p>Por ejemplo, si su función <code class="docutils literal notranslate"><span class="pre">tp_traverse</span></code> incluye:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">base</span><span class="o">-&gt;</span><span class="n">tp_traverse</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="n">visit</span><span class="p">,</span><span class="w"> </span><span class="n">arg</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>Luego añade:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#if PY_VERSION_HEX &gt;= 0x03090000</span>
<span class="w">    </span><span class="c1">// This was not needed before Python 3.9 (bpo-35810 and bpo-40217)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">base</span><span class="o">-&gt;</span><span class="n">tp_flags</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">Py_TPFLAGS_HEAPTYPE</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// a heap type&#39;s tp_traverse already visited Py_TYPE(self)</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">Py_VISIT</span><span class="p">(</span><span class="n">Py_TYPE</span><span class="p">(</span><span class="n">self</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="cp">#else</span>
</pre></div>
</div>
</div></blockquote>
<p>(Consulte <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=35810">bpo-35810</a> y <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40217">bpo-40217</a> para obtener más información).</p>
</li>
<li><p>Las funciones <code class="docutils literal notranslate"><span class="pre">PyEval_CallObject</span></code>, <code class="docutils literal notranslate"><span class="pre">PyEval_CallFunction</span></code>, <code class="docutils literal notranslate"><span class="pre">PyEval_CallMethod</span></code> y <code class="docutils literal notranslate"><span class="pre">PyEval_CallObjectWithKeywords</span></code> están en desuso. Utilice <a class="reference internal" href="../c-api/call.html#c.PyObject_Call" title="PyObject_Call"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_Call()</span></code></a> y sus variantes en su lugar. (Ver más detalles en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=29548">bpo-29548</a>.)</p></li>
</ul>
</section>
<section id="cpython-bytecode-changes">
<h3>Cambios en el código de bytes de CPython<a class="headerlink" href="#cpython-bytecode-changes" title="Enlazar permanentemente con este título">¶</a></h3>
<ul>
<li><p>Se agregó el código de operación <a class="reference internal" href="../library/dis.html#opcode-LOAD_ASSERTION_ERROR"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">LOAD_ASSERTION_ERROR</span></code></a> para manejar la declaración <a class="reference internal" href="../reference/simple_stmts.html#assert"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">assert</span></code></a>. Anteriormente, la declaración de aserción no funcionaría correctamente si la excepción <a class="reference internal" href="../library/exceptions.html#AssertionError" title="AssertionError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">AssertionError</span></code></a> estuviera siendo sombreada. (Contribuido por Zackery Spytz en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34880">bpo-34880</a>.)</p></li>
<li><p>El código de operación <a class="reference internal" href="../library/dis.html#opcode-COMPARE_OP"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">COMPARE_OP</span></code></a> se dividió en cuatro instrucciones distintas:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">COMPARE_OP</span></code> para comparaciones enriquecidas</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IS_OP</span></code> para pruebas “es” y “no es”</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONTAINS_OP</span></code> para pruebas “in” y “not in”</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">JUMP_IF_NOT_EXC_MATCH</span></code> para verificar las excepciones en las declaraciones “try-except”.</p></li>
</ul>
<p>(Contribuido por Mark Shannon en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39156">bpo-39156</a>.)</p>
</li>
</ul>
</section>
</section>
<section id="build-changes">
<h2>Construir cambios<a class="headerlink" href="#build-changes" title="Enlazar permanentemente con este título">¶</a></h2>
<ul class="simple">
<li><p>Se agregó la opción <code class="docutils literal notranslate"><span class="pre">--with-platlibdir</span></code> al script <code class="docutils literal notranslate"><span class="pre">configure</span></code>: nombre del directorio de biblioteca específico de la plataforma, almacenado en el nuevo atributo <a class="reference internal" href="../library/sys.html#sys.platlibdir" title="sys.platlibdir"><code class="xref py py-attr docutils literal notranslate"><span class="pre">sys.platlibdir</span></code></a>. Consulte el atributo <a class="reference internal" href="../library/sys.html#sys.platlibdir" title="sys.platlibdir"><code class="xref py py-attr docutils literal notranslate"><span class="pre">sys.platlibdir</span></code></a> para obtener más información. (Contribuido por Jan Matějek, Matěj Cepl, Charalampos Stratakis y Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1294959">bpo-1294959</a>.)</p></li>
<li><p>Se ha eliminado la macro de compilación especial <code class="docutils literal notranslate"><span class="pre">COUNT_ALLOCS</span></code>. (Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39489">bpo-39489</a>.)</p></li>
<li><p>En plataformas que no son de Windows, ahora se requieren las funciones <code class="xref c c-func docutils literal notranslate"><span class="pre">setenv()</span></code> y <code class="xref c c-func docutils literal notranslate"><span class="pre">unsetenv()</span></code> para compilar Python. (Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39395">bpo-39395</a>.)</p></li>
<li><p>En plataformas que no son de Windows, la creación de instaladores <code class="docutils literal notranslate"><span class="pre">bdist_wininst</span></code> ahora no es compatible oficialmente. (Consulte <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=10945">bpo-10945</a> para obtener más detalles).</p></li>
<li><p>Al compilar Python en macOS desde la fuente, <code class="docutils literal notranslate"><span class="pre">_tkinter</span></code> ahora se vincula con marcos Tcl y Tk que no son del sistema si están instalados en <code class="docutils literal notranslate"><span class="pre">/Library/Frameworks</span></code>, como había sido el caso en versiones anteriores de macOS. Si un SDK de macOS está configurado explícitamente, mediante <a class="reference internal" href="../using/configure.html#cmdoption-1"><code class="xref std std-option docutils literal notranslate"><span class="pre">--enable-universalsdk</span></code></a> o <code class="docutils literal notranslate"><span class="pre">-isysroot</span></code>, solo se busca en el SDK. El comportamiento predeterminado aún se puede anular con <cite>–with-tcltk-includes</cite> y <cite>–with-tcltk-libs</cite>. (Contribuido por Ned Deily en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=34956">bpo-34956</a>.)</p></li>
<li><p>Python ahora se puede construir para Windows 10 ARM64. (Contribuido por Steve Dower en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=33125">bpo-33125</a>.)</p></li>
<li><p>Algunas pruebas individuales ahora se omiten cuando se usa <code class="docutils literal notranslate"><span class="pre">--pgo</span></code>. Las pruebas en cuestión aumentaron significativamente el tiempo de la tarea PGO y probablemente no ayudaron a mejorar la optimización del ejecutable final. Esto acelera la tarea en un factor de aproximadamente 15 veces. La ejecución del conjunto de pruebas unitarias completo es lenta. Este cambio puede resultar en una compilación ligeramente menos optimizada ya que no se ejecutarán tantas ramas de código. Si está dispuesto a esperar la compilación mucho más lenta, el comportamiento anterior se puede restaurar usando <code class="docutils literal notranslate"><span class="pre">./configure</span> <span class="pre">[..]</span> <span class="pre">PROFILE_TASK=&quot;-m</span> <span class="pre">test</span> <span class="pre">--pgo-extended&quot;</span></code>. No garantizamos qué conjunto de tareas de PGO produce una compilación más rápida. Los usuarios interesados deben ejecutar sus propios puntos de referencia relevantes, ya que los resultados pueden depender del entorno, la carga de trabajo y la cadena de herramientas del compilador. (Consulte <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36044">bpo-36044</a> y <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37707">bpo-37707</a> para obtener más detalles).</p></li>
</ul>
</section>
<section id="c-api-changes">
<h2>Cambios en la API de C<a class="headerlink" href="#c-api-changes" title="Enlazar permanentemente con este título">¶</a></h2>
<section id="id1">
<h3>Nuevas características<a class="headerlink" href="#id1" title="Enlazar permanentemente con este título">¶</a></h3>
<ul>
<li><p><span class="target" id="index-77"></span><a class="pep reference external" href="https://peps.python.org/pep-0573/"><strong>PEP 573</strong></a>: Se agregó <a class="reference internal" href="../c-api/type.html#c.PyType_FromModuleAndSpec" title="PyType_FromModuleAndSpec"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyType_FromModuleAndSpec()</span></code></a> para asociar un módulo con una clase; <a class="reference internal" href="../c-api/type.html#c.PyType_GetModule" title="PyType_GetModule"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyType_GetModule()</span></code></a> y <a class="reference internal" href="../c-api/type.html#c.PyType_GetModuleState" title="PyType_GetModuleState"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyType_GetModuleState()</span></code></a> para recuperar el módulo y su estado; y <a class="reference internal" href="../c-api/structures.html#c.PyCMethod" title="PyCMethod"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyCMethod</span></code></a> y <code class="xref c c-data docutils literal notranslate"><span class="pre">METH_METHOD</span></code> para permitir que un método acceda a la clase en la que se definió. (Contribuido por Marcel Plch y Petr Viktorin en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38787">bpo-38787</a>.)</p></li>
<li><p>Se agregó la función <a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetCode" title="PyFrame_GetCode"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetCode()</span></code></a>: obtenga un código de marco. Se agregó la función <a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetBack" title="PyFrame_GetBack"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetBack()</span></code></a>: obtenga el siguiente marco exterior del marco. (Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40421">bpo-40421</a>.)</p></li>
<li><p>Se agregó <a class="reference internal" href="../c-api/frame.html#c.PyFrame_GetLineNumber" title="PyFrame_GetLineNumber"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyFrame_GetLineNumber()</span></code></a> a la API C limitada. (Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40421">bpo-40421</a>.)</p></li>
<li><p>Se agregaron funciones <a class="reference internal" href="../c-api/init.html#c.PyThreadState_GetInterpreter" title="PyThreadState_GetInterpreter"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyThreadState_GetInterpreter()</span></code></a> y <a class="reference internal" href="../c-api/init.html#c.PyInterpreterState_Get" title="PyInterpreterState_Get"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyInterpreterState_Get()</span></code></a> para obtener el intérprete. Se agregó la función <a class="reference internal" href="../c-api/init.html#c.PyThreadState_GetFrame" title="PyThreadState_GetFrame"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyThreadState_GetFrame()</span></code></a> para obtener el marco actual de un estado de subproceso de Python. Se agregó la función <a class="reference internal" href="../c-api/init.html#c.PyThreadState_GetID" title="PyThreadState_GetID"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyThreadState_GetID()</span></code></a>: obtenga el identificador único de un estado de subproceso de Python. (Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39947">bpo-39947</a>.)</p></li>
<li><p>Se agregó una nueva función pública <a class="reference internal" href="../c-api/call.html#c.PyObject_CallNoArgs" title="PyObject_CallNoArgs"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_CallNoArgs()</span></code></a> a la API de C, que llama a un objeto de Python invocable sin ningún argumento. Es la forma más eficiente de llamar a un objeto de Python invocable sin ningún argumento. (Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37194">bpo-37194</a>.)</p></li>
<li><p>Cambios en la API C limitada (si se define la macro <code class="docutils literal notranslate"><span class="pre">Py_LIMITED_API</span></code>):</p>
<ul class="simple">
<li><p>Proporcione <a class="reference internal" href="../c-api/exceptions.html#c.Py_EnterRecursiveCall" title="Py_EnterRecursiveCall"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_EnterRecursiveCall()</span></code></a> y <a class="reference internal" href="../c-api/exceptions.html#c.Py_LeaveRecursiveCall" title="Py_LeaveRecursiveCall"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_LeaveRecursiveCall()</span></code></a> como funciones regulares para la API limitada. Anteriormente, se definían como macros, pero estas macros no se compilaban con la API C limitada que no puede acceder al campo <code class="docutils literal notranslate"><span class="pre">PyThreadState.recursion_depth</span></code> (la estructura es opaca en la API C limitada).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyObject_INIT()</span></code> y <code class="docutils literal notranslate"><span class="pre">PyObject_INIT_VAR()</span></code> se convierten en funciones «opacas» habituales para ocultar los detalles de la implementación.</p></li>
</ul>
<p>(Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38644">bpo-38644</a> y <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39542">bpo-39542</a>.)</p>
</li>
<li><p>Se agrega la función <a class="reference internal" href="../c-api/module.html#c.PyModule_AddType" title="PyModule_AddType"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyModule_AddType()</span></code></a> para ayudar a agregar un tipo a un módulo. (Contribuido por Dong-hee Na en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40024">bpo-40024</a>.)</p></li>
<li><p>Se agregaron las funciones <a class="reference internal" href="../c-api/gcsupport.html#c.PyObject_GC_IsTracked" title="PyObject_GC_IsTracked"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_GC_IsTracked()</span></code></a> y <a class="reference internal" href="../c-api/gcsupport.html#c.PyObject_GC_IsFinalized" title="PyObject_GC_IsFinalized"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_GC_IsFinalized()</span></code></a> a la API pública para permitir consultar si los objetos de Python se están rastreando actualmente o si ya han sido finalizados por el recolector de basura, respectivamente. (Contribuido por Pablo Galindo Salgado en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40241">bpo-40241</a>.)</p></li>
<li><p>Se agregó <code class="xref c c-func docutils literal notranslate"><span class="pre">_PyObject_FunctionStr()</span></code> para obtener una representación de cadena fácil de usar de un objeto similar a una función. (Parche de Jeroen Demeyer en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37645">bpo-37645</a>.)</p></li>
<li><p>Se agregó <a class="reference internal" href="../c-api/call.html#c.PyObject_CallOneArg" title="PyObject_CallOneArg"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_CallOneArg()</span></code></a> para llamar a un objeto con un argumento posicional (parche de Jeroen Demeyer en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37483">bpo-37483</a>).</p></li>
</ul>
</section>
<section id="id2">
<h3>Portar a Python 3.9<a class="headerlink" href="#id2" title="Enlazar permanentemente con este título">¶</a></h3>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">PyInterpreterState.eval_frame</span></code> (<span class="target" id="index-78"></span><a class="pep reference external" href="https://peps.python.org/pep-0523/"><strong>PEP 523</strong></a>) ahora requiere un nuevo parámetro <em>tstate</em> obligatorio (<code class="docutils literal notranslate"><span class="pre">PyThreadState*</span></code>). (Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38500">bpo-38500</a>.)</p></li>
<li><p>Módulos de extensión: <a class="reference internal" href="../c-api/module.html#c.PyModuleDef.m_traverse" title="PyModuleDef.m_traverse"><code class="xref c c-member docutils literal notranslate"><span class="pre">m_traverse</span></code></a>, <a class="reference internal" href="../c-api/module.html#c.PyModuleDef.m_clear" title="PyModuleDef.m_clear"><code class="xref c c-member docutils literal notranslate"><span class="pre">m_clear</span></code></a> y <a class="reference internal" href="../c-api/module.html#c.PyModuleDef.m_free" title="PyModuleDef.m_free"><code class="xref c c-member docutils literal notranslate"><span class="pre">m_free</span></code></a> Las funciones de <a class="reference internal" href="../c-api/module.html#c.PyModuleDef" title="PyModuleDef"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyModuleDef</span></code></a> ya no se llaman si el estado del módulo era solicitado pero aún no asignado. Este es el caso inmediatamente después de que se crea el módulo y antes de que se ejecute (función <a class="reference internal" href="../c-api/module.html#c.Py_mod_exec" title="Py_mod_exec"><code class="xref c c-data docutils literal notranslate"><span class="pre">Py_mod_exec</span></code></a>). Más precisamente, estas funciones no se llaman si <a class="reference internal" href="../c-api/module.html#c.PyModuleDef.m_size" title="PyModuleDef.m_size"><code class="xref c c-member docutils literal notranslate"><span class="pre">m_size</span></code></a> es mayor que 0 y el estado del módulo (como lo devuelve <a class="reference internal" href="../c-api/module.html#c.PyModule_GetState" title="PyModule_GetState"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyModule_GetState()</span></code></a>) es <code class="docutils literal notranslate"><span class="pre">NULL</span></code>.</p>
<p>Los módulos de extensión sin estado de módulo (<code class="docutils literal notranslate"><span class="pre">m_size</span> <span class="pre">&lt;=</span> <span class="pre">0</span></code>) no se ven afectados.</p>
</li>
<li><p>Si se llama a <a class="reference internal" href="../c-api/init.html#c.Py_AddPendingCall" title="Py_AddPendingCall"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_AddPendingCall()</span></code></a> en un subinterpretador, la función ahora está programada para ser llamada desde el subinterpretador, en lugar de ser llamada desde el intérprete principal. Cada subinterpretador ahora tiene su propia lista de llamadas programadas. (Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39984">bpo-39984</a>.)</p></li>
<li><p>El registro de Windows ya no se usa para inicializar <a class="reference internal" href="../library/sys.html#sys.path" title="sys.path"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.path</span></code></a> cuando se usa la opción <code class="docutils literal notranslate"><span class="pre">-E</span></code> (si <a class="reference internal" href="../c-api/init_config.html#c.PyConfig.use_environment" title="PyConfig.use_environment"><code class="xref c c-member docutils literal notranslate"><span class="pre">PyConfig.use_environment</span></code></a> está configurado en <code class="docutils literal notranslate"><span class="pre">0</span></code>). Esto es importante al incrustar Python en Windows. (Contribuido por Zackery Spytz en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8901">bpo-8901</a>.)</p></li>
<li><p>La variable global <a class="reference internal" href="../c-api/tuple.html#c.PyStructSequence_UnnamedField" title="PyStructSequence_UnnamedField"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyStructSequence_UnnamedField</span></code></a> ahora es una constante y se refiere a una cadena constante. (Contribuido por Serhiy Storchaka en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38650">bpo-38650</a>.)</p></li>
<li><p>La estructura <code class="xref c c-type docutils literal notranslate"><span class="pre">PyGC_Head</span></code> ahora es opaca. Solo se define en la API C interna (<code class="docutils literal notranslate"><span class="pre">pycore_gc.h</span></code>). (Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40241">bpo-40241</a>.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Py_UNICODE_COPY</span></code>, <code class="docutils literal notranslate"><span class="pre">Py_UNICODE_FILL</span></code>, <code class="docutils literal notranslate"><span class="pre">PyUnicode_WSTR_LENGTH</span></code>, <a class="reference internal" href="../c-api/unicode.html#c.PyUnicode_FromUnicode" title="PyUnicode_FromUnicode"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_FromUnicode()</span></code></a>, <a class="reference internal" href="../c-api/unicode.html#c.PyUnicode_AsUnicode" title="PyUnicode_AsUnicode"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_AsUnicode()</span></code></a>, <code class="docutils literal notranslate"><span class="pre">_PyUnicode_AsUnicode</span></code> y <a class="reference internal" href="../c-api/unicode.html#c.PyUnicode_AsUnicodeAndSize" title="PyUnicode_AsUnicodeAndSize"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_AsUnicodeAndSize()</span></code></a> están marcados como obsoletos en C. Han sido obsoletos por <span class="target" id="index-79"></span><a class="pep reference external" href="https://peps.python.org/pep-0393/"><strong>PEP 393</strong></a> desde Python 3.3. (Contribuido por Inada Naoki en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36346">bpo-36346</a>.)</p></li>
<li><p>La función <a class="reference internal" href="../c-api/sys.html#c.Py_FatalError" title="Py_FatalError"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_FatalError()</span></code></a> se reemplaza con una macro que registra automáticamente el nombre de la función actual, a menos que se defina la macro <code class="docutils literal notranslate"><span class="pre">Py_LIMITED_API</span></code>. (Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39882">bpo-39882</a>.)</p></li>
<li><p>El protocolo vectorcall ahora requiere que la persona que llama solo pase cadenas como nombres de palabras clave. (Consulte <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37540">bpo-37540</a> para obtener más información).</p></li>
<li><p>Los detalles de implementación de una serie de macros y funciones ahora están ocultos:</p>
<ul class="simple">
<li><p>La macro <a class="reference internal" href="../c-api/gcsupport.html#c.PyObject_IS_GC" title="PyObject_IS_GC"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_IS_GC()</span></code></a> se convirtió en una función.</p></li>
<li><p>La macro <code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_NEW()</span></code> se convierte en un alias de la macro <a class="reference internal" href="../c-api/allocation.html#c.PyObject_New" title="PyObject_New"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_New()</span></code></a> y la macro <code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_NEW_VAR()</span></code> se convierte en un alias de la macro <a class="reference internal" href="../c-api/allocation.html#c.PyObject_NewVar" title="PyObject_NewVar"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_NewVar()</span></code></a>. Ya no acceden directamente al miembro <a class="reference internal" href="../c-api/typeobj.html#c.PyTypeObject.tp_basicsize" title="PyTypeObject.tp_basicsize"><code class="xref c c-member docutils literal notranslate"><span class="pre">PyTypeObject.tp_basicsize</span></code></a>.</p></li>
<li><p>La macro <code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_GET_WEAKREFS_LISTPTR()</span></code> se convirtió en una función: la macro accedió directamente al miembro <a class="reference internal" href="../c-api/typeobj.html#c.PyTypeObject.tp_weaklistoffset" title="PyTypeObject.tp_weaklistoffset"><code class="xref c c-member docutils literal notranslate"><span class="pre">PyTypeObject.tp_weaklistoffset</span></code></a>.</p></li>
<li><p>La macro <a class="reference internal" href="../c-api/buffer.html#c.PyObject_CheckBuffer" title="PyObject_CheckBuffer"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_CheckBuffer()</span></code></a> se convirtió en una función: la macro accedió directamente al miembro <a class="reference internal" href="../c-api/typeobj.html#c.PyTypeObject.tp_as_buffer" title="PyTypeObject.tp_as_buffer"><code class="xref c c-member docutils literal notranslate"><span class="pre">PyTypeObject.tp_as_buffer</span></code></a>.</p></li>
<li><p><a class="reference internal" href="../c-api/number.html#c.PyIndex_Check" title="PyIndex_Check"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyIndex_Check()</span></code></a> ahora siempre se declara como una función opaca para ocultar los detalles de implementación: se eliminó la macro <code class="docutils literal notranslate"><span class="pre">PyIndex_Check()</span></code>. La macro accedió directamente al miembro <a class="reference internal" href="../c-api/typeobj.html#c.PyTypeObject.tp_as_number" title="PyTypeObject.tp_as_number"><code class="xref c c-member docutils literal notranslate"><span class="pre">PyTypeObject.tp_as_number</span></code></a>.</p></li>
</ul>
<p>(Consulte <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40170">bpo-40170</a> para obtener más detalles).</p>
</li>
</ul>
</section>
<section id="id3">
<h3>Remoto<a class="headerlink" href="#id3" title="Enlazar permanentemente con este título">¶</a></h3>
<ul>
<li><p>Se excluyeron las macros <code class="docutils literal notranslate"><span class="pre">PyFPE_START_PROTECT()</span></code> y <code class="docutils literal notranslate"><span class="pre">PyFPE_END_PROTECT()</span></code> de <code class="docutils literal notranslate"><span class="pre">pyfpe.h</span></code> de la API C limitada. (Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38835">bpo-38835</a>.)</p></li>
<li><p>Se ha eliminado la ranura <code class="docutils literal notranslate"><span class="pre">tp_print</span></code> de <a class="reference internal" href="../c-api/typeobj.html#type-structs"><span class="std std-ref">PyTypeObject</span></a>. Se usó para imprimir objetos en archivos en Python 2.7 y antes. Desde Python 3.0, se ha ignorado y no se ha utilizado. (Contribuido por Jeroen Demeyer en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36974">bpo-36974</a>.)</p></li>
<li><p>Cambios en la API C limitada (si se define la macro <code class="docutils literal notranslate"><span class="pre">Py_LIMITED_API</span></code>):</p>
<ul class="simple">
<li><p>Se excluyeron las siguientes funciones de la API C limitada:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">PyThreadState_DeleteCurrent()</span></code> (Contribuido por Joannah Nanjekye en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37878">bpo-37878</a>.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_Py_CheckRecursionLimit</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_Py_NewReference()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_Py_ForgetReference()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_PyTraceMalloc_NewReference()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_Py_GetRefTotal()</span></code></p></li>
<li><p>El mecanismo de papelera que nunca funcionó en la API C limitada.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyTrash_UNWIND_LEVEL</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Py_TRASHCAN_BEGIN_CONDITION</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Py_TRASHCAN_BEGIN</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Py_TRASHCAN_END</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Py_TRASHCAN_SAFE_BEGIN</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Py_TRASHCAN_SAFE_END</span></code></p></li>
</ul>
</li>
<li><p>Se movieron las siguientes funciones y definiciones a la API de C interna:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">_PyDebug_PrintTotalRefs()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_Py_PrintReferences()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_Py_PrintReferenceAddresses()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_Py_tracemalloc_config</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_Py_AddToAllObjects()</span></code> (específico para <code class="docutils literal notranslate"><span class="pre">Py_TRACE_REFS</span></code> acumulación)</p></li>
</ul>
</li>
</ul>
<p>(Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38644">bpo-38644</a> y <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39542">bpo-39542</a>.)</p>
</li>
<li><p>Se eliminó el gancho <code class="docutils literal notranslate"><span class="pre">_PyRuntime.getframe</span></code> y se eliminó la macro <code class="docutils literal notranslate"><span class="pre">_PyThreadState_GetFrame</span></code>, que era un alias de <code class="docutils literal notranslate"><span class="pre">_PyRuntime.getframe</span></code>. Solo fueron expuestos por la API C interna. También se eliminó el tipo <code class="docutils literal notranslate"><span class="pre">PyThreadFrameGetter</span></code>. (Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39946">bpo-39946</a>.)</p></li>
<li><p>Se eliminaron las siguientes funciones de la API de C. Llame a <a class="reference internal" href="../c-api/gcsupport.html#c.PyGC_Collect" title="PyGC_Collect"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyGC_Collect()</span></code></a> explícitamente para borrar todas las listas libres. (Contribuido por Inada Naoki y Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=37340">bpo-37340</a>, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=38896">bpo-38896</a> y <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=40428">bpo-40428</a>.)</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">PyAsyncGen_ClearFreeLists()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyContext_ClearFreeList()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyDict_ClearFreeList()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyFloat_ClearFreeList()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyFrame_ClearFreeList()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyList_ClearFreeList()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyMethod_ClearFreeList()</span></code> y <code class="docutils literal notranslate"><span class="pre">PyCFunction_ClearFreeList()</span></code>: se han eliminado las listas libres de objetos de método enlazados.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PySet_ClearFreeList()</span></code>: la lista de conjuntos libres se ha eliminado en Python 3.4.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyTuple_ClearFreeList()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyUnicode_ClearFreeList()</span></code>: la lista libre de Unicode se ha eliminado en Python 3.3.</p></li>
</ul>
</li>
<li><p>Función <code class="docutils literal notranslate"><span class="pre">_PyUnicode_ClearStaticStrings()</span></code> eliminada. (Contribuido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39465">bpo-39465</a>.)</p></li>
<li><p>Eliminado <code class="docutils literal notranslate"><span class="pre">Py_UNICODE_MATCH</span></code>. Ha sido obsoleto por <span class="target" id="index-80"></span><a class="pep reference external" href="https://peps.python.org/pep-0393/"><strong>PEP 393</strong></a> y roto desde Python 3.3. En su lugar, se puede utilizar la función <a class="reference internal" href="../c-api/unicode.html#c.PyUnicode_Tailmatch" title="PyUnicode_Tailmatch"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_Tailmatch()</span></code></a>. (Contribuido por Inada Naoki en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=36346">bpo-36346</a>.)</p></li>
<li><p>Archivos de encabezado limpios de interfaces definidas pero sin implementación. Los símbolos API públicos que se eliminan son: <code class="docutils literal notranslate"><span class="pre">_PyBytes_InsertThousandsGroupingLocale</span></code>, <code class="docutils literal notranslate"><span class="pre">_PyBytes_InsertThousandsGrouping</span></code>, <code class="docutils literal notranslate"><span class="pre">_Py_InitializeFromArgs</span></code>, <code class="docutils literal notranslate"><span class="pre">_Py_InitializeFromWideArgs</span></code>, <code class="docutils literal notranslate"><span class="pre">_PyFloat_Repr</span></code>, <code class="docutils literal notranslate"><span class="pre">_PyFloat_Digits</span></code>, <code class="docutils literal notranslate"><span class="pre">_PyFloat_DigitsInit</span></code>, <code class="docutils literal notranslate"><span class="pre">PyFrame_ExtendStack</span></code>, <code class="docutils literal notranslate"><span class="pre">_PyAIterWrapper_Type</span></code>, <code class="docutils literal notranslate"><span class="pre">PyNullImporter_Type</span></code>, <code class="docutils literal notranslate"><span class="pre">PyCmpWrapper_Type</span></code>, <code class="docutils literal notranslate"><span class="pre">PySortWrapper_Type</span></code>, <code class="docutils literal notranslate"><span class="pre">PyNoArgsFunction</span></code>. (Contribuido por Pablo Galindo Salgado en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=39372">bpo-39372</a>.)</p></li>
</ul>
</section>
</section>
<section id="notable-changes-in-python-3-9-1">
<h2>Cambios notables en Python 3.9.1<a class="headerlink" href="#notable-changes-in-python-3-9-1" title="Enlazar permanentemente con este título">¶</a></h2>
<section id="id4">
<h3>mecanografía<a class="headerlink" href="#id4" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El comportamiento de <a class="reference internal" href="../library/typing.html#typing.Literal" title="typing.Literal"><code class="xref py py-class docutils literal notranslate"><span class="pre">typing.Literal</span></code></a> se modificó para cumplir con <span class="target" id="index-81"></span><a class="pep reference external" href="https://peps.python.org/pep-0586/"><strong>PEP 586</strong></a> y para coincidir con el comportamiento de los verificadores de tipo estático especificados en el PEP.</p>
<ol class="arabic">
<li><p><code class="docutils literal notranslate"><span class="pre">Literal</span></code> ahora elimina los parámetros duplicados.</p></li>
<li><p>Las comparaciones de igualdad entre objetos <code class="docutils literal notranslate"><span class="pre">Literal</span></code> ahora son independientes del orden.</p></li>
<li><p>Las comparaciones de <code class="docutils literal notranslate"><span class="pre">Literal</span></code> ahora respetan los tipos. Por ejemplo, <code class="docutils literal notranslate"><span class="pre">Literal[0]</span> <span class="pre">==</span> <span class="pre">Literal[False]</span></code> evaluado previamente como <code class="docutils literal notranslate"><span class="pre">True</span></code>. Ahora es <code class="docutils literal notranslate"><span class="pre">False</span></code>. Para respaldar este cambio, la caché de tipos utilizada internamente ahora admite tipos diferenciados.</p></li>
<li><p>Los objetos <code class="docutils literal notranslate"><span class="pre">Literal</span></code> ahora lanzarán una excepción <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> durante las comparaciones de igualdad si alguno de sus parámetros no es <a class="reference internal" href="../glossary.html#term-hashable"><span class="xref std std-term">hashable</span></a>. Tenga en cuenta que declarar <code class="docutils literal notranslate"><span class="pre">Literal</span></code> con parámetros mutables no arrojará un error:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Literal</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Literal</span><span class="p">[{</span><span class="mi">0</span><span class="p">}]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Literal</span><span class="p">[{</span><span class="mi">0</span><span class="p">}]</span> <span class="o">==</span> <span class="n">Literal</span><span class="p">[{</span><span class="kc">False</span><span class="p">}]</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">TypeError</span>: <span class="n">unhashable type: &#39;set&#39;</span>
</pre></div>
</div>
</li>
</ol>
<p>(Contribuido por Yurii Karabas en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42345">bpo-42345</a>.)</p>
</section>
<section id="macos-11-0-big-sur-and-apple-silicon-mac-support">
<h3>Compatibilidad con macOS 11.0 (Big Sur) y Apple Silicon Mac<a class="headerlink" href="#macos-11-0-big-sur-and-apple-silicon-mac-support" title="Enlazar permanentemente con este título">¶</a></h3>
<p>A partir de 3.9.1, Python ahora es totalmente compatible con la construcción y ejecución en macOS 11.0 (Big Sur) y en Apple Silicon Macs (basado en la arquitectura <code class="docutils literal notranslate"><span class="pre">ARM64</span></code>). Una nueva variante de compilación universal, <code class="docutils literal notranslate"><span class="pre">universal2</span></code>, ahora está disponible para admitir de forma nativa tanto <code class="docutils literal notranslate"><span class="pre">ARM64</span></code> como <code class="docutils literal notranslate"><span class="pre">Intel</span> <span class="pre">64</span></code> en un conjunto de ejecutables. Los binarios ahora también se pueden construir en versiones actuales de macOS para ser implementados en una variedad de versiones anteriores de macOS (probadas a 10.9) mientras hacen que algunas funciones y opciones más nuevas del sistema operativo estén disponibles condicionalmente según la versión del sistema operativo en uso en tiempo de ejecución («vinculación débil» ).</p>
<p>(Contribuido por Ronald Oussoren y Lawrence D’Anna en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=41100">bpo-41100</a>.)</p>
</section>
</section>
<section id="notable-changes-in-python-3-9-2">
<h2>Cambios notables en Python 3.9.2<a class="headerlink" href="#notable-changes-in-python-3-9-2" title="Enlazar permanentemente con este título">¶</a></h2>
<section id="collections-abc">
<h3>colecciones.abc<a class="headerlink" href="#collections-abc" title="Enlazar permanentemente con este título">¶</a></h3>
<p><a class="reference internal" href="../library/collections.abc.html#collections.abc.Callable" title="collections.abc.Callable"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.abc.Callable</span></code></a> genérico ahora aplana los parámetros de tipo, similar a lo que hace actualmente <a class="reference internal" href="../library/typing.html#typing.Callable" title="typing.Callable"><code class="xref py py-data docutils literal notranslate"><span class="pre">typing.Callable</span></code></a>. Esto significa que <code class="docutils literal notranslate"><span class="pre">collections.abc.Callable[[int,</span> <span class="pre">str],</span> <span class="pre">str]</span></code> tendrá <code class="docutils literal notranslate"><span class="pre">__args__</span></code> de <code class="docutils literal notranslate"><span class="pre">(int,</span> <span class="pre">str,</span> <span class="pre">str)</span></code>; anteriormente esto era <code class="docutils literal notranslate"><span class="pre">([int,</span> <span class="pre">str],</span> <span class="pre">str)</span></code>. Para permitir este cambio, <a class="reference internal" href="../library/types.html#types.GenericAlias" title="types.GenericAlias"><code class="xref py py-class docutils literal notranslate"><span class="pre">types.GenericAlias</span></code></a> ahora puede ser subclasificado, y se devolverá una subclase al subíndice el tipo <a class="reference internal" href="../library/collections.abc.html#collections.abc.Callable" title="collections.abc.Callable"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.abc.Callable</span></code></a>. El código que accede a los argumentos a través de <a class="reference internal" href="../library/typing.html#typing.get_args" title="typing.get_args"><code class="xref py py-func docutils literal notranslate"><span class="pre">typing.get_args()</span></code></a> o <code class="docutils literal notranslate"><span class="pre">__args__</span></code> debe tener en cuenta este cambio. Se puede emitir un <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a> para formas no válidas de parametrizar <a class="reference internal" href="../library/collections.abc.html#collections.abc.Callable" title="collections.abc.Callable"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.abc.Callable</span></code></a> que pueden haber pasado silenciosamente en Python 3.9.1. Este <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a> se convertirá en un <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> en Python 3.10. (Contribuido por Ken Jin en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42195">bpo-42195</a>.)</p>
</section>
<section id="urllib-parse">
<h3>urllib.parse<a class="headerlink" href="#urllib-parse" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Las versiones anteriores de Python permitían el uso de <code class="docutils literal notranslate"><span class="pre">;</span></code> y <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> como separadores de parámetros de consulta en <a class="reference internal" href="../library/urllib.parse.html#urllib.parse.parse_qs" title="urllib.parse.parse_qs"><code class="xref py py-func docutils literal notranslate"><span class="pre">urllib.parse.parse_qs()</span></code></a> y <a class="reference internal" href="../library/urllib.parse.html#urllib.parse.parse_qsl" title="urllib.parse.parse_qsl"><code class="xref py py-func docutils literal notranslate"><span class="pre">urllib.parse.parse_qsl()</span></code></a>. Debido a problemas de seguridad y para cumplir con las recomendaciones más recientes del W3C, esto se ha cambiado para permitir solo una clave separadora, con <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> como predeterminado. Este cambio también afecta a <a class="reference internal" href="../library/cgi.html#cgi.parse" title="cgi.parse"><code class="xref py py-func docutils literal notranslate"><span class="pre">cgi.parse()</span></code></a> y <a class="reference internal" href="../library/cgi.html#cgi.parse_multipart" title="cgi.parse_multipart"><code class="xref py py-func docutils literal notranslate"><span class="pre">cgi.parse_multipart()</span></code></a> ya que utilizan las funciones afectadas internamente. Para obtener más detalles, consulte su documentación respectiva. (Contribuido por Adam Goldschmidt, Senthil Kumaran y Ken Jin en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=42967">bpo-42967</a>.)</p>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../contents.html">Tabla de contenido</a></h3>
    <ul>
<li><a class="reference internal" href="#">Qué hay de nuevo en Python 3.9</a><ul>
<li><a class="reference internal" href="#summary-release-highlights">Resumen: aspectos destacados de la versión</a></li>
<li><a class="reference internal" href="#you-should-check-for-deprecationwarning-in-your-code">Debe verificar DeprecationWarning en su código</a></li>
<li><a class="reference internal" href="#new-features">Nuevas características</a><ul>
<li><a class="reference internal" href="#dictionary-merge-update-operators">Operadores de combinación y actualización de diccionarios</a></li>
<li><a class="reference internal" href="#new-string-methods-to-remove-prefixes-and-suffixes">Nuevos métodos de cadena para eliminar prefijos y sufijos</a></li>
<li><a class="reference internal" href="#type-hinting-generics-in-standard-collections">Tipos genéricos de sugerencia en colecciones estándar</a></li>
<li><a class="reference internal" href="#new-parser">Nuevo analizador</a></li>
</ul>
</li>
<li><a class="reference internal" href="#other-language-changes">Otros cambios de idioma</a></li>
<li><a class="reference internal" href="#new-modules">Nuevos módulos</a><ul>
<li><a class="reference internal" href="#zoneinfo">zoneinfo</a></li>
<li><a class="reference internal" href="#graphlib">Graphlib</a></li>
</ul>
</li>
<li><a class="reference internal" href="#improved-modules">Módulos mejorados</a><ul>
<li><a class="reference internal" href="#ast">ast</a></li>
<li><a class="reference internal" href="#asyncio">asyncio</a></li>
<li><a class="reference internal" href="#compileall">compilar todo</a></li>
<li><a class="reference internal" href="#concurrent-futures">Futuros concurrentes</a></li>
<li><a class="reference internal" href="#curses">maldiciones</a></li>
<li><a class="reference internal" href="#datetime">fecha y hora</a></li>
<li><a class="reference internal" href="#distutils">distutils</a></li>
<li><a class="reference internal" href="#fcntl">fcntl</a></li>
<li><a class="reference internal" href="#ftplib">ftplib</a></li>
<li><a class="reference internal" href="#gc">GC</a></li>
<li><a class="reference internal" href="#hashlib">hashlib</a></li>
<li><a class="reference internal" href="#http">http</a></li>
<li><a class="reference internal" href="#idle-and-idlelib">IDLE e idlelib</a></li>
<li><a class="reference internal" href="#imaplib">imaplib</a></li>
<li><a class="reference internal" href="#importlib">importlib</a></li>
<li><a class="reference internal" href="#inspect">inspeccionar</a></li>
<li><a class="reference internal" href="#ipaddress">dirección IP</a></li>
<li><a class="reference internal" href="#math">Matemáticas</a></li>
<li><a class="reference internal" href="#multiprocessing">multiprocesamiento</a></li>
<li><a class="reference internal" href="#nntplib">nntplib</a></li>
<li><a class="reference internal" href="#os">os</a></li>
<li><a class="reference internal" href="#pathlib">Pathlib</a></li>
<li><a class="reference internal" href="#pdb">pdb</a></li>
<li><a class="reference internal" href="#poplib">poplib</a></li>
<li><a class="reference internal" href="#pprint">pprint</a></li>
<li><a class="reference internal" href="#pydoc">Pydoc</a></li>
<li><a class="reference internal" href="#random">aleatorio</a></li>
<li><a class="reference internal" href="#signal">señal</a></li>
<li><a class="reference internal" href="#smtplib">smtplib</a></li>
<li><a class="reference internal" href="#socket">enchufe</a></li>
<li><a class="reference internal" href="#time">tiempo</a></li>
<li><a class="reference internal" href="#sys">sys</a></li>
<li><a class="reference internal" href="#tracemalloc">tracemalloc</a></li>
<li><a class="reference internal" href="#typing">mecanografía</a></li>
<li><a class="reference internal" href="#unicodedata">unicodedata</a></li>
<li><a class="reference internal" href="#venv">venv</a></li>
<li><a class="reference internal" href="#xml">xml</a></li>
</ul>
</li>
<li><a class="reference internal" href="#optimizations">Optimizaciones</a></li>
<li><a class="reference internal" href="#deprecated">Obsoleto</a></li>
<li><a class="reference internal" href="#removed">Remoto</a></li>
<li><a class="reference internal" href="#porting-to-python-3-9">Portar a Python 3.9</a><ul>
<li><a class="reference internal" href="#changes-in-the-python-api">Cambios en la API de Python</a></li>
<li><a class="reference internal" href="#changes-in-the-c-api">Cambios en la API de C</a></li>
<li><a class="reference internal" href="#cpython-bytecode-changes">Cambios en el código de bytes de CPython</a></li>
</ul>
</li>
<li><a class="reference internal" href="#build-changes">Construir cambios</a></li>
<li><a class="reference internal" href="#c-api-changes">Cambios en la API de C</a><ul>
<li><a class="reference internal" href="#id1">Nuevas características</a></li>
<li><a class="reference internal" href="#id2">Portar a Python 3.9</a></li>
<li><a class="reference internal" href="#id3">Remoto</a></li>
</ul>
</li>
<li><a class="reference internal" href="#notable-changes-in-python-3-9-1">Cambios notables en Python 3.9.1</a><ul>
<li><a class="reference internal" href="#id4">mecanografía</a></li>
<li><a class="reference internal" href="#macos-11-0-big-sur-and-apple-silicon-mac-support">Compatibilidad con macOS 11.0 (Big Sur) y Apple Silicon Mac</a></li>
</ul>
</li>
<li><a class="reference internal" href="#notable-changes-in-python-3-9-2">Cambios notables en Python 3.9.2</a><ul>
<li><a class="reference internal" href="#collections-abc">colecciones.abc</a></li>
<li><a class="reference internal" href="#urllib-parse">urllib.parse</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Tema anterior</h4>
    <p class="topless"><a href="3.10.html"
                          title="capítulo anterior">Qué hay de nuevo en Python 3.10</a></p>
  </div>
  <div>
    <h4>Próximo tema</h4>
    <p class="topless"><a href="3.8.html"
                          title="próximo capítulo">Qué hay de nuevo en Python 3.8</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Reporta un bug</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/3.11/Doc/whatsnew/3.9.rst"
            rel="nofollow">Ver fuente
        </a>
      </li>
    </ul>
  </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice general"
             >índice</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Índice de Módulos Python"
             >módulos</a> |</li>
        <li class="right" >
          <a href="3.8.html" title="Qué hay de nuevo en Python 3.8"
             >siguiente</a> |</li>
        <li class="right" >
          <a href="3.10.html" title="Qué hay de nuevo en Python 3.10"
             >anterior</a> |</li>

          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.11.2 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" >Qué hay de nuevo en Python</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Qué hay de nuevo en Python 3.9</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Búsqueda rápida" aria-label="Búsqueda rápida" type="text" name="q" />
          <input type="submit" value="Ir" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
                     |
                </li>
            
      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="../copyright.html">Copyright</a> 2001-2023, Python Software Foundation.
    <br />
    This page is licensed under the Python Software Foundation License Version 2.
    <br />
    Examples, recipes, and other code in the documentation are additionally licensed under the Zero Clause BSD License.
    <br />
    See <a href="/license.html">History and License</a> for more information.<br />
    <br />

    La Python Software Foundation es una organización sin fines de lucro.
<a href="https://www.python.org/psf/donations/">Por favor, haga una donación.</a>
<br />
    <br />

    Última actualización el mar 23, 2023.
    <a href="/bugs.html">Found a bug</a>?
    <br />

    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.5.0.
    </div>

  </body>
</html>