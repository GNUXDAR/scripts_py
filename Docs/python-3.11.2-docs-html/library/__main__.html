
<!DOCTYPE html>

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<meta property="og:title" content="__main__ — Entorno de código de nivel máximo" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://docs.python.org/3/library/__main__.html" />
<meta property="og:site_name" content="Python documentation" />
<meta property="og:description" content="En Python, el nombre especial__main__ es utilizado para dos constructos importantes: el nombre del entorno de máximo nivel del programa, que puede ser verificado usando la expresión__name__=='__mai..." />
<meta property="og:image" content="https://docs.python.org/3/_static/og-image.png" />
<meta property="og:image:alt" content="Python documentation" />
<meta name="description" content="En Python, el nombre especial__main__ es utilizado para dos constructos importantes: el nombre del entorno de máximo nivel del programa, que puede ser verificado usando la expresión__name__=='__mai..." />
<meta property="og:image:width" content="200" />
<meta property="og:image:height" content="200" />
<meta name="theme-color" content="#3776ab" />

    <title>__main__ — Entorno de código de nivel máximo &#8212; documentación de Python - 3.11.2</title><meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/pydoctheme.css?digest=2d3badd06fe70b34b68db01f99471ce1624ffe4a" />
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/translations.js"></script>
    
    <script src="../_static/sidebar.js"></script>
    
    <link rel="search" type="application/opensearchdescription+xml"
          title="Buscar en documentación de Python - 3.11.2"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="Sobre este documento" href="../about.html" />
    <link rel="index" title="Índice" href="../genindex.html" />
    <link rel="search" title="Búsqueda" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="warnings — Control de advertencias" href="warnings.html" />
    <link rel="prev" title="builtins — Objetos incorporados" href="builtins.html" />
    <link rel="canonical" href="https://docs.python.org/3/library/__main__.html" />
    
      
    

    
    <style>
      @media only screen {
        table.full-width-table {
            width: 100%;
        }
      }
    </style>
<link rel="shortcut icon" type="image/png" href="../_static/py.svg" />
            <script type="text/javascript" src="../_static/copybutton.js"></script>
            <script type="text/javascript" src="../_static/menu.js"></script> 

  </head>
<body>
<div class="mobile-nav">
    <input type="checkbox" id="menuToggler" class="toggler__input" aria-controls="navigation"
           aria-pressed="false" aria-expanded="false" role="button" aria-label="Menu" />
    <label for="menuToggler" class="toggler__label">
        <span></span>
    </label>
    <nav class="nav-content" role="navigation">
         <a href="https://www.python.org/" class="nav-logo">
             <img src="../_static/py.svg" alt="Logo"/>
         </a>
        <div class="version_switcher_placeholder"></div>
        <form role="search" class="search" action="../search.html" method="get">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="search-icon">
                <path fill-rule="nonzero"
                        d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 001.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 00-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 005.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" fill="#444"></path>
            </svg>
            <input type="text" name="q" aria-label="Búsqueda rápida"/>
            <input type="submit" value="Ir"/>
        </form>
    </nav>
    <div class="menu-wrapper">
        <nav class="menu" role="navigation" aria-label="main navigation">
            <div class="language_switcher_placeholder"></div>
  <div>
    <h3><a href="../contents.html">Tabla de contenido</a></h3>
    <ul>
<li><a class="reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">__main__</span></code> — Entorno de código de nivel máximo</a><ul>
<li><a class="reference internal" href="#name-main"><code class="docutils literal notranslate"><span class="pre">__name__</span> <span class="pre">==</span> <span class="pre">'__main__'</span></code></a><ul>
<li><a class="reference internal" href="#what-is-the-top-level-code-environment">¿Qué es el «entorno de código de máximo nivel»?</a></li>
<li><a class="reference internal" href="#idiomatic-usage">Uso idiomático</a></li>
<li><a class="reference internal" href="#packaging-considerations">Consideraciones de empaquetado</a></li>
</ul>
</li>
<li><a class="reference internal" href="#main-py-in-python-packages"><code class="docutils literal notranslate"><span class="pre">__main__.py</span></code> en paquetes de Python</a><ul>
<li><a class="reference internal" href="#id1">Uso idiomático</a></li>
</ul>
</li>
<li><a class="reference internal" href="#import-main"><code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">__main__</span></code></a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Tema anterior</h4>
    <p class="topless"><a href="builtins.html"
                          title="capítulo anterior"><code class="xref py py-mod docutils literal notranslate"><span class="pre">builtins</span></code> — Objetos incorporados</a></p>
  </div>
  <div>
    <h4>Próximo tema</h4>
    <p class="topless"><a href="warnings.html"
                          title="próximo capítulo"><code class="xref py py-mod docutils literal notranslate"><span class="pre">warnings</span></code> — Control de advertencias</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Reporta un bug</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/3.11/Doc/library/__main__.rst"
            rel="nofollow">Ver fuente
        </a>
      </li>
    </ul>
  </div>
        </nav>
    </div>
</div>

  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice general"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Índice de Módulos Python"
             >módulos</a> |</li>
        <li class="right" >
          <a href="warnings.html" title="warnings — Control de advertencias"
             accesskey="N">siguiente</a> |</li>
        <li class="right" >
          <a href="builtins.html" title="builtins — Objetos incorporados"
             accesskey="P">anterior</a> |</li>

          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.11.2 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" >La biblioteca estándar de Python</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="python.html" accesskey="U">Servicios en tiempo de ejecución de Python</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><code class="xref py py-mod docutils literal notranslate"><span class="pre">__main__</span></code> — Entorno de código de nivel máximo</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Búsqueda rápida" aria-label="Búsqueda rápida" type="text" name="q" />
          <input type="submit" value="Ir" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
                     |
                </li>
            
      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="module-__main__">
<span id="main-top-level-code-environment"></span><h1><a class="reference internal" href="#module-__main__" title="__main__: The environment where top-level code is run. Covers command-line interfaces, import-time behavior, and ``__name__ == '__main__'``."><code class="xref py py-mod docutils literal notranslate"><span class="pre">__main__</span></code></a> — Entorno de código de nivel máximo<a class="headerlink" href="#module-__main__" title="Enlazar permanentemente con este título">¶</a></h1>
<hr class="docutils" />
<p>En Python, el nombre especial <code class="docutils literal notranslate"><span class="pre">__main__</span></code> es utilizado para dos constructos importantes:</p>
<ol class="arabic simple">
<li><p>el nombre del entorno de máximo nivel del programa, que puede ser verificado usando la expresión <code class="docutils literal notranslate"><span class="pre">__name__=='__main__'</span></code>; y</p></li>
<li><p>el archivo <code class="docutils literal notranslate"><span class="pre">__main__.py</span></code> en paquetes de Python.</p></li>
</ol>
<p>Ambos de estos mecanismos están relacionados con módulos de Python; como los usuarios interactúan con ellos y como ellos interactúan entre sí.  Están explicados en detalle más abajo.  Si estás empezando con los módulos de Python, mira la sección tutorial <a class="reference internal" href="../tutorial/modules.html#tut-modules"><span class="std std-ref">Módulos</span></a> para una introducción.</p>
<section id="name-main">
<span id="name-equals-main"></span><h2><code class="docutils literal notranslate"><span class="pre">__name__</span> <span class="pre">==</span> <span class="pre">'__main__'</span></code><a class="headerlink" href="#name-main" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Cuando un módulo o paquete de Python es importado, <code class="docutils literal notranslate"><span class="pre">__name__</span></code> es asignado al nombre del módulo.  Normalmente, este es el nombre del archivo de Python sin la extensión <code class="docutils literal notranslate"><span class="pre">.py</span></code>:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">configparser</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">configparser</span><span class="o">.</span><span class="vm">__name__</span>
<span class="go">&#39;configparser&#39;</span>
</pre></div>
</div>
<p>Si el archivo es parte de un paquete, <code class="docutils literal notranslate"><span class="pre">__name__</span></code> también incluirá la ruta del paquete padre:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">concurrent.futures</span> <span class="kn">import</span> <span class="n">process</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">process</span><span class="o">.</span><span class="vm">__name__</span>
<span class="go">&#39;concurrent.futures.process&#39;</span>
</pre></div>
</div>
<p>Sin embargo, si el módulo es ejecutado en el entorno de código de máximo nivel, su <code class="docutils literal notranslate"><span class="pre">__name__</span></code> se le asigna el valor del string <code class="docutils literal notranslate"><span class="pre">'__main__'</span></code>.</p>
<section id="what-is-the-top-level-code-environment">
<h3>¿Qué es el «entorno de código de máximo nivel»?<a class="headerlink" href="#what-is-the-top-level-code-environment" title="Enlazar permanentemente con este título">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">__main__</span></code> es el nombre del entorno en el cual se ejecuta el código de máximo nivel. «Código de máximo nivel» es el primer módulo de Python especificado por el usuario que empieza a ejecutarse. Es «de máximo nivel» porque importa todos los demás módulos que necesita el programa. A veces «código de máximo nivel» es llamado un <em>punto de entrada</em> a la aplicación.</p>
<p>El entorno de código de máximo nivel puede ser:</p>
<ul>
<li><p>el ámbito de un intérprete interactivo:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="vm">__name__</span>
<span class="go">&#39;__main__&#39;</span>
</pre></div>
</div>
</li>
<li><p>el módulo de Python pasado al intérprete de Python como un argumento de archivo:</p>
<blockquote>
<div><div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python3 helloworld.py
<span class="go">Hello, world!</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>el módulo o paquete de Python pasado al interprete de Python con el argumento <a class="reference internal" href="../using/cmdline.html#cmdoption-m"><code class="xref std std-option docutils literal notranslate"><span class="pre">-m</span></code></a>:</p>
<blockquote>
<div><div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python3 -m tarfile
<span class="go">usage: tarfile.py [-h] [-v] (...)</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Código de Python leído por el interprete desde input estándar:</p>
<blockquote>
<div><div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">echo</span> <span class="s2">&quot;import this&quot;</span> <span class="p">|</span> python3
<span class="go">The Zen of Python, by Tim Peters</span>

<span class="go">Beautiful is better than ugly.</span>
<span class="go">Explicit is better than implicit.</span>
<span class="go">...</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Código de Python pasado al intérprete Python con el argumento <a class="reference internal" href="../using/cmdline.html#cmdoption-c"><code class="xref std std-option docutils literal notranslate"><span class="pre">-c</span></code></a>:</p>
<blockquote>
<div><div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python3 -c <span class="s2">&quot;import this&quot;</span>
<span class="go">The Zen of Python, by Tim Peters</span>

<span class="go">Beautiful is better than ugly.</span>
<span class="go">Explicit is better than implicit.</span>
<span class="go">...</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<p>En cada una de estas situaciones, al <code class="docutils literal notranslate"><span class="pre">__name__</span></code> del módulo de máximo nivel se le asigna el valor <code class="docutils literal notranslate"><span class="pre">'__main__'</span></code>.</p>
<p>En consecuencia, un módulo puede descubrir si se está ejecutando o no en el ámbito principal al verificar su propio <code class="docutils literal notranslate"><span class="pre">__name__</span></code>, lo cual permite un vocablo común para ejecutar código condicionalmente cuando el módulo no es inicializado desde una declaración de importado:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="c1"># Execute when the module is not initialized from an import statement.</span>
    <span class="o">...</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<p>Para una vista más detallada de como <code class="docutils literal notranslate"><span class="pre">__name__</span></code> es asignado en todas las situaciones, ver la sección tutorial <a class="reference internal" href="../tutorial/modules.html#tut-modules"><span class="std std-ref">Módulos</span></a>.</p>
</div>
</section>
<section id="idiomatic-usage">
<h3>Uso idiomático<a class="headerlink" href="#idiomatic-usage" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Some modules contain code that is intended for script use only, like parsing
command-line arguments or fetching data from standard input.  If a module
like this was imported from a different module, for example to unit test
it, the script code would unintentionally execute as well.</p>
<p>Aquí es donde es útil usar el código de bloque <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">__name__=='__main__'</span></code>. El código dentro desde bloque no se ejecutará a menos que el módulo se ejecute en el entorno de máximo nivel.</p>
<p>Poner cuantas menos declaraciones posible en el bloque debajo de <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">__name__=='__main__'</span></code> puede mejorar la claridad y validez del código. Mas a menudo, la función llamada <code class="docutils literal notranslate"><span class="pre">main</span></code> encapsula el comportamiento principal del programa:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># echo.py</span>

<span class="kn">import</span> <span class="nn">shlex</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="k">def</span> <span class="nf">echo</span><span class="p">(</span><span class="n">phrase</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
   <span class="sd">&quot;&quot;&quot;A dummy wrapper around print.&quot;&quot;&quot;</span>
   <span class="c1"># for demonstration purposes, you can imagine that there is some</span>
   <span class="c1"># valuable and reusable logic inside this function</span>
   <span class="nb">print</span><span class="p">(</span><span class="n">phrase</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Echo the input arguments to standard output&quot;&quot;&quot;</span>
    <span class="n">phrase</span> <span class="o">=</span> <span class="n">shlex</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
    <span class="n">echo</span><span class="p">(</span><span class="n">phrase</span><span class="p">)</span>
    <span class="k">return</span> <span class="mi">0</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>  <span class="c1"># next section explains the use of sys.exit</span>
</pre></div>
</div>
<p>Note que si el módulo no encapsulase el código dentro de la función <code class="docutils literal notranslate"><span class="pre">main</span></code> pero en vez lo pusiese directo dentro del bloque  <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">__name__=='__main__'</span></code>, la variable <code class="docutils literal notranslate"><span class="pre">phrase</span></code> sería global al módulo entero.  Esto está propenso a generar errores ya que otras funciones dentro del módulo pudiesen estar usando involuntariamente la variable global en lugar de un nombre local.  Una función <code class="docutils literal notranslate"><span class="pre">main</span></code> resuelve este problema.</p>
<p>Usar una función <code class="docutils literal notranslate"><span class="pre">main</span></code> tiene el beneficio añadido de que la función <code class="docutils literal notranslate"><span class="pre">echo</span></code> está aislada y es importable en otros sitios. Cuando <code class="docutils literal notranslate"><span class="pre">echo.py</span></code> es importado, las funciones <code class="docutils literal notranslate"><span class="pre">echo</span></code> y <code class="docutils literal notranslate"><span class="pre">main</span></code> serán definidas, pero ninguna de ellas será llamada porque <code class="docutils literal notranslate"><span class="pre">__name!='__main__'</span></code>.</p>
</section>
<section id="packaging-considerations">
<h3>Consideraciones de empaquetado<a class="headerlink" href="#packaging-considerations" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Las funciones <code class="docutils literal notranslate"><span class="pre">main</span></code> se utilizan a menudo para crear líneas de comando al especificarlas como puntos de entrada para scripts de terminal.  Cuando esto se hace, <a class="reference external" href="https://pip.pypa.io/">pip</a> inserta la llamada de la función a un script plantilla, donde el valor retornado de <code class="docutils literal notranslate"><span class="pre">main</span></code> se pasa a <a class="reference internal" href="sys.html#sys.exit" title="sys.exit"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.exit()</span></code></a>. Por ejemplo:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</pre></div>
</div>
<p>Dado que la llamada a <code class="docutils literal notranslate"><span class="pre">main</span></code> está dentro de <a class="reference internal" href="sys.html#sys.exit" title="sys.exit"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.exit()</span></code></a>, la expectativa es que tu función devolverá un valor aceptable como una entrada a <a class="reference internal" href="sys.html#sys.exit" title="sys.exit"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.exit()</span></code></a>; típicamente, un int o <code class="docutils literal notranslate"><span class="pre">None</span></code> (que se retorna implícitamente si tu función no tiene una declaración de retorno).</p>
<p>Al seguir pro-activamente esta convención nosotros mismo, nuestro módulo tendrá el mismo comportamiento cuando se ejecuta directamente (es decir, <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">echo.py</span></code>) que si luego lo empaquetamos como un punto de entrada de script de terminal en un paquete instalable mediante pip.</p>
<p>En particular, ten cuidado al devolver cadenas de texto con tu función <code class="docutils literal notranslate"><span class="pre">main</span></code>. <a class="reference internal" href="sys.html#sys.exit" title="sys.exit"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.exit()</span></code></a> interpretará un argumento de cadena de texto como un mensaje de fallo, entonces tu programa tendrá un código de salida de <code class="docutils literal notranslate"><span class="pre">1</span></code>, indicando fallo, y la cadena de texto será escrita a <a class="reference internal" href="sys.html#sys.stderr" title="sys.stderr"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.stderr</span></code></a>.  El ejemplo <code class="docutils literal notranslate"><span class="pre">echo.py</span></code> de antes muestra como usar la convención <code class="docutils literal notranslate"><span class="pre">sys.exit(main())</span></code>.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<p><a class="reference external" href="https://packaging.python.org/">Python Packaging User Guide</a> contiene una colección de tutoriales y referencias sobre como distribuir e instalar paquetes de Python con herramientas modernas.</p>
</div>
</section>
</section>
<section id="main-py-in-python-packages">
<h2><code class="docutils literal notranslate"><span class="pre">__main__.py</span></code> en paquetes de Python<a class="headerlink" href="#main-py-in-python-packages" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Si no estás familiarizado con paquetes de Python, ver la sección <a class="reference internal" href="../tutorial/modules.html#tut-packages"><span class="std std-ref">Paquetes</span></a> del tutorial.  Comúnmente, el archivo <code class="docutils literal notranslate"><span class="pre">__main__.py</span></code> es utilizado para proveer una interfaz de línea de comando para un paquete. Considera el siguiente paquete hipotético, «<em>bandclass</em>»:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>bandclass
  ├── __init__.py
  ├── __main__.py
  └── student.py
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">__main__.py</span></code> será ejecutado cuando el paquete sea invocado directamente desde la línea de comandos usando el indicador <a class="reference internal" href="../using/cmdline.html#cmdoption-m"><code class="xref std std-option docutils literal notranslate"><span class="pre">-m</span></code></a>. Por ejemplo:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python3 -m bandclass
</pre></div>
</div>
<p>Este comando causará que <code class="docutils literal notranslate"><span class="pre">__main__.py</span></code> se ejecute. El como se use este mecanismo dependerá de la naturaleza del paquete que estás escribiendo, pero en este caso hipotético, puede tener sentido permitir que el profesor busque estudiantes:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># bandclass/__main__.py</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">.student</span> <span class="kn">import</span> <span class="n">search_students</span>

<span class="n">student_name</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Found student: </span><span class="si">{</span><span class="n">search_students</span><span class="p">(</span><span class="n">student_name</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">.student</span> <span class="pre">import</span> <span class="pre">search_students</span></code> is an example of a relative
import.  This import style can be used when referencing modules within a
package.  For more details, see <a class="reference internal" href="../tutorial/modules.html#intra-package-references"><span class="std std-ref">Referencias internas en paquetes</span></a> in the
<a class="reference internal" href="../tutorial/modules.html#tut-modules"><span class="std std-ref">Módulos</span></a> section of the tutorial.</p>
<section id="id1">
<h3>Uso idiomático<a class="headerlink" href="#id1" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Los contenidos de <code class="docutils literal notranslate"><span class="pre">__main__.py</span></code> no están típicamente acotados dentro de bloques <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">__name__=='__main__'</span></code>.  En cambio, esos archivos se mantienen cortos, funciones para ejecutar desde otros módulos.  A esos otros módulos se les puede fácilmente realizar pruebas unitarias y son apropiadamente re-utilizables.</p>
<p>Si se usa, un bloque <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">__name__=='__main__'</span></code> seguirá funcionando como se espera para un archivo <code class="docutils literal notranslate"><span class="pre">__main__.py</span></code> dentro de un paquete, porque su atributo <code class="docutils literal notranslate"><span class="pre">__name__</span></code> incluirá la ruta del paquete si es importado:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">asyncio.__main__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">asyncio</span><span class="o">.</span><span class="n">__main__</span><span class="o">.</span><span class="vm">__name__</span>
<span class="go">&#39;asyncio.__main__&#39;</span>
</pre></div>
</div>
<p>This won’t work for <code class="docutils literal notranslate"><span class="pre">__main__.py</span></code> files in the root directory of a .zip file
though.  Hence, for consistency, minimal <code class="docutils literal notranslate"><span class="pre">__main__.py</span></code> like the <a class="reference internal" href="venv.html#module-venv" title="venv: Creation of virtual environments."><code class="xref py py-mod docutils literal notranslate"><span class="pre">venv</span></code></a>
one mentioned below are preferred.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<p>See <a class="reference internal" href="venv.html#module-venv" title="venv: Creation of virtual environments."><code class="xref py py-mod docutils literal notranslate"><span class="pre">venv</span></code></a> for an example of a package with a minimal <code class="docutils literal notranslate"><span class="pre">__main__.py</span></code>
in the standard library. It doesn’t contain a <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">__name__</span> <span class="pre">==</span> <span class="pre">'__main__'</span></code>
block. You can invoke it with <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">venv</span> <span class="pre">[directory]</span></code>.</p>
<p>Ver <a class="reference internal" href="runpy.html#module-runpy" title="runpy: Locate and run Python modules without importing them first."><code class="xref py py-mod docutils literal notranslate"><span class="pre">runpy</span></code></a> para más detalles sobre el indicador <a class="reference internal" href="../using/cmdline.html#cmdoption-m"><code class="xref std std-option docutils literal notranslate"><span class="pre">-m</span></code></a> para el interprete ejecutable.</p>
<p>Ver <a class="reference internal" href="zipapp.html#module-zipapp" title="zipapp: Manage executable Python zip archives"><code class="xref py py-mod docutils literal notranslate"><span class="pre">zipapp</span></code></a> para más información sobre como ejecutar aplicaciones empaquetadas como archivos <em>.zip</em>. En este caso Python busca un archivo <code class="docutils literal notranslate"><span class="pre">__main__.py</span></code> en el directorio raíz del archivo comprimido.</p>
</div>
</section>
</section>
<section id="import-main">
<h2><code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">__main__</span></code><a class="headerlink" href="#import-main" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Independientemente de con cual módulo se ha iniciado un programa de Python, otros módulos que están siendo ejecutados dentro del mismo programa pueden importar el ámbito del entorno de máximo nivel (<a class="reference internal" href="../glossary.html#term-namespace"><span class="xref std std-term">namespace</span></a>) al importar el módulo <code class="docutils literal notranslate"><span class="pre">__main__</span></code>.  Esto no importa un archivo <code class="docutils literal notranslate"><span class="pre">__main__.py</span></code> pero en su lugar cualquier módulo que recibió el nombre especial <code class="docutils literal notranslate"><span class="pre">'__main__'</span></code>.</p>
<p>Acá hay un módulo ejemplo que consume el nombre de espacio <code class="docutils literal notranslate"><span class="pre">__main__</span></code>:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># namely.py</span>

<span class="kn">import</span> <span class="nn">__main__</span>

<span class="k">def</span> <span class="nf">did_user_define_their_name</span><span class="p">():</span>
    <span class="k">return</span> <span class="s1">&#39;my_name&#39;</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">__main__</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">print_user_name</span><span class="p">():</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">did_user_define_their_name</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Define the variable `my_name`!&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="s1">&#39;__file__&#39;</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">__main__</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">__main__</span><span class="o">.</span><span class="n">my_name</span><span class="p">,</span> <span class="s2">&quot;found in file&quot;</span><span class="p">,</span> <span class="n">__main__</span><span class="o">.</span><span class="vm">__file__</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">__main__</span><span class="o">.</span><span class="n">my_name</span><span class="p">)</span>
</pre></div>
</div>
<p>Ejemplo del uso de este módulo puede ser:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># start.py</span>

<span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">from</span> <span class="nn">namely</span> <span class="kn">import</span> <span class="n">print_user_name</span>

<span class="c1"># my_name = &quot;Dinsdale&quot;</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">print_user_name</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">ve</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</pre></div>
</div>
<p>Si ahora iniciamos nuestro programa el resultado sería así:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python3 start.py
<span class="go">Define the variable `my_name`!</span>
</pre></div>
</div>
<p>El código de salida del programa sería 1, indicando un error. Des-comentando la línea con <code class="docutils literal notranslate"><span class="pre">my_name</span> <span class="pre">=</span> <span class="pre">&quot;Dinsdale&quot;</span></code> arregla el programa y ahora sale con un código de estado 0, indicando éxito:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python3 start.py
<span class="go">Dinsdale found in file /path/to/start.py</span>
</pre></div>
</div>
<p>Note que importar <code class="docutils literal notranslate"><span class="pre">__main__</span></code> no causa ningún problema de involuntariamente ejecutar código de máximo nivel que ha sido pensado para uso por scripts que es puesto en el bloque <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">__name__==&quot;__main__&quot;</span></code> del módulo <code class="docutils literal notranslate"><span class="pre">start</span></code>. ¿Por qué funciona esto?</p>
<p>Python inserta un módulo <code class="docutils literal notranslate"><span class="pre">__main__</span></code> vacío en <a class="reference internal" href="sys.html#sys.modules" title="sys.modules"><code class="xref py py-attr docutils literal notranslate"><span class="pre">sys.modules</span></code></a> al inicio del intérprete, y lo puebla ejecutando código de máximo nivel. En nuestro ejemplo este es el módulo <code class="docutils literal notranslate"><span class="pre">start</span></code> que corre línea a línea e importa <code class="docutils literal notranslate"><span class="pre">namely</span></code>. A su vez, <code class="docutils literal notranslate"><span class="pre">namely</span></code> importa <code class="docutils literal notranslate"><span class="pre">__main__</span></code> (que es en verdad <code class="docutils literal notranslate"><span class="pre">start</span></code>). ¡Es un ciclo de importado! Afortunadamente, como el módulo parcialmente poblado <code class="docutils literal notranslate"><span class="pre">__main__</span></code> está presente en <a class="reference internal" href="sys.html#sys.modules" title="sys.modules"><code class="xref py py-attr docutils literal notranslate"><span class="pre">sys.modules</span></code></a>, Python pasa eso a <code class="docutils literal notranslate"><span class="pre">namely</span></code>. Ver <a class="reference internal" href="../reference/import.html#import-dunder-main"><span class="std std-ref">Special considerations for __main__</span></a> en la referencia del sistema para información detallada de como funciona.</p>
<p>El REPL Python es otro ejemplo de un «entorno de máximo nivel», por lo tanto, cualquier cosa definida en el REPL se hace parte del ámbito <code class="docutils literal notranslate"><span class="pre">__main__</span></code>:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">namely</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">namely</span><span class="o">.</span><span class="n">did_user_define_their_name</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">namely</span><span class="o">.</span><span class="n">print_user_name</span><span class="p">()</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">Define the variable `my_name`!</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_name</span> <span class="o">=</span> <span class="s1">&#39;Jabberwocky&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">namely</span><span class="o">.</span><span class="n">did_user_define_their_name</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">namely</span><span class="o">.</span><span class="n">print_user_name</span><span class="p">()</span>
<span class="go">Jabberwocky</span>
</pre></div>
</div>
<p>Note que en este caso el ámbito <code class="docutils literal notranslate"><span class="pre">__main__</span></code> no contiene un atributo <code class="docutils literal notranslate"><span class="pre">__file__</span></code> ya que es interactivo.</p>
<p>El ámbito <code class="docutils literal notranslate"><span class="pre">__main__</span></code> es utilizado en la implementación de <a class="reference internal" href="pdb.html#module-pdb" title="pdb: The Python debugger for interactive interpreters."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pdb</span></code></a> y <a class="reference internal" href="rlcompleter.html#module-rlcompleter" title="rlcompleter: Python identifier completion, suitable for the GNU readline library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">rlcompleter</span></code></a>.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../contents.html">Tabla de contenido</a></h3>
    <ul>
<li><a class="reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">__main__</span></code> — Entorno de código de nivel máximo</a><ul>
<li><a class="reference internal" href="#name-main"><code class="docutils literal notranslate"><span class="pre">__name__</span> <span class="pre">==</span> <span class="pre">'__main__'</span></code></a><ul>
<li><a class="reference internal" href="#what-is-the-top-level-code-environment">¿Qué es el «entorno de código de máximo nivel»?</a></li>
<li><a class="reference internal" href="#idiomatic-usage">Uso idiomático</a></li>
<li><a class="reference internal" href="#packaging-considerations">Consideraciones de empaquetado</a></li>
</ul>
</li>
<li><a class="reference internal" href="#main-py-in-python-packages"><code class="docutils literal notranslate"><span class="pre">__main__.py</span></code> en paquetes de Python</a><ul>
<li><a class="reference internal" href="#id1">Uso idiomático</a></li>
</ul>
</li>
<li><a class="reference internal" href="#import-main"><code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">__main__</span></code></a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Tema anterior</h4>
    <p class="topless"><a href="builtins.html"
                          title="capítulo anterior"><code class="xref py py-mod docutils literal notranslate"><span class="pre">builtins</span></code> — Objetos incorporados</a></p>
  </div>
  <div>
    <h4>Próximo tema</h4>
    <p class="topless"><a href="warnings.html"
                          title="próximo capítulo"><code class="xref py py-mod docutils literal notranslate"><span class="pre">warnings</span></code> — Control de advertencias</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Reporta un bug</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/3.11/Doc/library/__main__.rst"
            rel="nofollow">Ver fuente
        </a>
      </li>
    </ul>
  </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice general"
             >índice</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Índice de Módulos Python"
             >módulos</a> |</li>
        <li class="right" >
          <a href="warnings.html" title="warnings — Control de advertencias"
             >siguiente</a> |</li>
        <li class="right" >
          <a href="builtins.html" title="builtins — Objetos incorporados"
             >anterior</a> |</li>

          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.11.2 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" >La biblioteca estándar de Python</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="python.html" >Servicios en tiempo de ejecución de Python</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><code class="xref py py-mod docutils literal notranslate"><span class="pre">__main__</span></code> — Entorno de código de nivel máximo</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Búsqueda rápida" aria-label="Búsqueda rápida" type="text" name="q" />
          <input type="submit" value="Ir" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
                     |
                </li>
            
      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="../copyright.html">Copyright</a> 2001-2023, Python Software Foundation.
    <br />
    This page is licensed under the Python Software Foundation License Version 2.
    <br />
    Examples, recipes, and other code in the documentation are additionally licensed under the Zero Clause BSD License.
    <br />
    See <a href="/license.html">History and License</a> for more information.<br />
    <br />

    La Python Software Foundation es una organización sin fines de lucro.
<a href="https://www.python.org/psf/donations/">Por favor, haga una donación.</a>
<br />
    <br />

    Última actualización el mar 23, 2023.
    <a href="/bugs.html">Found a bug</a>?
    <br />

    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.5.0.
    </div>

  </body>
</html>