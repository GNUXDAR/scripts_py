
<!DOCTYPE html>

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>doctest – Prueba ejemplos interactivos de Python &#8212; documentación de Python - 3.10.10</title><meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pydoctheme.css?2022.1" type="text/css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/translations.js"></script>
    
    <script src="../_static/sidebar.js"></script>
    
    <link rel="search" type="application/opensearchdescription+xml"
          title="Buscar en documentación de Python - 3.10.10"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="Sobre este documento" href="../about.html" />
    <link rel="index" title="Índice" href="../genindex.html" />
    <link rel="search" title="Búsqueda" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="unittest — Infraestructura de tests unitarios" href="unittest.html" />
    <link rel="prev" title="Modo de desarrollo de Python" href="devmode.html" />
    <link rel="canonical" href="https://docs.python.org/3/library/doctest.html" />
    
      
    

    
    <style>
      @media only screen {
        table.full-width-table {
            width: 100%;
        }
      }
    </style>
<link rel="shortcut icon" type="image/png" href="../_static/py.svg" />
            <script type="text/javascript" src="../_static/copybutton.js"></script>
            <script type="text/javascript" src="../_static/menu.js"></script> 

  </head>
<body>
<div class="mobile-nav">
    <input type="checkbox" id="menuToggler" class="toggler__input" aria-controls="navigation"
           aria-pressed="false" aria-expanded="false" role="button" aria-label="Menu" />
    <label for="menuToggler" class="toggler__label">
        <span></span>
    </label>
    <nav class="nav-content" role="navigation">
         <a href="https://www.python.org/" class="nav-logo">
             <img src="../_static/py.svg" alt="Logo"/>
         </a>
        <div class="version_switcher_placeholder"></div>
        <form role="search" class="search" action="../search.html" method="get">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="search-icon">
                <path fill-rule="nonzero"
                        d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 001.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 00-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 005.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" fill="#444"></path>
            </svg>
            <input type="text" name="q" aria-label="Búsqueda rápida"/>
            <input type="submit" value="Ir"/>
        </form>
    </nav>
    <div class="menu-wrapper">
        <nav class="menu" role="navigation" aria-label="main navigation">
            <div class="language_switcher_placeholder"></div>
  <h3><a href="../contents.html">Tabla de contenido</a></h3>
  <ul>
<li><a class="reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">doctest</span></code> – Prueba ejemplos interactivos de Python</a><ul>
<li><a class="reference internal" href="#simple-usage-checking-examples-in-docstrings">Uso simple: verificar ejemplos en docstrings</a></li>
<li><a class="reference internal" href="#simple-usage-checking-examples-in-a-text-file">Uso Simple: Verificar ejemplos en un Archivo de Texto</a></li>
<li><a class="reference internal" href="#how-it-works">Cómo funciona</a><ul>
<li><a class="reference internal" href="#which-docstrings-are-examined">¿Qué docstrings son examinados?</a></li>
<li><a class="reference internal" href="#how-are-docstring-examples-recognized">¿Cómo se reconocen los ejemplos de docstring?</a></li>
<li><a class="reference internal" href="#what-s-the-execution-context">¿Cuál es el contexto de ejecución?</a></li>
<li><a class="reference internal" href="#what-about-exceptions">¿Y las excepciones?</a></li>
<li><a class="reference internal" href="#option-flags">Banderas de Opción</a></li>
<li><a class="reference internal" href="#directives">Directivas</a></li>
<li><a class="reference internal" href="#warnings">Advertencias</a></li>
</ul>
</li>
<li><a class="reference internal" href="#basic-api">API básica</a></li>
<li><a class="reference internal" href="#unittest-api">API de unittest</a></li>
<li><a class="reference internal" href="#advanced-api">API avanzada</a><ul>
<li><a class="reference internal" href="#doctest-objects">Objetos DocTest</a></li>
<li><a class="reference internal" href="#example-objects">Objetos <em>Example</em></a></li>
<li><a class="reference internal" href="#doctestfinder-objects">Objetos <em>DocTestFinder</em></a></li>
<li><a class="reference internal" href="#doctestparser-objects">Objetos <em>DocTestParser</em></a></li>
<li><a class="reference internal" href="#doctestrunner-objects">Objetos <em>DocTestRunner</em></a></li>
<li><a class="reference internal" href="#outputchecker-objects">Objetos <em>OutputChecker</em></a></li>
</ul>
</li>
<li><a class="reference internal" href="#debugging">Depuración</a></li>
<li><a class="reference internal" href="#soapbox">Plataforma improvisada</a></li>
</ul>
</li>
</ul>

  <h4>Tema anterior</h4>
  <p class="topless"><a href="devmode.html"
                        title="capítulo anterior">Modo de desarrollo de Python</a></p>
  <h4>Próximo tema</h4>
  <p class="topless"><a href="unittest.html"
                        title="próximo capítulo"><code class="xref py py-mod docutils literal notranslate"><span class="pre">unittest</span></code> — Infraestructura de tests unitarios</a></p>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Reporta un Bug</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/3.10/Doc/library/doctest.rst"
            rel="nofollow">Ver Fuente
        </a>
      </li>
    </ul>
  </div>
        </nav>
    </div>
</div>

  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice general"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Índice de Módulos Python"
             >módulos</a> |</li>
        <li class="right" >
          <a href="unittest.html" title="unittest — Infraestructura de tests unitarios"
             accesskey="N">siguiente</a> |</li>
        <li class="right" >
          <a href="devmode.html" title="Modo de desarrollo de Python"
             accesskey="P">anterior</a> |</li>

          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.10.10 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" >La Biblioteca Estándar de Python</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="development.html" accesskey="U">Herramientas de desarrollo</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><code class="xref py py-mod docutils literal notranslate"><span class="pre">doctest</span></code> – Prueba ejemplos interactivos de Python</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Búsqueda rápida" aria-label="Búsqueda rápida" type="text" name="q" />
          <input type="submit" value="Ir" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
                     |
                </li>
            
      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="module-doctest">
<span id="doctest-test-interactive-python-examples"></span><h1><a class="reference internal" href="#module-doctest" title="doctest: Test pieces of code within docstrings."><code class="xref py py-mod docutils literal notranslate"><span class="pre">doctest</span></code></a> – Prueba ejemplos interactivos de Python<a class="headerlink" href="#module-doctest" title="Enlazar permanentemente con este título">¶</a></h1>
<p><strong>Código fuente:</strong> <a class="reference external" href="https://github.com/python/cpython/tree/3.10/Lib/doctest.py">Lib/doctest.py</a></p>
<hr class="docutils" />
<p>El módulo <a class="reference internal" href="#module-doctest" title="doctest: Test pieces of code within docstrings."><code class="xref py py-mod docutils literal notranslate"><span class="pre">doctest</span></code></a> busca pedazos de texto que lucen como sesiones interactivas de Python, y entonces ejecuta esas sesiones para verificar que funcionen exactamente como son mostradas. Hay varias maneras de usar doctest:</p>
<ul class="simple">
<li><p>Para revisar que los docstrings de un módulo están al día al verificar que todos los ejemplos interactivos todavía trabajan como está documentado.</p></li>
<li><p>Para realizar pruebas de regresión al verificar que los ejemplos interactivos de un archivo de pruebas o un objeto de pruebas trabaje como sea esperado.</p></li>
<li><p>Para escribir documentación de tutorial para un paquete, generosamente ilustrado con ejemplos de entrada-salida. Dependiendo si los ejemplos o el texto expositivo son enfatizados, tiene el sabor de «pruebas literarias» o «documentación ejecutable».</p></li>
</ul>
<p>Aquí hay un módulo de ejemplo completo pero pequeño:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">This is the &quot;example&quot; module.</span>

<span class="sd">The example module supplies one function, factorial().  For example,</span>

<span class="sd">&gt;&gt;&gt; factorial(5)</span>
<span class="sd">120</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="k">def</span> <span class="nf">factorial</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the factorial of n, an exact integer &gt;= 0.</span>

<span class="sd">    &gt;&gt;&gt; [factorial(n) for n in range(6)]</span>
<span class="sd">    [1, 1, 2, 6, 24, 120]</span>
<span class="sd">    &gt;&gt;&gt; factorial(30)</span>
<span class="sd">    265252859812191058636308480000000</span>
<span class="sd">    &gt;&gt;&gt; factorial(-1)</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">        ...</span>
<span class="sd">    ValueError: n must be &gt;= 0</span>

<span class="sd">    Factorials of floats are OK, but the float must be an exact integer:</span>
<span class="sd">    &gt;&gt;&gt; factorial(30.1)</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">        ...</span>
<span class="sd">    ValueError: n must be exact integer</span>
<span class="sd">    &gt;&gt;&gt; factorial(30.0)</span>
<span class="sd">    265252859812191058636308480000000</span>

<span class="sd">    It must also not be ridiculously large:</span>
<span class="sd">    &gt;&gt;&gt; factorial(1e100)</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">        ...</span>
<span class="sd">    OverflowError: n too large</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="kn">import</span> <span class="nn">math</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">n</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;n must be &gt;= 0&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">!=</span> <span class="n">n</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;n must be exact integer&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">n</span><span class="o">+</span><span class="mi">1</span> <span class="o">==</span> <span class="n">n</span><span class="p">:</span>  <span class="c1"># catch a value like 1e300</span>
        <span class="k">raise</span> <span class="ne">OverflowError</span><span class="p">(</span><span class="s2">&quot;n too large&quot;</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">factor</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="k">while</span> <span class="n">factor</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">*=</span> <span class="n">factor</span>
        <span class="n">factor</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">result</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">doctest</span>
    <span class="n">doctest</span><span class="o">.</span><span class="n">testmod</span><span class="p">()</span>
</pre></div>
</div>
<p>Si tu ejecutas <code class="file docutils literal notranslate"><span class="pre">example.py</span></code> directamente desde la línea de comandos, <a class="reference internal" href="#module-doctest" title="doctest: Test pieces of code within docstrings."><code class="xref py py-mod docutils literal notranslate"><span class="pre">doctest</span></code></a> hará su magia:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python example.py
<span class="gp">$</span>
</pre></div>
</div>
<p>¡No hay salida! Eso es normal, y significa que todos los ejemplos funcionaron. Pasa <code class="docutils literal notranslate"><span class="pre">-v</span></code> al script, y <a class="reference internal" href="#module-doctest" title="doctest: Test pieces of code within docstrings."><code class="xref py py-mod docutils literal notranslate"><span class="pre">doctest</span></code></a> imprime un registro detallado de lo que está intentando, e imprime un resumen al final:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python example.py -v
<span class="go">Trying:</span>
<span class="go">    factorial(5)</span>
<span class="go">Expecting:</span>
<span class="go">    120</span>
<span class="go">ok</span>
<span class="go">Trying:</span>
<span class="go">    [factorial(n) for n in range(6)]</span>
<span class="go">Expecting:</span>
<span class="go">    [1, 1, 2, 6, 24, 120]</span>
<span class="go">ok</span>
</pre></div>
</div>
<p>Y demás, eventualmente terminando con:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Trying:
    factorial(1e100)
Expecting:
    Traceback (most recent call last):
        ...
    OverflowError: n too large
ok
2 items passed all tests:
   1 tests in __main__
   8 tests in __main__.factorial
9 tests in 2 items.
9 passed and 0 failed.
Test passed.
$
</pre></div>
</div>
<p>¡Eso es todo lo que necesitas saber para empezar a hacer uso productivo de <a class="reference internal" href="#module-doctest" title="doctest: Test pieces of code within docstrings."><code class="xref py py-mod docutils literal notranslate"><span class="pre">doctest</span></code></a>! Lánzate. Las siguientes secciones proporcionan detalles completos. Note que hay muchos ejemplos de doctests en el conjunto de pruebas estándar de Python y bibliotecas. Especialmente ejemplos útiles se pueden encontrar en el archivo de pruebas estándar <code class="file docutils literal notranslate"><span class="pre">Lib/test/test_doctest.py</span></code>.</p>
<section id="simple-usage-checking-examples-in-docstrings">
<span id="doctest-simple-testmod"></span><h2>Uso simple: verificar ejemplos en docstrings<a class="headerlink" href="#simple-usage-checking-examples-in-docstrings" title="Enlazar permanentemente con este título">¶</a></h2>
<p>La forma más simple para empezar a usar doctest (pero no necesariamente la forma que continuarás usándolo) es terminar cada módulo <code class="xref py py-mod docutils literal notranslate"><span class="pre">M</span></code> con:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">doctest</span>
    <span class="n">doctest</span><span class="o">.</span><span class="n">testmod</span><span class="p">()</span>
</pre></div>
</div>
<p><a class="reference internal" href="#module-doctest" title="doctest: Test pieces of code within docstrings."><code class="xref py py-mod docutils literal notranslate"><span class="pre">doctest</span></code></a> entonces examina docstrings en el módulo <code class="xref py py-mod docutils literal notranslate"><span class="pre">M</span></code>.</p>
<p>Ejecutar el módulo como un script causa que los ejemplos en los docstrings se ejecuten y verifiquen:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">M</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>No mostrará nada a menos que un ejemplo falle, en cuyo caso el ejemplo fallido o ejemplos fallidos y sus causas de la falla son imprimidas a stdout, y la línea final de salida es <code class="docutils literal notranslate"><span class="pre">***Test</span> <span class="pre">Failed***</span> <span class="pre">N</span> <span class="pre">failures.</span></code>, donde <em>N</em> es el número de ejemplos que fallaron.</p>
<p>Ejecútalo con el modificador <code class="docutils literal notranslate"><span class="pre">-v</span></code> en su lugar:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">M</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">v</span>
</pre></div>
</div>
<p>y un reporte detallado de todos los ejemplos intentados es impreso a la salida estándar, junto con resúmenes clasificados  al final.</p>
<p>Puedes forzar el modo verboso al pasar <code class="docutils literal notranslate"><span class="pre">verbose=True</span></code> a <a class="reference internal" href="#doctest.testmod" title="doctest.testmod"><code class="xref py py-func docutils literal notranslate"><span class="pre">testmod()</span></code></a>, o prohibirlo al pasarlo <code class="docutils literal notranslate"><span class="pre">verbose=False</span></code>. En cualquiera de estas casos, <code class="docutils literal notranslate"><span class="pre">sys.argv</span></code> no es examinado por <a class="reference internal" href="#doctest.testmod" title="doctest.testmod"><code class="xref py py-func docutils literal notranslate"><span class="pre">testmod()</span></code></a> (por lo que pasar o no <code class="docutils literal notranslate"><span class="pre">-v</span></code>, no tiene efecto).</p>
<p>También hay un atajo de línea de comandos para ejecutar <a class="reference internal" href="#doctest.testmod" title="doctest.testmod"><code class="xref py py-func docutils literal notranslate"><span class="pre">testmod()</span></code></a>. Puedes instruir al intérprete de Python para ejecutar el módulo doctest directamente de la biblioteca estándar y pasar los nombres del módulo en la línea de comandos:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">doctest</span> <span class="o">-</span><span class="n">v</span> <span class="n">example</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>Esto importará <code class="file docutils literal notranslate"><span class="pre">example.py</span></code> como un módulo independiente y ejecutará a <a class="reference internal" href="#doctest.testmod" title="doctest.testmod"><code class="xref py py-func docutils literal notranslate"><span class="pre">testmod()</span></code></a>. Note que esto puede no funcionar correctamente si el archivo es parte de un paquete e importa otros submódulos de ese paquete.</p>
<p>Para más información de <a class="reference internal" href="#doctest.testmod" title="doctest.testmod"><code class="xref py py-func docutils literal notranslate"><span class="pre">testmod()</span></code></a>, véase la sección <a class="reference internal" href="#doctest-basic-api"><span class="std std-ref">API básica</span></a>.</p>
</section>
<section id="simple-usage-checking-examples-in-a-text-file">
<span id="doctest-simple-testfile"></span><h2>Uso Simple: Verificar ejemplos en un Archivo de Texto<a class="headerlink" href="#simple-usage-checking-examples-in-a-text-file" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Otra simple aplicación de doctest es probar ejemplos interactivos en un archivo de texto.  Esto puede ser hecho con la función <a class="reference internal" href="#doctest.testfile" title="doctest.testfile"><code class="xref py py-func docutils literal notranslate"><span class="pre">testfile()</span></code></a>:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">doctest</span>
<span class="n">doctest</span><span class="o">.</span><span class="n">testfile</span><span class="p">(</span><span class="s2">&quot;example.txt&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Este script corto ejecuta y verifica cualquier ejemplo interactivo de Python contenido en el archivo <code class="file docutils literal notranslate"><span class="pre">example.txt</span></code>. El contenido del archivo es tratado como si fuese un solo gran docstring; ¡el archivo no necesita contener un programa de Python! Por ejemplo, tal vez <code class="file docutils literal notranslate"><span class="pre">example.txt</span></code> contenga esto:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>The ``example`` module
======================

Using ``factorial``
-------------------

This is an example text file in reStructuredText format.  First import
``factorial`` from the ``example`` module:

    &gt;&gt;&gt; from example import factorial

Now use it:

    &gt;&gt;&gt; factorial(6)
    120
</pre></div>
</div>
<p>Ejecutar <code class="docutils literal notranslate"><span class="pre">doctest.testfile(&quot;example.txt&quot;)</span></code> entonces encuentra el error en esta documentación:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">File</span> <span class="s2">&quot;./example.txt&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">14</span><span class="p">,</span> <span class="ow">in</span> <span class="n">example</span><span class="o">.</span><span class="n">txt</span>
<span class="n">Failed</span> <span class="n">example</span><span class="p">:</span>
    <span class="n">factorial</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="n">Expected</span><span class="p">:</span>
    <span class="mi">120</span>
<span class="n">Got</span><span class="p">:</span>
    <span class="mi">720</span>
</pre></div>
</div>
<p>Como con <a class="reference internal" href="#doctest.testmod" title="doctest.testmod"><code class="xref py py-func docutils literal notranslate"><span class="pre">testmod()</span></code></a>, <a class="reference internal" href="#doctest.testfile" title="doctest.testfile"><code class="xref py py-func docutils literal notranslate"><span class="pre">testfile()</span></code></a> no mostrará nada a menos que un ejemplo falle. Si un ejemplo no falla, entonces los ejemplos fallidos y sus causas son impresas a stdout, usando el mismo formato como <a class="reference internal" href="#doctest.testmod" title="doctest.testmod"><code class="xref py py-func docutils literal notranslate"><span class="pre">testmod()</span></code></a>.</p>
<p>Por defecto, <a class="reference internal" href="#doctest.testfile" title="doctest.testfile"><code class="xref py py-func docutils literal notranslate"><span class="pre">testfile()</span></code></a> busca archivos en el directorio del módulo al que se llama. Véase la sección <a class="reference internal" href="#doctest-basic-api"><span class="std std-ref">API básica</span></a> para una descripción de los argumentos opcionales que pueden ser usados para decirle que busque archivos en otros lugares.</p>
<p>Como <a class="reference internal" href="#doctest.testmod" title="doctest.testmod"><code class="xref py py-func docutils literal notranslate"><span class="pre">testmod()</span></code></a>, la verbosidad de <a class="reference internal" href="#doctest.testfile" title="doctest.testfile"><code class="xref py py-func docutils literal notranslate"><span class="pre">testfile()</span></code></a> puede ser establecida con el modificador de la línea de comandos <code class="docutils literal notranslate"><span class="pre">-v</span></code> o con el argumento por palabra clave opcional <em>verbose</em>.</p>
<p>También hay un atajo de línea de comandos para ejecutar <a class="reference internal" href="#doctest.testfile" title="doctest.testfile"><code class="xref py py-func docutils literal notranslate"><span class="pre">testfile()</span></code></a>. Puedes indicar al intérprete de Python para correr el módulo doctest directamente desde la biblioteca estándar y pasar el nombre de los archivos en la línea de comandos:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">doctest</span> <span class="o">-</span><span class="n">v</span> <span class="n">example</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>Porque el nombre del archivo no termina con <code class="file docutils literal notranslate"><span class="pre">.py</span></code>, <a class="reference internal" href="#module-doctest" title="doctest: Test pieces of code within docstrings."><code class="xref py py-mod docutils literal notranslate"><span class="pre">doctest</span></code></a> infiere que se debe ejecutar con <a class="reference internal" href="#doctest.testfile" title="doctest.testfile"><code class="xref py py-func docutils literal notranslate"><span class="pre">testfile()</span></code></a>, no <a class="reference internal" href="#doctest.testmod" title="doctest.testmod"><code class="xref py py-func docutils literal notranslate"><span class="pre">testmod()</span></code></a>.</p>
<p>Para más información en <a class="reference internal" href="#doctest.testfile" title="doctest.testfile"><code class="xref py py-func docutils literal notranslate"><span class="pre">testfile()</span></code></a>, véase la sección <a class="reference internal" href="#doctest-basic-api"><span class="std std-ref">API básica</span></a>.</p>
</section>
<section id="how-it-works">
<span id="doctest-how-it-works"></span><h2>Cómo funciona<a class="headerlink" href="#how-it-works" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Esta sección examina en detalle cómo funciona doctest: qué docstrings revisa, cómo encuentra ejemplos interactivos, qué contexto de ejecución usa, cómo maneja las excepciones, y cómo las banderas pueden ser usadas para controlar su comportamiento. Esta es la información que necesitas saber para escribir ejemplos de doctest; para información sobre ejecutar doctest en estos ejemplos, véase las siguientes secciones.</p>
<section id="which-docstrings-are-examined">
<span id="doctest-which-docstrings"></span><h3>¿Qué docstrings son examinados?<a class="headerlink" href="#which-docstrings-are-examined" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Se busca en el docstring del módulo, y todos los docstrings de las funciones, clases, y métodos.  Los objetos importados en el módulo no se buscan.</p>
<p>Además, si <code class="docutils literal notranslate"><span class="pre">M.__test__</span></code> existe y «es verdaderos», debe ser un diccionario, y cada entrada mapea un nombre (cadena de caracteres) a un objeto de función, objeto de clase, o cadena de caracteres. Se buscan los docstrings de los objetos de función o de clase encontrados de <code class="docutils literal notranslate"><span class="pre">M.__test__</span></code>, y las cadenas de caracteres son tratadas como si fueran docstrings. En la salida, una clave <code class="docutils literal notranslate"><span class="pre">K</span></code> en <code class="docutils literal notranslate"><span class="pre">M.__test__</span></code> aparece con el nombre:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">name</span> <span class="n">of</span> <span class="n">M</span><span class="o">&gt;.</span><span class="n">__test__</span><span class="o">.</span><span class="n">K</span>
</pre></div>
</div>
<p>Todas las clases encontradas se buscan recursivamente de manera similar, para probar docstrings en sus métodos contenidos y clases anidadas.</p>
</section>
<section id="how-are-docstring-examples-recognized">
<span id="doctest-finding-examples"></span><h3>¿Cómo se reconocen los ejemplos de docstring?<a class="headerlink" href="#how-are-docstring-examples-recognized" title="Enlazar permanentemente con este título">¶</a></h3>
<p>En la mayoría de los casos un copiar y pegar de una sesión de consola interactiva funciona bien, pero doctest no está intentando hacer una emulación exacta de ningún shell específico de Python.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># comments are ignored</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="mi">12</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span>
<span class="go">12</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">13</span><span class="p">:</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;yes&quot;</span><span class="p">)</span>
<span class="gp">... </span><span class="k">else</span><span class="p">:</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;no&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;NO&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;NO!!!&quot;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">no</span>
<span class="go">NO</span>
<span class="go">NO!!!</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p id="index-0">Cualquier salida esperada debe seguir inmediatamente el final de la línea <code class="docutils literal notranslate"><span class="pre">'&gt;&gt;&gt;'</span></code> o <code class="docutils literal notranslate"><span class="pre">'...'</span></code> conteniendo el código, y la salida esperada (si la hubiera) se extiende hasta el siguiente <code class="docutils literal notranslate"><span class="pre">'&gt;&gt;&gt;'</span></code> o la línea en blanco.</p>
<p>La letra pequeña:</p>
<ul>
<li><p>La salida esperada no puede contener una línea de espacios en blanco, ya que ese tipo de línea se toma para indicar el fin de la salida esperada. Si la salida esperada de verdad contiene una línea en blanco, pon <code class="docutils literal notranslate"><span class="pre">&lt;BLANKLINE&gt;</span></code> en tu ejemplo de doctest en cada lugar donde una línea en blanco sea esperada.</p></li>
<li><p>Todos los caracteres de tabulación se expanden a espacios, usando paradas de tabulación de 8 -columnas. Las tabulaciones generadas por el código en pruebas no son modificadas. Ya que todas las tabulaciones en la salida de prueba <em>son</em> expandidas, significa que si el código de salida incluye tabulaciones, la única manera de que el doctest pueda pasar es si la opción <a class="reference internal" href="#doctest.NORMALIZE_WHITESPACE" title="doctest.NORMALIZE_WHITESPACE"><code class="xref py py-const docutils literal notranslate"><span class="pre">NORMALIZE_WHITESPACE</span></code></a> o <a class="reference internal" href="#doctest-directives"><span class="std std-ref">directive</span></a> está en efecto. Alternativamente, la prueba puede ser reescrita para capturar la salida y compararla a un valor esperado como parte de la prueba. Se llegó a este tratamiento de tabulaciones en la fuente a través de prueba y error, y ha demostrado ser la manera menos propensa a errores de manejarlos. Es posible usar un algoritmo diferente para manejar tabulaciones al escribir una clase <a class="reference internal" href="#doctest.DocTestParser" title="doctest.DocTestParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTestParser</span></code></a> personalizada.</p></li>
<li><p>La salida a stdout es capturada, pero no la salida a stderr (los rastreos de la excepción son capturados a través de maneras diferentes).</p></li>
<li><p>Si continuas una línea poniendo una barra invertida en una sesión interactiva, o por cualquier otra razón usas una barra invertida, debes usar un docstring crudo, que preservará tus barras invertidas exactamente como las escribes:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="sd">&#39;&#39;&#39;Backslashes in a raw docstring: m\n&#39;&#39;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">)</span>
<span class="go">Backslashes in a raw docstring: m\n</span>
</pre></div>
</div>
<p>De otra manera, la barra invertida será interpretada como parte de una cadena. Por ejemplo, el <code class="docutils literal notranslate"><span class="pre">\n</span></code> arriba sería interpretado como un carácter de nueva línea. Alternativamente, puedes duplicar cada barra invertida en  la versión de doctest (y no usar una cadena de caracteres cruda):</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="gp">... </span>    <span class="sd">&#39;&#39;&#39;Backslashes in a raw docstring: m\\n&#39;&#39;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">)</span>
<span class="go">Backslashes in a raw docstring: m\n</span>
</pre></div>
</div>
</li>
<li><p>La columna inicial no importa:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="s2">&quot;Easy!&quot;</span>
<span class="go">      &gt;&gt;&gt; import math</span>
<span class="go">          &gt;&gt;&gt; math.floor(1.9)</span>
<span class="go">          1</span>
</pre></div>
</div>
<p>y tantos espacios en blanco al principio se eliminan de la salida esperada como aparece en la línea <code class="docutils literal notranslate"><span class="pre">'&gt;&gt;&gt;'</span></code> inicial que empezó el ejemplo.</p>
</li>
</ul>
</section>
<section id="what-s-the-execution-context">
<span id="doctest-execution-context"></span><h3>¿Cuál es el contexto de ejecución?<a class="headerlink" href="#what-s-the-execution-context" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Por defecto, cada vez que un <a class="reference internal" href="#module-doctest" title="doctest: Test pieces of code within docstrings."><code class="xref py py-mod docutils literal notranslate"><span class="pre">doctest</span></code></a> encuentre un docstring para probar, usa una <em>copia superficial</em>  de los globales de <code class="xref py py-mod docutils literal notranslate"><span class="pre">M</span></code>, por lo que ejecutar pruebas no cambia los globales reales del módulo, y por lo que una prueba en <code class="xref py py-mod docutils literal notranslate"><span class="pre">M</span></code> no puede dejar atrás migajas que permitan a otras pruebas trabajar. Significa que los ejemplos pueden usar libremente cualquier nombre definido en el nivel superior en <code class="xref py py-mod docutils literal notranslate"><span class="pre">M</span></code>, y nombres definidos más temprano en los docstrings siendo ejecutados. Los ejemplos no pueden ver nombres definidos en otros docstrings.</p>
<p>Puedes forzar el uso de tus propios diccionarios como contexto de ejecución al pasar <code class="docutils literal notranslate"><span class="pre">globs=your_dict</span></code> a <a class="reference internal" href="#doctest.testmod" title="doctest.testmod"><code class="xref py py-func docutils literal notranslate"><span class="pre">testmod()</span></code></a> o <a class="reference internal" href="#doctest.testfile" title="doctest.testfile"><code class="xref py py-func docutils literal notranslate"><span class="pre">testfile()</span></code></a> en su lugar.</p>
</section>
<section id="what-about-exceptions">
<span id="doctest-exceptions"></span><h3>¿Y las excepciones?<a class="headerlink" href="#what-about-exceptions" title="Enlazar permanentemente con este título">¶</a></h3>
<p>No hay problema, siempre que el rastreo sea la única salida producida por el ejemplo: sólo copia el rastreo.  <a class="footnote-reference brackets" href="#id2" id="id1">1</a> Ya que los rastreos contienen detalles que probablemente cambien rápidamente (por ejemplo, rutas de archivos exactas y números de línea), este es un caso donde doctest trabaja duro para ser flexible en lo que acepta.</p>
<p>Ejemplo simple:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">ValueError</span>: <span class="n">list.remove(x): x not in list</span>
</pre></div>
</div>
<p>El doctest tiene éxito si se lanza <a class="reference internal" href="exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a>, con el detalle <code class="docutils literal notranslate"><span class="pre">list.remove(x):</span> <span class="pre">x</span> <span class="pre">not</span> <span class="pre">in</span> <span class="pre">list</span></code> como se muestra.</p>
<p>La salida esperada para una excepción debe empezar con una cabecera de rastreo, que puede ser una de las siguientes dos líneas, con el mismo sangrado de la primera línea del ejemplo:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">innermost</span> <span class="n">last</span><span class="p">):</span>
</pre></div>
</div>
<p>La cabecera de rastreo es seguida por una pila de rastreo opcional, cuyo contenido es ignorado por doctest.  La pila de rastreo es típicamente omitida, o copiada palabra por palabra de una sesión interactiva.</p>
<p>La pila de rastreo es seguida por la parte más interesante: la línea o líneas conteniendo el tipo de excepción y detalle. Esto es usualmente la última línea de un rastreo, pero se puede extender a través de múltiples líneas si la excepción tiene un detalle de varias líneas:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;multi</span><span class="se">\n</span><span class="s1">    line</span><span class="se">\n</span><span class="s1">detail&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">ValueError</span>: <span class="n">multi</span>
<span class="go">    line</span>
<span class="go">detail</span>
</pre></div>
</div>
<p>Las últimas tres líneas (empezando con <a class="reference internal" href="exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a>) son comparados con el tipo de excepción y detalle, y el resto es ignorado.</p>
<p>La mejor práctica es omitir la pila de rastreo, a menos que añada valor de documentación significante al ejemplo. Por lo que el último ejemplo es probablemente mejor como:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;multi</span><span class="se">\n</span><span class="s1">    line</span><span class="se">\n</span><span class="s1">detail&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">ValueError</span>: <span class="n">multi</span>
<span class="go">    line</span>
<span class="go">detail</span>
</pre></div>
</div>
<p>Note que los rastreos son tratados de manera especial. En particular, en el ejemplo reescrito, el uso de <code class="docutils literal notranslate"><span class="pre">...</span></code> es independiente de la opción <a class="reference internal" href="#doctest.ELLIPSIS" title="doctest.ELLIPSIS"><code class="xref py py-const docutils literal notranslate"><span class="pre">ELLIPSIS</span></code></a> de doctest. Se pueden excluir los puntos suspensivos en ese ejemplo, así como también pueden haber tres (o trescientas) comas o dígitos, o una transcripción sangrada de un <em>sketch</em> de Monty Python.</p>
<p>Algunos detalles que debes leer una vez, pero no necesitarás recordar:</p>
<ul class="simple">
<li><p>Doctest no puede adivinar si tu salida esperada vino de una excepción de rastreo o de una impresión ordinaria. Así que, un ejemplo que espera <code class="docutils literal notranslate"><span class="pre">ValueError:</span> <span class="pre">42</span> <span class="pre">is</span> <span class="pre">prime</span></code> pasará, ya sea si de hecho se lance <a class="reference internal" href="exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> o si el ejemplo simplemente imprime ese texto de rastreo. En la práctica, la salida ordinaria raramente comienza con una línea de cabecera de rastreo, por lo que esto no crea problemas reales.</p></li>
<li><p>Cada línea de la pila de rastreo (si se presenta) debe estar más sangrada que la primera línea del ejemplo, <em>o</em> empezar con un carácter no alfanumérico. la primera línea que sigue a la cabecera de rastreo sangrada de igual forma y empezando con un alfanumérico es considerado el inicio del detalle de la excepción. Por supuesto que esto es lo correcto para rastreos genuinos.</p></li>
<li><p>Cuando se especifica la opción <a class="reference internal" href="#doctest.IGNORE_EXCEPTION_DETAIL" title="doctest.IGNORE_EXCEPTION_DETAIL"><code class="xref py py-const docutils literal notranslate"><span class="pre">IGNORE_EXCEPTION_DETAIL</span></code></a> de doctest. todo lo que sigue a los dos puntos más a la izquierda y cualquier otra información del módulo en el nombre de la excepción se ignora.</p></li>
<li><p>El shell interactivo omite la línea de la cabecera de rastreo para algunos <a class="reference internal" href="exceptions.html#SyntaxError" title="SyntaxError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SyntaxError</span></code></a>. Pero doctest usa la línea de la cabecera de rastreo para distinguir excepciones de los que no son. Así que en algunos casos raros donde necesitas probar un <a class="reference internal" href="exceptions.html#SyntaxError" title="SyntaxError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SyntaxError</span></code></a> que omite la cabecera de rastreo, necesitarás poner manualmente la línea de cabecera de rastreo en tu ejemplo de prueba.</p></li>
</ul>
<ul id="index-1">
<li><p>Para algunos <a class="reference internal" href="exceptions.html#SyntaxError" title="SyntaxError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SyntaxError</span></code></a>, Python muestra la posición del carácter del error de sintaxis, usando un marcador <code class="docutils literal notranslate"><span class="pre">^</span></code>:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="mi">1</span> <span class="mi">1</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>
    <span class="mi">1</span> <span class="mi">1</span>
      <span class="pm">^</span>
<span class="gr">SyntaxError</span>: <span class="n">invalid syntax</span>
</pre></div>
</div>
<p>Ya que las líneas mostrando la posición del error vienen antes del tipo de excepción y detalle, no son revisadas por doctest. Por ejemplo, el siguiente test pasaría, a pesar de que pone el marcador <code class="docutils literal notranslate"><span class="pre">^</span></code> en la posición equivocada:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="mi">1</span> <span class="mi">1</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>
    <span class="mi">1</span> <span class="mi">1</span>
    <span class="pm">^</span>
<span class="gr">SyntaxError</span>: <span class="n">invalid syntax</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="option-flags">
<span id="doctest-options"></span><span id="option-flags-and-directives"></span><h3>Banderas de Opción<a class="headerlink" href="#option-flags" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Varias banderas de opción controlan diversos aspectos del comportamiento de doctest. Los nombres simbólicos para las banderas son proporcionados como constantes del módulo, que se pueden conectar mediante <a class="reference internal" href="../reference/expressions.html#bitwise"><span class="std std-ref">*OR* bit a bit</span></a>  y pasar a varias funciones. Los nombres también pueden ser usados en las <a class="reference internal" href="#doctest-directives"><span class="std std-ref">directivas de doctest</span></a>, y se pueden pasar a la interfaz de la línea de comandos de doctest a través de la opción <code class="docutils literal notranslate"><span class="pre">-o</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">Nuevo en la versión 3.4: </span>La opción de la línea de comandos <code class="docutils literal notranslate"><span class="pre">-o</span></code>.</p>
</div>
<p>El primer grupo de opciones definen las semánticas de la prueba, controlando aspectos de cómo doctest decide si la salida de hecho concuerda con la salida esperada del ejemplo:</p>
<dl class="py data">
<dt id="doctest.DONT_ACCEPT_TRUE_FOR_1">
<code class="sig-prename descclassname">doctest.</code><code class="sig-name descname">DONT_ACCEPT_TRUE_FOR_1</code><a class="headerlink" href="#doctest.DONT_ACCEPT_TRUE_FOR_1" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Por defecto, si un bloque de salida esperada contiene sólo <code class="docutils literal notranslate"><span class="pre">1</span></code>, se considera igual a un bloque de salida real conteniendo sólo <code class="docutils literal notranslate"><span class="pre">1</span></code> o <code class="docutils literal notranslate"><span class="pre">true</span></code>, y similarmente para <code class="docutils literal notranslate"><span class="pre">0</span></code> contra <code class="docutils literal notranslate"><span class="pre">False</span></code>. Cuando se especifica <code class="xref py py-const docutils literal notranslate"><span class="pre">DONT_ACCEPT_TRUE_FOR_1`</span></code>, no se permite ninguna sustitución.  El comportamiento por defecto atiende a que Python cambió el tipo de retorno de muchas funciones de enteros a booleanos; los doctest esperando salidas «de pequeño enteros» todavía trabajan en estos casos. Esta opción probablemente se vaya, pero no por muchos años.</p>
</dd></dl>

<span class="target" id="index-2"></span><dl class="py data">
<dt id="doctest.DONT_ACCEPT_BLANKLINE">
<code class="sig-prename descclassname">doctest.</code><code class="sig-name descname">DONT_ACCEPT_BLANKLINE</code><a class="headerlink" href="#doctest.DONT_ACCEPT_BLANKLINE" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Por defecto, si un bloque de salida esperada contiene una línea que sólo tiene la cadena de caracteres <code class="docutils literal notranslate"><span class="pre">&lt;BLANKLINE&gt;</span></code>, entonces esa línea corresponderá a una línea en blanco en la salida real. Ya que una línea en blanca auténtica delimita la salida esperada, esta es la única manera de comunicar que una línea en blanco es esperada. Cuando se especifica <a class="reference internal" href="#doctest.DONT_ACCEPT_BLANKLINE" title="doctest.DONT_ACCEPT_BLANKLINE"><code class="xref py py-const docutils literal notranslate"><span class="pre">DONT_ACCEPT_BLANKLINE</span></code></a>, esta substitución no se permite.</p>
</dd></dl>

<dl class="py data">
<dt id="doctest.NORMALIZE_WHITESPACE">
<code class="sig-prename descclassname">doctest.</code><code class="sig-name descname">NORMALIZE_WHITESPACE</code><a class="headerlink" href="#doctest.NORMALIZE_WHITESPACE" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Cuando se especifica, todas las secuencias de espacios en blanco (vacías y nuevas líneas) son tratadas como iguales. Cualquier secuencia de espacios en blanco dentro de la salida esperada corresponderá a cualquier secuencia de espacios en blanco dentro de la salida real. Por defecto, los espacios en blanco deben corresponderse exactamente.  <a class="reference internal" href="#doctest.NORMALIZE_WHITESPACE" title="doctest.NORMALIZE_WHITESPACE"><code class="xref py py-const docutils literal notranslate"><span class="pre">NORMALIZE_WHITESPACE</span></code></a> es especialmente útil cuando una línea de la salida esperada es muy larga, y quieres envolverla a través de múltiples líneas en tu código fuente.</p>
</dd></dl>

<span class="target" id="index-3"></span><dl class="py data">
<dt id="doctest.ELLIPSIS">
<code class="sig-prename descclassname">doctest.</code><code class="sig-name descname">ELLIPSIS</code><a class="headerlink" href="#doctest.ELLIPSIS" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Cuando se especifica, un marcador de puntos suspensivos (<code class="docutils literal notranslate"><span class="pre">...</span></code>) en la salida esperada puede corresponder a cualquier cadena de caracteres en la salida real. Esto incluye las cadenas de caracteres que abarcan límites de líneas, y cadenas de caracteres vacías, por lo que es mejor mantener su uso simple. Usos complicados pueden conducir a los mismo tipos de sorpresa de «ups, coincidió demasiado» que <code class="docutils literal notranslate"><span class="pre">.*</span></code> es propenso a hacer en expresiones regulares.</p>
</dd></dl>

<dl class="py data">
<dt id="doctest.IGNORE_EXCEPTION_DETAIL">
<code class="sig-prename descclassname">doctest.</code><code class="sig-name descname">IGNORE_EXCEPTION_DETAIL</code><a class="headerlink" href="#doctest.IGNORE_EXCEPTION_DETAIL" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>When specified, doctests expecting exceptions pass so long as an exception
of the expected type is raised, even if the details
(message and fully qualified exception name) don’t match.</p>
<p>For example, an example expecting <code class="docutils literal notranslate"><span class="pre">ValueError:</span> <span class="pre">42</span></code> will pass if the actual
exception raised is <code class="docutils literal notranslate"><span class="pre">ValueError:</span> <span class="pre">3*14</span></code>, but will fail if, say, a
<a class="reference internal" href="exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> is raised instead.
It will also ignore any fully qualified name included before the
exception class, which can vary between implementations and versions
of Python and the code/libraries in use.
Hence, all three of these variations will work with the flag specified:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">Exception</span>: <span class="n">message</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">builtins.Exception</span>: <span class="n">message</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">__main__.Exception</span>: <span class="n">message</span>
</pre></div>
</div>
<p>Note that <a class="reference internal" href="#doctest.ELLIPSIS" title="doctest.ELLIPSIS"><code class="xref py py-const docutils literal notranslate"><span class="pre">ELLIPSIS</span></code></a> can also be used to ignore the
details of the exception message, but such a test may still fail based
on whether the module name is present or matches exactly.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Distinto en la versión 3.2: </span><a class="reference internal" href="#doctest.IGNORE_EXCEPTION_DETAIL" title="doctest.IGNORE_EXCEPTION_DETAIL"><code class="xref py py-const docutils literal notranslate"><span class="pre">IGNORE_EXCEPTION_DETAIL</span></code></a> también ignora cualquier información relacionada al módulo conteniendo la excepción bajo prueba.</p>
</div>
</dd></dl>

<dl class="py data">
<dt id="doctest.SKIP">
<code class="sig-prename descclassname">doctest.</code><code class="sig-name descname">SKIP</code><a class="headerlink" href="#doctest.SKIP" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Cuando se especifica, no ejecuta el ejemplo del todo. Puede ser útil en contextos donde los ejemplos de doctest sirven como documentación y casos de prueba a la vez, y un ejemplo debe ser incluido para propósitos de documentación, pero no debe ser revisado. P. ej., la salida del ejemplo puede ser aleatoria, o el ejemplo puede depender de recursos que no estarían disponibles para el controlador de pruebas.</p>
<p>La bandera <em>SKIP</em> también se puede usar para temporalmente «quitar» ejemplos.</p>
</dd></dl>

<dl class="py data">
<dt id="doctest.COMPARISON_FLAGS">
<code class="sig-prename descclassname">doctest.</code><code class="sig-name descname">COMPARISON_FLAGS</code><a class="headerlink" href="#doctest.COMPARISON_FLAGS" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Una máscara de bits o juntadas lógicamente todas las banderas de arriba.</p>
</dd></dl>

<p>El segundo grupo de opciones controla cómo las fallas de las pruebas son reportadas:</p>
<dl class="py data">
<dt id="doctest.REPORT_UDIFF">
<code class="sig-prename descclassname">doctest.</code><code class="sig-name descname">REPORT_UDIFF</code><a class="headerlink" href="#doctest.REPORT_UDIFF" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Cuando se especifica, las fallas que involucran salidas multilínea esperadas y reales son mostradas usando una diferencia (<em>diff</em>) unificada.</p>
</dd></dl>

<dl class="py data">
<dt id="doctest.REPORT_CDIFF">
<code class="sig-prename descclassname">doctest.</code><code class="sig-name descname">REPORT_CDIFF</code><a class="headerlink" href="#doctest.REPORT_CDIFF" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Cuando se especifica, las fallas que involucran salidas multilínea esperadas y reales se mostrarán usando una diferencia (<em>diff</em>) contextual.</p>
</dd></dl>

<dl class="py data">
<dt id="doctest.REPORT_NDIFF">
<code class="sig-prename descclassname">doctest.</code><code class="sig-name descname">REPORT_NDIFF</code><a class="headerlink" href="#doctest.REPORT_NDIFF" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Cuando se especifica, las diferencias son computadas por <code class="docutils literal notranslate"><span class="pre">difflib.Differ</span></code>, usando el mismo algoritmo que la popular utilidad <code class="file docutils literal notranslate"><span class="pre">ndiff.py</span></code>. Este es el único método que marca diferencias dentro de líneas también como a través de líneas. Por ejemplo, si una línea de salida esperada contiene el dígito <code class="docutils literal notranslate"><span class="pre">1</span></code> donde la salida actual contiene la letra <code class="docutils literal notranslate"><span class="pre">l</span></code>, se inserta una línea con una marca de inserción marcando la posición de las columnas que no coinciden.</p>
</dd></dl>

<dl class="py data">
<dt id="doctest.REPORT_ONLY_FIRST_FAILURE">
<code class="sig-prename descclassname">doctest.</code><code class="sig-name descname">REPORT_ONLY_FIRST_FAILURE</code><a class="headerlink" href="#doctest.REPORT_ONLY_FIRST_FAILURE" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Cuando se especifica, muestra el primer ejemplo fallido en cada doctest, pero suprime la salida para todos ejemplos restantes. Esto evitará que doctest reporte los ejemplos correctos que se rompen por causa de fallos tempranos; pero también puede esconder ejemplos incorrectos que fallen independientemente de la primera falla. Cuando se especifica <a class="reference internal" href="#doctest.REPORT_ONLY_FIRST_FAILURE" title="doctest.REPORT_ONLY_FIRST_FAILURE"><code class="xref py py-const docutils literal notranslate"><span class="pre">REPORT_ONLY_FIRST_FAILURE</span></code></a>, los ejemplos restantes aún se ejecutan, y aún cuentan para el número total de fallas reportadas, sólo se suprime la salida.</p>
</dd></dl>

<dl class="py data">
<dt id="doctest.FAIL_FAST">
<code class="sig-prename descclassname">doctest.</code><code class="sig-name descname">FAIL_FAST</code><a class="headerlink" href="#doctest.FAIL_FAST" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Cuando se especifica, sale después del primer ejemplo fallido y no intenta ejecutar los ejemplos restantes. Por consiguiente, el número de fallas reportadas será como mucho 1. Esta bandera puede ser útil durante la depuración, ya que los ejemplos después de la primera falla ni siquiera producirán salida de depuración.</p>
<p>La línea de comandos de doctest acepta la opción <code class="docutils literal notranslate"><span class="pre">-f</span></code> como un atajo para <code class="docutils literal notranslate"><span class="pre">-o</span> <span class="pre">FAIL_FAST</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">Nuevo en la versión 3.4.</span></p>
</div>
</dd></dl>

<dl class="py data">
<dt id="doctest.REPORTING_FLAGS">
<code class="sig-prename descclassname">doctest.</code><code class="sig-name descname">REPORTING_FLAGS</code><a class="headerlink" href="#doctest.REPORTING_FLAGS" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Una máscara de bits o todas las banderas de reporte arriba combinadas.</p>
</dd></dl>

<p>También hay una manera de registrar nombres de nuevas opciones de banderas, aunque esto no es útil a menos que intentes extender <a class="reference internal" href="#module-doctest" title="doctest: Test pieces of code within docstrings."><code class="xref py py-mod docutils literal notranslate"><span class="pre">doctest</span></code></a> a través de herencia:</p>
<dl class="py function">
<dt id="doctest.register_optionflag">
<code class="sig-prename descclassname">doctest.</code><code class="sig-name descname">register_optionflag</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#doctest.register_optionflag" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Crea una nueva bandera de opción con un nombre dado, y retorna el valor entero de la nueva bandera. se puede usar <a class="reference internal" href="#doctest.register_optionflag" title="doctest.register_optionflag"><code class="xref py py-func docutils literal notranslate"><span class="pre">register_optionflag()</span></code></a> cuando se hereda <a class="reference internal" href="#doctest.OutputChecker" title="doctest.OutputChecker"><code class="xref py py-class docutils literal notranslate"><span class="pre">OutputChecker</span></code></a> o <a class="reference internal" href="#doctest.DocTestRunner" title="doctest.DocTestRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTestRunner</span></code></a> para crear nuevas opciones que sean compatibles con tus clases heredadas. <a class="reference internal" href="#doctest.register_optionflag" title="doctest.register_optionflag"><code class="xref py py-func docutils literal notranslate"><span class="pre">register_optionflag()</span></code></a> siempre debe ser llamado usando la siguiente expresión:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">MY_FLAG</span> <span class="o">=</span> <span class="n">register_optionflag</span><span class="p">(</span><span class="s1">&#39;MY_FLAG&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="directives">
<span id="doctest-directives"></span><span id="index-4"></span><h3>Directivas<a class="headerlink" href="#directives" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Se pueden usar las directivas de doctest para modificar las <a class="reference internal" href="#doctest-options"><span class="std std-ref">banderas de opción</span></a> para un ejemplo individual. Las directivas de doctest son comentarios de Python especiales que siguen el código fuente de un ejemplo:</p>
<pre>
<strong id="grammar-token-doctest-directive"><span id="grammar-token-directive"></span>directive            </strong> ::=  &quot;#&quot; &quot;doctest:&quot; <a class="reference internal" href="#grammar-token-doctest-directive_options"><code class="xref docutils literal notranslate"><span class="pre">directive_options</span></code></a>
<strong id="grammar-token-doctest-directive_options"><span id="grammar-token-directive-options"></span>directive_options    </strong> ::=  <a class="reference internal" href="#grammar-token-doctest-directive_option"><code class="xref docutils literal notranslate"><span class="pre">directive_option</span></code></a> (&quot;,&quot; <a class="reference internal" href="#grammar-token-doctest-directive_option"><code class="xref docutils literal notranslate"><span class="pre">directive_option</span></code></a>)*
<strong id="grammar-token-doctest-directive_option"><span id="grammar-token-directive-option"></span>directive_option     </strong> ::=  <a class="reference internal" href="#grammar-token-doctest-on_or_off"><code class="xref docutils literal notranslate"><span class="pre">on_or_off</span></code></a> <a class="reference internal" href="#grammar-token-doctest-directive_option_name"><code class="xref docutils literal notranslate"><span class="pre">directive_option_name</span></code></a>
<strong id="grammar-token-doctest-on_or_off"><span id="grammar-token-on-or-off"></span>on_or_off            </strong> ::=  &quot;+&quot; | &quot;-&quot;
<strong id="grammar-token-doctest-directive_option_name"><span id="grammar-token-directive-option-name"></span>directive_option_name</strong> ::=  &quot;DONT_ACCEPT_BLANKLINE&quot; | &quot;NORMALIZE_WHITESPACE&quot; | ...
</pre>
<p>No se permite el espacio en blanco entre el <code class="docutils literal notranslate"><span class="pre">+</span></code> o <code class="docutils literal notranslate"><span class="pre">-</span></code> y el nombre de la opción de directiva (<em>directive option name</em>). El nombre de la opción de directiva puede ser cualquiera de los nombres de las banderas de opciones explicadas arriba.</p>
<p>Las directivas de doctest de un ejemplo modifican el comportamiento de doctest para ese único ejemplo. Usa <code class="docutils literal notranslate"><span class="pre">+</span></code> para habilitar el comportamiento nombrado, o <code class="docutils literal notranslate"><span class="pre">-</span></code> para deshabilitarlo.</p>
<p>For example, this test passes:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">)))</span>  <span class="c1"># doctest: +NORMALIZE_WHITESPACE</span>
<span class="go">[0,   1,  2,  3,  4,  5,  6,  7,  8,  9,</span>
<span class="go">10,  11, 12, 13, 14, 15, 16, 17, 18, 19]</span>
</pre></div>
</div>
<p>Without the directive it would fail, both because the actual output doesn’t have
two blanks before the single-digit list elements, and because the actual output
is on a single line.  This test also passes, and also requires a directive to do
so:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">)))</span>  <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">[0, 1, ..., 18, 19]</span>
</pre></div>
</div>
<p>Multiple directives can be used on a single physical line, separated by
commas:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">)))</span>  <span class="c1"># doctest: +ELLIPSIS, +NORMALIZE_WHITESPACE</span>
<span class="go">[0,    1, ...,   18,    19]</span>
</pre></div>
</div>
<p>If multiple directive comments are used for a single example, then they are
combined:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">)))</span>  <span class="c1"># doctest: +ELLIPSIS</span>
<span class="gp">... </span>                        <span class="c1"># doctest: +NORMALIZE_WHITESPACE</span>
<span class="go">[0,    1, ...,   18,    19]</span>
</pre></div>
</div>
<p>As the previous example shows, you can add <code class="docutils literal notranslate"><span class="pre">...</span></code> lines to your example
containing only directives.  This can be useful when an example is too long for
a directive to comfortably fit on the same line:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">))</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">)))</span>
<span class="gp">... </span><span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">[0, ..., 4, 10, ..., 19, 30, ..., 39]</span>
</pre></div>
</div>
<p>Tenga en cuenta que ya que todas las opciones están deshabilitadas por defecto, y las directivas sólo aplican a los ejemplos en los que aparecen, habilitarlas (a través de <code class="docutils literal notranslate"><span class="pre">+</span></code> en la directiva) usualmente es la única opción significativa. Sin embargo, las banderas de opciones también pueden ser pasadas a funciones que ejecutan doctests, estableciendo valores por defecto diferentes. En tales casos, deshabilitar una opción a través de <code class="docutils literal notranslate"><span class="pre">-</span></code> en una directiva puede ser útil.</p>
</section>
<section id="warnings">
<span id="doctest-warnings"></span><h3>Advertencias<a class="headerlink" href="#warnings" title="Enlazar permanentemente con este título">¶</a></h3>
<p><a class="reference internal" href="#module-doctest" title="doctest: Test pieces of code within docstrings."><code class="xref py py-mod docutils literal notranslate"><span class="pre">doctest</span></code></a> es serio acerca de requerir coincidencias exactas en la salida esperada. Si incluso un solo carácter no coincide, el test falla. Esto probablemente te sorprenderá algunas veces, mientras aprendes exactamente lo que Python asegura y no asegura sobre la salida. Por ejemplo, cuando se imprime un conjunto, Python no asegura que el elemento sea impreso en ningún orden particular, por lo que una prueba como</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span><span class="p">()</span>
<span class="go">{&quot;Hermione&quot;, &quot;Harry&quot;}</span>
</pre></div>
</div>
<p>¡es vulnerable! Una solución puede ser hacer</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span><span class="s2">&quot;Hermione&quot;</span><span class="p">,</span> <span class="s2">&quot;Harry&quot;</span><span class="p">}</span>
<span class="go">True</span>
</pre></div>
</div>
<p>es su lugar. Otra es hacer</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">foo</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span>
<span class="go">[&#39;Harry&#39;, &#39;Hermione&#39;]</span>
</pre></div>
</div>
<p>Existen otros casos, pero ya captas la idea.</p>
<p>Another bad idea is to print things that embed an object address, like</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">id</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>  <span class="c1"># certain to fail some of the time  </span>
<span class="go">7948648</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">C</span><span class="p">:</span> <span class="k">pass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">C</span><span class="p">()</span>  <span class="c1"># the default repr() for instances embeds an address   </span>
<span class="go">&lt;C object at 0x00AC18F0&gt;</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#doctest.ELLIPSIS" title="doctest.ELLIPSIS"><code class="xref py py-const docutils literal notranslate"><span class="pre">ELLIPSIS</span></code></a> directive gives a nice approach for the last example:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">C</span><span class="p">()</span>  <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">&lt;C object at 0x...&gt;</span>
</pre></div>
</div>
<p>Los números de coma flotante también son sujetos a pequeñas variaciones de la salida a través de las plataformas, porque Python defiere a la librería C de la plataforma para el formato de flotantes, y las librerías de C varían extensamente en calidad aquí.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="mf">1.</span><span class="o">/</span><span class="mi">7</span>  <span class="c1"># risky</span>
<span class="go">0.14285714285714285</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="mf">1.</span><span class="o">/</span><span class="mi">7</span><span class="p">)</span> <span class="c1"># safer</span>
<span class="go">0.142857142857</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="mf">1.</span><span class="o">/</span><span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span> <span class="c1"># much safer</span>
<span class="go">0.142857</span>
</pre></div>
</div>
<p>Números de la forma <code class="docutils literal notranslate"><span class="pre">I/2.**J</span></code> son seguros a lo largo de todas las plataformas, y yo frecuentemente planeo ejemplos de doctest para producir números de esa forma:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="mf">3.</span><span class="o">/</span><span class="mi">4</span>  <span class="c1"># utterly safe</span>
<span class="go">0.75</span>
</pre></div>
</div>
<p>Las facciones simples también son más fáciles de entender para las personas, y eso conduce a una mejor documentación.</p>
</section>
</section>
<section id="basic-api">
<span id="doctest-basic-api"></span><h2>API básica<a class="headerlink" href="#basic-api" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Las funciones <a class="reference internal" href="#doctest.testmod" title="doctest.testmod"><code class="xref py py-func docutils literal notranslate"><span class="pre">testmod()</span></code></a> y <a class="reference internal" href="#doctest.testfile" title="doctest.testfile"><code class="xref py py-func docutils literal notranslate"><span class="pre">testfile()</span></code></a> proporcionan una interfaz simple para doctest que debe ser suficiente para la mayoría de los usos básicos. Para una introducción menos formal a estas funciones, véase las secciones <a class="reference internal" href="#doctest-simple-testmod"><span class="std std-ref">Uso simple: verificar ejemplos en docstrings</span></a> y <a class="reference internal" href="#doctest-simple-testfile"><span class="std std-ref">Uso Simple: Verificar ejemplos en un Archivo de Texto</span></a>.</p>
<dl class="py function">
<dt id="doctest.testfile">
<code class="sig-prename descclassname">doctest.</code><code class="sig-name descname">testfile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">module_relative</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">package</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">globs</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">report</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">optionflags</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">extraglobs</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">raise_on_error</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">parser</span><span class="o">=</span><span class="default_value">DocTestParser()</span></em>, <em class="sig-param"><span class="n">encoding</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#doctest.testfile" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Todos los argumentos excepto <em>filename</em> son opcionales, y deben ser especificados en forma de palabras claves.</p>
<p>Prueba los ejemplos en el archivo con nombre <em>filename</em>. Retorna <code class="docutils literal notranslate"><span class="pre">(failure_count,</span> <span class="pre">test_count)</span></code>.</p>
<p>El argumento opcional <em>module_relative</em> especifica cómo el nombre de archivo debe ser interpretado:</p>
<ul class="simple">
<li><p>Si <em>module_relative</em> es <code class="docutils literal notranslate"><span class="pre">True</span></code> (el valor por defecto), entonces <em>filename</em> especifica una ruta relativa al módulo que es independiente del SO. Por defecto, esta ruta es relativa al directorio del módulo que lo invoca; pero si el argumento <em>package</em> es especificado, entonces es relativo a ese paquete. Para asegurar la independencia del SO, <em>filename</em> debe usar caracteres <code class="docutils literal notranslate"><span class="pre">/</span></code> para separar segmentos, y no puede ser una ruta absoluta (por ejemplo., no puede empezar con <code class="docutils literal notranslate"><span class="pre">/</span></code>).</p></li>
<li><p>Si <em>module_relative</em> es <code class="docutils literal notranslate"><span class="pre">False</span></code>, entonces <em>filename</em> especifica una ruta especifica del SO. La ruta puede ser absoluta o relativa; las rutas relativas son resueltas con respecto al directorio de trabajo actual.</p></li>
</ul>
<p>El argumento opcional <em>name</em> proporciona el nombre de la prueba; por defecto, o si es <code class="docutils literal notranslate"><span class="pre">None</span></code>, se usa <code class="docutils literal notranslate"><span class="pre">os.path.basename(filename)</span></code>.</p>
<p>El argumento opcional <em>package</em> es un paquete de Python o el nombre de una paquete de Python cuyo directorio debe ser usado como el directorio base para un nombre de archivo relativo al módulo. Si no se especifica ningún paquete, entonces el directorio del módulo que invoca se usa como el directorio base para los nombres de archivos relativos al módulo. Es un error especificar <em>package</em> si <em>module_relative</em> es <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<p>El argumento opcional <em>globs</em> proporciona un diccionario a ser usado como los globales cuando se ejecuten los ejemplos. Se crea una nueva copia superficial de este diccionario para el doctest, por lo que sus ejemplos empiezan con una pizarra en blanco. Por defecto, o si es <code class="docutils literal notranslate"><span class="pre">None</span></code>, se usa un nuevo diccionario vacío.</p>
<p>El argumento opcional <em>extraglobs</em> proporciona un diccionario mezclado con los globales usados para ejecutar ejemplos. Funciona como <a class="reference internal" href="stdtypes.html#dict.update" title="dict.update"><code class="xref py py-meth docutils literal notranslate"><span class="pre">dict.update()</span></code></a>: si <em>globs</em> y <em>extraglobs</em> tienen una clave en común, el valor asociado en <em>extraglobs</em> aparece en el diccionario combinado. Por defecto, o si es <code class="docutils literal notranslate"><span class="pre">None</span></code>, no se usa ninguna variable global. Es una característica avanzada que permite la parametrización de doctests. Por ejemplo, un doctest puede ser escribo para una clase base, usando un nombre genérico para la clase, y luego reusado para probar cualquier número de clases heredadas al pasar un diccionario de <em>extraglobs</em> mapeando el nombre genérico a la clase heredada para ser probada.</p>
<p>El argumento opcional <em>verbose</em> imprime un montón de cosas si es verdadero, e imprime sólo las fallas si es falso; por defecto, o si es <code class="docutils literal notranslate"><span class="pre">None</span></code>, es verdadero si y sólo si <code class="docutils literal notranslate"><span class="pre">'-v'</span></code> está en <code class="docutils literal notranslate"><span class="pre">sys.argv</span></code>.</p>
<p>El argumento opcional <em>report</em> imprime un resumen al final cuando es verdadero; si no, no imprime nada al final. En modo verboso (<em>verbose</em>), el resumen es detallado; si no, el resumen es muy corto (de hecho, vacío si todos las pruebas pasan).</p>
<p>El argumento opcional <em>optionflags</em> (valor por defecto 0) toma las banderas de opciones <a class="reference internal" href="../reference/expressions.html#bitwise"><span class="std std-ref">juntadas lógicamente por un OR</span></a>. Véase la sección <a class="reference internal" href="#doctest-options"><span class="std std-ref">Banderas de Opción</span></a>.</p>
<p>El argumento opcional <em>raise_on_error</em> tiene como valor por defecto <em>false</em>. Si es <em>true</em>, se lanza una excepción sobre la primera falla o excepción no esperada en un ejemplo. Esto permite que los fallos sean depurados en un análisis a posteriori. El comportamiento por defecto es continuar corriendo los ejemplos.</p>
<p>El argumento opcional <em>parser</em> especifica un <a class="reference internal" href="#doctest.DocTestParser" title="doctest.DocTestParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTestParser</span></code></a> (o subclase) que debe ser usado para extraer las pruebas de los archivos. Su valor por defecto es un analizador sintáctico normal (i.e., <code class="docutils literal notranslate"><span class="pre">DocTestParser()</span></code>).</p>
<p>El argumento opcional <em>encoding</em> especifica una codificación que debe ser usada para convertir el archivo a <em>unicode</em>.</p>
</dd></dl>

<dl class="py function">
<dt id="doctest.testmod">
<code class="sig-prename descclassname">doctest.</code><code class="sig-name descname">testmod</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">m</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">globs</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">report</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">optionflags</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">extraglobs</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">raise_on_error</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">exclude_empty</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#doctest.testmod" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Todos los argumentos son opcionales, y todos excepto por <em>m</em> deben ser especificados en forma de palabras claves.</p>
<p>Prueba los ejemplos en los docstring de las funciones y clases alcanzables desde el módulo <em>m</em> (o desde el módulo <a class="reference internal" href="__main__.html#module-__main__" title="__main__: The environment where top-level code is run. Covers command-line interfaces, import-time behavior, and ``__name__ == '__main__'``."><code class="xref py py-mod docutils literal notranslate"><span class="pre">__main__</span></code></a> si <em>m</em> no es proporcionado o es <code class="docutils literal notranslate"><span class="pre">None</span></code>), empezando con <code class="docutils literal notranslate"><span class="pre">m.__doc__</span></code>.</p>
<p>También prueba los ejemplos alcanzables desde el diccionario de <code class="docutils literal notranslate"><span class="pre">m.__test__</span></code>, si existe y no es <code class="docutils literal notranslate"><span class="pre">None</span></code>. <code class="docutils literal notranslate"><span class="pre">m.__test__</span></code> mapea los nombres (cadenas de caracteres) a funciones, clases y cadenas de caracteres; se buscan los ejemplos de las funciones y clases; se buscan las cadenas de caracteres directamente como si fueran docstrings.</p>
<p>Sólo se buscan los docstrings anexados a los objetos pertenecientes al módulo <em>m</em>.</p>
<p>Retorna <code class="docutils literal notranslate"><span class="pre">(failure_count,</span> <span class="pre">test_count)</span></code>.</p>
<p>El argumento opcional <em>name</em> proporciona el nombre del módulo; por defecto, o si es <code class="docutils literal notranslate"><span class="pre">None</span></code>, se usa <code class="docutils literal notranslate"><span class="pre">m.__name__</span></code>.</p>
<p>El argumento opcional <em>exclude_empty</em> es por defecto <em>false</em>. Si es verdadero, se excluyen los objetos por los cuales no se encuentren doctest. El valor por defecto es un <em>hack</em> de compatibilidad hacia atrás, por lo que el código que use <code class="xref py py-meth docutils literal notranslate"><span class="pre">doctest.master.summarize()</span></code> en conjunto con <a class="reference internal" href="#doctest.testmod" title="doctest.testmod"><code class="xref py py-func docutils literal notranslate"><span class="pre">testmod()</span></code></a> continua obteniendo la salida para objetos sin pruebas. El argumento <em>exclude_empty</em> para el más nuevo constructor <a class="reference internal" href="#doctest.DocTestFinder" title="doctest.DocTestFinder"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTestFinder</span></code></a> es por defecto verdadero.</p>
<p>Los argumentos opcionales <em>extraglobs</em>, <em>verbose</em>, <em>report</em>, <em>optionflags</em>, <em>raise_on_error</em>, y <em>globs</em> son los mismos en cuanto a la función <a class="reference internal" href="#doctest.testfile" title="doctest.testfile"><code class="xref py py-func docutils literal notranslate"><span class="pre">testfile()</span></code></a> arriba, excepto que <em>globs</em> es por defecto <code class="docutils literal notranslate"><span class="pre">m.__dict__</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt id="doctest.run_docstring_examples">
<code class="sig-prename descclassname">doctest.</code><code class="sig-name descname">run_docstring_examples</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">f</span></em>, <em class="sig-param"><span class="n">globs</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">'NoName'</span></em>, <em class="sig-param"><span class="n">compileflags</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">optionflags</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#doctest.run_docstring_examples" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Prueba los ejemplos asociados con el objeto <em>f</em>; por ejemplo, <em>f</em> puede ser una cadena de caracteres, un módulo, una función, o un objeto clase.</p>
<p>Una copia superficial del diccionario del argumento <em>globs</em> se usa para la ejecución del contexto.</p>
<p>Se usa el argumento opcional <em>name</em> en mensajes de fallos, y por defecto es <code class="docutils literal notranslate"><span class="pre">&quot;NoName&quot;</span></code>.</p>
<p>Si el argumento opcional <em>verbose</em> es verdadero, la salida se genera incluso si no hay fallas. Por defecto, la salida se genera sólo en caso de la falla de un ejemplo.</p>
<p>El argumento opcional <em>compileflags</em> proporciona el conjunto de banderas que se deben usar por el compilador de Python cuando se corran los ejemplos. Por defecto, o si es <code class="docutils literal notranslate"><span class="pre">None</span></code>, las banderas se deducen correspondiendo al conjunto de características futuras encontradas en <em>globs</em>.</p>
<p>El argumento opcional <em>optionflags</em> trabaja con respecto a la función <a class="reference internal" href="#doctest.testfile" title="doctest.testfile"><code class="xref py py-func docutils literal notranslate"><span class="pre">testfile()</span></code></a> de arriba.</p>
</dd></dl>

</section>
<section id="unittest-api">
<span id="doctest-unittest-api"></span><h2>API de unittest<a class="headerlink" href="#unittest-api" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Mientras crece tu colección de módulos probados con doctest, vas a querer una forma de ejecutar todos sus doctests sistemáticamente. <a class="reference internal" href="#module-doctest" title="doctest: Test pieces of code within docstrings."><code class="xref py py-mod docutils literal notranslate"><span class="pre">doctest</span></code></a> proporciona dos funciones que se pueden usar para crear un banco de pruebas (<em>test suite</em>) de <a class="reference internal" href="unittest.html#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal notranslate"><span class="pre">unittest</span></code></a> desde módulos y archivos de texto que contienen doctests. Para integrarse con el descubrimiento de pruebas de <a class="reference internal" href="unittest.html#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal notranslate"><span class="pre">unittest</span></code></a> , incluye una función  <code class="xref py py-func docutils literal notranslate"><span class="pre">load_tests()</span></code> en tu módulo de pruebas:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">import</span> <span class="nn">doctest</span>
<span class="kn">import</span> <span class="nn">my_module_with_doctests</span>

<span class="k">def</span> <span class="nf">load_tests</span><span class="p">(</span><span class="n">loader</span><span class="p">,</span> <span class="n">tests</span><span class="p">,</span> <span class="n">ignore</span><span class="p">):</span>
    <span class="n">tests</span><span class="o">.</span><span class="n">addTests</span><span class="p">(</span><span class="n">doctest</span><span class="o">.</span><span class="n">DocTestSuite</span><span class="p">(</span><span class="n">my_module_with_doctests</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">tests</span>
</pre></div>
</div>
<p>Hay dos funciones principales para crear instancias de <a class="reference internal" href="unittest.html#unittest.TestSuite" title="unittest.TestSuite"><code class="xref py py-class docutils literal notranslate"><span class="pre">unittest.TestSuite</span></code></a> desde los archivos de texto y módulos con doctests:</p>
<dl class="py function">
<dt id="doctest.DocFileSuite">
<code class="sig-prename descclassname">doctest.</code><code class="sig-name descname">DocFileSuite</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">paths</span></em>, <em class="sig-param"><span class="n">module_relative</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">package</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">setUp</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">tearDown</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">globs</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">optionflags</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">parser</span><span class="o">=</span><span class="default_value">DocTestParser()</span></em>, <em class="sig-param"><span class="n">encoding</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#doctest.DocFileSuite" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Convierte las pruebas de doctest de uno o más archivos de texto a una <a class="reference internal" href="unittest.html#unittest.TestSuite" title="unittest.TestSuite"><code class="xref py py-class docutils literal notranslate"><span class="pre">unittest.TestSuite</span></code></a>.</p>
<p>El <a class="reference internal" href="unittest.html#unittest.TestSuite" title="unittest.TestSuite"><code class="xref py py-class docutils literal notranslate"><span class="pre">unittest.TestSuite</span></code></a> que se retorne será ejecutado por el framework de unittest y ejecuta los ejemplos interactivos en cada archivo. Si un ejemplo en cualquier archivo falla, entonces la prueba unitaria sintetizada falla, y una excepción <code class="xref py py-exc docutils literal notranslate"><span class="pre">failureException</span></code> se lanza mostrando el nombre del archivo conteniendo la prueba y un número de línea (algunas veces aproximado).</p>
<p>Pasa una o más rutas (como cadenas de caracteres) a archivos de texto para ser examinados.</p>
<p>Se pueden proporcionar las opciones como argumentos por palabra clave:</p>
<p>El argumento opcional <em>module_relative</em> especifica cómo los nombres de archivos en <em>paths</em> se deben interpretar:</p>
<ul class="simple">
<li><p>Si <em>module_relative</em> is <code class="docutils literal notranslate"><span class="pre">True</span></code> (el  valor por defecto), entonces cada archivo de nombre en <em>paths</em> especifica una ruta relativa al módulo independiente del SO. Por defecto, esta ruta es relativa al directorio del módulo lo está invocando; pero si se especifica el argumento <em>package</em>, entonces es relativo a ese paquete. Para asegurar la independencia del SO, cada nombre de archivo debe usar caracteres <code class="docutils literal notranslate"><span class="pre">/</span></code> para separar los segmentos de rutas, y puede no ser una ruta absoluta (i.e., puede no empezar con <code class="docutils literal notranslate"><span class="pre">/</span></code>).</p></li>
<li><p>Si <em>module_relative</em> es <code class="docutils literal notranslate"><span class="pre">False</span></code>, entonces cada archivo de nombre en <em>paths</em> especifica una ruta especifica al SO. La ruta puede ser absoluta o relativa; las rutas relativas son resueltas con respecto a directorio de trabajo actual.</p></li>
</ul>
<p>El argumento opcional <em>package</em> es un paquete de Python o el nombre de un paquete de Python cuyo directorio debe ser usado como el directorio base para los nombres de archivos relativos al módulo en <em>paths</em>. Si no se especifica ningún paquete, entonces el directorio del módulo que lo está invocando se usa como el directorio base para los archivos de nombres relativos al módulo. Es un error especificar <em>package</em> si <em>module_relative</em> es <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<p>El argumento opcional <em>setUp</em> especifica una función de configuración para el banco de pruebas. Es invocado antes de ejecutar las pruebas en cada archivo. La función <em>setUp</em> se pasará a un objeto <a class="reference internal" href="#doctest.DocTest" title="doctest.DocTest"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTest</span></code></a>. La función <em>setUp</em> puede acceder a las variables globales de prueba como el atributo <em>globs</em> de la prueba pasada.</p>
<p>El argumento opcional <em>tearDown</em> especifica una función de destrucción para el banco de pruebas. Es invocado después de ejecutar las pruebas en cada archivo. Se pasará un objeto <a class="reference internal" href="#doctest.DocTest" title="doctest.DocTest"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTest</span></code></a> a la función <em>tearDown</em>. La función <em>setUp</em> de configuración puede acceder a los globales de la prueba como el atributo <em>globs</em> de la prueba pasada.</p>
<p>El argumento opcional <em>globs</em> es un diccionario que contiene las variables globales iniciales para las pruebas. Se crea una nueva copia de este diccionario para cada prueba. Por defecto, <em>globs</em> es un nuevo diccionario vacío.</p>
<p>El argumento opcional <em>optionflags</em> especifica las opciones de doctest por defecto para las pruebas, creado al juntar lógicamente las opciones de bandera individuales. Véase la sección <a class="reference internal" href="#doctest-options"><span class="std std-ref">Banderas de Opción</span></a>. Véase la función <a class="reference internal" href="#doctest.set_unittest_reportflags" title="doctest.set_unittest_reportflags"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_unittest_reportflags()</span></code></a> abajo para una mejor manera de definir las opciones de informe.</p>
<p>El argumento opcional <em>parser</em> especifica un <a class="reference internal" href="#doctest.DocTestParser" title="doctest.DocTestParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTestParser</span></code></a> (o subclase) que debe ser usado para extraer las pruebas de los archivos. Su valor por defecto es un analizador sintáctico normal (i.e., <code class="docutils literal notranslate"><span class="pre">DocTestParser()</span></code>).</p>
<p>El argumento opcional <em>encoding</em> especifica una codificación que debe ser usada para convertir el archivo a <em>unicode</em>.</p>
<p>Se añade el global <code class="docutils literal notranslate"><span class="pre">__file__</span></code> a los globales proporcionados a los doctests cargados desde un archivo de texto usando <a class="reference internal" href="#doctest.DocFileSuite" title="doctest.DocFileSuite"><code class="xref py py-func docutils literal notranslate"><span class="pre">DocFileSuite()</span></code></a>.</p>
</dd></dl>

<dl class="py function">
<dt id="doctest.DocTestSuite">
<code class="sig-prename descclassname">doctest.</code><code class="sig-name descname">DocTestSuite</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">module</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">globs</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">extraglobs</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">test_finder</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">setUp</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">tearDown</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">checker</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#doctest.DocTestSuite" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Convierte las pruebas de doctest para un módulo a un  <a class="reference internal" href="unittest.html#unittest.TestSuite" title="unittest.TestSuite"><code class="xref py py-class docutils literal notranslate"><span class="pre">unittest.TestSuite</span></code></a>.</p>
<p>El <a class="reference internal" href="unittest.html#unittest.TestSuite" title="unittest.TestSuite"><code class="xref py py-class docutils literal notranslate"><span class="pre">unittest.TestSuite</span></code></a> que se retorne será ejecutado por el framework de unittest y corre cada doctest en el módulo. Si cualquiera de los doctests falla, entonces la prueba unitaria combinada falla, y se lanza una excepción <code class="xref py py-exc docutils literal notranslate"><span class="pre">failureException</span></code> mostrando el nombre del archivo que contiene la prueba y un número de línea (a veces aproximado).</p>
<p>El argumento opcional <em>module</em> proporciona el módulo a probar. Puede ser un objeto de módulo o un nombre (posiblemente punteado)  de módulo. Si no se especifica, se usa el módulo que invoca esta función.</p>
<p>El argumento opcional <em>globs</em> es un diccionario que contiene las variables globales iniciales para las pruebas. Se crea una nueva copia de este diccionario para cada prueba. Por defecto, <em>globs</em> es un nuevo diccionario vacío.</p>
<p>El argumento opcional <em>extraglobs</em> especifica un conjunto de variables globales adicionales que son mezcladas con <em>globs</em>. Por defecto, no se usa ningún global adicional.</p>
<p>El argumento opcional <em>test_finder</em> es el objeto <a class="reference internal" href="#doctest.DocTestFinder" title="doctest.DocTestFinder"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTestFinder</span></code></a> (o un reemplazo directo) que se usa para extraer doctests desde el módulo.</p>
<p>Los argumentos opcionales <em>setUp</em>, <em>tearDown</em>, y <em>optionflags</em> son lo mismo con respecto a la función <a class="reference internal" href="#doctest.DocFileSuite" title="doctest.DocFileSuite"><code class="xref py py-func docutils literal notranslate"><span class="pre">DocFileSuite()</span></code></a> arriba.</p>
<p>Esta función usa la misma técnica de búsqueda que <a class="reference internal" href="#doctest.testmod" title="doctest.testmod"><code class="xref py py-func docutils literal notranslate"><span class="pre">testmod()</span></code></a>.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Distinto en la versión 3.5: </span><a class="reference internal" href="#doctest.DocTestSuite" title="doctest.DocTestSuite"><code class="xref py py-func docutils literal notranslate"><span class="pre">DocTestSuite()</span></code></a> retorna un <a class="reference internal" href="unittest.html#unittest.TestSuite" title="unittest.TestSuite"><code class="xref py py-class docutils literal notranslate"><span class="pre">unittest.TestSuite</span></code></a> vacío si <em>module</em> no contiene ningún docstring en vez de lanzar  un <a class="reference internal" href="exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a>.</p>
</div>
</dd></dl>

<p>Por detrás, <a class="reference internal" href="#doctest.DocTestSuite" title="doctest.DocTestSuite"><code class="xref py py-func docutils literal notranslate"><span class="pre">DocTestSuite()</span></code></a> crea un <a class="reference internal" href="unittest.html#unittest.TestSuite" title="unittest.TestSuite"><code class="xref py py-class docutils literal notranslate"><span class="pre">unittest.TestSuite</span></code></a> de las instancias de <code class="xref py py-class docutils literal notranslate"><span class="pre">doctest.DocTestCase</span></code>, y <code class="xref py py-class docutils literal notranslate"><span class="pre">DocTestCase</span></code> es una subclase de <a class="reference internal" href="unittest.html#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal notranslate"><span class="pre">unittest.TestCase</span></code></a>. <code class="xref py py-class docutils literal notranslate"><span class="pre">DocTestCase</span></code> no está documentado aquí (es un detalle interno), pero estudiar su código puede responder preguntas sobre los detalles exactos de la integración de <a class="reference internal" href="unittest.html#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal notranslate"><span class="pre">unittest</span></code></a>.</p>
<p>De manera similar, <a class="reference internal" href="#doctest.DocFileSuite" title="doctest.DocFileSuite"><code class="xref py py-func docutils literal notranslate"><span class="pre">DocFileSuite()</span></code></a> crea un  <a class="reference internal" href="unittest.html#unittest.TestSuite" title="unittest.TestSuite"><code class="xref py py-class docutils literal notranslate"><span class="pre">unittest.TestSuite</span></code></a> de las instancias de <code class="xref py py-class docutils literal notranslate"><span class="pre">doctest.DocFileCase</span></code>, y <code class="xref py py-class docutils literal notranslate"><span class="pre">DocFileCase</span></code> es una subclase de  <code class="xref py py-class docutils literal notranslate"><span class="pre">DocTestCase</span></code>.</p>
<p>Por lo que ambas formas de crear un <a class="reference internal" href="unittest.html#unittest.TestSuite" title="unittest.TestSuite"><code class="xref py py-class docutils literal notranslate"><span class="pre">unittest.TestSuite</span></code></a> ejecutan instancias de <code class="xref py py-class docutils literal notranslate"><span class="pre">DocTestCase</span></code>. Esto es importante por una razón sutil: cuando ejecutas las funciones de <a class="reference internal" href="#module-doctest" title="doctest: Test pieces of code within docstrings."><code class="xref py py-mod docutils literal notranslate"><span class="pre">doctest</span></code></a> por ti mismo, puedes controlar las opciones de <a class="reference internal" href="#module-doctest" title="doctest: Test pieces of code within docstrings."><code class="xref py py-mod docutils literal notranslate"><span class="pre">doctest</span></code></a> en uso directamente, al pasar las banderas de opciones a las funciones de <a class="reference internal" href="#module-doctest" title="doctest: Test pieces of code within docstrings."><code class="xref py py-mod docutils literal notranslate"><span class="pre">doctest</span></code></a>. Sin embargo, si estás escribiendo un framework de <a class="reference internal" href="unittest.html#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal notranslate"><span class="pre">unittest</span></code></a>, básicamente <a class="reference internal" href="unittest.html#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal notranslate"><span class="pre">unittest</span></code></a> controla cuándo y cómo se ejecutan las pruebas. El autor del framework típicamente, quiere controlar las opciones de reporte de <a class="reference internal" href="#module-doctest" title="doctest: Test pieces of code within docstrings."><code class="xref py py-mod docutils literal notranslate"><span class="pre">doctest</span></code></a> (quizás, p.ej., especificadas por las opciones de la línea de comandos), pero no hay forma de pasar opciones a través de <a class="reference internal" href="unittest.html#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal notranslate"><span class="pre">unittest</span></code></a> al probador de ejecución (<em>test runner</em>) de <a class="reference internal" href="#module-doctest" title="doctest: Test pieces of code within docstrings."><code class="xref py py-mod docutils literal notranslate"><span class="pre">doctest</span></code></a>.</p>
<p>Por esta razón, <a class="reference internal" href="#module-doctest" title="doctest: Test pieces of code within docstrings."><code class="xref py py-mod docutils literal notranslate"><span class="pre">doctest</span></code></a> también admite una noción de banderas de informe de <a class="reference internal" href="#module-doctest" title="doctest: Test pieces of code within docstrings."><code class="xref py py-mod docutils literal notranslate"><span class="pre">doctest</span></code></a> específicas para la compatibilidad con <a class="reference internal" href="unittest.html#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal notranslate"><span class="pre">unittest</span></code></a>, a través de esta función:</p>
<dl class="py function">
<dt id="doctest.set_unittest_reportflags">
<code class="sig-prename descclassname">doctest.</code><code class="sig-name descname">set_unittest_reportflags</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">flags</span></em><span class="sig-paren">)</span><a class="headerlink" href="#doctest.set_unittest_reportflags" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Establece las banderas de informe de <a class="reference internal" href="#module-doctest" title="doctest: Test pieces of code within docstrings."><code class="xref py py-mod docutils literal notranslate"><span class="pre">doctest</span></code></a> a usar.</p>
<p>El argumento <em>flags</em> toma la <a class="reference internal" href="../reference/expressions.html#bitwise"><span class="std std-ref">combinación por el operador OR</span></a> de las banderas de opciones. Véase la sección <a class="reference internal" href="#doctest-options"><span class="std std-ref">Banderas de Opción</span></a>. Sólo se pueden usar las «banderas de informe».</p>
<p>Esta es una configuración global del módulo, y afecta a todos los doctests futuros a ejecutar por <a class="reference internal" href="unittest.html#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal notranslate"><span class="pre">unittest</span></code></a>: el método <code class="xref py py-meth docutils literal notranslate"><span class="pre">runTest()</span></code> de <code class="xref py py-class docutils literal notranslate"><span class="pre">DocTestCase</span></code> revisa las banderas de opciones especificadas para el caso de prueba cuando la instancia de <code class="xref py py-class docutils literal notranslate"><span class="pre">DocTestCase</span></code> fue construida. Si no se especificó ninguna bandera de informe (que es el caso típico y esperado), las banderas de informe -pertenecientes a <a class="reference internal" href="#module-doctest" title="doctest: Test pieces of code within docstrings."><code class="xref py py-mod docutils literal notranslate"><span class="pre">doctest</span></code></a>- de <a class="reference internal" href="unittest.html#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal notranslate"><span class="pre">unittest</span></code></a> son <a class="reference internal" href="../reference/expressions.html#bitwise"><span class="std std-ref">combinadas por la operación Or</span></a> en las banderas de opciones, y las banderas de opciones aumentadas se pasan a la instancia de <a class="reference internal" href="#doctest.DocTestRunner" title="doctest.DocTestRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTestRunner</span></code></a> creada para ejecutar los doctest. Si se especificó alguna bandera de informe cuando el <code class="xref py py-class docutils literal notranslate"><span class="pre">DocTestCase</span></code> fue construido, se ignoran las banderas de informe -pertenecientes a <a class="reference internal" href="#module-doctest" title="doctest: Test pieces of code within docstrings."><code class="xref py py-mod docutils literal notranslate"><span class="pre">doctest</span></code></a>- de <a class="reference internal" href="unittest.html#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal notranslate"><span class="pre">unittest</span></code></a>.</p>
<p>La función retorna el valor de las banderas de informe de <a class="reference internal" href="unittest.html#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal notranslate"><span class="pre">unittest</span></code></a> en efecto antes de que la función fuera invocada.</p>
</dd></dl>

</section>
<section id="advanced-api">
<span id="doctest-advanced-api"></span><h2>API avanzada<a class="headerlink" href="#advanced-api" title="Enlazar permanentemente con este título">¶</a></h2>
<p>La API básica es un simple envoltorio que sirve para hacer los doctest fáciles de usar. Es bastante flexible, y debe cumplir las necesidades de la mayoría de los usuarios; si requieres un control más preciso en las pruebas, o deseas extender las capacidades de doctest, entonces debes usar la API avanzada.</p>
<p>La API avanzada gira en torno a dos clases contenedoras, que se usan para guardar los ejemplos interactivos extraídos de los casos doctest:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#doctest.Example" title="doctest.Example"><code class="xref py py-class docutils literal notranslate"><span class="pre">Example</span></code></a>: Un <a class="reference internal" href="../glossary.html#term-statement"><span class="xref std std-term">statement</span></a> de Python, emparejado con su salida esperada.</p></li>
<li><p><a class="reference internal" href="#doctest.DocTest" title="doctest.DocTest"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTest</span></code></a>: Una colección de clases <a class="reference internal" href="#doctest.Example" title="doctest.Example"><code class="xref py py-class docutils literal notranslate"><span class="pre">Example</span></code></a>, típicamente extraídos de un sólo docstring o archivo de texto.</p></li>
</ul>
<p>Se definen clases de procesamiento adicionales para encontrar, analizar sintácticamente, y ejecutar, y comprobar ejemplos de doctest:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#doctest.DocTestFinder" title="doctest.DocTestFinder"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTestFinder</span></code></a>: Encuentra todos los docstrings en un módulo dado, y usa un <a class="reference internal" href="#doctest.DocTestParser" title="doctest.DocTestParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTestParser</span></code></a> para crear un <a class="reference internal" href="#doctest.DocTest" title="doctest.DocTest"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTest</span></code></a> de cada docstring que contiene ejemplos interactivos.</p></li>
<li><p><a class="reference internal" href="#doctest.DocTestParser" title="doctest.DocTestParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTestParser</span></code></a>: Crea un objeto <a class="reference internal" href="#doctest.DocTest" title="doctest.DocTest"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTest</span></code></a> de una cadena de caracteres (tal como un docstring de un objeto).</p></li>
<li><p><a class="reference internal" href="#doctest.DocTestRunner" title="doctest.DocTestRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTestRunner</span></code></a>: Ejecuta los ejemplos en un <a class="reference internal" href="#doctest.DocTest" title="doctest.DocTest"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTest</span></code></a>, y usa un <a class="reference internal" href="#doctest.OutputChecker" title="doctest.OutputChecker"><code class="xref py py-class docutils literal notranslate"><span class="pre">OutputChecker</span></code></a> para verificar su salida.</p></li>
<li><p><a class="reference internal" href="#doctest.OutputChecker" title="doctest.OutputChecker"><code class="xref py py-class docutils literal notranslate"><span class="pre">OutputChecker</span></code></a>: Compara la salida real de un ejemplo de doctest con la salida esperada, y decide si coinciden.</p></li>
</ul>
<p>Las relaciones entre estas clases de procesamiento se resumen en el siguiente diagrama:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span>                            <span class="nb">list</span> <span class="n">of</span><span class="p">:</span>
<span class="o">+------+</span>                   <span class="o">+---------+</span>
<span class="o">|</span><span class="n">module</span><span class="o">|</span> <span class="o">--</span><span class="n">DocTestFinder</span><span class="o">-&gt;</span> <span class="o">|</span> <span class="n">DocTest</span> <span class="o">|</span> <span class="o">--</span><span class="n">DocTestRunner</span><span class="o">-&gt;</span> <span class="n">results</span>
<span class="o">+------+</span>    <span class="o">|</span>        <span class="o">^</span>     <span class="o">+---------+</span>     <span class="o">|</span>       <span class="o">^</span>    <span class="p">(</span><span class="n">printed</span><span class="p">)</span>
            <span class="o">|</span>        <span class="o">|</span>     <span class="o">|</span> <span class="n">Example</span> <span class="o">|</span>     <span class="o">|</span>       <span class="o">|</span>
            <span class="n">v</span>        <span class="o">|</span>     <span class="o">|</span>   <span class="o">...</span>   <span class="o">|</span>     <span class="n">v</span>       <span class="o">|</span>
           <span class="n">DocTestParser</span>   <span class="o">|</span> <span class="n">Example</span> <span class="o">|</span>   <span class="n">OutputChecker</span>
                           <span class="o">+---------+</span>
</pre></div>
</div>
<section id="doctest-objects">
<span id="doctest-doctest"></span><h3>Objetos DocTest<a class="headerlink" href="#doctest-objects" title="Enlazar permanentemente con este título">¶</a></h3>
<dl class="py class">
<dt id="doctest.DocTest">
<em class="property">class </em><code class="sig-prename descclassname">doctest.</code><code class="sig-name descname">DocTest</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">examples</span></em>, <em class="sig-param"><span class="n">globs</span></em>, <em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">lineno</span></em>, <em class="sig-param"><span class="n">docstring</span></em><span class="sig-paren">)</span><a class="headerlink" href="#doctest.DocTest" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Una colección de ejemplos de doctest que deben ejecutarse en un sólo nombre de espacios. Se usan los argumentos del constructor para inicializar los atributos de los mismos nombres.</p>
<p><a class="reference internal" href="#doctest.DocTest" title="doctest.DocTest"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTest</span></code></a> define los siguientes atributos. Son inicializados por el constructor, y no deben ser modificados directamente.</p>
<dl class="py attribute">
<dt id="doctest.DocTest.examples">
<code class="sig-name descname">examples</code><a class="headerlink" href="#doctest.DocTest.examples" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Una lista de objetos <a class="reference internal" href="#doctest.Example" title="doctest.Example"><code class="xref py py-class docutils literal notranslate"><span class="pre">Example</span></code></a> codificando los ejemplos interactivos de Python individuales que esta prueba debe ejecutar.</p>
</dd></dl>

<dl class="py attribute">
<dt id="doctest.DocTest.globs">
<code class="sig-name descname">globs</code><a class="headerlink" href="#doctest.DocTest.globs" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>El nombre de espacios (alias <em>globals</em>) en que los ejemplos se deben ejecutar. Este es un diccionario que mapea nombres a valores. Cualquier cambio al nombre de espacios hecho por los ejemplos (tal como juntar nuevas variables) se reflejará en <a class="reference internal" href="#doctest.DocTest.globs" title="doctest.DocTest.globs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">globs</span></code></a> después de que se ejecute la prueba.</p>
</dd></dl>

<dl class="py attribute">
<dt id="doctest.DocTest.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#doctest.DocTest.name" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Un nombre de cadena de caracteres que identifica el <a class="reference internal" href="#doctest.DocTest" title="doctest.DocTest"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTest</span></code></a>. Normalmente, este es el nombre del objeto o archivo del que se extrajo la prueba.</p>
</dd></dl>

<dl class="py attribute">
<dt id="doctest.DocTest.filename">
<code class="sig-name descname">filename</code><a class="headerlink" href="#doctest.DocTest.filename" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>El nombre del archivo del que se extrajo este <a class="reference internal" href="#doctest.DocTest" title="doctest.DocTest"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTest</span></code></a>; o <code class="docutils literal notranslate"><span class="pre">None</span></code> si el nombre del archivo se desconoce, o si <a class="reference internal" href="#doctest.DocTest" title="doctest.DocTest"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTest</span></code></a> no se extrajo de un archivo.</p>
</dd></dl>

<dl class="py attribute">
<dt id="doctest.DocTest.lineno">
<code class="sig-name descname">lineno</code><a class="headerlink" href="#doctest.DocTest.lineno" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>El número de línea dentro de <a class="reference internal" href="#doctest.DocTest.filename" title="doctest.DocTest.filename"><code class="xref py py-attr docutils literal notranslate"><span class="pre">filename</span></code></a> donde este <a class="reference internal" href="#doctest.DocTest" title="doctest.DocTest"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTest</span></code></a> comienza, o <code class="docutils literal notranslate"><span class="pre">None</span></code> si el número de línea no está disponible. Este número de línea es comienza en 0 con respecto al comienzo del archivo.</p>
</dd></dl>

<dl class="py attribute">
<dt id="doctest.DocTest.docstring">
<code class="sig-name descname">docstring</code><a class="headerlink" href="#doctest.DocTest.docstring" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>La cadena de caracteres del que se extrajo la cadena, o <code class="docutils literal notranslate"><span class="pre">None</span></code> si la cadena no está disponible, o si la prueba no se extrajo de una cadena de caracteres.</p>
</dd></dl>

</dd></dl>

</section>
<section id="example-objects">
<span id="doctest-example"></span><h3>Objetos <em>Example</em><a class="headerlink" href="#example-objects" title="Enlazar permanentemente con este título">¶</a></h3>
<dl class="py class">
<dt id="doctest.Example">
<em class="property">class </em><code class="sig-prename descclassname">doctest.</code><code class="sig-name descname">Example</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">source</span></em>, <em class="sig-param"><span class="n">want</span></em>, <em class="sig-param"><span class="n">exc_msg</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">lineno</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">indent</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">options</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#doctest.Example" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Un sólo ejemplo interactivo, que consta de una sentencia de Python y su salida esperada. Los argumentos del constructor se usan para inicializar los atributos del mismo nombre.</p>
<p>La clase <a class="reference internal" href="#doctest.Example" title="doctest.Example"><code class="xref py py-class docutils literal notranslate"><span class="pre">Example</span></code></a> define los siguientes atributos. Son inicializados por el constructor, y no deben ser modificados directamente.</p>
<dl class="py attribute">
<dt id="doctest.Example.source">
<code class="sig-name descname">source</code><a class="headerlink" href="#doctest.Example.source" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Una cadena de caracteres que contiene el código fuente del ejemplo. Este código fuente consiste de una sola sentencia Python, y siempre termina en una nueva línea; el constructor añade una nueva línea cuando sea necesario.</p>
</dd></dl>

<dl class="py attribute">
<dt id="doctest.Example.want">
<code class="sig-name descname">want</code><a class="headerlink" href="#doctest.Example.want" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>La salida esperada de ejecutar el código fuente del ejemplo (o desde la salida estándar, o un seguimiento en caso de una excepción). <code class="xref py py-attr docutils literal notranslate"><span class="pre">wants</span></code> termina con una nueva línea a menos que no se espera ninguna salida, en cuyo caso es una cadena vacía. El constructor añade una nueva línea cuando sea necesario.</p>
</dd></dl>

<dl class="py attribute">
<dt id="doctest.Example.exc_msg">
<code class="sig-name descname">exc_msg</code><a class="headerlink" href="#doctest.Example.exc_msg" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>El mensaje de excepción que el ejemplo genera, si se espera que el ejemplo genere una excepción; o <code class="docutils literal notranslate"><span class="pre">None</span></code> si no se espera que genere una excepción. Se compara este mensaje de excepción con el valor de retorno de <a class="reference internal" href="traceback.html#traceback.format_exception_only" title="traceback.format_exception_only"><code class="xref py py-func docutils literal notranslate"><span class="pre">traceback.format_exception_only()</span></code></a>.  <a class="reference internal" href="#doctest.Example.exc_msg" title="doctest.Example.exc_msg"><code class="xref py py-attr docutils literal notranslate"><span class="pre">exc_msg</span></code></a> termina con una nueva línea a menos que sea <code class="docutils literal notranslate"><span class="pre">None</span></code>.  El constructor añade una nueva línea si se necesita.</p>
</dd></dl>

<dl class="py attribute">
<dt id="doctest.Example.lineno">
<code class="sig-name descname">lineno</code><a class="headerlink" href="#doctest.Example.lineno" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>El número de línea dentro de la cadena de caracteres que contiene este ejemplo donde el ejemplo comienza. Este número de línea comienza en 0 con respecto al comienzo de la cadena que lo contiene.</p>
</dd></dl>

<dl class="py attribute">
<dt id="doctest.Example.indent">
<code class="sig-name descname">indent</code><a class="headerlink" href="#doctest.Example.indent" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>La sangría del ejemplo en la cadena que lo contiene; i.e., el número de caracteres de espacio que preceden la primera entrada del ejemplo.</p>
</dd></dl>

<dl class="py attribute">
<dt id="doctest.Example.options">
<code class="sig-name descname">options</code><a class="headerlink" href="#doctest.Example.options" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Un diccionario que mapea de las banderas de opciones a <code class="docutils literal notranslate"><span class="pre">True</span></code> o <code class="docutils literal notranslate"><span class="pre">False</span></code>, que se usa para anular las opciones por defecto para este ejemplo. Cualquier bandera de opción que no contiene este diccionario se deja con su valor por defecto (como se especifica por los <code class="xref py py-attr docutils literal notranslate"><span class="pre">optionflags</span></code> de <a class="reference internal" href="#doctest.DocTestRunner" title="doctest.DocTestRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTestRunner</span></code></a>). Por defecto, no se establece ninguna opción.</p>
</dd></dl>

</dd></dl>

</section>
<section id="doctestfinder-objects">
<span id="doctest-doctestfinder"></span><h3>Objetos <em>DocTestFinder</em><a class="headerlink" href="#doctestfinder-objects" title="Enlazar permanentemente con este título">¶</a></h3>
<dl class="py class">
<dt id="doctest.DocTestFinder">
<em class="property">class </em><code class="sig-prename descclassname">doctest.</code><code class="sig-name descname">DocTestFinder</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">parser</span><span class="o">=</span><span class="default_value">DocTestParser()</span></em>, <em class="sig-param"><span class="n">recurse</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">exclude_empty</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#doctest.DocTestFinder" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Una clase de procesamiento que se usa para extraer los <a class="reference internal" href="#doctest.DocTest" title="doctest.DocTest"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTest</span></code></a> que son relevantes para un objeto dado, desde su docstring y los docstring de sus objetos contenidos. Se puede extraer los <a class="reference internal" href="#doctest.DocTest" title="doctest.DocTest"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTest</span></code></a> de los módulos, clases, funciones, métodos, métodos estáticos, métodos de clase, y propiedades.</p>
<p>Se puede usar el argumento opcional <em>verbose</em> para mostrar los objetos buscados por <em>finder</em>. Su valor por defecto es <code class="docutils literal notranslate"><span class="pre">False</span></code> (ninguna salida).</p>
<p>El argumento opcional <em>parser</em> especifica el objeto <a class="reference internal" href="#doctest.DocTestParser" title="doctest.DocTestParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTestParser</span></code></a> (o un reemplazo directo) que se usa para extraer doctests desde docstrings.</p>
<p>Si el argumento opcional <em>recurse</em> es falso, entonces el método <a class="reference internal" href="#doctest.DocTestFinder.find" title="doctest.DocTestFinder.find"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DocTestFinder.find()</span></code></a> sólo examinará el objeto dado, y no cualquier objeto contenido.</p>
<p>Si el argumento opcional <em>exclude_empty</em> es falso, entonces <a class="reference internal" href="#doctest.DocTestFinder.find" title="doctest.DocTestFinder.find"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DocTestFinder.find()</span></code></a> incluirá pruebas para objetos con docstrings vacíos.</p>
<p><a class="reference internal" href="#doctest.DocTestFinder" title="doctest.DocTestFinder"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTestFinder</span></code></a> define los siguientes métodos:</p>
<dl class="py method">
<dt id="doctest.DocTestFinder.find">
<code class="sig-name descname">find</code><span class="sig-paren">(</span><em class="sig-param">obj[, name][, module][, globs][, extraglobs]</em><span class="sig-paren">)</span><a class="headerlink" href="#doctest.DocTestFinder.find" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Retorna una lista de los <code class="xref py py-class docutils literal notranslate"><span class="pre">Doctest</span></code> que se definen por el docstring de <em>obj</em>, o por cualquiera de los docstring de sus objetos contenidos.</p>
<p>El argumento opcional <em>name</em> especifica el nombre del objeto; este nombre será usado para construir los nombres de los <a class="reference internal" href="#doctest.DocTest" title="doctest.DocTest"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTest</span></code></a> retornados. Si <em>name</em> no se especifica, entonces se usa <code class="docutils literal notranslate"><span class="pre">obj.__name__</span></code>.</p>
<p>El parámetro opcional <em>module</em> es el módulo que contiene el objeto dado. Si no se especifica el módulo o si es <code class="docutils literal notranslate"><span class="pre">None</span></code>, entonces el buscador de pruebas tratará de determinar automáticamente el módulo correcto. Se usa el módulo del objeto:</p>
<ul class="simple">
<li><p>Como un espacio de nombres por defecto, si no se especifica <em>globs</em>.</p></li>
<li><p>Para evitar que <em>DocTestFinder</em> extraiga DocTests desde objetos que se importan desde otros módulos. (Se ignoran objetos contenidos con módulos aparte de <em>module</em>.)</p></li>
<li><p>Para encontrar el nombre del archivo conteniendo el objeto.</p></li>
<li><p>Para ayudar a encontrar el número de línea del objeto dentro de su archivo.</p></li>
</ul>
<p>Si <em>module</em> es falso, no se hará ningún intento de encontrar el módulo. Es poco claro, de uso mayormente para probar doctest en si mismo: si <em>module</em> es <code class="docutils literal notranslate"><span class="pre">False</span></code>, o es <code class="docutils literal notranslate"><span class="pre">None</span></code> pero no se puede encontrar automáticamente, entonces todos los objetos se consideran que pertenecen al módulo (inexistente), por lo que todos los objetos contenidos se buscarán (recursivamente) por doctests.</p>
<p>Los globales para cada <a class="reference internal" href="#doctest.DocTest" title="doctest.DocTest"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTest</span></code></a> se forma al combinar <em>globs</em> y <em>extraglobs</em> (los enlaces en <em>extraglobs</em> anulan los enlaces en <em>globs</em>). Se crea una nueva copia superficial del diccionario de globales para cada <a class="reference internal" href="#doctest.DocTest" title="doctest.DocTest"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTest</span></code></a>. Si <em>globs</em> no se especifica, entonces su valor por defecto es el <em>__dict__</em> del módulo, si se especifica, o es <code class="docutils literal notranslate"><span class="pre">{}</span></code> de lo contrario, si <em>extraglobs</em> no se especifica, entonces su valor por defecto es <code class="docutils literal notranslate"><span class="pre">{}</span></code>.</p>
</dd></dl>

</dd></dl>

</section>
<section id="doctestparser-objects">
<span id="doctest-doctestparser"></span><h3>Objetos <em>DocTestParser</em><a class="headerlink" href="#doctestparser-objects" title="Enlazar permanentemente con este título">¶</a></h3>
<dl class="py class">
<dt id="doctest.DocTestParser">
<em class="property">class </em><code class="sig-prename descclassname">doctest.</code><code class="sig-name descname">DocTestParser</code><a class="headerlink" href="#doctest.DocTestParser" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Un clase de procesamiento usada para extraer ejemplos interactivos de una cadena de caracteres, y usarlos para crear un objeto <a class="reference internal" href="#doctest.DocTest" title="doctest.DocTest"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTest</span></code></a>.</p>
<p><a class="reference internal" href="#doctest.DocTestParser" title="doctest.DocTestParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTestParser</span></code></a> define los siguientes métodos:</p>
<dl class="py method">
<dt id="doctest.DocTestParser.get_doctest">
<code class="sig-name descname">get_doctest</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">string</span></em>, <em class="sig-param"><span class="n">globs</span></em>, <em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">lineno</span></em><span class="sig-paren">)</span><a class="headerlink" href="#doctest.DocTestParser.get_doctest" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Extrae todos los ejemplos de <em>doctest</em> de una cadena dada, y los recolecta en un objeto <a class="reference internal" href="#doctest.DocTest" title="doctest.DocTest"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTest</span></code></a>.</p>
<p><em>globs</em>, <em>name</em>, <em>filename</em>, y <em>lineno</em> son atributos para el nuevo objeto <a class="reference internal" href="#doctest.DocTest" title="doctest.DocTest"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTest</span></code></a>. Véase la documentación de <a class="reference internal" href="#doctest.DocTest" title="doctest.DocTest"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTest</span></code></a> para más información.</p>
</dd></dl>

<dl class="py method">
<dt id="doctest.DocTestParser.get_examples">
<code class="sig-name descname">get_examples</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">string</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">'&lt;string&gt;'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#doctest.DocTestParser.get_examples" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Extrae todos los ejemplos de la cadena de caracteres dada, y los retorna como una lista de objetos <a class="reference internal" href="#doctest.Example" title="doctest.Example"><code class="xref py py-class docutils literal notranslate"><span class="pre">Example</span></code></a>. Los números de línea empiezan en 0. El argumento opcional <em>name</em> es una nombre identificando esta cadena, y sólo es usada para mensajes de errores.</p>
</dd></dl>

<dl class="py method">
<dt id="doctest.DocTestParser.parse">
<code class="sig-name descname">parse</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">string</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">'&lt;string&gt;'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#doctest.DocTestParser.parse" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Divide el string dado en ejemplos y texto intermedio, y los retorna como una lista que alterna entre objetos <a class="reference internal" href="#doctest.Example" title="doctest.Example"><code class="xref py py-class docutils literal notranslate"><span class="pre">Example</span></code></a> y cadenas de caracteres. Los números de línea para los objetos <a class="reference internal" href="#doctest.Example" title="doctest.Example"><code class="xref py py-class docutils literal notranslate"><span class="pre">Example</span></code></a> empiezan en 0. El argumento opcional <em>name</em> es un nombre identificando esta cadena, y sólo se usa en mensajes de error.</p>
</dd></dl>

</dd></dl>

</section>
<section id="doctestrunner-objects">
<span id="doctest-doctestrunner"></span><h3>Objetos <em>DocTestRunner</em><a class="headerlink" href="#doctestrunner-objects" title="Enlazar permanentemente con este título">¶</a></h3>
<dl class="py class">
<dt id="doctest.DocTestRunner">
<em class="property">class </em><code class="sig-prename descclassname">doctest.</code><code class="sig-name descname">DocTestRunner</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">checker</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">optionflags</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#doctest.DocTestRunner" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Una clase de procesamiento usada para ejecutar y verificar los ejemplos interactivos en un <a class="reference internal" href="#doctest.DocTest" title="doctest.DocTest"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTest</span></code></a>.</p>
<p>La comparación entre salidas esperadas y salidas reales se hace por un <a class="reference internal" href="#doctest.OutputChecker" title="doctest.OutputChecker"><code class="xref py py-class docutils literal notranslate"><span class="pre">OutputChecker</span></code></a>. Esta comparación puede ser personalizada con un número de banderas de opción; véase la sección <a class="reference internal" href="#doctest-options"><span class="std std-ref">Banderas de Opción</span></a> para más información. Si las banderas de opción son insuficientes, entonces la comparación también puede ser personalizada al pasar una subclase de <a class="reference internal" href="#doctest.OutputChecker" title="doctest.OutputChecker"><code class="xref py py-class docutils literal notranslate"><span class="pre">OutputChecker</span></code></a> al constructor.</p>
<p>La salida de la pantalla del <em>test runner</em> se puede controlar de dos maneras. Primero, se puede pasar una función de salida a <code class="xref py py-meth docutils literal notranslate"><span class="pre">TestRunner.run()</span></code>; esta función se invocará con cadenas que deben mostrarse. Su valor por defecto es <code class="docutils literal notranslate"><span class="pre">sys.stdout.write</span></code>. Si no es suficiente capturar el resultado, entonces la salida de la pantalla también se puede personalizar al heredar de DocTestRunner, y sobreescribir los métodos <a class="reference internal" href="#doctest.DocTestRunner.report_start" title="doctest.DocTestRunner.report_start"><code class="xref py py-meth docutils literal notranslate"><span class="pre">report_start()</span></code></a>, <a class="reference internal" href="#doctest.DocTestRunner.report_success" title="doctest.DocTestRunner.report_success"><code class="xref py py-meth docutils literal notranslate"><span class="pre">report_success()</span></code></a>, <a class="reference internal" href="#doctest.DocTestRunner.report_unexpected_exception" title="doctest.DocTestRunner.report_unexpected_exception"><code class="xref py py-meth docutils literal notranslate"><span class="pre">report_unexpected_exception()</span></code></a>, y <a class="reference internal" href="#doctest.DocTestRunner.report_failure" title="doctest.DocTestRunner.report_failure"><code class="xref py py-meth docutils literal notranslate"><span class="pre">report_failure()</span></code></a>.</p>
<p>El argumento por palabra clave opcional <em>checker</em> especifica el objeto <a class="reference internal" href="#doctest.OutputChecker" title="doctest.OutputChecker"><code class="xref py py-class docutils literal notranslate"><span class="pre">OutputChecker</span></code></a> (o un reemplazo directo) que se debe usar para comparar las salidas esperadas con las salidas reales de los ejemplos de doctest.</p>
<p>El argumento por palabra clave opcional <em>verbose</em> controla la verbosidad de <a class="reference internal" href="#doctest.DocTestRunner" title="doctest.DocTestRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTestRunner</span></code></a>. Si <em>verbose</em> es <code class="docutils literal notranslate"><span class="pre">True</span></code>, entonces la información de cada ejemplo se imprime , mientras se ejecuta. Si <em>verbose</em> es <code class="docutils literal notranslate"><span class="pre">False</span></code>, entonces sólo las fallas se imprimen. Si <em>verbose</em> no se especifica, o es <code class="docutils literal notranslate"><span class="pre">None</span></code>, entonces la salida verbosa se usa si y sólo se usa el modificador de la línea de comandos``-v``.</p>
<p>El argumento por palabra clave opcional <em>optionflags</em> se puede usar para controlar cómo el <em>test runner</em> compara la salida esperada con una salida real, y cómo muestra las fallas. Para más información, véase la sección <a class="reference internal" href="#doctest-options"><span class="std std-ref">Banderas de Opción</span></a>.</p>
<p><a class="reference internal" href="#doctest.DocTestParser" title="doctest.DocTestParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTestParser</span></code></a> define los siguientes métodos:</p>
<dl class="py method">
<dt id="doctest.DocTestRunner.report_start">
<code class="sig-name descname">report_start</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">out</span></em>, <em class="sig-param"><span class="n">test</span></em>, <em class="sig-param"><span class="n">example</span></em><span class="sig-paren">)</span><a class="headerlink" href="#doctest.DocTestRunner.report_start" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Notifica que el <em>test runner</em> está a punto de procesar el ejemplo dado. Este método es proporcionado para permitir que clases heredadas de <a class="reference internal" href="#doctest.DocTestRunner" title="doctest.DocTestRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTestRunner</span></code></a> personalicen su salida; no debe ser invocado directamente.</p>
<p><em>example</em> es el ejemplo a punto de ser procesado. <em>test</em> es la prueba que contiene a <em>example</em>. <em>out</em> es la función de salida que se pasó a <a class="reference internal" href="#doctest.DocTestRunner.run" title="doctest.DocTestRunner.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DocTestRunner.run()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="doctest.DocTestRunner.report_success">
<code class="sig-name descname">report_success</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">out</span></em>, <em class="sig-param"><span class="n">test</span></em>, <em class="sig-param"><span class="n">example</span></em>, <em class="sig-param"><span class="n">got</span></em><span class="sig-paren">)</span><a class="headerlink" href="#doctest.DocTestRunner.report_success" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Notifica que el ejemplo dado se ejecutó correctamente. Este método es proporcionado para permitir que las clases heredadas de <a class="reference internal" href="#doctest.DocTestRunner" title="doctest.DocTestRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTestRunner</span></code></a> personalicen su salida; no debe ser invocado directamente.</p>
<p><em>example</em> es el ejemplo a punto de ser procesado. <em>got</em> es la salida real del ejemplo. <em>test</em> es la prueba conteniendo <em>example</em>. <em>out</em> es la función de salida que se pasa a <a class="reference internal" href="#doctest.DocTestRunner.run" title="doctest.DocTestRunner.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DocTestRunner.run()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="doctest.DocTestRunner.report_failure">
<code class="sig-name descname">report_failure</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">out</span></em>, <em class="sig-param"><span class="n">test</span></em>, <em class="sig-param"><span class="n">example</span></em>, <em class="sig-param"><span class="n">got</span></em><span class="sig-paren">)</span><a class="headerlink" href="#doctest.DocTestRunner.report_failure" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Notifica que el ejemplo dado falló. Este método es proporcionado para permitir que clases heredadas de <a class="reference internal" href="#doctest.DocTestRunner" title="doctest.DocTestRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTestRunner</span></code></a> personalicen su salida; no debe ser invocado directamente.</p>
<p><em>example</em> es el ejemplo a punto de ser procesado. <em>got</em> es la salida real del ejemplo. <em>test</em> es la prueba conteniendo <em>example</em>. <em>out</em> es la función de salida que se pasa a <a class="reference internal" href="#doctest.DocTestRunner.run" title="doctest.DocTestRunner.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DocTestRunner.run()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="doctest.DocTestRunner.report_unexpected_exception">
<code class="sig-name descname">report_unexpected_exception</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">out</span></em>, <em class="sig-param"><span class="n">test</span></em>, <em class="sig-param"><span class="n">example</span></em>, <em class="sig-param"><span class="n">exc_info</span></em><span class="sig-paren">)</span><a class="headerlink" href="#doctest.DocTestRunner.report_unexpected_exception" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Notifica que el ejemplo dado lanzó una excepción inesperada. Este método es proporcionado para permitir que las clases heredadas de <a class="reference internal" href="#doctest.DocTestRunner" title="doctest.DocTestRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTestRunner</span></code></a> personalicen su salida; no debe ser invocado directamente.</p>
<p><em>example</em> es el ejemplo a punto de ser procesado, <em>exc_info</em> es una tupla que contiene información sobre la excepción inesperada (como se retorna por <a class="reference internal" href="sys.html#sys.exc_info" title="sys.exc_info"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.exc_info()</span></code></a>). <em>test</em> es la prueba conteniendo <em>example</em>. <em>out</em> es la función de salida que debe ser pasada a <a class="reference internal" href="#doctest.DocTestRunner.run" title="doctest.DocTestRunner.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DocTestRunner.run()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="doctest.DocTestRunner.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">test</span></em>, <em class="sig-param"><span class="n">compileflags</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">out</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">clear_globs</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#doctest.DocTestRunner.run" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Ejecuta los ejemplos en <em>test</em> (un objeto <a class="reference internal" href="#doctest.DocTest" title="doctest.DocTest"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTest</span></code></a>), y muestra los resultados usando función de escritura <em>out</em>.</p>
<p>Los ejemplo se ejecutan en el espacio de nombres <code class="docutils literal notranslate"><span class="pre">test.globs</span></code>. Si <em>clear_globs</em> es verdadero (el valor por defecto), entonces este espacio de nombres será limpiado después de la prueba se ejecute, para ayudar con la colección de basura. Si quisieras examinar el espacio de nombres después de que la prueba se complete, entonces use <em>clear_globs=False</em>.</p>
<p><em>compileflags</em> da el conjunto de banderas que se deben usar por el compilador de Python cuando se ejecutan los ejemplos. Si no se especifica, entonces su valor por defecto será el conjunto de banderas de <em>future-import</em> que aplican a <em>globs</em>.</p>
<p>La salida de cada ejemplo es revisada usando el <em>output checker</em> del <a class="reference internal" href="#doctest.DocTestRunner" title="doctest.DocTestRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTestRunner</span></code></a>, y los resultados se formatean por los métodos de <code class="xref py py-meth docutils literal notranslate"><span class="pre">DocTestRunner.report_*()</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt id="doctest.DocTestRunner.summarize">
<code class="sig-name descname">summarize</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#doctest.DocTestRunner.summarize" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Imprime un resumen de todos los casos de prueba que han sido ejecutados por este <em>DocTestRunner</em>, y retorna un <a class="reference internal" href="../glossary.html#term-named-tuple"><span class="xref std std-term">named tuple</span></a> <code class="docutils literal notranslate"><span class="pre">TestResults(failed,</span> <span class="pre">attempted)</span></code>.</p>
<p>El argumento opcional <em>verbose</em> controla qué tan detallado es el resumen. Si no se especifica la verbosidad, entonces se usa la verbosidad de <a class="reference internal" href="#doctest.DocTestRunner" title="doctest.DocTestRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTestRunner</span></code></a>.</p>
</dd></dl>

</dd></dl>

</section>
<section id="outputchecker-objects">
<span id="doctest-outputchecker"></span><h3>Objetos <em>OutputChecker</em><a class="headerlink" href="#outputchecker-objects" title="Enlazar permanentemente con este título">¶</a></h3>
<dl class="py class">
<dt id="doctest.OutputChecker">
<em class="property">class </em><code class="sig-prename descclassname">doctest.</code><code class="sig-name descname">OutputChecker</code><a class="headerlink" href="#doctest.OutputChecker" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Una clase que se usa para verificar si la salida real de un ejemplo de doctest coincide con la salida esperada. <a class="reference internal" href="#doctest.OutputChecker" title="doctest.OutputChecker"><code class="xref py py-class docutils literal notranslate"><span class="pre">OutputChecker</span></code></a> define dos métodos: <a class="reference internal" href="#doctest.OutputChecker.check_output" title="doctest.OutputChecker.check_output"><code class="xref py py-meth docutils literal notranslate"><span class="pre">check_output()</span></code></a>, que compara un par de salidas dadas, y retorna <code class="docutils literal notranslate"><span class="pre">True</span></code> si coinciden; y <a class="reference internal" href="#doctest.OutputChecker.output_difference" title="doctest.OutputChecker.output_difference"><code class="xref py py-meth docutils literal notranslate"><span class="pre">output_difference()</span></code></a>, que retorna una cadena que describe las diferencias entre las dos salidas.</p>
<p><a class="reference internal" href="#doctest.OutputChecker" title="doctest.OutputChecker"><code class="xref py py-class docutils literal notranslate"><span class="pre">OutputChecker</span></code></a> define los siguientes métodos:</p>
<dl class="py method">
<dt id="doctest.OutputChecker.check_output">
<code class="sig-name descname">check_output</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">want</span></em>, <em class="sig-param"><span class="n">got</span></em>, <em class="sig-param"><span class="n">optionflags</span></em><span class="sig-paren">)</span><a class="headerlink" href="#doctest.OutputChecker.check_output" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Retorna <code class="docutils literal notranslate"><span class="pre">True</span></code> si y sólo si la salida real de un ejemplo (<em>got</em>) coincide con la salida esperada (<em>want</em>). Siempre se considera que estas cadenas coinciden si son idénticas; pero dependiendo de qué banderas de opción el <em>test runner</em> esté usando, varias coincidencias inexactas son posibles. Véase la sección <a class="reference internal" href="#doctest-options"><span class="std std-ref">Banderas de Opción</span></a> para más información sobre las banderas de opción.</p>
</dd></dl>

<dl class="py method">
<dt id="doctest.OutputChecker.output_difference">
<code class="sig-name descname">output_difference</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">example</span></em>, <em class="sig-param"><span class="n">got</span></em>, <em class="sig-param"><span class="n">optionflags</span></em><span class="sig-paren">)</span><a class="headerlink" href="#doctest.OutputChecker.output_difference" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Retorna una cadena que describe las diferencias entre la salida esperada para un ejemplo dado (<em>example</em>) y la salida real (<em>got</em>). <em>optionflags</em> es el conjunto de banderas de opción usado para comparar <em>want</em> y <em>got</em>.</p>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="debugging">
<span id="doctest-debugging"></span><h2>Depuración<a class="headerlink" href="#debugging" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Doctest proporciona varios mecanismos para depurar los ejemplos de doctest:</p>
<ul>
<li><p>Varias funciones convierten los doctest en programas de Python ejecutables, que pueden ser ejecutadas bajo el depurador de Python, <a class="reference internal" href="pdb.html#module-pdb" title="pdb: The Python debugger for interactive interpreters."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pdb</span></code></a>.</p></li>
<li><p>La clase <a class="reference internal" href="#doctest.DebugRunner" title="doctest.DebugRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">DebugRunner</span></code></a> es una subclase de <a class="reference internal" href="#doctest.DocTestRunner" title="doctest.DocTestRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTestRunner</span></code></a> que lanza una excepción por el primer ejemplo fallido, conteniendo información sobre ese ejemplo. Esta información se puede usar para realizar depuración a posteriori en el ejemplo.</p></li>
<li><p>Los casos de <a class="reference internal" href="unittest.html#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal notranslate"><span class="pre">unittest</span></code></a> generados por <a class="reference internal" href="#doctest.DocTestSuite" title="doctest.DocTestSuite"><code class="xref py py-func docutils literal notranslate"><span class="pre">DocTestSuite()</span></code></a> admiten el método <a class="reference internal" href="#doctest.debug" title="doctest.debug"><code class="xref py py-meth docutils literal notranslate"><span class="pre">debug()</span></code></a> definido por <a class="reference internal" href="unittest.html#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal notranslate"><span class="pre">unittest.TestCase</span></code></a>.</p></li>
<li><p>Puedes añadir una llamada a <a class="reference internal" href="pdb.html#pdb.set_trace" title="pdb.set_trace"><code class="xref py py-func docutils literal notranslate"><span class="pre">pdb.set_trace()</span></code></a> en un ejemplo de doctest, y bajarás al depurador de Python cuando esa línea sea ejecutada. Entonces puedes inspeccionar los valores de las variables, y demás. Por ejemplo, supongamos que <code class="file docutils literal notranslate"><span class="pre">a.py</span></code> contiene sólo este docstring de módulo:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">&gt;&gt;&gt; def f(x):</span>
<span class="sd">...     g(x*2)</span>
<span class="sd">&gt;&gt;&gt; def g(x):</span>
<span class="sd">...     print(x+3)</span>
<span class="sd">...     import pdb; pdb.set_trace()</span>
<span class="sd">&gt;&gt;&gt; f(3)</span>
<span class="sd">9</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
<p>Entonces una sesión interactiva puede lucir como esta:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">a</span><span class="o">,</span> <span class="nn">doctest</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">doctest</span><span class="o">.</span><span class="n">testmod</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">--Return--</span>
<span class="go">&gt; &lt;doctest a[1]&gt;(3)g()-&gt;None</span>
<span class="go">-&gt; import pdb; pdb.set_trace()</span>
<span class="go">(Pdb) list</span>
<span class="go">  1     def g(x):</span>
<span class="go">  2         print(x+3)</span>
<span class="go">  3  -&gt;     import pdb; pdb.set_trace()</span>
<span class="go">[EOF]</span>
<span class="go">(Pdb) p x</span>
<span class="go">6</span>
<span class="go">(Pdb) step</span>
<span class="go">--Return--</span>
<span class="go">&gt; &lt;doctest a[0]&gt;(2)f()-&gt;None</span>
<span class="go">-&gt; g(x*2)</span>
<span class="go">(Pdb) list</span>
<span class="go">  1     def f(x):</span>
<span class="go">  2  -&gt;     g(x*2)</span>
<span class="go">[EOF]</span>
<span class="go">(Pdb) p x</span>
<span class="go">3</span>
<span class="go">(Pdb) step</span>
<span class="go">--Return--</span>
<span class="go">&gt; &lt;doctest a[2]&gt;(1)?()-&gt;None</span>
<span class="go">-&gt; f(3)</span>
<span class="go">(Pdb) cont</span>
<span class="go">(0, 3)</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
</li>
</ul>
<p>Funciones que convierten los doctest a código de Python, y posiblemente ejecuten el código sintetizado debajo del depurador:</p>
<dl class="py function">
<dt id="doctest.script_from_examples">
<code class="sig-prename descclassname">doctest.</code><code class="sig-name descname">script_from_examples</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">s</span></em><span class="sig-paren">)</span><a class="headerlink" href="#doctest.script_from_examples" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Convierte texto con ejemplos a un script.</p>
<p>El argumento <em>s</em> es una cadena que contiene los ejemplos de doctest. La cadena se convierte a un script de Python, donde los ejemplos de doctest en <em>s</em> se convierten en código regular, y todo lo demás se convierte en comentarios de Python. El script generado se retorna como una cadena: Por ejemplo,</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">doctest</span>
<span class="nb">print</span><span class="p">(</span><span class="n">doctest</span><span class="o">.</span><span class="n">script_from_examples</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    Set x and y to 1 and 2.</span>
<span class="s2">    &gt;&gt;&gt; x, y = 1, 2</span>

<span class="s2">    Print their sum:</span>
<span class="s2">    &gt;&gt;&gt; print(x+y)</span>
<span class="s2">    3</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>muestra:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set x and y to 1 and 2.</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span>
<span class="c1">#</span>
<span class="c1"># Print their sum:</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)</span>
<span class="c1"># Expected:</span>
<span class="c1">## 3</span>
</pre></div>
</div>
<p>Esta función se usa internamente por otras funciones (véase más abajo), pero también pueden ser útiles cuando quieres transformar una sesión de Python interactiva en un script de Python.</p>
</dd></dl>

<dl class="py function">
<dt id="doctest.testsource">
<code class="sig-prename descclassname">doctest.</code><code class="sig-name descname">testsource</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">module</span></em>, <em class="sig-param"><span class="n">name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#doctest.testsource" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Convierte el doctest para un objeto en un script.</p>
<p>El argumento <em>module</em> es un objeto módulo, o un nombre por puntos de un módulo, que contiene el objeto cuyos doctest son de interés. El argumento <em>name</em> es el nombre (dentro del módulo) del objeto con los doctest de interés. El resultado es una cadena de caracteres, que contiene el docstring del objeto convertido en un script de Python, como se describe por <a class="reference internal" href="#doctest.script_from_examples" title="doctest.script_from_examples"><code class="xref py py-func docutils literal notranslate"><span class="pre">script_from_examples()</span></code></a> arriba. Por ejemplo, si el módulo <code class="file docutils literal notranslate"><span class="pre">a.py</span></code> contiene un función de alto nivel <code class="xref py py-func docutils literal notranslate"><span class="pre">f()</span></code>, entonces</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">a</span><span class="o">,</span> <span class="nn">doctest</span>
<span class="nb">print</span><span class="p">(</span><span class="n">doctest</span><span class="o">.</span><span class="n">testsource</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s2">&quot;a.f&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>imprime una versión de script del docstring de la función <code class="xref py py-func docutils literal notranslate"><span class="pre">f()</span></code>, con los doctest convertidos en código, y el resto puesto en comentarios.</p>
</dd></dl>

<dl class="py function">
<dt id="doctest.debug">
<code class="sig-prename descclassname">doctest.</code><code class="sig-name descname">debug</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">module</span></em>, <em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">pm</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#doctest.debug" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Depura los doctest para un objeto.</p>
<p>Los argumentos <em>module</em> y <em>name</em> son los mismos que para la función <a class="reference internal" href="#doctest.testsource" title="doctest.testsource"><code class="xref py py-func docutils literal notranslate"><span class="pre">testsource()</span></code></a> arriba. El script de Python sintetizado para el docstring del objeto nombrado es escrito en un archivo temporal, y entonces ese archivo es ejecutado bajo el control del depurador de PYthon, <a class="reference internal" href="pdb.html#module-pdb" title="pdb: The Python debugger for interactive interpreters."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pdb</span></code></a>.</p>
<p>Se usa una copia superficial de <code class="docutils literal notranslate"><span class="pre">module.__dict__</span></code> para el contexto de ejecución local y global.</p>
<p>El argumento opcional <em>pm</em> controla si se usa la depuración post-mortem. Si <em>pm</em> tiene un valor verdadero, el archivo de script es ejecutado directamente, y el depurador está involucrado sólo si el script termina a través del lanzamiento de una excepción. Si lo hace, entonces la depuración post-mortem es invocada, a través de <a class="reference internal" href="pdb.html#pdb.post_mortem" title="pdb.post_mortem"><code class="xref py py-func docutils literal notranslate"><span class="pre">pdb.post_mortem()</span></code></a>, pasando el objeto de rastreo desde la excepción sin tratar. Si no se especifica <em>pm</em>, o si es falso, el script se ejecuta bajo el depurador desde el inicio, a través de una llamada de <a class="reference internal" href="functions.html#exec" title="exec"><code class="xref py py-func docutils literal notranslate"><span class="pre">exec()</span></code></a> apropiada a <a class="reference internal" href="pdb.html#pdb.run" title="pdb.run"><code class="xref py py-func docutils literal notranslate"><span class="pre">pdb.run()</span></code></a>.</p>
</dd></dl>

<dl class="py function">
<dt id="doctest.debug_src">
<code class="sig-prename descclassname">doctest.</code><code class="sig-name descname">debug_src</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">src</span></em>, <em class="sig-param"><span class="n">pm</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">globs</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#doctest.debug_src" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Depura los doctest en una cadena de caracteres.</p>
<p>Es como la función function <a class="reference internal" href="#doctest.debug" title="doctest.debug"><code class="xref py py-func docutils literal notranslate"><span class="pre">debug()</span></code></a> arriba, excepto que una cadena de caracteres que contiene los ejemplos de doctest se especifica directamente, a través del argumento <em>src</em>.</p>
<p>El argumento opcional <em>pm</em> tiene el mismo significado como en la función <a class="reference internal" href="#doctest.debug" title="doctest.debug"><code class="xref py py-func docutils literal notranslate"><span class="pre">debug()</span></code></a> arriba.</p>
<p>El argumento opcional <em>globs</em> proporciona un diccionario a usar como contexto de ejecución local y global. Si no se especifica, o es <code class="docutils literal notranslate"><span class="pre">None</span></code>, se usa un diccionario vacío. Si se especifica, se usa una copia superficial del diccionario.</p>
</dd></dl>

<p>La clase <a class="reference internal" href="#doctest.DebugRunner" title="doctest.DebugRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">DebugRunner</span></code></a>, y las excepciones especiales que puede lanzar, son de más interés a los autores de frameworks de pruebas, y sólo serán descritos brevemente aquí. Véase el código fuente, y especialmente el docstring de <a class="reference internal" href="#doctest.DebugRunner" title="doctest.DebugRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">DebugRunner</span></code></a> (¡que es un doctest!) para más detalles:</p>
<dl class="py class">
<dt id="doctest.DebugRunner">
<em class="property">class </em><code class="sig-prename descclassname">doctest.</code><code class="sig-name descname">DebugRunner</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">checker</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">optionflags</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#doctest.DebugRunner" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Una subclase de <a class="reference internal" href="#doctest.DocTestRunner" title="doctest.DocTestRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTestRunner</span></code></a> que lanza una excepción tan pronto como se encuentra una falla. Si ocurre una excepción inesperada, se lanza una excepción <a class="reference internal" href="#doctest.UnexpectedException" title="doctest.UnexpectedException"><code class="xref py py-exc docutils literal notranslate"><span class="pre">UnexpectedException</span></code></a>, conteniendo la prueba, el ejemplo, y la excepción original. Si la salida no coincide, entonces se lanza una excepción <a class="reference internal" href="#doctest.DocTestFailure" title="doctest.DocTestFailure"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DocTestFailure</span></code></a>, conteniendo la prueba, el ejemplo, y la salida real.</p>
<p>Para información sobre los parámetros de construcción y los métodos, véase la documentación para <a class="reference internal" href="#doctest.DocTestRunner" title="doctest.DocTestRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTestRunner</span></code></a> en la sección <a class="reference internal" href="#doctest-advanced-api"><span class="std std-ref">API avanzada</span></a>.</p>
</dd></dl>

<p>Hay dos excepciones que se pueden lanzar por instancias de <a class="reference internal" href="#doctest.DebugRunner" title="doctest.DebugRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">DebugRunner</span></code></a>:</p>
<dl class="py exception">
<dt id="doctest.DocTestFailure">
<em class="property">exception </em><code class="sig-prename descclassname">doctest.</code><code class="sig-name descname">DocTestFailure</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">test</span></em>, <em class="sig-param"><span class="n">example</span></em>, <em class="sig-param"><span class="n">got</span></em><span class="sig-paren">)</span><a class="headerlink" href="#doctest.DocTestFailure" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Una excepción lanzada por <a class="reference internal" href="#doctest.DocTestRunner" title="doctest.DocTestRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTestRunner</span></code></a> para señalar que la salida real del ejemplo de un doctest no coincidió con su salida esperada. Los argumentos del constructor se usan para inicializar los atributos del mismo nombre.</p>
</dd></dl>

<p><a class="reference internal" href="#doctest.DocTestFailure" title="doctest.DocTestFailure"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DocTestFailure</span></code></a> define los siguientes atributos:</p>
<dl class="py attribute">
<dt id="doctest.DocTestFailure.test">
<code class="sig-prename descclassname">DocTestFailure.</code><code class="sig-name descname">test</code><a class="headerlink" href="#doctest.DocTestFailure.test" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>El objeto <a class="reference internal" href="#doctest.DocTest" title="doctest.DocTest"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTest</span></code></a> que estaba siendo ejecutado cuando el ejemplo falló.</p>
</dd></dl>

<dl class="py attribute">
<dt id="doctest.DocTestFailure.example">
<code class="sig-prename descclassname">DocTestFailure.</code><code class="sig-name descname">example</code><a class="headerlink" href="#doctest.DocTestFailure.example" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>El objeto <a class="reference internal" href="#doctest.Example" title="doctest.Example"><code class="xref py py-class docutils literal notranslate"><span class="pre">Example</span></code></a> que falló.</p>
</dd></dl>

<dl class="py attribute">
<dt id="doctest.DocTestFailure.got">
<code class="sig-prename descclassname">DocTestFailure.</code><code class="sig-name descname">got</code><a class="headerlink" href="#doctest.DocTestFailure.got" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>La salida real del ejemplo.</p>
</dd></dl>

<dl class="py exception">
<dt id="doctest.UnexpectedException">
<em class="property">exception </em><code class="sig-prename descclassname">doctest.</code><code class="sig-name descname">UnexpectedException</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">test</span></em>, <em class="sig-param"><span class="n">example</span></em>, <em class="sig-param"><span class="n">exc_info</span></em><span class="sig-paren">)</span><a class="headerlink" href="#doctest.UnexpectedException" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Una excepción lanzada por <a class="reference internal" href="#doctest.DocTestRunner" title="doctest.DocTestRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTestRunner</span></code></a> para señalar que un ejemplo de doctest lanzó una excepción inesperada. Los argumentos del constructor se usan para inicializar los atributos del mismo nombre.</p>
</dd></dl>

<p><a class="reference internal" href="#doctest.UnexpectedException" title="doctest.UnexpectedException"><code class="xref py py-exc docutils literal notranslate"><span class="pre">UnexpectedException</span></code></a> define los siguientes atributos:</p>
<dl class="py attribute">
<dt id="doctest.UnexpectedException.test">
<code class="sig-prename descclassname">UnexpectedException.</code><code class="sig-name descname">test</code><a class="headerlink" href="#doctest.UnexpectedException.test" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>El objeto <a class="reference internal" href="#doctest.DocTest" title="doctest.DocTest"><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTest</span></code></a> que estaba siendo ejecutado cuando el ejemplo falló.</p>
</dd></dl>

<dl class="py attribute">
<dt id="doctest.UnexpectedException.example">
<code class="sig-prename descclassname">UnexpectedException.</code><code class="sig-name descname">example</code><a class="headerlink" href="#doctest.UnexpectedException.example" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>El objeto <a class="reference internal" href="#doctest.Example" title="doctest.Example"><code class="xref py py-class docutils literal notranslate"><span class="pre">Example</span></code></a> que falló.</p>
</dd></dl>

<dl class="py attribute">
<dt id="doctest.UnexpectedException.exc_info">
<code class="sig-prename descclassname">UnexpectedException.</code><code class="sig-name descname">exc_info</code><a class="headerlink" href="#doctest.UnexpectedException.exc_info" title="Enlazar permanentemente con esta definición">¶</a></dt>
<dd><p>Una tupla que contiene información sobre la excepción inesperada, como es retornado por <a class="reference internal" href="sys.html#sys.exc_info" title="sys.exc_info"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.exc_info()</span></code></a>.</p>
</dd></dl>

</section>
<section id="soapbox">
<span id="doctest-soapbox"></span><h2>Plataforma improvisada<a class="headerlink" href="#soapbox" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Como se menciona en la introducción, <a class="reference internal" href="#module-doctest" title="doctest: Test pieces of code within docstrings."><code class="xref py py-mod docutils literal notranslate"><span class="pre">doctest</span></code></a> ha crecido para tener tres usos primarios:</p>
<ol class="arabic simple">
<li><p>Verificar los ejemplos en los docstring.</p></li>
<li><p>Pruebas de regresión.</p></li>
<li><p>Documentación ejecutable / pruebas literarias.</p></li>
</ol>
<p>Estos usos tienen diferentes requerimientos, y es importante distinguirlos. En particular, llenar tus docstring con casos de prueba desconocidos conduce a mala documentación.</p>
<p>Cuando se escribe un docstring, escoja ejemplos de docstring con cuidado. Hay un arte para eso que se debe aprender – puede no ser natural al comienzo. Los ejemplos deben añadir valor genuino a la documentación. Un buen ejemplo a menudo puede valer muchas palabras. Si se hace con cuidado, los ejemplos serán invaluables para tus usuarios, y compensarán el tiempo que toma recolectarlos varias veces mientras los años pasan y las cosas cambian. Todavía estoy sorprendido de qué tan frecuente uno de mis ejemplos de <a class="reference internal" href="#module-doctest" title="doctest: Test pieces of code within docstrings."><code class="xref py py-mod docutils literal notranslate"><span class="pre">doctest</span></code></a> paran de funcionar después de un cambio «inofensivo».</p>
<p>Doctest también es una excelente herramienta para pruebas de regresión, especialmente si no escatimas en texto explicativo. Al intercalar prosa y ejemplos, se hace mucho más fácil mantener el seguimiento de lo que realmente se está probando, y por qué. Cuando una prueba falla, buena prosa puede hacer mucho más fácil comprender cuál es el problema, y cómo debe ser arreglado. Es verdad que puedes escribir comentarios extensos en pruebas basadas en código, pero pocos programadores lo hacen. Quizás es porque simplemente doctest hace escribir pruebas mucho más fácil que escribir código, mientras que escribir comentarios en código es mucho más difícil. Pienso que va más allá de eso: la actitud natural cuando se escribe una prueba basada en doctest es que quieres explicar los puntos finos de tu software, e ilustrarlos con ejemplos. Esto naturalmente lleva a archivos de pruebas que empiezan con las características más simples, y lógicamente progresan a complicaciones y casos extremos. Una narrativa coherente es el resultado, en vez de una colección de funciones aisladas que pruebas trozos aislados de funcionalidad aparentemente al azar. Es una actitud diferente, y produce resultados diferentes, difuminando la distinción entre probar y explicar.</p>
<p>Pruebas de regresión se limitan mejor a objetos o archivos dedicados. Hay varias opciones para organizar pruebas:</p>
<ul class="simple">
<li><p>Escribe archivos de texto que contienen los casos de prueba como ejemplos interactivos, y prueba los archivos usando <a class="reference internal" href="#doctest.testfile" title="doctest.testfile"><code class="xref py py-func docutils literal notranslate"><span class="pre">testfile()</span></code></a> o <a class="reference internal" href="#doctest.DocFileSuite" title="doctest.DocFileSuite"><code class="xref py py-func docutils literal notranslate"><span class="pre">DocFileSuite()</span></code></a>. Esto es lo recomendado, aunque es más fácil hacerlo para nuevos proyectos, diseñados desde el comienzo para usar doctest.</p></li>
<li><p>Define funciones nombradas <code class="docutils literal notranslate"><span class="pre">_regrtest_topic</span></code> que consisten en docstrings únicas, que contienen casos de prueba por los tópicos nombrados. Estas funciones se pueden incluir en el mismo archivo que el módulo, o separadas en un archivo de prueba separado.</p></li>
<li><p>Define un diccionario <code class="docutils literal notranslate"><span class="pre">__test__</span></code> que asigna desde temas de prueba de integración a los docstring que contienen casos de prueba.</p></li>
</ul>
<p>Cuando has puesto tus pruebas en un módulo, el módulo puede ser el mismo <em>test runner</em>. Cuando una prueba falla, puedes hacer que tu <em>test runner</em> vuelva a ejecutar sólo los doctest fallidos mientras que tu depuras el problema. Aquí hay un ejemplo mínimo de tal <em>test runner</em>:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">doctest</span>
    <span class="n">flags</span> <span class="o">=</span> <span class="n">doctest</span><span class="o">.</span><span class="n">REPORT_NDIFF</span><span class="o">|</span><span class="n">doctest</span><span class="o">.</span><span class="n">FAIL_FAST</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">globals</span><span class="p">():</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="nb">globals</span><span class="p">()[</span><span class="n">name</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="n">__test__</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
        <span class="n">doctest</span><span class="o">.</span><span class="n">run_docstring_examples</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">globals</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                                       <span class="n">optionflags</span><span class="o">=</span><span class="n">flags</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">fail</span><span class="p">,</span> <span class="n">total</span> <span class="o">=</span> <span class="n">doctest</span><span class="o">.</span><span class="n">testmod</span><span class="p">(</span><span class="n">optionflags</span><span class="o">=</span><span class="n">flags</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> failures out of </span><span class="si">{}</span><span class="s2"> tests&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">fail</span><span class="p">,</span> <span class="n">total</span><span class="p">))</span>
</pre></div>
</div>
<p class="rubric">Notas al pie de página</p>
<dl class="footnote brackets">
<dt class="label" id="id2"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>No se admiten los ejemplos que contienen una salida esperada y una excepción. Intentar adivinar dónde una termina y la otra empieza es muy propenso a errores, y da lugar a una prueba confusa.</p>
</dd>
</dl>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">Tabla de contenido</a></h3>
  <ul>
<li><a class="reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">doctest</span></code> – Prueba ejemplos interactivos de Python</a><ul>
<li><a class="reference internal" href="#simple-usage-checking-examples-in-docstrings">Uso simple: verificar ejemplos en docstrings</a></li>
<li><a class="reference internal" href="#simple-usage-checking-examples-in-a-text-file">Uso Simple: Verificar ejemplos en un Archivo de Texto</a></li>
<li><a class="reference internal" href="#how-it-works">Cómo funciona</a><ul>
<li><a class="reference internal" href="#which-docstrings-are-examined">¿Qué docstrings son examinados?</a></li>
<li><a class="reference internal" href="#how-are-docstring-examples-recognized">¿Cómo se reconocen los ejemplos de docstring?</a></li>
<li><a class="reference internal" href="#what-s-the-execution-context">¿Cuál es el contexto de ejecución?</a></li>
<li><a class="reference internal" href="#what-about-exceptions">¿Y las excepciones?</a></li>
<li><a class="reference internal" href="#option-flags">Banderas de Opción</a></li>
<li><a class="reference internal" href="#directives">Directivas</a></li>
<li><a class="reference internal" href="#warnings">Advertencias</a></li>
</ul>
</li>
<li><a class="reference internal" href="#basic-api">API básica</a></li>
<li><a class="reference internal" href="#unittest-api">API de unittest</a></li>
<li><a class="reference internal" href="#advanced-api">API avanzada</a><ul>
<li><a class="reference internal" href="#doctest-objects">Objetos DocTest</a></li>
<li><a class="reference internal" href="#example-objects">Objetos <em>Example</em></a></li>
<li><a class="reference internal" href="#doctestfinder-objects">Objetos <em>DocTestFinder</em></a></li>
<li><a class="reference internal" href="#doctestparser-objects">Objetos <em>DocTestParser</em></a></li>
<li><a class="reference internal" href="#doctestrunner-objects">Objetos <em>DocTestRunner</em></a></li>
<li><a class="reference internal" href="#outputchecker-objects">Objetos <em>OutputChecker</em></a></li>
</ul>
</li>
<li><a class="reference internal" href="#debugging">Depuración</a></li>
<li><a class="reference internal" href="#soapbox">Plataforma improvisada</a></li>
</ul>
</li>
</ul>

  <h4>Tema anterior</h4>
  <p class="topless"><a href="devmode.html"
                        title="capítulo anterior">Modo de desarrollo de Python</a></p>
  <h4>Próximo tema</h4>
  <p class="topless"><a href="unittest.html"
                        title="próximo capítulo"><code class="xref py py-mod docutils literal notranslate"><span class="pre">unittest</span></code> — Infraestructura de tests unitarios</a></p>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Reporta un Bug</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/3.10/Doc/library/doctest.rst"
            rel="nofollow">Ver Fuente
        </a>
      </li>
    </ul>
  </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice general"
             >índice</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Índice de Módulos Python"
             >módulos</a> |</li>
        <li class="right" >
          <a href="unittest.html" title="unittest — Infraestructura de tests unitarios"
             >siguiente</a> |</li>
        <li class="right" >
          <a href="devmode.html" title="Modo de desarrollo de Python"
             >anterior</a> |</li>

          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.10.10 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" >La Biblioteca Estándar de Python</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="development.html" >Herramientas de desarrollo</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><code class="xref py py-mod docutils literal notranslate"><span class="pre">doctest</span></code> – Prueba ejemplos interactivos de Python</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Búsqueda rápida" aria-label="Búsqueda rápida" type="text" name="q" />
          <input type="submit" value="Ir" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
                     |
                </li>
            
      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="../copyright.html">Copyright</a> 2001-2023, Python Software Foundation.
    <br />
    This page is licensed under the Python Software Foundation License Version 2.
    <br />
    Examples, recipes, and other code in the documentation are additionally licensed under the Zero Clause BSD License.
    <br />
    See <a href="/license.html">History and License</a> for more information.<br />
    <br />

    La Python Software Foundation es una organización sin fines de lucro.
<a href="https://www.python.org/psf/donations/">Por favor, haga una donación.</a>
<br />
    <br />

    Última actualización el mar 27, 2023.
    <a href="/bugs.html">Found a bug</a>?
    <br />

    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.4.3.
    </div>

  </body>
</html>