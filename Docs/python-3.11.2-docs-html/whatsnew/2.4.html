
<!DOCTYPE html>

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<meta property="og:title" content="Qué hay de nuevo en Python 2.4" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://docs.python.org/3/whatsnew/2.4.html" />
<meta property="og:site_name" content="Python documentation" />
<meta property="og:description" content="Autor, A.M. Kuchling,. Este artículo explica las nuevas funcionalidades en Python 2.4.1 lanzadas el 30 de marzo de 2005. Python 2.4 es un lanzamiento de término medio. Esto significa que no se han ..." />
<meta property="og:image" content="https://docs.python.org/3/_static/og-image.png" />
<meta property="og:image:alt" content="Python documentation" />
<meta name="description" content="Autor, A.M. Kuchling,. Este artículo explica las nuevas funcionalidades en Python 2.4.1 lanzadas el 30 de marzo de 2005. Python 2.4 es un lanzamiento de término medio. Esto significa que no se han ..." />
<meta property="og:image:width" content="200" />
<meta property="og:image:height" content="200" />
<meta name="theme-color" content="#3776ab" />

    <title>Qué hay de nuevo en Python 2.4 &#8212; documentación de Python - 3.11.2</title><meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/pydoctheme.css?digest=2d3badd06fe70b34b68db01f99471ce1624ffe4a" />
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/translations.js"></script>
    
    <script src="../_static/sidebar.js"></script>
    
    <link rel="search" type="application/opensearchdescription+xml"
          title="Buscar en documentación de Python - 3.11.2"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="Sobre este documento" href="../about.html" />
    <link rel="index" title="Índice" href="../genindex.html" />
    <link rel="search" title="Búsqueda" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="Qué hay de nuevo en Python 2.3" href="2.3.html" />
    <link rel="prev" title="Qué hay de nuevo en Python 2.5" href="2.5.html" />
    <link rel="canonical" href="https://docs.python.org/3/whatsnew/2.4.html" />
    
      
    

    
    <style>
      @media only screen {
        table.full-width-table {
            width: 100%;
        }
      }
    </style>
<link rel="shortcut icon" type="image/png" href="../_static/py.svg" />
            <script type="text/javascript" src="../_static/copybutton.js"></script>
            <script type="text/javascript" src="../_static/menu.js"></script> 

  </head>
<body>
<div class="mobile-nav">
    <input type="checkbox" id="menuToggler" class="toggler__input" aria-controls="navigation"
           aria-pressed="false" aria-expanded="false" role="button" aria-label="Menu" />
    <label for="menuToggler" class="toggler__label">
        <span></span>
    </label>
    <nav class="nav-content" role="navigation">
         <a href="https://www.python.org/" class="nav-logo">
             <img src="../_static/py.svg" alt="Logo"/>
         </a>
        <div class="version_switcher_placeholder"></div>
        <form role="search" class="search" action="../search.html" method="get">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="search-icon">
                <path fill-rule="nonzero"
                        d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 001.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 00-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 005.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" fill="#444"></path>
            </svg>
            <input type="text" name="q" aria-label="Búsqueda rápida"/>
            <input type="submit" value="Ir"/>
        </form>
    </nav>
    <div class="menu-wrapper">
        <nav class="menu" role="navigation" aria-label="main navigation">
            <div class="language_switcher_placeholder"></div>
  <div>
    <h3><a href="../contents.html">Tabla de contenido</a></h3>
    <ul>
<li><a class="reference internal" href="#">Qué hay de nuevo en Python 2.4</a><ul>
<li><a class="reference internal" href="#pep-218-built-in-set-objects">PEP 218: Objetos conjunto integrados</a></li>
<li><a class="reference internal" href="#pep-237-unifying-long-integers-and-integers">PEP 237: Unificando enteros largos y enteros</a></li>
<li><a class="reference internal" href="#pep-289-generator-expressions">PEP 289: Expresiones generadoras</a></li>
<li><a class="reference internal" href="#pep-292-simpler-string-substitutions">PEP 292: Sustituciones simples de cadenas de caracteres</a></li>
<li><a class="reference internal" href="#pep-318-decorators-for-functions-and-methods">PEP 318: Decoradores para funciones y métodos</a></li>
<li><a class="reference internal" href="#pep-322-reverse-iteration">PEP 322: Iteración inversa</a></li>
<li><a class="reference internal" href="#pep-324-new-subprocess-module">PEP 324: Nuevo módulo de subproceso</a></li>
<li><a class="reference internal" href="#pep-327-decimal-data-type">PEP 327: Tipo de dato decimal</a><ul>
<li><a class="reference internal" href="#why-is-decimal-needed">¿Por qué se necesita Decimal?</a></li>
<li><a class="reference internal" href="#the-decimal-type">El tipo de clase <code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code></a></li>
<li><a class="reference internal" href="#the-context-type">El tipo de clase <code class="xref py py-class docutils literal notranslate"><span class="pre">Context</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#pep-328-multi-line-imports">PEP 328: Importaciones multilínea</a></li>
<li><a class="reference internal" href="#pep-331-locale-independent-float-string-conversions">PEP 331: Conversiones locales-independientes números flotantes/cadenas de texto</a></li>
<li><a class="reference internal" href="#other-language-changes">Otros cambios en el lenguaje</a><ul>
<li><a class="reference internal" href="#optimizations">Optimizaciones</a></li>
</ul>
</li>
<li><a class="reference internal" href="#new-improved-and-deprecated-modules">Módulos nuevos, mejorados y obsoletos</a><ul>
<li><a class="reference internal" href="#cookielib">cookielib</a></li>
<li><a class="reference internal" href="#doctest">doctest</a></li>
</ul>
</li>
<li><a class="reference internal" href="#build-and-c-api-changes">Cambios en la API de Build y C</a><ul>
<li><a class="reference internal" href="#port-specific-changes">Cambios específicos del puerto</a></li>
</ul>
</li>
<li><a class="reference internal" href="#porting-to-python-2-4">Portar a Python 2.4</a></li>
<li><a class="reference internal" href="#acknowledgements">Agradecimientos</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Tema anterior</h4>
    <p class="topless"><a href="2.5.html"
                          title="capítulo anterior">Qué hay de nuevo en Python 2.5</a></p>
  </div>
  <div>
    <h4>Próximo tema</h4>
    <p class="topless"><a href="2.3.html"
                          title="próximo capítulo">Qué hay de nuevo en Python 2.3</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Reporta un bug</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/3.11/Doc/whatsnew/2.4.rst"
            rel="nofollow">Ver fuente
        </a>
      </li>
    </ul>
  </div>
        </nav>
    </div>
</div>

  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice general"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Índice de Módulos Python"
             >módulos</a> |</li>
        <li class="right" >
          <a href="2.3.html" title="Qué hay de nuevo en Python 2.3"
             accesskey="N">siguiente</a> |</li>
        <li class="right" >
          <a href="2.5.html" title="Qué hay de nuevo en Python 2.5"
             accesskey="P">anterior</a> |</li>

          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.11.2 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Qué hay de nuevo en Python</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Qué hay de nuevo en Python 2.4</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Búsqueda rápida" aria-label="Búsqueda rápida" type="text" name="q" />
          <input type="submit" value="Ir" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
                     |
                </li>
            
      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="what-s-new-in-python-2-4">
<h1>Qué hay de nuevo en Python 2.4<a class="headerlink" href="#what-s-new-in-python-2-4" title="Enlazar permanentemente con este título">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Autor</dt>
<dd class="field-odd"><p>A.M. Kuchling</p>
</dd>
</dl>
<p>Este artículo explica las nuevas funcionalidades en Python 2.4.1 lanzadas el 30 de marzo de 2005.</p>
<p>Python 2.4 es un lanzamiento de término medio. Esto significa que no se han introducido grandes cambios como en la versión 2.2 de Python pero si son más significativas que la versión 2.3. Lo más relevante de estas nuevas funcionalidades son los decoradores y generadores de expresiones, la mayor parte del resto de los cambios son a la librería estándar.</p>
<p>De acuerdo al registro de cambios CVS , han sido aplicados 481 parches y 502 bugs han sido corregidos entre las versiones 2.3 y 2.4 de Python. Es posible que ambas cifras no concuerden con la realidad, podrían estar subestimadas.</p>
<p>Este artículo no pretende proveer una especificación completa y detallada de cada funcionalidad nueva, en vez de esto, se provee una breve descripción de las nuevas características. Para obtener más información se debe consultar la documentación oficial de Python 2.4, tal como la librería de referencia de Python y el manual de referencia de Python. Otra fuente de información es PEP (guía de estilo-mejoras de python) para buscar información sobre la implementación y fundamentación del diseño.</p>
<section id="pep-218-built-in-set-objects">
<h2>PEP 218: Objetos conjunto integrados<a class="headerlink" href="#pep-218-built-in-set-objects" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Python 2.3 introdujo el módulo <code class="xref py py-mod docutils literal notranslate"><span class="pre">sets</span></code> , implementaciones del lenguaje C de tipos de datos han sido agregados al core de Python como dos nuevos tipos integrados. <code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">(iterable)</span></code> y <code class="docutils literal notranslate"><span class="pre">frozenset</span> <span class="pre">(iterable)</span></code> . Ellos proveen operaciones de alto rendimiento para pruebas de pertenencia, eliminar datos duplicados de una secuencia y operaciones matemáticas como: uniones, intersecciones, diferencias y diferencias simétricas.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="s1">&#39;abracadabra&#39;</span><span class="p">)</span>              <span class="c1"># form a set from a string</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;z&#39;</span> <span class="ow">in</span> <span class="n">a</span>                            <span class="c1"># fast membership testing</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>                                   <span class="c1"># unique letters in a</span>
<span class="go">set([&#39;a&#39;, &#39;r&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>                          <span class="c1"># convert back into a string</span>
<span class="go">&#39;arbcd&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="s1">&#39;alacazam&#39;</span><span class="p">)</span>                 <span class="c1"># form a second set</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">-</span> <span class="n">b</span>                               <span class="c1"># letters in a but not in b</span>
<span class="go">set([&#39;r&#39;, &#39;d&#39;, &#39;b&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">|</span> <span class="n">b</span>                               <span class="c1"># letters in either a or b</span>
<span class="go">set([&#39;a&#39;, &#39;c&#39;, &#39;r&#39;, &#39;d&#39;, &#39;b&#39;, &#39;m&#39;, &#39;z&#39;, &#39;l&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">&amp;</span> <span class="n">b</span>                               <span class="c1"># letters in both a and b</span>
<span class="go">set([&#39;a&#39;, &#39;c&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">^</span> <span class="n">b</span>                               <span class="c1"># letters in a or b but not both</span>
<span class="go">set([&#39;r&#39;, &#39;d&#39;, &#39;b&#39;, &#39;m&#39;, &#39;z&#39;, &#39;l&#39;])</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;z&#39;</span><span class="p">)</span>                          <span class="c1"># add a new element</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s1">&#39;wxy&#39;</span><span class="p">)</span>                     <span class="c1"># add multiple new elements</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">set([&#39;a&#39;, &#39;c&#39;, &#39;b&#39;, &#39;d&#39;, &#39;r&#39;, &#39;w&#39;, &#39;y&#39;, &#39;x&#39;, &#39;z&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>                       <span class="c1"># take one element out</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">set([&#39;a&#39;, &#39;c&#39;, &#39;b&#39;, &#39;d&#39;, &#39;r&#39;, &#39;w&#39;, &#39;y&#39;, &#39;z&#39;])</span>
</pre></div>
</div>
<p>La función de conjuntos integrados <a class="reference internal" href="../library/stdtypes.html#frozenset" title="frozenset"><code class="xref py py-func docutils literal notranslate"><span class="pre">frozenset()</span></code></a> es una versión inmutable de <a class="reference internal" href="../library/stdtypes.html#set" title="set"><code class="xref py py-func docutils literal notranslate"><span class="pre">set()</span></code></a>. Como es inmutable y hashable (su valor no cambia), se puede usar como una llave de diccionario o como parte de otro set.</p>
<p>El módulo set <code class="xref py py-mod docutils literal notranslate"><span class="pre">sets</span></code> se encuentra en la librería estándar y puede ser útil si se desea usar una subclase de <code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code> o <code class="xref py py-class docutils literal notranslate"><span class="pre">ImmutableSet</span></code> No existen planes de deprecación del módulo.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<dl class="simple">
<dt><span class="target" id="index-37"></span><a class="pep reference external" href="https://peps.python.org/pep-0218/"><strong>PEP 218</strong></a> - Agregando tipo de objeto integrado set</dt><dd><p>Originalmente propuesto por Greg Wilson e implementado finalmente por Raymond Hettinger.</p>
</dd>
</dl>
</div>
</section>
<section id="pep-237-unifying-long-integers-and-integers">
<h2>PEP 237: Unificando enteros largos y enteros<a class="headerlink" href="#pep-237-unifying-long-integers-and-integers" title="Enlazar permanentemente con este título">¶</a></h2>
<p>El prolongado proceso de transición para este PEP que comenzó en Python 2.2 ha dado un paso más adelante en Python 2.4. En la versión 2.3 ciertas operaciones de enteros podían comportarse diferente después de lanzar la unificación del tipo de dato int-long entregando alertas <a class="reference internal" href="../library/exceptions.html#FutureWarning" title="FutureWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">FutureWarning</span></code></a> y retornando valores limitados a 32 o 64 bits dependiendo de su plataforma. En la versión 2.4 estas expresiones ya no producen alertas y en vez de eso entrega un resultado diferente que suele ser un entero largo.</p>
<p>Las expresiones problemáticas son principalmente desplazamientos a la izquierda y constantes largas de hexadecimales y octales. Por ejemplo, <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">&lt;&lt;</span> <span class="pre">32</span></code>  entrega una alerta en la versión 2.3 y evalúa 0 en plataformas 32-bit. Ahora en Python 2.4 la expresión retorna la respuesta correcta, 8589934592.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<dl class="simple">
<dt><span class="target" id="index-38"></span><a class="pep reference external" href="https://peps.python.org/pep-0237/"><strong>PEP 237</strong></a> - Unificando enteros largos y enteros</dt><dd><p>PEP original escrito por Moshe Zadka y GvR.  Los cambios a la versión 2.4 fueron implementados por Kalle Svensson.</p>
</dd>
</dl>
</div>
</section>
<section id="pep-289-generator-expressions">
<h2>PEP 289: Expresiones generadoras<a class="headerlink" href="#pep-289-generator-expressions" title="Enlazar permanentemente con este título">¶</a></h2>
<p>La función de iterador introducida en Python 2.2 y el módulo <a class="reference internal" href="../library/itertools.html#module-itertools" title="itertools: Functions creating iterators for efficient looping."><code class="xref py py-mod docutils literal notranslate"><span class="pre">itertools</span></code></a> facilitan la escritura de programas que recorren grandes conjuntos de datos sin tener todo el conjunto de datos en la memoria al mismo tiempo. Las listas de comprensión no encajan muy bien en esta imagen porque producen un objeto de lista de Python que contiene todos los elementos. Esto inevitablemente lleva todos los objetos a la memoria, lo que puede ser un problema si su conjunto de datos es muy grande. Al tratar de escribir un programa de estilo funcional, sería natural escribir algo como:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">links</span> <span class="o">=</span> <span class="p">[</span><span class="n">link</span> <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">get_all_links</span><span class="p">()</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">link</span><span class="o">.</span><span class="n">followed</span><span class="p">]</span>
<span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">links</span><span class="p">:</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>en vez de</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">get_all_links</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">link</span><span class="o">.</span><span class="n">followed</span><span class="p">:</span>
        <span class="k">continue</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>La primera forma es mas concisa y quizás mas legible pero en caso de trabajar con un gran número largo de objetos podría ser necesario el escribir una segunda línea para evitar tener los objetos enlazados en memoria al mismo tiempo.</p>
<p>Las expresiones generadoras trabajan de forma similar a las listas por comprensión pero no materializan la lista completa, en vez de eso se crea un generador que retornará los elementos uno a uno.
El siguiente ejemplo podría ser escrito como:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">links</span> <span class="o">=</span> <span class="p">(</span><span class="n">link</span> <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">get_all_links</span><span class="p">()</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">link</span><span class="o">.</span><span class="n">followed</span><span class="p">)</span>
<span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">links</span><span class="p">:</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Los generadores de expresiones siempre tienen que ser escritos dentro de paréntesis como en el ejemplo descrito arriba. Los paréntesis señalan una llamada a la función que también se puede contar, entonces si se necesita crear un iterador que inmediatamente pasara a una función se podría escribir:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span> <span class="nb">sum</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">count</span> <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">list_all_objects</span><span class="p">())</span>
</pre></div>
</div>
<p>Las expresiones generadoras difieren de las listas de comprensión por pequeñas diferencias. La mas notable es que la variable del loop (<em>obj</em> en el ejemplo de arriba) no es accesible fuera de la expresión generadora. Las listas de comprensión dejan la variable asignada a su último valor, en versiones futuras de Python esto será cambiado en lo que respecta a hacer que las listas de comprensión coincidan con las expresiones de los generadores.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<dl class="simple">
<dt><span class="target" id="index-39"></span><a class="pep reference external" href="https://peps.python.org/pep-0289/"><strong>PEP 289</strong></a> - Expresiones generadoras</dt><dd><p>Propuesto por Raymond Hettinger e implementada por Jiwon Seo con los primeros esfuerzos dirigidos por Hye-Shik Chang.</p>
</dd>
</dl>
</div>
</section>
<section id="pep-292-simpler-string-substitutions">
<h2>PEP 292: Sustituciones simples de cadenas de caracteres<a class="headerlink" href="#pep-292-simpler-string-substitutions" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Algunas nuevas clases en la librería estándar proveen un mecanismo alternativo para sustituir variables dentro de cadenas de caracteres, este estilo de sustituciones puede ser mejor por aplicaciones donde usuarios sin experiencia necesitan editar plantillas.</p>
<p>La manera usual de sustituir variables por el nombre es con el operador <code class="docutils literal notranslate"><span class="pre">%</span></code> :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;</span><span class="si">%(page)i</span><span class="s1">: </span><span class="si">%(title)s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">{</span><span class="s1">&#39;page&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;The Best of Times&#39;</span><span class="p">}</span>
<span class="go">&#39;2: The Best of Times&#39;</span>
</pre></div>
</div>
<p>Cuando se escriben plantillas con cadenas de caracteres puede ser muy fácil olvidar el uso de <code class="docutils literal notranslate"><span class="pre">i</span></code> or <code class="docutils literal notranslate"><span class="pre">s</span></code> después de cerrar paréntesis. Esto no es un problema grande si se está dentro de un módulo de Python pues al correr el código se lanza el siguiente mensaje de error «Unsupported format character» <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> y el problema se resuelve. Sin embargo, tengamos en cuenta una aplicación como Mailman donde una plantilla de caracteres o traducciones son editadas por usuarios que no están familiarizados con Python. La sintaxis de como formatear las cadenas de caracteres es complicada de explicar para ciertos usuarios y si ellos cometen un error es una dificultad el entregar retroalimentación y ayuda.</p>
<p>PEP 292 agrega una clase <code class="xref py py-class docutils literal notranslate"><span class="pre">Template</span></code> al módulo <a class="reference internal" href="../library/string.html#module-string" title="string: Common string operations."><code class="xref py py-mod docutils literal notranslate"><span class="pre">string</span></code></a> al módulo que usa <code class="docutils literal notranslate"><span class="pre">$</span></code> para indicar una sustitución:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">string</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="n">Template</span><span class="p">(</span><span class="s1">&#39;$page: $title&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">.</span><span class="n">substitute</span><span class="p">({</span><span class="s1">&#39;page&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;The Best of Times&#39;</span><span class="p">})</span>
<span class="go">&#39;2: The Best of Times&#39;</span>
</pre></div>
</div>
<p>Si una llave falta en el diccionario, el método <code class="xref py py-meth docutils literal notranslate"><span class="pre">substitute()</span></code> lanzará una <a class="reference internal" href="../library/exceptions.html#KeyError" title="KeyError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KeyError</span></code></a>. También el método <code class="xref py py-meth docutils literal notranslate"><span class="pre">safe_substitute()</span></code> que ignora las llaves faltantes:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="n">Template</span><span class="p">(</span><span class="s1">&#39;$page: $title&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="o">.</span><span class="n">safe_substitute</span><span class="p">({</span><span class="s1">&#39;page&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">})</span>
<span class="go">&#39;3: $title&#39;</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<dl class="simple">
<dt><span class="target" id="index-40"></span><a class="pep reference external" href="https://peps.python.org/pep-0292/"><strong>PEP 292</strong></a> - Sustituciones simples de cadenas de caracteres</dt><dd><p>Escrito e implementado por Barry Warsaw.</p>
</dd>
</dl>
</div>
</section>
<section id="pep-318-decorators-for-functions-and-methods">
<h2>PEP 318: Decoradores para funciones y métodos<a class="headerlink" href="#pep-318-decorators-for-functions-and-methods" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Python 2.2 extendió el modelo de objeto de Python añadiendo métodos estáticos y métodos de clase pero no se extendió la sintaxis de Python para proveer alguna nueva forma de definir métodos estáticos o de clase. En vez de eso se tenía que escribir la palabra clave <a class="reference internal" href="../reference/compound_stmts.html#def"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">def</span></code></a> de manera usual y pasar el método resultante a la <a class="reference internal" href="../library/functions.html#staticmethod" title="staticmethod"><code class="xref py py-func docutils literal notranslate"><span class="pre">staticmethod()</span></code></a> o a la <a class="reference internal" href="../library/functions.html#classmethod" title="classmethod"><code class="xref py py-func docutils literal notranslate"><span class="pre">classmethod()</span></code></a> que podía agrupar la función como método de un nuevo tipo. El código podría verse como esto:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">C</span><span class="p">:</span>
   <span class="k">def</span> <span class="nf">meth</span> <span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
       <span class="o">...</span>

   <span class="n">meth</span> <span class="o">=</span> <span class="nb">classmethod</span><span class="p">(</span><span class="n">meth</span><span class="p">)</span>   <span class="c1"># Rebind name to wrapped-up class method</span>
</pre></div>
</div>
<p>Si el método era muy largo, era muy probable el perder o olvidar la invocación <a class="reference internal" href="../library/functions.html#classmethod" title="classmethod"><code class="xref py py-func docutils literal notranslate"><span class="pre">classmethod()</span></code></a> dentro del cuerpo de la función.</p>
<p>La intención era siempre agregar alguna sintaxis que hicieran las definiciones mas entendibles pero al tiempo del lanzamiento de la versión 2.2 una buena sintaxis no era clara. Al día de hoy una buena sintaxis aun no es clara pero los usuarios están preguntando por formas más fáciles de acceder a las características, entonces una nueva funcionalidad sintáctica ha sido añadida para satisfacer esta necesidad.</p>
<p>La nueva característica es llamada decoradores de funciones. El nombre proviene de la idea de que <a class="reference internal" href="../library/functions.html#classmethod" title="classmethod"><code class="xref py py-func docutils literal notranslate"><span class="pre">classmethod()</span></code></a>, <a class="reference internal" href="../library/functions.html#staticmethod" title="staticmethod"><code class="xref py py-func docutils literal notranslate"><span class="pre">staticmethod()</span></code></a> son amigos y guardan información adicional en un objeto de una función. ellos están decorando funciones con mas detalles.</p>
<p>La notación proviene de Java y usa el <code class="docutils literal notranslate"><span class="pre">'&#64;'</span></code> símbolo arroba como un indicador. Usando la nueva sintaxis el ejemplo descrito arriba podría ser escrito de la siguiente forma:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">C</span><span class="p">:</span>

   <span class="nd">@classmethod</span>
   <span class="k">def</span> <span class="nf">meth</span> <span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
       <span class="o">...</span>
</pre></div>
</div>
<p>El <code class="docutils literal notranslate"><span class="pre">&#64;classmethod</span></code>  es un atajo para <code class="docutils literal notranslate"><span class="pre">meth=classmethod(meth)</span></code>. De forma general si se tiene lo siguiente:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="nd">@A</span>
<span class="nd">@B</span>
<span class="nd">@C</span>
<span class="k">def</span> <span class="nf">f</span> <span class="p">():</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Es el equivalente para el siguiente código de pre decorador:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">f</span><span class="p">():</span> <span class="o">...</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">A</span><span class="p">(</span><span class="n">B</span><span class="p">(</span><span class="n">C</span><span class="p">(</span><span class="n">f</span><span class="p">)))</span>
</pre></div>
</div>
<p>Los decoradores deben agregarse en una línea antes de la definición de la función, un decorador por línea y no puede estar en la misma línea donde se usa la palabra def para comenzar una función, por ejemplo <code class="docutils literal notranslate"><span class="pre">&#64;A</span> <span class="pre">def</span> <span class="pre">f():</span> <span class="pre">...</span></code> es incorrecto. Solo se puede decorar una definición de función tanto al nivel de módulo o dentro de una clase pero no puedes decorar definiciones de clase.</p>
<p>Un decorador es simplemente una función que toma la función a ser decorada como un argumento y retorna tanto la misma función o un nuevo objeto. El valor de retorno del decorador no necesita ser llamado (como típicamente se cree) si no que los decoradores podrán ser aplicados al resultado. Es fácil escribir sus propios decoradores. El siguiente ejemplo agrega un atributo a la función objetiva:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">deco</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
<span class="gp">... </span>   <span class="n">func</span><span class="o">.</span><span class="n">attr</span> <span class="o">=</span> <span class="s1">&#39;decorated&#39;</span>
<span class="gp">... </span>   <span class="k">return</span> <span class="n">func</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@deco</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">f</span><span class="p">():</span> <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span>
<span class="go">&lt;function f at 0x402ef0d4&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">attr</span>
<span class="go">&#39;decorated&#39;</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>Como un ejemplo un poco mas realista, el siguiente decorador revisa si el argumento entregado es un entero:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">require_int</span> <span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">wrapper</span> <span class="p">(</span><span class="n">arg</span><span class="p">):</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">wrapper</span>

<span class="nd">@require_int</span>
<span class="k">def</span> <span class="nf">p1</span> <span class="p">(</span><span class="n">arg</span><span class="p">):</span>
    <span class="nb">print</span> <span class="n">arg</span>

<span class="nd">@require_int</span>
<span class="k">def</span> <span class="nf">p2</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
    <span class="nb">print</span> <span class="n">arg</span><span class="o">*</span><span class="mi">2</span>
</pre></div>
</div>
<p>Un ejemplo en <span class="target" id="index-41"></span><a class="pep reference external" href="https://peps.python.org/pep-0318/"><strong>PEP 318</strong></a>  contiene una versión mas elegante de esta idea donde deja que usted elija específicamente el tipo y revisa el tipo de retorno.</p>
<p>Los decoradores de funciones pueden tomar argumentos. Si los argumentos son provistos, el decorador de la función es llamado con solo esos argumentos y retorna un nuevo decorador de función, esta función debe tomar una función sola y retorna una función como previamente se ha descrito. En otras palabras <code class="docutils literal notranslate"><span class="pre">&#64;A</span> <span class="pre">&#64;B</span> <span class="pre">&#64;C(args)</span></code> comienza:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">f</span><span class="p">():</span> <span class="o">...</span>
<span class="n">_deco</span> <span class="o">=</span> <span class="n">C</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">A</span><span class="p">(</span><span class="n">B</span><span class="p">(</span><span class="n">_deco</span><span class="p">(</span><span class="n">f</span><span class="p">)))</span>
</pre></div>
</div>
<p>Conseguir que esto resulte correcto puede ser un acertijo pero tampoco es muy dificultoso.</p>
<p>Un pequeño cambio relacionado hace el atributo <code class="xref py py-attr docutils literal notranslate"><span class="pre">func_name</span></code> de la función modificable. Este atributo es usado para desplegar nombres de funciones en el rastreo, entonces los decoradores cambia el nombre de cualquier nueva función que es construida y retornada.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<dl class="simple">
<dt><span class="target" id="index-42"></span><a class="pep reference external" href="https://peps.python.org/pep-0318/"><strong>PEP 318</strong></a> Decoradores para funciones, métodos y clases</dt><dd><p>Escrito por Kevin D.Smith, Jim Jewett y Skip Montanaro. Varias personas escribieron parches sobre la implementación de los decoradores de funciones, pero el único que fue chequeado fue #979728 por Mark Russell.</p>
</dd>
<dt><a class="reference external" href="https://wiki.python.org/moin/PythonDecoratorLibrary">https://wiki.python.org/moin/PythonDecoratorLibrary</a></dt><dd><p>Esta pagina de wiki contiene múltiples ejemplos de decoradores.</p>
</dd>
</dl>
</div>
</section>
<section id="pep-322-reverse-iteration">
<h2>PEP 322: Iteración inversa<a class="headerlink" href="#pep-322-reverse-iteration" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Una nueva función de conjuntos integrados, <code class="docutils literal notranslate"><span class="pre">reversed(seq)</span></code> toma una secuencia y retorna un iterador que recorre los elementos de la secuencia en orden inverso.:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">xrange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">)):</span>
<span class="gp">... </span>   <span class="nb">print</span> <span class="n">i</span>
<span class="gp">...</span>
<span class="go">3</span>
<span class="go">2</span>
<span class="go">1</span>
</pre></div>
</div>
<p>Comparado con el uso tradicional de la segmentación tal como <code class="docutils literal notranslate"><span class="pre">range(1,4)[::-1]</span></code> la  función <a class="reference internal" href="../library/functions.html#reversed" title="reversed"><code class="xref py py-func docutils literal notranslate"><span class="pre">reversed()</span></code></a> es fácil de leer,  se ejecuta mas rápido y usa sustancialmente menos memoria.</p>
<p>Señalar que la función <a class="reference internal" href="../library/functions.html#reversed" title="reversed"><code class="xref py py-func docutils literal notranslate"><span class="pre">reversed()</span></code></a> solo acepta secuencias, no iteradores arbitrarios. Si se quiere revertir un iterador, primero se debe convertir a una lista usando la función <a class="reference internal" href="../library/stdtypes.html#list" title="list"><code class="xref py py-func docutils literal notranslate"><span class="pre">list()</span></code></a>.:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">input</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;/etc/passwd&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">input</span><span class="p">)):</span>
<span class="gp">... </span>  <span class="nb">print</span> <span class="n">line</span>
<span class="gp">...</span>
<span class="go">root:*:0:0:System Administrator:/var/root:/bin/tcsh</span>
<span class="go">  ...</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<dl class="simple">
<dt><span class="target" id="index-43"></span><a class="pep reference external" href="https://peps.python.org/pep-0322/"><strong>PEP 322</strong></a> - Iteración inversa</dt><dd><p>Escrita e implementada por Raymond Hettinger.</p>
</dd>
</dl>
</div>
</section>
<section id="pep-324-new-subprocess-module">
<h2>PEP 324: Nuevo módulo de subproceso<a class="headerlink" href="#pep-324-new-subprocess-module" title="Enlazar permanentemente con este título">¶</a></h2>
<p>La librería estándar provee un cierto número de formas de ejecutar un subproceso, ofreciendo diferentes funcionalidades y diferentes niveles de complejidad. <code class="docutils literal notranslate"><span class="pre">os.system(command)</span></code> es fácil de usar pero lento (esto corre un proceso a nivel de interprete de comandos)y peligroso (se tiene que ser cuidadoso con no considerar los metacaracteres usados en el intérprete)
El módulo <code class="xref py py-mod docutils literal notranslate"><span class="pre">popen2</span></code> ofrece clases que pueden capturar la salida estándar y el error estándar del subproceso, pero el nombre puede ser confuso.
El módulo <a class="reference internal" href="../library/subprocess.html#module-subprocess" title="subprocess: Subprocess management."><code class="xref py py-mod docutils literal notranslate"><span class="pre">subprocess</span></code></a> deja esto mas claro proveyendo una interface unificada que ofrece todas las funcionalidades que usted necesita.</p>
<p>En vez de <code class="xref py py-mod docutils literal notranslate"><span class="pre">popen2</span></code> que es una colección de clases el <a class="reference internal" href="../library/subprocess.html#module-subprocess" title="subprocess: Subprocess management."><code class="xref py py-mod docutils literal notranslate"><span class="pre">subprocess</span></code></a> contiene una sola clase llamada <code class="xref py py-class docutils literal notranslate"><span class="pre">Popen</span></code> cuyo constructor soporta un número de diferentes argumentos de palabra clave:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Popen</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">bufsize</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">executable</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">stdin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stderr</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">preexec_fn</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">close_fds</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">cwd</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">universal_newlines</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">startupinfo</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">creationflags</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</pre></div>
</div>
<p><em>args</em> es comúnmente una secuencia de cadenas de caracteres que podrán ser los argumentos del programa ejecutado como un subproceso. (Si el argumento <em>shell</em> es verdadero, <em>args</em> puede ser una cadena de caracteres que serán pasados directamente a la shell para su interpretación, tal como <a class="reference internal" href="../library/os.html#os.system" title="os.system"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.system()</span></code></a> lo hace.)</p>
<p><em>stdin</em>, <em>stdout</em>, y <em>stderr</em> especifican que flujos de entrada, salida y error serán utilizados. Se puede proceder un objeto de archivo o un archivo de descripción o se puede usar la constante <code class="docutils literal notranslate"><span class="pre">subprocess.PIPE</span></code> para crear un enlace entre el subproceso y el proceso principal.</p>
<p id="index-7">El constructor tiene un número de opciones útiles:</p>
<ul class="simple">
<li><p><em>close_fds</em> requiere que todos los descriptores de archivos sean cerrados antes de correr el subproceso.</p></li>
<li><p><em>cwd</em>  especifica el directorio operativo donde el subproceso será ejecutado (por defecto, cualquiera que sea el directorio principal)</p></li>
<li><p><em>env</em>  es un diccionario donde se especifican las variables de entorno.</p></li>
<li><p><em>preexec_fn</em> es una función que es llamada antes de que el proceso hijo sea llamado.</p></li>
<li><p><em>universal_newlines</em> abre el flujo de entrada y salida del hijo usando la característica de Python <a class="reference internal" href="../glossary.html#term-universal-newlines"><span class="xref std std-term">universal newlines</span></a> .</p></li>
</ul>
<p>Una vez que se ha creado la instancia de la <code class="xref py py-class docutils literal notranslate"><span class="pre">Popen</span></code>  se puede llamar al método <code class="xref py py-meth docutils literal notranslate"><span class="pre">wait()</span></code> para poner en pausa hasta que el subproceso ha terminado, el método <code class="xref py py-meth docutils literal notranslate"><span class="pre">poll()</span></code> comprueba si se ha salido sin pausar o el uso de <code class="docutils literal notranslate"><span class="pre">communicate(data)</span></code> envía la cadena de caracteres <em>data</em> a la entrada estándar del subproceso. Y el uso de <code class="docutils literal notranslate"><span class="pre">communicate(data)</span></code> que lee cualquier dato que el subproceso ha enviado a la salida estándar, retornando una tupla <code class="docutils literal notranslate"><span class="pre">(stdout_data,</span> <span class="pre">stderr_data)</span></code>.</p>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">call()</span></code> es un atajo que pasa estos argumentos a lo largo del constructor de la clase <code class="xref py py-class docutils literal notranslate"><span class="pre">Popen</span></code>, espera por el comando para completar la secuencia y retorna el código de estatus del subproceso. Esto puede servir como un análogo mas seguro de <a class="reference internal" href="../library/os.html#os.system" title="os.system"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.system()</span></code></a>:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">sts</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">call</span><span class="p">([</span><span class="s1">&#39;dpkg&#39;</span><span class="p">,</span> <span class="s1">&#39;-i&#39;</span><span class="p">,</span> <span class="s1">&#39;/tmp/new-package.deb&#39;</span><span class="p">])</span>
<span class="k">if</span> <span class="n">sts</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
    <span class="c1"># Success</span>
    <span class="o">...</span>
<span class="k">else</span><span class="p">:</span>
    <span class="c1"># dpkg returned an error</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>El comando es invocado sin el uso del interprete de comandos. Si se desea usar el intérprete se puede agregar <code class="docutils literal notranslate"><span class="pre">shell=True</span></code> como un argumento de palabra clave y proveer una cadena de caracteres en vez de una secuencia:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">sts</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;dpkg -i /tmp/new-package.deb&#39;</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>La guía de estilo de Python toma varios ejemplos de línea de comandos y código python y muestra como estos son traducidos en el código python <a class="reference internal" href="../library/subprocess.html#module-subprocess" title="subprocess: Subprocess management."><code class="xref py py-mod docutils literal notranslate"><span class="pre">subprocess</span></code></a>. Leer esta sección de la guía de estilo es altamente recomendado.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<dl class="simple">
<dt><span class="target" id="index-44"></span><a class="pep reference external" href="https://peps.python.org/pep-0324/"><strong>PEP 324</strong></a> - subprocess - Nuevo módulo de procesos</dt><dd><p>Escrito e implementado por Peter Åstrand, con asistencia de Frederik Lundh y otros.</p>
</dd>
</dl>
</div>
</section>
<section id="pep-327-decimal-data-type">
<h2>PEP 327: Tipo de dato decimal<a class="headerlink" href="#pep-327-decimal-data-type" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Python siempre ha soportado números de punto flotante (FP), basados ​​en el tipo subyacente C <span class="c-expr sig sig-inline c"><span class="kt">double</span></span>, como un tipo de datos. Sin embargo, aunque la mayoría de los lenguajes de programación proporcionan un tipo de punto flotante, muchas personas (incluso los programadores) no saben que los números de punto flotante no representan ciertas fracciones decimales con precisión. El nuevo tipo <code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code> puede representar estas fracciones con precisión, hasta un límite de precisión especificado por el usuario.</p>
<section id="why-is-decimal-needed">
<h3>¿Por qué se necesita Decimal?<a class="headerlink" href="#why-is-decimal-needed" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Las limitaciones surgen de la representación usada para los números de punto flotante. Los números de punto flotante están hechos de tres componentes:</p>
<ul class="simple">
<li><p>El signo, el cual es positivo o negativo.</p></li>
<li><p>El significando o mantisa el cual es el un dígito binario seguido de su parte fraccional. Por ejemplo, <code class="docutils literal notranslate"><span class="pre">1.01</span></code> en notación base 2 es <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">+</span> <span class="pre">0/2</span> <span class="pre">+</span> <span class="pre">1/4</span></code> o 1.25 en notación decimal.</p></li>
<li><p>El exponente, que indica dónde se encuentra el punto decimal en el número representado.</p></li>
</ul>
<p>Por ejemplo, el número 1.25 tiene un signo positivo, una mantisa de valor 1.01 (en binario) y un exponente de 0 (el punto decimal no necesita ser desplazado. El números 5 tiene el mismo signo y significando pero, el exponente es 2 porque el significando es multiplicado por 4 (2 elevado a la potencia del exponente 2), 1.25 * 4 es igual a 5.</p>
<p>Los sistemas modernos generalmente brindan soporte de coma flotante que se ajusta a un estándar llamado IEEE 754. El tipo <span class="c-expr sig sig-inline c"><span class="kt">double</span></span> de C generalmente se implementa como un número IEEE 754 de 64 bits, que usa 52 bits de espacio para la mantisa. Esto significa que los números solo se pueden especificar con 52 bits de precisión. Si está tratando de representar números cuya expansión se repite sin cesar, la expansión se corta después de 52 bits. Desafortunadamente, la mayoría del software necesita producir resultados en base 10, y las fracciones comunes en base 10 a menudo son decimales repetidos en binario. Por ejemplo, 1.1 decimal es binario <code class="docutils literal notranslate"><span class="pre">1.0001100110011</span> <span class="pre">...</span></code>; .1 = 1/16 + 1/32 + 1/256 más un número infinito de términos adicionales. IEEE 754 tiene que cortar ese decimal repetido infinitamente después de 52 dígitos, por lo que la representación es un poco inexacta.</p>
<p>Algunas veces se puede ver esta inexactitud cuando el número es impreso por pantalla:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="mf">1.1</span>
<span class="go">1.1000000000000001</span>
</pre></div>
</div>
<p>La inexactitud no siempre es visible cuando se imprime el número porque el punto flotante a decimal y conversión a cadena de texto es entregada por la librería C y la mayoría de las librerías C tratan de producir una salida sensible. Incluso si no es mostrado, la inexactitud sigue ahí y las operaciones subsecuentes pueden agrandar el error.</p>
<p>Para muchas aplicaciones esto no importa. Si estoy trazando puntos y mostrándolos en el monitor la diferencia entre 1.1 y 1.1000000000000001 es muy pequeña para ser visible.  Los reportes a menudo limitan la salida de un cierto número de decimales y si se redondea el número a dos o tres e incluso a 8 decimales, el error nunca aparece. Sin embargo, para las aplicaciones donde esto importa, es una cantidad de trabajo importante el personalizar los cálculos aritméticos.</p>
<p>Es por eso que el tipo de clase <code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code> fue creada.</p>
</section>
<section id="the-decimal-type">
<h3>El tipo de clase <code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code><a class="headerlink" href="#the-decimal-type" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Un nuevo módulo, <a class="reference internal" href="../library/decimal.html#module-decimal" title="decimal: Implementation of the General Decimal Arithmetic  Specification."><code class="xref py py-mod docutils literal notranslate"><span class="pre">decimal</span></code></a>, fue añadido a la librería estándar de Python. Esta contiene dos clases, <code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code> y <code class="xref py py-class docutils literal notranslate"><span class="pre">Context</span></code>. Las instancias de la clase decimal <code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code> representan números y la instancia de la <code class="xref py py-class docutils literal notranslate"><span class="pre">Context</span></code> son usadas para condensar varios ajustes como la precisión y el modo de redondeo por defecto.</p>
<p>Las instancias de la clase <code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code> son inmutables como los números enteros y números de punto flotante en Python, una vez han sido creadas no se puede cambiar el valor de lo que la instancia representa. Las instancias de la <code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code> pueden ser creados desde números enteros o cadenas de texto:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">decimal</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="mi">1972</span><span class="p">)</span>
<span class="go">Decimal(&quot;1972&quot;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;1.1&quot;</span><span class="p">)</span>
<span class="go">Decimal(&quot;1.1&quot;)</span>
</pre></div>
</div>
<p>También se pueden proveer tuplas que contentan el signo, la mantisa representada como una tupla de números decimales y el exponente:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="o">-</span><span class="mi">2</span><span class="p">))</span>
<span class="go">Decimal(&quot;-14.75&quot;)</span>
</pre></div>
</div>
<p>Precaución: El signo bit es un valor booleano entonces 0 es positivo y 1 es negativo.</p>
<p>Convertir desde números de punto flotante posee un pequeño problema, el punto flotante representa 1.1 y se convierte en número decimal como 1.1 o por 1.1 mas cualquier inexactitud que se introduzca? La decisión fue evitar el problema y dejar tal conversión fuera de la API. En su lugar se debe convertir el número de punto flotante en una cadena con la precisión deseada y pasar la cadena al constructor <code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code> :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="mf">1.1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">))</span>
<span class="go">Decimal(&quot;1.1&quot;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%.12f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">f</span><span class="p">)</span>
<span class="go">Decimal(&quot;1.100000000000&quot;)</span>
</pre></div>
</div>
<p>Una vez que se tiene la instancia de la clase <code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code> se pueden realizar las operaciones matemáticas de rigor. Una limitación, la exponenciación requiere un exponente expresado en tipo de dato entero:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;35.72&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.73&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">+</span><span class="n">b</span>
<span class="go">Decimal(&quot;37.45&quot;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">-</span><span class="n">b</span>
<span class="go">Decimal(&quot;33.99&quot;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">*</span><span class="n">b</span>
<span class="go">Decimal(&quot;61.7956&quot;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">/</span><span class="n">b</span>
<span class="go">Decimal(&quot;20.64739884393063583815028902&quot;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">**</span> <span class="mi">2</span>
<span class="go">Decimal(&quot;1275.9184&quot;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">**</span><span class="n">b</span>
<span class="gt">Traceback (most recent call last):</span>
  <span class="c">...</span>
<span class="gr">decimal.InvalidOperation</span>: <span class="n">x ** (non-integer)</span>
</pre></div>
</div>
<p>Se puede combinar la instancia de la clase <code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code> con enteros pero no con números de punto flotante:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">+</span> <span class="mi">4</span>
<span class="go">Decimal(&quot;39.72&quot;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">+</span> <span class="mf">4.5</span>
<span class="gt">Traceback (most recent call last):</span>
  <span class="c">...</span>
<span class="gr">TypeError</span>: <span class="n">You can interact Decimal only with int, long or Decimal data types.</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>Los números en la clase <code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code> pueden ser usados con los módulos <a class="reference internal" href="../library/math.html#module-math" title="math: Mathematical functions (sin() etc.)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">math</span></code></a> y <a class="reference internal" href="../library/cmath.html#module-cmath" title="cmath: Mathematical functions for complex numbers."><code class="xref py py-mod docutils literal notranslate"><span class="pre">cmath</span></code></a> pero es preciso aclarar que ellos serán inmediatamente convertidos a números de punto flotante antes de realizar la operación, resultando en una posible perdida de precisión y exactitud. También obtendrá un número de punto flotante y no una clase <code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code>:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">math</span><span class="o">,</span> <span class="nn">cmath</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;123456789012.345&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="go">351364.18288201344</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cmath</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="o">-</span><span class="n">d</span><span class="p">)</span>
<span class="go">351364.18288201344j</span>
</pre></div>
</div>
<p>Las instancias de la clase <code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code> poseen un método <code class="xref py py-meth docutils literal notranslate"><span class="pre">sqrt()</span></code> que retorna una clase <code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code> pero si se necesita otro tipo de cosas como funciones trigonométricas se tendrían que implementar:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">sqrt</span><span class="p">()</span>
<span class="go">Decimal(&quot;351364.1828820134592177245001&quot;)</span>
</pre></div>
</div>
</section>
<section id="the-context-type">
<h3>El tipo de clase <code class="xref py py-class docutils literal notranslate"><span class="pre">Context</span></code><a class="headerlink" href="#the-context-type" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Las instancias de la <code class="xref py py-class docutils literal notranslate"><span class="pre">Context</span></code> encapsulan varios ajustes para operaciones con decimales:</p>
<ul class="simple">
<li><p>atributo <code class="xref py py-attr docutils literal notranslate"><span class="pre">prec</span></code> es la precisión del número de decimales.</p></li>
<li><p>El atributo <code class="xref py py-attr docutils literal notranslate"><span class="pre">rounding</span></code> especifica el modo de redondeo. El módulo <a class="reference internal" href="../library/decimal.html#module-decimal" title="decimal: Implementation of the General Decimal Arithmetic  Specification."><code class="xref py py-mod docutils literal notranslate"><span class="pre">decimal</span></code></a> tiene constantes para varias posibilidades, <code class="xref py py-const docutils literal notranslate"><span class="pre">ROUND_DOWN</span></code>, <code class="xref py py-const docutils literal notranslate"><span class="pre">ROUND_CEILING</span></code>,  <code class="xref py py-const docutils literal notranslate"><span class="pre">ROUND_HALF_EVEN</span></code> y varias otras.</p></li>
<li><p>El atributo <code class="xref py py-attr docutils literal notranslate"><span class="pre">traps</span></code> es un diccionario que especifica lo que sucede al encontrar ciertas condiciones de error: Ya sea una excepción lanzada o un valor es retornado. algunos ejemplos de errores son las divisiones por cero, perdida de precisión o desbordamiento.</p></li>
</ul>
<p>Hay un contexto predeterminado local de subprocesos disponible llamando a la función <code class="xref py py-func docutils literal notranslate"><span class="pre">getcontext()</span></code>, se puede cambiar las propiedades de este contexto para alterar la precisión por defecto, redondear o manejar trampas. el siguiente ejemplo muestra el efecto de cambiar la precisión del contexto por defecto:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">decimal</span><span class="o">.</span><span class="n">getcontext</span><span class="p">()</span><span class="o">.</span><span class="n">prec</span>
<span class="go">28</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="go">Decimal(&quot;0.1428571428571428571428571429&quot;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">decimal</span><span class="o">.</span><span class="n">getcontext</span><span class="p">()</span><span class="o">.</span><span class="n">prec</span> <span class="o">=</span> <span class="mi">9</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="go">Decimal(&quot;0.142857143&quot;)</span>
</pre></div>
</div>
<p>Las acciones por defecto para condiciones de error se puede seleccionar, ya sea que el módulo pueda retornar un valor especial como un infinito o un valor no numérico NaN o se pueden lanzar excepciones:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  <span class="c">...</span>
<span class="gr">decimal.DivisionByZero</span>: <span class="n">x / 0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">decimal</span><span class="o">.</span><span class="n">getcontext</span><span class="p">()</span><span class="o">.</span><span class="n">traps</span><span class="p">[</span><span class="n">decimal</span><span class="o">.</span><span class="n">DivisionByZero</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">decimal</span><span class="o">.</span><span class="n">Decimal</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">Decimal(&quot;Infinity&quot;)</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>La instancia de la clase <code class="xref py py-class docutils literal notranslate"><span class="pre">Context</span></code> también tiene varios métodos para formatear números tales como <code class="xref py py-meth docutils literal notranslate"><span class="pre">to_eng_string()</span></code> y <code class="xref py py-meth docutils literal notranslate"><span class="pre">to_sci_string()</span></code>.</p>
<p>Para mas información, revisar la documentación para el módulo <a class="reference internal" href="../library/decimal.html#module-decimal" title="decimal: Implementation of the General Decimal Arithmetic  Specification."><code class="xref py py-mod docutils literal notranslate"><span class="pre">decimal</span></code></a> el cual incluye un tutoría de inicio rápido y una referencia.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<dl class="simple">
<dt><span class="target" id="index-45"></span><a class="pep reference external" href="https://peps.python.org/pep-0327/"><strong>PEP 327</strong></a> - Tipo de dato decimal</dt><dd><p>Escrito por Facundo Batista e implementado por Facundo Batista, Eric Price, Raymond Hettinger, Aahz y Tim Peters.</p>
</dd>
<dt><a class="reference external" href="http://www.lahey.com/float.htm">http://www.lahey.com/float.htm</a></dt><dd><p>El articulo usa código Fortran para ilustrar varios de los problemas que la inexactitud de los puntos flotantes pueden causar.</p>
</dd>
<dt><a class="reference external" href="http://speleotrove.com/decimal/">http://speleotrove.com/decimal/</a></dt><dd><p>Una descripción de una representación basada en decimales. Esta representación ha sido propuesta como un estándar y subyace al nuevo tipo de dato decimal en Python. La mayor parte de este material fue escrita por Mike Cowlishaw, diseñador del lenguaje Rexx.</p>
</dd>
</dl>
</div>
</section>
</section>
<section id="pep-328-multi-line-imports">
<h2>PEP 328: Importaciones multilínea<a class="headerlink" href="#pep-328-multi-line-imports" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Un pequeño cambio en el lenguaje ha sido una modificación a una sintaxis confusa que ha sido cambiada para hacer mas fácil el agregar varios nombres en un módulo. En una declaración <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">module</span> <span class="pre">import</span> <span class="pre">names</span></code>, <em>names</em> es una secuencia de nombres separados por comas. Si la sentencia es muy larga, se puede ya sea escribir múltiples sentencias import desde el mismo módulo o se pueden usar barras invertidas para escapar de los términos de línea como esto:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">SimpleXMLRPCServer</span> <span class="kn">import</span> <span class="n">SimpleXMLRPCServer</span><span class="p">,</span>\
            <span class="n">SimpleXMLRPCRequestHandler</span><span class="p">,</span>\
            <span class="n">CGIXMLRPCRequestHandler</span><span class="p">,</span>\
            <span class="n">resolve_dotted_attribute</span>
</pre></div>
</div>
<p>La sintaxis cambió en Python 2.4 y es simplemente el permitir poner los nombres dentro de paréntesis. Python ignora nuevas líneas dentro de una expresión entre paréntesis por lo que las barras invertidas ya no se necesitan:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">SimpleXMLRPCServer</span> <span class="kn">import</span> <span class="p">(</span><span class="n">SimpleXMLRPCServer</span><span class="p">,</span>
                                <span class="n">SimpleXMLRPCRequestHandler</span><span class="p">,</span>
                                <span class="n">CGIXMLRPCRequestHandler</span><span class="p">,</span>
                                <span class="n">resolve_dotted_attribute</span><span class="p">)</span>
</pre></div>
</div>
<p>La convención de estilo también propone que todas las declaraciones usando  <a class="reference internal" href="../reference/simple_stmts.html#import"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">import</span></code></a> son importaciones absolutas, con el siguiente carácter <code class="docutils literal notranslate"><span class="pre">.</span></code> indica una importación relativa. Esta parte de la convención de estilo no fue implementada para Python 2.4 pero fue completada para la versión 2.5.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<dl class="simple">
<dt><span class="target" id="index-46"></span><a class="pep reference external" href="https://peps.python.org/pep-0328/"><strong>PEP 328</strong></a> - Importaciones multi línea y absolutas/relativas</dt><dd><p>Escrita por Aahz.  Importaciones multi línea fueron implementadas por Dima Dorfman.</p>
</dd>
</dl>
</div>
</section>
<section id="pep-331-locale-independent-float-string-conversions">
<h2>PEP 331: Conversiones locales-independientes números flotantes/cadenas de texto<a class="headerlink" href="#pep-331-locale-independent-float-string-conversions" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Los módulos <a class="reference internal" href="../library/locale.html#module-locale" title="locale: Internationalization services."><code class="xref py py-mod docutils literal notranslate"><span class="pre">locale</span></code></a> deja que el software de Python seleccione varias conversiones y despliegue convenciones que están localizadas en un país particular o lenguaje. Sin embargo, el módulo es cuidadoso en no cambiar el local numérico porque la implementación de Python requería que la configuración regional numérica permaneciera establecida en la configuración regional <code class="docutils literal notranslate"><span class="pre">'C'</span></code> . A menudo, esto se debía a que el código utilizaba la función <code class="xref c c-func docutils literal notranslate"><span class="pre">atof()</span></code> de la biblioteca C.</p>
<p>No configurar la configuración regional numérica causaba problemas para las extensiones que usaban librerías externas de C, sin embargo, porque no configuraban la correcta configuración. El ejemplo mas patente fue GTK+, cuya interfaz de usuario no mostraba números en la ubicación actual.</p>
<p>La solución descrita en la convención de estilo es añadir tres nuevas funciones a la API de python que ejecuta solo conversiones a ASCII, ignorando las configuraciones locales:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">PyOS_ascii_strtod(str,</span> <span class="pre">ptr)</span></code> y <code class="docutils literal notranslate"><span class="pre">PyOS_ascii_atof(str,</span> <span class="pre">ptr)</span></code> convierten una cadena en C <span class="c-expr sig sig-inline c"><span class="kt">double</span></span>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PyOS_ascii_formatd(buffer,</span> <span class="pre">buf_len,</span> <span class="pre">format,</span> <span class="pre">d)</span></code> convierte un <span class="c-expr sig sig-inline c"><span class="kt">double</span></span> en una cadena ASCII.</p></li>
</ul>
<p>El código para estas funciones proviene desde la librería GLib  (<a class="reference external" href="https://developer.gnome.org/glib/stable/">https://developer.gnome.org/glib/stable/</a>) cuyos desarrolladores amablemente han residenciado las funciones relevantes y las han donado a la fundación de software Python. El módulo <a class="reference internal" href="../library/locale.html#module-locale" title="locale: Internationalization services."><code class="xref py py-mod docutils literal notranslate"><span class="pre">locale</span></code></a> ahora puede cambiar la configuración local, dejando que las extensiones como GTK¿ produzcan los resultados correctos.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<dl class="simple">
<dt><span class="target" id="index-47"></span><a class="pep reference external" href="https://peps.python.org/pep-0331/"><strong>PEP 331</strong></a> Conversiones Local-Independiente flotante/cadena de texto</dt><dd><p>Escrito por Christian R. Reis, e implementado por Gustavo Carneiro.</p>
</dd>
</dl>
</div>
</section>
<section id="other-language-changes">
<h2>Otros cambios en el lenguaje<a class="headerlink" href="#other-language-changes" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Aquí están todos los cambios que Python 2.4 ha hecho al core del lenguaje Python.</p>
<ul>
<li><p>Fueron añadidos decoraciones para funciones (<span class="target" id="index-48"></span><a class="pep reference external" href="https://peps.python.org/pep-0318/"><strong>PEP 318</strong></a>).</p></li>
<li><p>Funciones de conjuntos integrados <a class="reference internal" href="../library/stdtypes.html#set" title="set"><code class="xref py py-func docutils literal notranslate"><span class="pre">set()</span></code></a> y <a class="reference internal" href="../library/stdtypes.html#frozenset" title="frozenset"><code class="xref py py-func docutils literal notranslate"><span class="pre">frozenset()</span></code></a> fueron añadidas (<span class="target" id="index-49"></span><a class="pep reference external" href="https://peps.python.org/pep-0218/"><strong>PEP 218</strong></a>). Otras nuevas funciones de conjuntos integrados incluyen la función <code class="docutils literal notranslate"><span class="pre">reversed(seq)</span></code> (<span class="target" id="index-50"></span><a class="pep reference external" href="https://peps.python.org/pep-0322/"><strong>PEP 322</strong></a>).</p></li>
<li><p>Generador de expresiones fueron añadidas (<span class="target" id="index-51"></span><a class="pep reference external" href="https://peps.python.org/pep-0289/"><strong>PEP 289</strong></a>).</p></li>
<li><p>Algunas expresiones numéricas ya no retornan valores restringidos a 32 o 64 bits (<span class="target" id="index-52"></span><a class="pep reference external" href="https://peps.python.org/pep-0237/"><strong>PEP 237</strong></a>).</p></li>
<li><p>Se puede poner entre paréntesis una lista de nombres en la declaración <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">module</span> <span class="pre">import</span> <span class="pre">names</span></code> (<span class="target" id="index-53"></span><a class="pep reference external" href="https://peps.python.org/pep-0328/"><strong>PEP 328</strong></a>).</p></li>
<li><p>El método <a class="reference internal" href="../library/stdtypes.html#dict.update" title="dict.update"><code class="xref py py-meth docutils literal notranslate"><span class="pre">dict.update()</span></code></a> ahora acepta el mismo argumento que el constructor de la <a class="reference internal" href="../library/stdtypes.html#dict" title="dict"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>. Esto incluye cualquier tipo de mapeo, iterable pares de clave/valor y argumentos de palabra clave. (Contribución de Raymond Hettinger)</p></li>
<li><p>Los métodos de cadena de caracteres <code class="xref py py-meth docutils literal notranslate"><span class="pre">ljust()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">rjust()</span></code> y <code class="xref py py-meth docutils literal notranslate"><span class="pre">center()</span></code> ahora toman un argumento de tipo opcional para especificar un carácter de relleno que no sea un espacio. (Contribución de Raymond Hettinger).</p></li>
<li><p>Cadenas de caracteres también han ganado un método <code class="xref py py-meth docutils literal notranslate"><span class="pre">rsplit()</span></code> que funciona como el método <code class="xref py py-meth docutils literal notranslate"><span class="pre">split()</span></code> pero divide desde el final de la cadena de caracteres. (Contribución de Sean Reifschneider)</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;www.python.org&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">[&#39;www&#39;, &#39;python.org&#39;]</span>
<span class="go">&#39;www.python.org&#39;.rsplit(&#39;.&#39;, 1)</span>
<span class="go">[&#39;www.python&#39;, &#39;org&#39;]</span>
</pre></div>
</div>
</li>
<li><p>Tres parámetros de argumentos de palabra clave <em>cmp</em>, <em>key</em> y <em>reverse</em> fueron añadidos al método de listas <code class="xref py py-meth docutils literal notranslate"><span class="pre">sort()</span></code>. Estos parámetros hacen algunos usos comunes del método <code class="xref py py-meth docutils literal notranslate"><span class="pre">sort()</span></code> mas simple. Todos estos parámetros son opcionales.</p>
<p>Para el parámetro <em>cmp</em>  el valor debe ser una función comparativa que toma dos parámetros y retorna -1, 0 o + 1 dependiendo de como compare los parámetros. Esta función será usada para ordenar la lista. Previamente esto era el único parámetro que podía ser entregado al <code class="xref py py-meth docutils literal notranslate"><span class="pre">sort()</span></code>.</p>
<p><em>key</em> debe ser una función con un solo parámetro que toma un elemento de la lista y retorna una llave de comparación para el elemento. Entonces la lista es ordenado usando las claves de comparación. El siguiente ejemplo ordena una lista sin distinción de mayúsculas ni minúsculas:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">L</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">L</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>                 <span class="c1"># Case-sensitive sort</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">L</span>
<span class="go">[&#39;A&#39;, &#39;D&#39;, &#39;b&#39;, &#39;c&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Using &#39;key&#39; parameter to sort list</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">L</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">L</span>
<span class="go">[&#39;A&#39;, &#39;b&#39;, &#39;c&#39;, &#39;D&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Old-fashioned way</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">L</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">cmp</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="n">cmp</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span> <span class="n">y</span><span class="o">.</span><span class="n">lower</span><span class="p">()))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">L</span>
<span class="go">[&#39;A&#39;, &#39;b&#39;, &#39;c&#39;, &#39;D&#39;]</span>
</pre></div>
</div>
<p>El ultimo ejemplo el cual usa el parámetro <em>cmp</em>  es la antigua forma de ejecutar el orden sin distinción de mayúsculas y minúsculas. Funciona pero es mas lento en vez de usar el parámetro <em>key</em>.  El uso de <em>key</em> llama al método <code class="xref py py-meth docutils literal notranslate"><span class="pre">lower()</span></code> una vez para cada elemento de la lista mientras el uso de <em>cmp</em> lo llamara dos veces para cada comparación, entonces al usar * key * se guardan las llamadas del método <code class="xref py py-meth docutils literal notranslate"><span class="pre">lower()</span></code>.</p>
<p>Para funciones de clave sencillas y comparativas es a menudo posible el obviar la palabra clave <a class="reference internal" href="../reference/expressions.html#lambda"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">lambda</span></code></a> usando un método sin ligar en reemplazo. El siguiente ejemplo de orden sin importar mayúsculas ni minúsculas es mejor escrito como se muestra:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">L</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="nb">str</span><span class="o">.</span><span class="n">lower</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">L</span>
<span class="go">[&#39;A&#39;, &#39;b&#39;, &#39;c&#39;, &#39;D&#39;]</span>
</pre></div>
</div>
<p>Finalmente el parámetro <em>reverse</em> toma un valor de tipo booleano. Si el valor es verdadero la lista será ordenada de forma inversa. En vez de <code class="docutils literal notranslate"><span class="pre">L.sort();</span> <span class="pre">L.reverse()</span></code> ahora se puede escribir <code class="docutils literal notranslate"><span class="pre">L.sort(reverse=True)</span></code>.</p>
<p>Los resultados del ordenamiento ahora están garantizados que son estables. Esto significa que dos entradas con iguales claves serán retiradas en el mismo orden en que fueron ingresadas. Por ejemplo se puede ordenar una lista de personas por el nombre y entonces ordenarla por edad, resultando en una lista ordenada donde las personas con la misma edad están en el mismo orden por nombre.</p>
<p>(Todos los cambios al método <code class="xref py py-meth docutils literal notranslate"><span class="pre">sort()</span></code> fueron realizados por Raymond Hettinger.)</p>
</li>
<li><p>Se tiene una nueva función incorporada <code class="docutils literal notranslate"><span class="pre">sorted(iterable)</span></code> que trabaja como el método in situ <a class="reference internal" href="../library/stdtypes.html#list.sort" title="list.sort"><code class="xref py py-meth docutils literal notranslate"><span class="pre">list.sort()</span></code></a> que se puede usar en expresiones. Las diferencias son:</p></li>
<li><p>el dato de entrada puede ser algún iterable;</p></li>
<li><p>se ordena una copia recién formada, manteniendo el original intacto y</p></li>
<li><p>la expresión retorna una nueva copia ordenada</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">L</span> <span class="o">=</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="mi">10</span><span class="o">+</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">L</span><span class="p">)]</span>       <span class="c1"># usable in a list comprehension</span>
<span class="go">[11, 12, 13, 14, 15, 16, 17, 18, 19]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">L</span>                               <span class="c1"># original is left unchanged</span>
<span class="go">[9,7,8,3,2,4,1,6,5]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="s1">&#39;Monty Python&#39;</span><span class="p">)</span>          <span class="c1"># any iterable may be an input</span>
<span class="go">[&#39; &#39;, &#39;M&#39;, &#39;P&#39;, &#39;h&#39;, &#39;n&#39;, &#39;n&#39;, &#39;o&#39;, &#39;o&#39;, &#39;t&#39;, &#39;t&#39;, &#39;y&#39;, &#39;y&#39;]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># List the contents of a dict sorted by key values</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">colormap</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">red</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">blue</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">green</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">black</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">yellow</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">colormap</span><span class="o">.</span><span class="n">iteritems</span><span class="p">()):</span>
<span class="gp">... </span>    <span class="nb">print</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span>
<span class="gp">...</span>
<span class="go">black 4</span>
<span class="go">blue 2</span>
<span class="go">green 3</span>
<span class="go">red 1</span>
<span class="go">yellow 5</span>
</pre></div>
</div>
<p>(Contribución de Raymond Hettinger.)</p>
</li>
<li><p>Operaciones de números enteros no lanzaran una excepción <code class="xref py py-exc docutils literal notranslate"><span class="pre">OverflowWarning</span></code>. La advertencia sobre <code class="xref py py-exc docutils literal notranslate"><span class="pre">OverflowWarning</span></code> desaparecerá en Python 2.5.</p></li>
<li><p>Se añadió al interprete una nueva opción de cambio <a class="reference internal" href="../using/cmdline.html#cmdoption-m"><code class="xref std std-option docutils literal notranslate"><span class="pre">-m</span></code></a> la cual toma un nombre, busca el módulo correspondiente en <code class="docutils literal notranslate"><span class="pre">sys.path</span></code> y corre el módulo como script. Ahora por ejemplo se puede correr el perfilador de Python con <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">profile</span></code>. (Contribución de Nick Coghlan)</p></li>
<li><p>La expresión <code class="docutils literal notranslate"><span class="pre">eval(expr,</span> <span class="pre">globals,</span> <span class="pre">locals)</span></code> la función <code class="docutils literal notranslate"><span class="pre">execfile(filename,</span> <span class="pre">globals,</span> <span class="pre">locals)</span></code> y la sentencia <code class="docutils literal notranslate"><span class="pre">exec</span></code> ahora aceptan cualquier tipo de mapeo para parámetros locales. Previamente esto era parte de un diccionario de Python. (Contribución de Raymond Hettinger.)</p></li>
<li><p>La función incorporada <a class="reference internal" href="../library/functions.html#zip" title="zip"><code class="xref py py-func docutils literal notranslate"><span class="pre">zip()</span></code></a> y la función <code class="xref py py-func docutils literal notranslate"><span class="pre">itertools.izip()</span></code> ahora retornan una lista hacia si se llama sin argumentos. Previamente estos lanzaban una excepción de tipo <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a>. Esto lo hace mas apropiado de usar con listas de argumentos de longitud variable:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">transpose</span><span class="p">(</span><span class="n">array</span><span class="p">):</span>
<span class="gp">... </span>   <span class="k">return</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">array</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transpose</span><span class="p">([(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">)])</span>
<span class="go">[(1, 4), (2, 5), (3, 6)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transpose</span><span class="p">([])</span>
<span class="go">[]</span>
</pre></div>
</div>
<p>(Contribución de Raymond Hettinger.)</p>
</li>
<li><p>Encontrar un error al importar un módulo ya no deja un objeto de módulo parcialmente inicializado en <code class="docutils literal notranslate"><span class="pre">sys.modules</span></code>. El objeto de módulo incompleto que se deja atrás engañaría a las importaciones posteriores del mismo módulo para que tuvieran éxito, lo que generaría errores confusos. (Reparado por Tim Peters.)</p></li>
<li><p><code class="xref py py-const docutils literal notranslate"><span class="pre">None`es</span> <span class="pre">ahora</span> <span class="pre">una</span> <span class="pre">constante,</span> <span class="pre">el</span> <span class="pre">código</span> <span class="pre">que</span> <span class="pre">une</span> <span class="pre">un</span> <span class="pre">nuevo</span> <span class="pre">valor</span> <span class="pre">con</span> <span class="pre">el</span> <span class="pre">nombre</span> <span class="pre">:const:`None</span></code> es ahora un error de sintaxis (Contribución de Raymond Hettinger)</p></li>
</ul>
<section id="optimizations">
<h3>Optimizaciones<a class="headerlink" href="#optimizations" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>Los bucles internos para separar listas y tuplas fueron optimizados y ahora corren un tercio mas rápido. Los bucles internos para diccionarios también fueron optimizados resultando en una mejora en el rendimiento para <code class="xref py py-meth docutils literal notranslate"><span class="pre">keys()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">values()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">items()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">iterkeys()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">itervalues()</span></code>, y <code class="xref py py-meth docutils literal notranslate"><span class="pre">iteritems()</span></code>. (Contribución de Raymond Hettinger)</p></li>
<li><p>El mecanismo para mejorar y contraer listas fue optimizada  para efectos de velocidad y eficiencia en la utilización de recursos. Anexar y quitar elementos de una lista es ahora mas rápido debido al código mas eficiente y al menos frecuente uso de la función subyacente  <code class="xref c c-func docutils literal notranslate"><span class="pre">realloc()</span></code>. Las listas por comprensión también son beneficiadas, el método <code class="xref py py-meth docutils literal notranslate"><span class="pre">list.extend()</span></code> fue también optimizado y ya no convierte mas el argumento en una lista temporal antes de extender la lista base. (Contribución de Raymond Hettinger)</p></li>
<li><p>Las funciones <a class="reference internal" href="../library/stdtypes.html#list" title="list"><code class="xref py py-func docutils literal notranslate"><span class="pre">list()</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#tuple" title="tuple"><code class="xref py py-func docutils literal notranslate"><span class="pre">tuple()</span></code></a>, <a class="reference internal" href="../library/functions.html#map" title="map"><code class="xref py py-func docutils literal notranslate"><span class="pre">map()</span></code></a>, <a class="reference internal" href="../library/functions.html#filter" title="filter"><code class="xref py py-func docutils literal notranslate"><span class="pre">filter()</span></code></a> y <a class="reference internal" href="../library/functions.html#zip" title="zip"><code class="xref py py-func docutils literal notranslate"><span class="pre">zip()</span></code></a> ahora corren mucho mas rápido con argumentos no secuenciales que ahora suministra el método <code class="xref py py-meth docutils literal notranslate"><span class="pre">__len__()</span></code>. (Contribución Raymond Hettinger.)</p></li>
<li><p>Los métodos <code class="xref py py-meth docutils literal notranslate"><span class="pre">list.__getitem__()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">dict.__getitem__()</span></code> y <code class="xref py py-meth docutils literal notranslate"><span class="pre">dict.__contains__()</span></code>  ahora son implementados como objetos de la clase <code class="xref py py-class docutils literal notranslate"><span class="pre">method_descriptor</span></code> en vez de los objetos de la clase <code class="xref py py-class docutils literal notranslate"><span class="pre">wrapper_descriptor</span></code> . Este acceso dobla el rendimiento y hace que sea mas apropiado para ser usado como argumentos de:<code class="docutils literal notranslate"><span class="pre">map(mydict.__getitem__,</span> <span class="pre">keylist)</span></code>. (Contribución de Raymond Hettinger)</p></li>
<li><p>Adicionalmente se ha agregado a un nuevo código de operación <code class="docutils literal notranslate"><span class="pre">LIST_APPEND</span></code> esto simplifica la generación de código a nivel de byte para las listas por comprensión y las agiliza en aproximadamente un tercio.</p></li>
<li><p>El optimizador de código a nivel de byte ha sido mejorado para producir código a nivel de byte mas corto y rápido. Esto resulta en código mas legible. (Contribución de Raymond Hettinger)</p></li>
<li><p>La concatenación de cadenas de texto en la declaración de <code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">=</span> <span class="pre">s</span> <span class="pre">+</span> <span class="pre">&quot;abc&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">+=</span> <span class="pre">&quot;abc&quot;</span></code> ahora son ejecutadas de forma mas eficiente en ciertas circunstancias. Esta optimizaciones no serán mostradas en otras implementaciones de Python tales como Python, entonces no se debe utilizar, es mejor seguir utilizando el método <code class="xref py py-meth docutils literal notranslate"><span class="pre">join()</span></code> de cadenas de caracteres si se quiere mantener la eficiencia de concatenar un largo número de cadenas de caracteres. (Contribución de Armin Rigo.)</p></li>
</ul>
<p>El resultado de las optimizaciones de la versión 2.4 es que tomando Python 2.4 como punto de referencia corre alrededor de un 5% mas rápido que Python 2.3 y un 35% mas rápido que Python 2.2 (pystone no es particularmente un buen punto de referencia pero es el mas usado para medir rendimiento en Python. Sus propias aplicaciones pueden mostrar beneficios mas grandes o mínimos desde Python 2.4)</p>
</section>
</section>
<section id="new-improved-and-deprecated-modules">
<h2>Módulos nuevos, mejorados y obsoletos<a class="headerlink" href="#new-improved-and-deprecated-modules" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Como es usual, la librería estándar de Python recibió un número de mejoras y corrección de errores. Aquí hay una lista parcial de los cambios mas notables, ordenados alfabéticamente por nombre de módulo. Consulte el archivo <code class="file docutils literal notranslate"><span class="pre">Misc/NEWS</span></code> en la estructura del directorio para una completa lista de los cambios o se puede buscar a través del registro CVS para obtener todos los detalles.</p>
<ul>
<li><p>El módulo <a class="reference internal" href="../library/asyncore.html#module-asyncore" title="asyncore: A base class for developing asynchronous socket handling services. (obsoleto)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">asyncore</span></code></a> y la función <code class="xref py py-func docutils literal notranslate"><span class="pre">loop()</span></code> ahora tiene un parámetro <em>count</em> que permite ejecutar un limitado número de pases mediante el bucle. El valor predeterminado sigue siendo el bucle para siempre.</p></li>
<li><p>El módulo <a class="reference internal" href="../library/base64.html#module-base64" title="base64: RFC 4648: Base16, Base32, Base64 Data Encodings; Base85 and Ascii85"><code class="xref py py-mod docutils literal notranslate"><span class="pre">base64</span></code></a> ahora tiene un soporte mas completo <span class="target" id="index-54"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc3548.html"><strong>RFC 3548</strong></a> para Base64, Base32 y  Base16 para codificación y descodificación, incluyendo procesos de convertir caracteres a minúsculas y alfabetos alternativos. (Contribución de Barry Warsaw)</p></li>
<li><p>El módulo <a class="reference internal" href="../library/bisect.html#module-bisect" title="bisect: Array bisection algorithms for binary searching."><code class="xref py py-mod docutils literal notranslate"><span class="pre">bisect</span></code></a> ahora tiene una implementación C subyacente para mejorar el rendimiento. (Contribuido por Dmitry Vasiliev.)</p></li>
<li><p>Las colecciones CJKCodecs de códecs de Asia oriental, mantenidas por Hye-Shik Chang, se integraron en 2.4. Las nuevas codificaciones son:</p></li>
<li><p>Chino (PRC): gb2312, gbk, gb18030, big5hkscs, hz</p></li>
<li><p>Chino (República de China): big5, cp950</p></li>
<li><dl class="simple">
<dt>Japonés: cp932, euc-jis-2004, euc-jp, euc-jisx0213, iso-2022-jp,</dt><dd><p>iso-2022-jp-1, iso-2022-jp-2, iso-2022-jp-3, iso-2022-jp-ext, iso-2022-jp-2004, shift-jis, shift-jisx0213, shift- jis-2004</p>
</dd>
</dl>
</li>
<li><p>Coreano: cp949, euc-kr, johab, iso-2022-kr</p></li>
<li><p>Se agregaron algunas otras codificaciones nuevas: HP Roman8, ISO_8859-11, ISO_8859-16, PCTP-154 y TIS-620.</p></li>
<li><p>Los códecs UTF-8 y UTF-16 ahora se adaptan mejor a la recepción de entradas parciales. Anteriormente, la clase <code class="xref py py-class docutils literal notranslate"><span class="pre">StreamReader</span></code> intentaba leer más datos, lo que hacía imposible reanudar la decodificación desde el flujo. El método <code class="xref py py-meth docutils literal notranslate"><span class="pre">read()</span></code> ahora devolverá tantos datos como pueda y las llamadas futuras reanudarán la decodificación donde lo dejaron las anteriores. (Implementado por Walter Dörwald.)</p></li>
<li><p>Hay un nuevo módulo <a class="reference internal" href="../library/collections.html#module-collections" title="collections: Container datatypes"><code class="xref py py-mod docutils literal notranslate"><span class="pre">collections</span></code></a> para varios tipos de datos de recopilación especializados. Actualmente contiene solo un tipo, <code class="xref py py-class docutils literal notranslate"><span class="pre">deque</span></code>, una cola de dos extremos que admite la adición y eliminación de elementos de manera eficiente desde cualquier extremo:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">deque</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">deque</span><span class="p">(</span><span class="s1">&#39;ghi&#39;</span><span class="p">)</span>        <span class="c1"># make a new deque with three items</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;j&#39;</span><span class="p">)</span>           <span class="c1"># add a new entry to the right side</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">appendleft</span><span class="p">(</span><span class="s1">&#39;f&#39;</span><span class="p">)</span>       <span class="c1"># add a new entry to the left side</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span>                       <span class="c1"># show the representation of the deque</span>
<span class="go">deque([&#39;f&#39;, &#39;g&#39;, &#39;h&#39;, &#39;i&#39;, &#39;j&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>                 <span class="c1"># return and remove the rightmost item</span>
<span class="go">&#39;j&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>             <span class="c1"># return and remove the leftmost item</span>
<span class="go">&#39;f&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>                 <span class="c1"># list the contents of the deque</span>
<span class="go">[&#39;g&#39;, &#39;h&#39;, &#39;i&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;h&#39;</span> <span class="ow">in</span> <span class="n">d</span>                <span class="c1"># search the deque</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Varios módulos, como los módulos <code class="xref py py-mod docutils literal notranslate"><span class="pre">Queue</span></code> y <a class="reference internal" href="../library/threading.html#module-threading" title="threading: Thread-based parallelism."><code class="xref py py-mod docutils literal notranslate"><span class="pre">threading</span></code></a>, ahora aprovechan <a class="reference internal" href="../library/collections.html#collections.deque" title="collections.deque"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.deque</span></code></a> para mejorar el rendimiento. (Contribuido por Raymond Hettinger.)</p>
</li>
<li><p>Las clases de <code class="xref py py-mod docutils literal notranslate"><span class="pre">ConfigParser</span></code> se han mejorado ligeramente. El método <code class="xref py py-meth docutils literal notranslate"><span class="pre">read()</span></code> ahora devuelve una lista de los archivos que se analizaron correctamente y el método <a class="reference internal" href="../library/stdtypes.html#set" title="set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set()</span></code></a> lanza <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> si se pasa un argumento <em>value</em> que no es una cadena. (Contribuido por John Belmonte y David Goodger.)</p></li>
<li><p>El módulo <a class="reference internal" href="../library/curses.html#module-curses" title="curses: An interface to the curses library, providing portable terminal handling. (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">curses</span></code></a> ahora admite la extensión ncurses <code class="xref py py-func docutils literal notranslate"><span class="pre">use_default_colors()</span></code>. En plataformas donde el terminal admite transparencia, esto permite utilizar un fondo transparente. (Contribución de Jörg Lehmann.)</p></li>
<li><p>El módulo <a class="reference internal" href="../library/difflib.html#module-difflib" title="difflib: Helpers for computing differences between objects."><code class="xref py py-mod docutils literal notranslate"><span class="pre">difflib</span></code></a> ahora incluye una clase <code class="xref py py-class docutils literal notranslate"><span class="pre">HtmlDiff</span></code> que crea una tabla HTML que muestra una comparación lado a lado de dos versiones de un texto. (Contribuido por Dan Gass.)</p></li>
<li><p>El paquete <a class="reference internal" href="../library/email.html#module-email" title="email: Package supporting the parsing, manipulating, and generating email messages."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email</span></code></a> se actualizó a la versión 3.0, que eliminó varias API obsoletas y elimina la compatibilidad con versiones de Python anteriores a la 2.3. La versión 3.0 del paquete usa un nuevo analizador incremental para mensajes MIME, disponible en el módulo <code class="xref py py-mod docutils literal notranslate"><span class="pre">email.FeedParser</span></code>. El nuevo analizador no requiere leer todo el mensaje en la memoria y no genera excepciones si un mensaje tiene un formato incorrecto; en su lugar, registra cualquier problema en el atributo <code class="xref py py-attr docutils literal notranslate"><span class="pre">defect</span></code> del mensaje. (Desarrollado por Anthony Baxter, Barry Warsaw, Thomas Wouters y otros).</p></li>
<li><p>El módulo <a class="reference internal" href="../library/heapq.html#module-heapq" title="heapq: Heap queue algorithm (a.k.a. priority queue)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">heapq</span></code></a> se ha convertido a C. La mejora de diez veces resultante en la velocidad hace que el módulo sea adecuado para manejar grandes volúmenes de datos. Además, el módulo tiene dos funciones nuevas <code class="xref py py-func docutils literal notranslate"><span class="pre">nlargest()</span></code> y <code class="xref py py-func docutils literal notranslate"><span class="pre">nsmallest()</span></code> que usan montones para encontrar los N valores más grandes o más pequeños en un conjunto de datos sin el gasto de una clasificación completa. (Contribuido por Raymond Hettinger.)</p></li>
<li><p>El módulo <code class="xref py py-mod docutils literal notranslate"><span class="pre">httplib</span></code> ahora contiene constantes para códigos de estado HTTP definidos en varios documentos RFC relacionados con HTTP. Las constantes tienen nombres como <code class="xref py py-const docutils literal notranslate"><span class="pre">OK</span></code>, <code class="xref py py-const docutils literal notranslate"><span class="pre">CREATED</span></code>, <code class="xref py py-const docutils literal notranslate"><span class="pre">CONTINUE</span></code>, y <code class="xref py py-const docutils literal notranslate"><span class="pre">MOVED_PERMANENTLY</span></code>; use pydoc para obtener una lista completa. (Contribuido por Andrew Eland.)</p></li>
<li><p>El módulo <a class="reference internal" href="../library/imaplib.html#module-imaplib" title="imaplib: IMAP4 protocol client (requires sockets)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">imaplib</span></code></a> ahora es compatible con el comando THREAD de IMAP (aportado por Yves Dionne) y los nuevos métodos <code class="xref py py-meth docutils literal notranslate"><span class="pre">deleteacl()</span></code> y <code class="xref py py-meth docutils literal notranslate"><span class="pre">myrights()</span></code> (aportado por Arnaud Mazin).</p></li>
<li><p>El módulo <a class="reference internal" href="../library/itertools.html#module-itertools" title="itertools: Functions creating iterators for efficient looping."><code class="xref py py-mod docutils literal notranslate"><span class="pre">itertools</span></code></a> ganó una función <code class="docutils literal notranslate"><span class="pre">groupby(iterable[,</span> <span class="pre">*func*])</span></code>. El parámetro <em>iterable</em> is something that can be iterated over to return a stream of elements, and the optional <em>func</em> es una función que toma un elemento y devuelve un valor clave; si se omite, la clave es simplemente el elemento en sí. <code class="xref py py-func docutils literal notranslate"><span class="pre">groupby()</span></code> luego agrupa los elementos en subsecuencias que tienen valores coincidentes de la clave y devuelve una serie de 2 tuplas que contienen el valor de la clave y un iterador sobre la subsecuencia.</p>
<p>Aquí hay un ejemplo para aclarar esto. La función <em>key</em> simplemente devuelve si un número es par o impar, por lo que el resultado de <code class="xref py py-func docutils literal notranslate"><span class="pre">groupby()</span></code> es devolver series consecutivas de números pares o impares.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">itertools</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">L</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">14</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">key_val</span><span class="p">,</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">L</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span><span class="p">):</span>
<span class="gp">... </span>   <span class="nb">print</span> <span class="n">key_val</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">0 [2, 4, 6]</span>
<span class="go">1 [7]</span>
<span class="go">0 [8]</span>
<span class="go">1 [9, 11]</span>
<span class="go">0 [12, 14]</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">groupby()</span></code> se utiliza normalmente con entrada ordenada. La lógica para <code class="xref py py-func docutils literal notranslate"><span class="pre">groupby()</span></code> es similar al filtro Unix <code class="docutils literal notranslate"><span class="pre">uniq</span></code>, lo que lo hace útil para eliminar, contar o identificar elementos duplicados:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">word</span> <span class="o">=</span> <span class="s1">&#39;abracadabra&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">letters</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>   <span class="c1"># Turn string into a sorted list of letters</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">letters</span>
<span class="go">[&#39;a&#39;, &#39;a&#39;, &#39;a&#39;, &#39;a&#39;, &#39;a&#39;, &#39;b&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;r&#39;, &#39;r&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">letters</span><span class="p">):</span>
<span class="gp">... </span>   <span class="nb">print</span> <span class="n">k</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">a [&#39;a&#39;, &#39;a&#39;, &#39;a&#39;, &#39;a&#39;, &#39;a&#39;]</span>
<span class="go">b [&#39;b&#39;, &#39;b&#39;]</span>
<span class="go">c [&#39;c&#39;]</span>
<span class="go">d [&#39;d&#39;]</span>
<span class="go">r [&#39;r&#39;, &#39;r&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># List unique letters</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">k</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">groupby</span><span class="p">(</span><span class="n">letters</span><span class="p">)]</span>
<span class="go">[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;r&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Count letter occurrences</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[(</span><span class="n">k</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">g</span><span class="p">)))</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">groupby</span><span class="p">(</span><span class="n">letters</span><span class="p">)]</span>
<span class="go">[(&#39;a&#39;, 5), (&#39;b&#39;, 2), (&#39;c&#39;, 1), (&#39;d&#39;, 1), (&#39;r&#39;, 2)]</span>
</pre></div>
</div>
<p>(Contribuido por Hye-Shik Chang.)</p>
</li>
<li><p><a class="reference internal" href="../library/itertools.html#module-itertools" title="itertools: Functions creating iterators for efficient looping."><code class="xref py py-mod docutils literal notranslate"><span class="pre">itertools</span></code></a> también obtuvo una función denominada <code class="docutils literal notranslate"><span class="pre">tee(iterator,</span> <span class="pre">N)</span></code> que devuelve <em>N</em> independent iterators that replicate <em>iterator</em>.  If <em>N</em> se omite, el valor predeterminado es 2.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">L</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i1</span><span class="p">,</span> <span class="n">i2</span> <span class="o">=</span> <span class="n">itertools</span><span class="o">.</span><span class="n">tee</span><span class="p">(</span><span class="n">L</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i1</span><span class="p">,</span><span class="n">i2</span>
<span class="go">(&lt;itertools.tee object at 0x402c2080&gt;, &lt;itertools.tee object at 0x402c2090&gt;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">i1</span><span class="p">)</span>               <span class="c1"># Run the first iterator to exhaustion</span>
<span class="go">[1, 2, 3]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">i2</span><span class="p">)</span>               <span class="c1"># Run the second iterator to exhaustion</span>
<span class="go">[1, 2, 3]</span>
</pre></div>
</div>
<p>Tenga en cuenta que <code class="xref py py-func docutils literal notranslate"><span class="pre">tee()</span></code> debe mantener copias de los valores devueltos por el iterador; en el peor de los casos, es posible que deba conservarlos todos. Por lo tanto, esto debe usarse con cuidado si el iterador principal puede ejecutarse muy por delante del iterador final en un flujo largo de entradas. Si la separación es grande, entonces también podría usar <a class="reference internal" href="../library/stdtypes.html#list" title="list"><code class="xref py py-func docutils literal notranslate"><span class="pre">list()</span></code></a> en su lugar. Cuando los iteradores se siguen de cerca entre sí, <code class="xref py py-func docutils literal notranslate"><span class="pre">tee()</span></code> es ideal. Las posibles aplicaciones incluyen marcadores, ventanas o iteradores de anticipación. (Contribuido por Raymond Hettinger.)</p>
</li>
<li><p>Se agregaron varias funciones al módulo <a class="reference internal" href="../library/locale.html#module-locale" title="locale: Internationalization services."><code class="xref py py-mod docutils literal notranslate"><span class="pre">locale</span></code></a>, como <code class="xref py py-func docutils literal notranslate"><span class="pre">bind_textdomain_codeset()</span></code> para especificar una codificación particular y una familia de funciones <code class="xref py py-func docutils literal notranslate"><span class="pre">l*gettext()</span></code> que devuelven mensajes en la codificación elegida. (Contribución de Gustavo Niemeyer.)</p></li>
<li><p>Se agregaron algunos argumentos de palabras clave a la función <code class="xref py py-func docutils literal notranslate"><span class="pre">basicConfig()</span></code> del paquete <a class="reference internal" href="../library/logging.html#module-logging" title="logging: Flexible event logging system for applications."><code class="xref py py-mod docutils literal notranslate"><span class="pre">logging</span></code></a> para simplificar la configuración del registro. El comportamiento predeterminado es registrar mensajes con error estándar, pero se pueden especificar varios argumentos de palabras clave para registrar en un archivo en particular, cambiar el formato de registro o establecer el nivel de registro. Por ejemplo:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s1">&#39;/var/log/application.log&#39;</span><span class="p">,</span>
    <span class="n">level</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>  <span class="c1"># Log all messages</span>
    <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;%(levelname):%(process):%(thread):%(message)&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Otras adiciones al paquete <a class="reference internal" href="../library/logging.html#module-logging" title="logging: Flexible event logging system for applications."><code class="xref py py-mod docutils literal notranslate"><span class="pre">logging</span></code></a> incluyen un método de conveniencia <code class="docutils literal notranslate"><span class="pre">log(level,</span> <span class="pre">msg)</span></code>, así como una clase <code class="xref py py-class docutils literal notranslate"><span class="pre">TimedRotatingFileHandler</span></code> que rota sus archivos de registro en un intervalo cronometrado. El módulo ya tenía <code class="xref py py-class docutils literal notranslate"><span class="pre">RotatingFileHandler</span></code>, que rotaba los registros una vez que el archivo excedía un cierto tamaño. Ambas clases derivan de una nueva clase <code class="xref py py-class docutils literal notranslate"><span class="pre">BaseRotatingHandler</span></code> que se puede utilizar para implementar otros controladores rotativos.</p>
<p>(Cambios implementados por Vinay Sajip.)</p>
</li>
<li><p>El módulo <a class="reference internal" href="../library/marshal.html#module-marshal" title="marshal: Convert Python objects to streams of bytes and back (with different constraints)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">marshal</span></code></a> ahora comparte cadenas internas al desempaquetar una estructura de datos. Esto puede reducir el tamaño de ciertas cadenas de pickle, pero el efecto principal es hacer que los archivos <code class="file docutils literal notranslate"><span class="pre">.pyc</span></code> sean significativamente más pequeños. (Contribución de Martin von Löwis.)</p></li>
<li><p>La clase <code class="xref py py-class docutils literal notranslate"><span class="pre">NNTP</span></code> del módulo <a class="reference internal" href="../library/nntplib.html#module-nntplib" title="nntplib: NNTP protocol client (requires sockets). (obsoleto)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">nntplib</span></code></a> obtuvo los métodos <code class="xref py py-meth docutils literal notranslate"><span class="pre">description()</span></code> y <code class="xref py py-meth docutils literal notranslate"><span class="pre">descriptions()</span></code> para recuperar descripciones de grupos de noticias para un solo grupo o para un rango de grupos. (Contribución de Jürgen A. Erhard.)</p></li>
<li><p>Se agregaron dos nuevas funciones al módulo <a class="reference internal" href="../library/operator.html#module-operator" title="operator: Functions corresponding to the standard operators."><code class="xref py py-mod docutils literal notranslate"><span class="pre">operator</span></code></a>, <code class="docutils literal notranslate"><span class="pre">attrgetter(attr)</span></code> y <code class="docutils literal notranslate"><span class="pre">itemgetter(index)</span></code>. Ambas funciones devuelven invocables que toman un solo argumento y devuelven el atributo o elemento correspondiente; estos llamables son excelentes extractores de datos cuando se utilizan con <a class="reference internal" href="../library/functions.html#map" title="map"><code class="xref py py-func docutils literal notranslate"><span class="pre">map()</span></code></a> o <a class="reference internal" href="../library/functions.html#sorted" title="sorted"><code class="xref py py-func docutils literal notranslate"><span class="pre">sorted()</span></code></a>. Por ejemplo:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">L</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">map</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">L</span><span class="p">)</span>
<span class="go">[&#39;c&#39;, &#39;d&#39;, &#39;a&#39;, &#39;b&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">map</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">L</span><span class="p">)</span>
<span class="go">[2, 1, 4, 3]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">L</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">operator</span><span class="o">.</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="c1"># Sort list by second tuple item</span>
<span class="go">[(&#39;d&#39;, 1), (&#39;c&#39;, 2), (&#39;b&#39;, 3), (&#39;a&#39;, 4)]</span>
</pre></div>
</div>
<p>(Contribución de Raymond Hettinger.)</p>
</li>
<li><p>El módulo <a class="reference internal" href="../library/optparse.html#module-optparse" title="optparse: Command-line option parsing library. (obsoleto)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">optparse</span></code></a> se actualizó de varias formas. El módulo ahora pasa sus mensajes a través de <a class="reference internal" href="../library/gettext.html#gettext.gettext" title="gettext.gettext"><code class="xref py py-func docutils literal notranslate"><span class="pre">gettext.gettext()</span></code></a>, lo que permite internacionalizar los mensajes de error y ayuda de Optik. Los mensajes de ayuda para las opciones ahora pueden incluir la cadena <code class="docutils literal notranslate"><span class="pre">'%default'</span></code>, que será reemplazada por el valor predeterminado de la opción. (Contribuido por Greg Ward.)</p></li>
<li><p>El plan a largo plazo es desaprobar el módulo <code class="xref py py-mod docutils literal notranslate"><span class="pre">rfc822</span></code> en alguna versión futura de Python a favor del paquete <a class="reference internal" href="../library/email.html#module-email" title="email: Package supporting the parsing, manipulating, and generating email messages."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email</span></code></a>. Con este fin, la función <code class="xref py py-func docutils literal notranslate"><span class="pre">email.Utils.formatdate()</span></code> se ha modificado para que pueda utilizarse como reemplazo de <code class="xref py py-func docutils literal notranslate"><span class="pre">rfc822.formatdate()</span></code>. Es posible que desee escribir un nuevo código de procesamiento de correo electrónico con esto en mente. (Cambio implementado por Anthony Baxter).</p></li>
<li><p>Se agregó una nueva función <code class="docutils literal notranslate"><span class="pre">urandom(n)</span></code> al módulo <a class="reference internal" href="../library/os.html#module-os" title="os: Miscellaneous operating system interfaces."><code class="xref py py-mod docutils literal notranslate"><span class="pre">os</span></code></a>, que devuelve una cadena que contiene <em>n</em> bytes de datos aleatorios. Esta función proporciona acceso a fuentes de aleatoriedad específicas de la plataforma, como <code class="file docutils literal notranslate"><span class="pre">/dev/urandom</span></code> en Linux o Windows CryptoAPI. (Contribuido por Trevor Perrin.)</p></li>
<li><p>Otra función nueva: <code class="docutils literal notranslate"><span class="pre">os.path.lexists(path)</span></code> devuelve verdadero si el archivo especificado por <em>path</em> exists, whether or not it’s a symbolic link.  This differs from the existing ASDF01 function, which returns false if <em>path</em> es un enlace simbólico que apunta a un destino que no existe. (Contribuido por Beni Cherniavsky.)</p></li>
<li><p>Se agregó una nueva función <code class="xref py py-func docutils literal notranslate"><span class="pre">getsid()</span></code> al módulo <a class="reference internal" href="../library/posix.html#module-posix" title="posix: The most common POSIX system calls (normally used via module os). (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">posix</span></code></a> que subyace al módulo <a class="reference internal" href="../library/os.html#module-os" title="os: Miscellaneous operating system interfaces."><code class="xref py py-mod docutils literal notranslate"><span class="pre">os</span></code></a>. (Contribuido por J. Raynor.)</p></li>
<li><p>El módulo <a class="reference internal" href="../library/poplib.html#module-poplib" title="poplib: POP3 protocol client (requires sockets)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">poplib</span></code></a> ahora admite POP sobre SSL. (Contribuido por Héctor Urtubia.)</p></li>
<li><p>El módulo <a class="reference internal" href="../library/profile.html#module-profile" title="profile: Python source profiler."><code class="xref py py-mod docutils literal notranslate"><span class="pre">profile</span></code></a> ahora puede perfilar funciones de extensión C. (Contribuido por Nick Bastin.)</p></li>
<li><p>El módulo <a class="reference internal" href="../library/random.html#module-random" title="random: Generate pseudo-random numbers with various common distributions."><code class="xref py py-mod docutils literal notranslate"><span class="pre">random</span></code></a> tiene un nuevo método llamado <code class="docutils literal notranslate"><span class="pre">getrandbits(N)</span></code> que devuelve un entero largo <em>N</em> bits de longitud. El método <code class="xref py py-meth docutils literal notranslate"><span class="pre">randrange()</span></code> existente ahora usa <code class="xref py py-meth docutils literal notranslate"><span class="pre">getrandbits()</span></code> cuando corresponde, lo que hace que la generación de números aleatorios arbitrariamente grandes sea más eficiente. (Contribuido por Raymond Hettinger.)</p></li>
<li><p>El lenguaje de expresiones regulares aceptado por el módulo <a class="reference internal" href="../library/re.html#module-re" title="re: Regular expression operations."><code class="xref py py-mod docutils literal notranslate"><span class="pre">re</span></code></a> se amplió con expresiones condicionales simples, escritas como <code class="docutils literal notranslate"><span class="pre">(?(group)A|B)</span></code>. En su lugar, se utilizará <em>group</em> is either a numeric group ID or a group name defined with ASDF02 earlier in the expression.  If the specified group matched, the regular expression pattern <em>A</em> will be tested against the string; if the group didn’t match, the pattern <em>B</em>. (Contribución de Gustavo Niemeyer.)</p></li>
<li><p>El módulo <a class="reference internal" href="../library/re.html#module-re" title="re: Regular expression operations."><code class="xref py py-mod docutils literal notranslate"><span class="pre">re</span></code></a> ya no es recursivo, gracias a la enorme cantidad de trabajo de Gustavo Niemeyer. En un motor de expresión regular recursivo, ciertos patrones dan como resultado que se consuma una gran cantidad de espacio de pila de C y es posible desbordar la pila. Por ejemplo, si comparó una cadena de 30000 bytes de caracteres <code class="docutils literal notranslate"><span class="pre">a</span></code> con la expresión <code class="docutils literal notranslate"><span class="pre">(a|b)+</span></code>, se consumió un marco de pila por carácter. Python 2.3 intentó verificar el desbordamiento de la pila y generar una excepción <a class="reference internal" href="../library/exceptions.html#RuntimeError" title="RuntimeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">RuntimeError</span></code></a>, pero ciertos patrones podrían eludir la verificación y, si no tuvo suerte, Python podría segregar. El motor de expresiones regulares de Python 2.4 puede coincidir con este patrón sin problemas.</p></li>
<li><p>El módulo <a class="reference internal" href="../library/signal.html#module-signal" title="signal: Set handlers for asynchronous events."><code class="xref py py-mod docutils literal notranslate"><span class="pre">signal</span></code></a> ahora realiza una verificación de errores más estricta en los parámetros de la función <a class="reference internal" href="../library/signal.html#signal.signal" title="signal.signal"><code class="xref py py-func docutils literal notranslate"><span class="pre">signal.signal()</span></code></a>. Por ejemplo, no puede establecer un controlador en la señal <code class="xref py py-const docutils literal notranslate"><span class="pre">SIGKILL</span></code>; las versiones anteriores de Python aceptarían silenciosamente esto, pero 2.4 lanzará una excepción <a class="reference internal" href="../library/exceptions.html#RuntimeError" title="RuntimeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">RuntimeError</span></code></a>.</p></li>
<li><p>Se agregaron dos nuevas funciones al módulo <a class="reference internal" href="../library/socket.html#module-socket" title="socket: Low-level networking interface."><code class="xref py py-mod docutils literal notranslate"><span class="pre">socket</span></code></a>. <code class="xref py py-func docutils literal notranslate"><span class="pre">socketpair()</span></code> devuelve un par de sockets conectados y <code class="docutils literal notranslate"><span class="pre">getservbyport(port)</span></code> busca el nombre del servicio para un número de puerto determinado. (Contribuido por Dave Cole y Barry Warsaw.)</p></li>
<li><p>La función <code class="xref py py-func docutils literal notranslate"><span class="pre">sys.exitfunc()</span></code> ha quedado obsoleta. El código debe usar el módulo <a class="reference internal" href="../library/atexit.html#module-atexit" title="atexit: Register and execute cleanup functions."><code class="xref py py-mod docutils literal notranslate"><span class="pre">atexit</span></code></a> existente, que maneja correctamente la llamada a múltiples funciones de salida. Finalmente, <code class="xref py py-func docutils literal notranslate"><span class="pre">sys.exitfunc()</span></code> se convertirá en una interfaz puramente interna, a la que solo accederá <a class="reference internal" href="../library/atexit.html#module-atexit" title="atexit: Register and execute cleanup functions."><code class="xref py py-mod docutils literal notranslate"><span class="pre">atexit</span></code></a>.</p></li>
<li><p>El módulo <a class="reference internal" href="../library/tarfile.html#module-tarfile" title="tarfile: Read and write tar-format archive files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">tarfile</span></code></a> ahora genera archivos tar en formato GNU de forma predeterminada. (Contribución de Lars Gustäbel.)</p></li>
<li><p>El módulo <a class="reference internal" href="../library/threading.html#module-threading" title="threading: Thread-based parallelism."><code class="xref py py-mod docutils literal notranslate"><span class="pre">threading</span></code></a> ahora tiene una forma elegante y sencilla de admitir datos locales de subprocesos. El módulo contiene una clase <code class="xref py py-class docutils literal notranslate"><span class="pre">local</span></code> cuyos valores de atributo son locales para diferentes subprocesos.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">threading</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">local</span><span class="p">()</span>
<span class="n">data</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="mi">42</span>
<span class="n">data</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;www.python.org&#39;</span><span class="p">,</span> <span class="mi">80</span><span class="p">)</span>
</pre></div>
</div>
<p>Otros subprocesos pueden asignar y recuperar sus propios valores para los atributos <code class="xref py py-attr docutils literal notranslate"><span class="pre">number</span></code> y <code class="xref py py-attr docutils literal notranslate"><span class="pre">url</span></code>. Puede crear una subclase de <code class="xref py py-class docutils literal notranslate"><span class="pre">local</span></code> para inicializar atributos o agregar métodos. (Contribuido por Jim Fulton.)</p>
</li>
<li><p>El módulo <a class="reference internal" href="../library/timeit.html#module-timeit" title="timeit: Measure the execution time of small code snippets."><code class="xref py py-mod docutils literal notranslate"><span class="pre">timeit</span></code></a> ahora deshabilita automáticamente la recolección de basura periódica durante el ciclo de temporización. Este cambio hace que los tiempos consecutivos sean más comparables. (Contribuido por Raymond Hettinger.)</p></li>
<li><p>El módulo <a class="reference internal" href="../library/weakref.html#module-weakref" title="weakref: Support for weak references and weak dictionaries."><code class="xref py py-mod docutils literal notranslate"><span class="pre">weakref</span></code></a> ahora admite una variedad más amplia de objetos, incluidas funciones de Python, instancias de clases, conjuntos, frozensets, deques, matrices, archivos, sockets y objetos de patrones de expresión regular. (Contribuido por Raymond Hettinger.)</p></li>
<li><p>El módulo <code class="xref py py-mod docutils literal notranslate"><span class="pre">xmlrpclib</span></code> ahora admite una extensión de múltiples llamadas para transmitir múltiples llamadas XML-RPC en una sola operación HTTP. (Contribuido por Brian Quinlan.)</p></li>
<li><p>Se han eliminado los módulos <code class="xref py py-mod docutils literal notranslate"><span class="pre">mpz</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">rotor</span></code> y <code class="xref py py-mod docutils literal notranslate"><span class="pre">xreadlines</span></code>.</p></li>
</ul>
<section id="cookielib">
<h3>cookielib<a class="headerlink" href="#cookielib" title="Enlazar permanentemente con este título">¶</a></h3>
<p>La biblioteca <code class="xref py py-mod docutils literal notranslate"><span class="pre">cookielib</span></code> admite el manejo del lado del cliente para las cookies HTTP, reflejando el soporte de cookies del lado del servidor del módulo <code class="xref py py-mod docutils literal notranslate"><span class="pre">Cookie</span></code>. Las cookies se almacenan en frascos de galletas; la biblioteca almacena de forma transparente las cookies ofrecidas por el servidor web en el tarro de cookies y recupera la cookie del tarro cuando se conecta al servidor. Al igual que en los navegadores web, los objetos de política controlan si las cookies se aceptan o no.</p>
<p>Para almacenar cookies entre sesiones, se proporcionan dos implementaciones de tarros de cookies: una que almacena cookies en formato Netscape para que las aplicaciones puedan usar los archivos de cookies de Mozilla o Lynx, y otra que almacena cookies en el mismo formato que la biblioteca libwww de Perl.</p>
<p><code class="xref py py-mod docutils literal notranslate"><span class="pre">urllib2</span></code> se ha cambiado para interactuar con <code class="xref py py-mod docutils literal notranslate"><span class="pre">cookielib</span></code>: <code class="xref py py-class docutils literal notranslate"><span class="pre">HTTPCookieProcessor</span></code> administra un tarro de cookies que se utiliza al acceder a las URL.</p>
<p>Este módulo fue una contribución de John J. Lee.</p>
</section>
<section id="doctest">
<h3>doctest<a class="headerlink" href="#doctest" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El módulo <a class="reference internal" href="../library/doctest.html#module-doctest" title="doctest: Test pieces of code within docstrings."><code class="xref py py-mod docutils literal notranslate"><span class="pre">doctest</span></code></a> se sometió a una refactorización considerable gracias a Edward Loper y Tim Peters. Las pruebas pueden ser tan simples como ejecutar <a class="reference internal" href="../library/doctest.html#doctest.testmod" title="doctest.testmod"><code class="xref py py-func docutils literal notranslate"><span class="pre">doctest.testmod()</span></code></a>, pero las refactorizaciones permiten personalizar el funcionamiento del módulo de varias formas.</p>
<p>La nueva clase <code class="xref py py-class docutils literal notranslate"><span class="pre">DocTestFinder</span></code> extrae las pruebas de las cadenas de documentos de un objeto dado:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">f</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;&gt;&gt;&gt; f(2,2)</span>
<span class="sd">4</span>
<span class="sd">&gt;&gt;&gt; f(3,2)</span>
<span class="sd">6</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">*</span><span class="n">y</span>

<span class="n">finder</span> <span class="o">=</span> <span class="n">doctest</span><span class="o">.</span><span class="n">DocTestFinder</span><span class="p">()</span>

<span class="c1"># Get list of DocTest instances</span>
<span class="n">tests</span> <span class="o">=</span> <span class="n">finder</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<p>La nueva clase <code class="xref py py-class docutils literal notranslate"><span class="pre">DocTestRunner</span></code> luego ejecuta pruebas individuales y puede producir un resumen de los resultados:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">runner</span> <span class="o">=</span> <span class="n">doctest</span><span class="o">.</span><span class="n">DocTestRunner</span><span class="p">()</span>
<span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">tests</span><span class="p">:</span>
    <span class="n">tried</span><span class="p">,</span> <span class="n">failed</span> <span class="o">=</span> <span class="n">runner</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>

<span class="n">runner</span><span class="o">.</span><span class="n">summarize</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>El ejemplo anterior produce la siguiente salida:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span> <span class="n">items</span> <span class="n">passed</span> <span class="nb">all</span> <span class="n">tests</span><span class="p">:</span>
   <span class="mi">2</span> <span class="n">tests</span> <span class="ow">in</span> <span class="n">f</span>
<span class="mi">2</span> <span class="n">tests</span> <span class="ow">in</span> <span class="mi">1</span> <span class="n">items</span><span class="o">.</span>
<span class="mi">2</span> <span class="n">passed</span> <span class="ow">and</span> <span class="mi">0</span> <span class="n">failed</span><span class="o">.</span>
<span class="n">Test</span> <span class="n">passed</span><span class="o">.</span>
</pre></div>
</div>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">DocTestRunner</span></code> usa una instancia de la clase <code class="xref py py-class docutils literal notranslate"><span class="pre">OutputChecker</span></code> para comparar la salida esperada con la salida real. Esta clase toma varios indicadores diferentes que personalizan su comportamiento; Los usuarios ambiciosos también pueden escribir una subclase completamente nueva de <code class="xref py py-class docutils literal notranslate"><span class="pre">OutputChecker</span></code>.</p>
<p>El comprobador de salida predeterminado proporciona una serie de funciones útiles. Por ejemplo, con el indicador de opción <a class="reference internal" href="../library/doctest.html#doctest.ELLIPSIS" title="doctest.ELLIPSIS"><code class="xref py py-const docutils literal notranslate"><span class="pre">doctest.ELLIPSIS</span></code></a>, una elipsis (<code class="docutils literal notranslate"><span class="pre">...</span></code>) en la salida esperada coincide con cualquier subcadena, lo que facilita la adaptación de salidas que varían en formas menores:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">o</span> <span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;&gt;&gt;&gt; o(1)</span>
<span class="sd">&lt;__main__.C instance at 0x...&gt;</span>
<span class="sd">&gt;&gt;&gt;</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
<p>Otra cadena especial, <code class="docutils literal notranslate"><span class="pre">&lt;BLANKLINE&gt;</span></code>, coincide con una línea en blanco:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">p</span> <span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;&gt;&gt;&gt; p(1)</span>
<span class="sd">&lt;BLANKLINE&gt;</span>
<span class="sd">&gt;&gt;&gt;</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
<p>Otra nueva capacidad es producir una visualización de estilo diff de la salida especificando <a class="reference internal" href="../library/doctest.html#doctest.REPORT_UDIFF" title="doctest.REPORT_UDIFF"><code class="xref py py-const docutils literal notranslate"><span class="pre">doctest.REPORT_UDIFF</span></code></a> (diferencias unificadas), <a class="reference internal" href="../library/doctest.html#doctest.REPORT_CDIFF" title="doctest.REPORT_CDIFF"><code class="xref py py-const docutils literal notranslate"><span class="pre">doctest.REPORT_CDIFF</span></code></a> (diferencias de contexto), o <a class="reference internal" href="../library/doctest.html#doctest.REPORT_NDIFF" title="doctest.REPORT_NDIFF"><code class="xref py py-const docutils literal notranslate"><span class="pre">doctest.REPORT_NDIFF</span></code></a> Indicadores de opción (estilo delta). Por ejemplo:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">g</span> <span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;&gt;&gt;&gt; g(4)</span>
<span class="sd">here</span>
<span class="sd">is</span>
<span class="sd">a</span>
<span class="sd">lengthy</span>
<span class="sd">&gt;&gt;&gt;&quot;&quot;&quot;</span>
    <span class="n">L</span> <span class="o">=</span> <span class="s1">&#39;here is a rather lengthy list of words&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">L</span><span class="p">[:</span><span class="n">n</span><span class="p">]:</span>
        <span class="nb">print</span> <span class="n">word</span>
</pre></div>
</div>
<p>Al ejecutar las pruebas de la función anterior con <a class="reference internal" href="../library/doctest.html#doctest.REPORT_UDIFF" title="doctest.REPORT_UDIFF"><code class="xref py py-const docutils literal notranslate"><span class="pre">doctest.REPORT_UDIFF</span></code></a> especificado, obtiene el siguiente resultado:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>**********************************************************************
File &quot;t.py&quot;, line 15, in g
Failed example:
    g(4)
Differences (unified diff with -expected +actual):
    @@ -2,3 +2,3 @@
     is
     a
    -lengthy
    +rather
**********************************************************************
</pre></div>
</div>
</section>
</section>
<section id="build-and-c-api-changes">
<h2>Cambios en la API de Build y C<a class="headerlink" href="#build-and-c-api-changes" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Algunos de los cambios en el proceso de compilación de Python y en la API de C son:</p>
<ul class="simple">
<li><p>Se agregaron tres nuevas macros de conveniencia para valores de retorno comunes de funciones de extensión: <a class="reference internal" href="../c-api/none.html#c.Py_RETURN_NONE" title="Py_RETURN_NONE"><code class="xref c c-macro docutils literal notranslate"><span class="pre">Py_RETURN_NONE</span></code></a>, <a class="reference internal" href="../c-api/bool.html#c.Py_RETURN_TRUE" title="Py_RETURN_TRUE"><code class="xref c c-macro docutils literal notranslate"><span class="pre">Py_RETURN_TRUE</span></code></a>, y <a class="reference internal" href="../c-api/bool.html#c.Py_RETURN_FALSE" title="Py_RETURN_FALSE"><code class="xref c c-macro docutils literal notranslate"><span class="pre">Py_RETURN_FALSE</span></code></a>. (Contribuido por Brett Cannon.)</p></li>
<li><p>Otra macro nueva, <a class="reference internal" href="../c-api/refcounting.html#c.Py_CLEAR" title="Py_CLEAR"><code class="xref c c-macro docutils literal notranslate"><span class="pre">Py_CLEAR</span></code></a>, reduce el recuento de referencias de <em>obj</em> y establece <em>obj</em> en el puntero nulo. (Aportado por Jim Fulton.)</p></li>
<li><p>Una nueva función, <code class="docutils literal notranslate"><span class="pre">PyTuple_Pack(N,</span> <span class="pre">obj1,</span> <span class="pre">obj2,</span> <span class="pre">...,</span> <span class="pre">objN)</span></code>, construye tuplas a partir de una lista de argumentos de longitud variable de objetos Python. (Contribuido por Raymond Hettinger.)</p></li>
<li><p>Una nueva función, <code class="docutils literal notranslate"><span class="pre">PyDict_Contains(d,</span> <span class="pre">k)</span></code>, implementa búsquedas rápidas de diccionarios sin enmascarar las excepciones que surgen durante el proceso de búsqueda. (Contribuido por Raymond Hettinger.)</p></li>
<li><p>La macro <span class="c-expr sig sig-inline c"><span class="n">Py_IS_NAN</span><span class="p">(</span><span class="n">X</span><span class="p">)</span></span> retorna 1 si su argumento flotante o doble <em>X</em> es un NaN. (Aportado por Tim Peters.)</p></li>
<li><p>El código C puede evitar el bloqueo innecesario mediante el uso de la nueva función <a class="reference internal" href="../c-api/init.html#c.PyEval_ThreadsInitialized" title="PyEval_ThreadsInitialized"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyEval_ThreadsInitialized()</span></code></a> para saber si se ha realizado alguna operación de subproceso. Si esta función devuelve falso, no se necesitan operaciones de bloqueo. (Contribuido por Nick Coghlan.)</p></li>
<li><p>Una nueva función, <a class="reference internal" href="../c-api/arg.html#c.PyArg_VaParseTupleAndKeywords" title="PyArg_VaParseTupleAndKeywords"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyArg_VaParseTupleAndKeywords()</span></code></a>, es la misma que <a class="reference internal" href="../c-api/arg.html#c.PyArg_ParseTupleAndKeywords" title="PyArg_ParseTupleAndKeywords"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyArg_ParseTupleAndKeywords()</span></code></a> pero toma un <code class="xref c c-type docutils literal notranslate"><span class="pre">va_list</span></code> en lugar de varios argumentos. (Contribuido por Greg Chapman.)</p></li>
<li><p>Un nuevo indicador de método, <code class="xref py py-const docutils literal notranslate"><span class="pre">METH_COEXISTS</span></code>, permite que una función definida en ranuras coexista con un <a class="reference internal" href="../c-api/structures.html#c.PyCFunction" title="PyCFunction"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyCFunction</span></code></a> que tiene el mismo nombre. Esto puede reducir a la mitad el tiempo de acceso para un método como <code class="xref py py-meth docutils literal notranslate"><span class="pre">set.__contains__()</span></code>. (Contribuido por Raymond Hettinger.)</p></li>
<li><p>Python ahora se puede construir con perfiles adicionales para el intérprete en sí, con la intención de ayudar a las personas que desarrollan el núcleo de Python. Proporcionar <code class="xref std std-option docutils literal notranslate"> <span class="pre">-</span> <span class="pre">enable-profiling</span></code> al <strong class="program">configure</strong> script le permitirá perfilar el intérprete con <strong class="program">gprof</strong>, y proporcionar el <code class="xref std std-option docutils literal notranslate"> <span class="pre">-</span> <span class="pre">with-tsc</span></code> switch permite la creación de perfiles utilizando el registro de contador de marcas de tiempo del Pentium. Tenga en cuenta que el conmutador <code class="xref std std-option docutils literal notranslate"> <span class="pre">-</span> <span class="pre">with-tsc</span></code> tiene un nombre ligeramente incorrecto, porque la función de creación de perfiles también funciona en la plataforma PowerPC, aunque la arquitectura del procesador no llama a ese registro» el registro TSC «. (Contribuido por Jeremy Hylton.)</p></li>
<li><p>El tipo <code class="xref c c-type docutils literal notranslate"><span class="pre">tracebackobject</span></code> ha sido renombrado a <code class="xref c c-type docutils literal notranslate"><span class="pre">PyTracebackObject</span></code>.</p></li>
</ul>
<section id="port-specific-changes">
<h3>Cambios específicos del puerto<a class="headerlink" href="#port-specific-changes" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>El puerto de Windows ahora se construye bajo MSVC ++ 7.1 y también con la versión 6. (Contribuido por Martin von Löwis).</p></li>
</ul>
</section>
</section>
<section id="porting-to-python-2-4">
<h2>Portar a Python 2.4<a class="headerlink" href="#porting-to-python-2-4" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Esta sección enumera los cambios descritos anteriormente que pueden requerir cambios en su código:</p>
<ul class="simple">
<li><p>Los desplazamientos a la izquierda y las constantes hexadecimales / octales que son demasiado grandes ya no activan un <a class="reference internal" href="../library/exceptions.html#FutureWarning" title="FutureWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">FutureWarning</span></code></a> y devuelven un valor limitado a 32 o 64 bits; en su lugar, devuelven un entero largo.</p></li>
<li><p>Operaciones de números enteros no lanzaran una excepción <code class="xref py py-exc docutils literal notranslate"><span class="pre">OverflowWarning</span></code>. La advertencia sobre <code class="xref py py-exc docutils literal notranslate"><span class="pre">OverflowWarning</span></code> desaparecerá en Python 2.5.</p></li>
<li><p>La función de conjunto integrado <a class="reference internal" href="../library/functions.html#zip" title="zip"><code class="xref py py-func docutils literal notranslate"><span class="pre">zip()</span></code></a> y la <code class="xref py py-func docutils literal notranslate"><span class="pre">itertools.izip()</span></code> ahora retornan una lista hacia en vez de lanzar una excepción de tipo <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> si son llamados sin argumentos.</p></li>
<li><p>Ya no puede comparar las instancias <code class="xref py py-class docutils literal notranslate"><span class="pre">date</span></code> y <a class="reference internal" href="../library/datetime.html#datetime.datetime" title="datetime.datetime"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code></a> proporcionadas por el módulo <a class="reference internal" href="../library/datetime.html#module-datetime" title="datetime: Basic date and time types."><code class="xref py py-mod docutils literal notranslate"><span class="pre">datetime</span></code></a>. Dos instancias de clases diferentes ahora siempre serán desiguales, y las comparaciones relativas (<code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>) lanzarán un <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a>.</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">dircache.listdir()</span></code> ahora pasa excepciones a la persona que llama en lugar de devolver listas vacías.</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">LexicalHandler.startDTD()</span></code> solía recibir los identificadores públicos y del sistema en el orden incorrecto. Esto ha sido corregido; las aplicaciones que se basan en el orden incorrecto deben corregirse.</p></li>
<li><p><a class="reference internal" href="../library/fcntl.html#fcntl.ioctl" title="fcntl.ioctl"><code class="xref py py-func docutils literal notranslate"><span class="pre">fcntl.ioctl()</span></code></a> ahora advierte si el argumento <em>mutate</em> se omite y es relevante.</p></li>
<li><p>El módulo <a class="reference internal" href="../library/tarfile.html#module-tarfile" title="tarfile: Read and write tar-format archive files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">tarfile</span></code></a> ahora genera archivos de GNU tar-formato por defecto.</p></li>
<li><p>Encontrar un error al importar un módulo ya no deja un objeto de módulo parcialmente inicializado en <code class="docutils literal notranslate"><span class="pre">sys.modules</span></code>.</p></li>
<li><p><a class="reference internal" href="../library/constants.html#None" title="None"><code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></a> ahora es una constante; El código que une un nuevo valor al nombre <code class="docutils literal notranslate"><span class="pre">None</span></code> ahora es un error de sintaxis.</p></li>
<li><p>La función <code class="xref py py-func docutils literal notranslate"><span class="pre">signals.signal()</span></code> ahora genera una excepción <a class="reference internal" href="../library/exceptions.html#RuntimeError" title="RuntimeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">RuntimeError</span></code></a> para ciertos valores ilegales; anteriormente estos errores pasaban silenciosamente. Por ejemplo, ya no puede configurar un controlador en la señal <code class="xref py py-const docutils literal notranslate"><span class="pre">SIGKILL</span></code>.</p></li>
</ul>
</section>
<section id="acknowledgements">
<span id="acks"></span><h2>Agradecimientos<a class="headerlink" href="#acknowledgements" title="Enlazar permanentemente con este título">¶</a></h2>
<p>El autor desea agradecer a las siguientes personas por ofrecer sugerencias, correcciones y ayuda con varios borradores de este artículo: Koray Can, Hye-Shik Chang, Michael Dyck, Raymond Hettinger, Brian Hurt, Hamish Lawson, Fredrik Lundh, Sean Reifschneider, Sadruddin Rejeb.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../contents.html">Tabla de contenido</a></h3>
    <ul>
<li><a class="reference internal" href="#">Qué hay de nuevo en Python 2.4</a><ul>
<li><a class="reference internal" href="#pep-218-built-in-set-objects">PEP 218: Objetos conjunto integrados</a></li>
<li><a class="reference internal" href="#pep-237-unifying-long-integers-and-integers">PEP 237: Unificando enteros largos y enteros</a></li>
<li><a class="reference internal" href="#pep-289-generator-expressions">PEP 289: Expresiones generadoras</a></li>
<li><a class="reference internal" href="#pep-292-simpler-string-substitutions">PEP 292: Sustituciones simples de cadenas de caracteres</a></li>
<li><a class="reference internal" href="#pep-318-decorators-for-functions-and-methods">PEP 318: Decoradores para funciones y métodos</a></li>
<li><a class="reference internal" href="#pep-322-reverse-iteration">PEP 322: Iteración inversa</a></li>
<li><a class="reference internal" href="#pep-324-new-subprocess-module">PEP 324: Nuevo módulo de subproceso</a></li>
<li><a class="reference internal" href="#pep-327-decimal-data-type">PEP 327: Tipo de dato decimal</a><ul>
<li><a class="reference internal" href="#why-is-decimal-needed">¿Por qué se necesita Decimal?</a></li>
<li><a class="reference internal" href="#the-decimal-type">El tipo de clase <code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code></a></li>
<li><a class="reference internal" href="#the-context-type">El tipo de clase <code class="xref py py-class docutils literal notranslate"><span class="pre">Context</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#pep-328-multi-line-imports">PEP 328: Importaciones multilínea</a></li>
<li><a class="reference internal" href="#pep-331-locale-independent-float-string-conversions">PEP 331: Conversiones locales-independientes números flotantes/cadenas de texto</a></li>
<li><a class="reference internal" href="#other-language-changes">Otros cambios en el lenguaje</a><ul>
<li><a class="reference internal" href="#optimizations">Optimizaciones</a></li>
</ul>
</li>
<li><a class="reference internal" href="#new-improved-and-deprecated-modules">Módulos nuevos, mejorados y obsoletos</a><ul>
<li><a class="reference internal" href="#cookielib">cookielib</a></li>
<li><a class="reference internal" href="#doctest">doctest</a></li>
</ul>
</li>
<li><a class="reference internal" href="#build-and-c-api-changes">Cambios en la API de Build y C</a><ul>
<li><a class="reference internal" href="#port-specific-changes">Cambios específicos del puerto</a></li>
</ul>
</li>
<li><a class="reference internal" href="#porting-to-python-2-4">Portar a Python 2.4</a></li>
<li><a class="reference internal" href="#acknowledgements">Agradecimientos</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Tema anterior</h4>
    <p class="topless"><a href="2.5.html"
                          title="capítulo anterior">Qué hay de nuevo en Python 2.5</a></p>
  </div>
  <div>
    <h4>Próximo tema</h4>
    <p class="topless"><a href="2.3.html"
                          title="próximo capítulo">Qué hay de nuevo en Python 2.3</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Reporta un bug</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/3.11/Doc/whatsnew/2.4.rst"
            rel="nofollow">Ver fuente
        </a>
      </li>
    </ul>
  </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice general"
             >índice</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Índice de Módulos Python"
             >módulos</a> |</li>
        <li class="right" >
          <a href="2.3.html" title="Qué hay de nuevo en Python 2.3"
             >siguiente</a> |</li>
        <li class="right" >
          <a href="2.5.html" title="Qué hay de nuevo en Python 2.5"
             >anterior</a> |</li>

          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.11.2 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" >Qué hay de nuevo en Python</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Qué hay de nuevo en Python 2.4</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Búsqueda rápida" aria-label="Búsqueda rápida" type="text" name="q" />
          <input type="submit" value="Ir" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
                     |
                </li>
            
      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="../copyright.html">Copyright</a> 2001-2023, Python Software Foundation.
    <br />
    This page is licensed under the Python Software Foundation License Version 2.
    <br />
    Examples, recipes, and other code in the documentation are additionally licensed under the Zero Clause BSD License.
    <br />
    See <a href="/license.html">History and License</a> for more information.<br />
    <br />

    La Python Software Foundation es una organización sin fines de lucro.
<a href="https://www.python.org/psf/donations/">Por favor, haga una donación.</a>
<br />
    <br />

    Última actualización el mar 23, 2023.
    <a href="/bugs.html">Found a bug</a>?
    <br />

    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.5.0.
    </div>

  </body>
</html>