
<!DOCTYPE html>

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<meta property="og:title" content="Qué hay de nuevo en Python 3.2" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://docs.python.org/3/whatsnew/3.2.html" />
<meta property="og:site_name" content="Python documentation" />
<meta property="og:description" content="Autor, Raymond Hettinger,. Este artículo explica las nuevas características de Python 3.2 en comparación con 3.1. Python 3.2 se lanzó el 20 de febrero de 2011. Se centra en algunos aspectos destaca..." />
<meta property="og:image" content="https://docs.python.org/3/_static/og-image.png" />
<meta property="og:image:alt" content="Python documentation" />
<meta name="description" content="Autor, Raymond Hettinger,. Este artículo explica las nuevas características de Python 3.2 en comparación con 3.1. Python 3.2 se lanzó el 20 de febrero de 2011. Se centra en algunos aspectos destaca..." />
<meta property="og:image:width" content="200" />
<meta property="og:image:height" content="200" />
<meta name="theme-color" content="#3776ab" />

    <title>Qué hay de nuevo en Python 3.2 &#8212; documentación de Python - 3.11.2</title><meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/pydoctheme.css?digest=2d3badd06fe70b34b68db01f99471ce1624ffe4a" />
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/translations.js"></script>
    
    <script src="../_static/sidebar.js"></script>
    
    <link rel="search" type="application/opensearchdescription+xml"
          title="Buscar en documentación de Python - 3.11.2"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="Sobre este documento" href="../about.html" />
    <link rel="index" title="Índice" href="../genindex.html" />
    <link rel="search" title="Búsqueda" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="Qué hay de nuevo en Python 3.1" href="3.1.html" />
    <link rel="prev" title="Qué hay de nuevo en Python 3.3" href="3.3.html" />
    <link rel="canonical" href="https://docs.python.org/3/whatsnew/3.2.html" />
    
      
    

    
    <style>
      @media only screen {
        table.full-width-table {
            width: 100%;
        }
      }
    </style>
<link rel="shortcut icon" type="image/png" href="../_static/py.svg" />
            <script type="text/javascript" src="../_static/copybutton.js"></script>
            <script type="text/javascript" src="../_static/menu.js"></script> 

  </head>
<body>
<div class="mobile-nav">
    <input type="checkbox" id="menuToggler" class="toggler__input" aria-controls="navigation"
           aria-pressed="false" aria-expanded="false" role="button" aria-label="Menu" />
    <label for="menuToggler" class="toggler__label">
        <span></span>
    </label>
    <nav class="nav-content" role="navigation">
         <a href="https://www.python.org/" class="nav-logo">
             <img src="../_static/py.svg" alt="Logo"/>
         </a>
        <div class="version_switcher_placeholder"></div>
        <form role="search" class="search" action="../search.html" method="get">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="search-icon">
                <path fill-rule="nonzero"
                        d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 001.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 00-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 005.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" fill="#444"></path>
            </svg>
            <input type="text" name="q" aria-label="Búsqueda rápida"/>
            <input type="submit" value="Ir"/>
        </form>
    </nav>
    <div class="menu-wrapper">
        <nav class="menu" role="navigation" aria-label="main navigation">
            <div class="language_switcher_placeholder"></div>
  <div>
    <h3><a href="../contents.html">Tabla de contenido</a></h3>
    <ul>
<li><a class="reference internal" href="#">Qué hay de nuevo en Python 3.2</a><ul>
<li><a class="reference internal" href="#pep-384-defining-a-stable-abi">PEP 384: Definición de un ABI estable</a></li>
<li><a class="reference internal" href="#pep-389-argparse-command-line-parsing-module">PEP 389: Módulo de análisis sintáctico (<em>Parser</em>) de línea de comandos Argparse</a></li>
<li><a class="reference internal" href="#pep-391-dictionary-based-configuration-for-logging">PEP 391: Configuración basada en diccionario para Logging</a></li>
<li><a class="reference internal" href="#pep-3148-the-concurrent-futures-module">PEP 3148: El módulo <code class="docutils literal notranslate"><span class="pre">concurrent.futures</span></code></a></li>
<li><a class="reference internal" href="#pep-3147-pyc-repository-directories">PEP 3147: Directorios del repositorio de PYC</a></li>
<li><a class="reference internal" href="#pep-3149-abi-version-tagged-so-files">PEP 3149: Archivos .so con etiquetado de versión para ABI</a></li>
<li><a class="reference internal" href="#pep-3333-python-web-server-gateway-interface-v1-0-1">PEP 3333: Interfaz de puerta de enlace del servidor web Python v1.0.1</a></li>
<li><a class="reference internal" href="#other-language-changes">Otros cambios de lenguaje</a></li>
<li><a class="reference internal" href="#new-improved-and-deprecated-modules">Módulos nuevos, mejorados y obsoletos</a><ul>
<li><a class="reference internal" href="#email">email</a></li>
<li><a class="reference internal" href="#elementtree">elementtree</a></li>
<li><a class="reference internal" href="#functools">functools</a></li>
<li><a class="reference internal" href="#itertools">itertools</a></li>
<li><a class="reference internal" href="#collections">collections</a></li>
<li><a class="reference internal" href="#threading">threading</a></li>
<li><a class="reference internal" href="#datetime-and-time">datetime and time</a></li>
<li><a class="reference internal" href="#math">math</a></li>
<li><a class="reference internal" href="#abc">abc</a></li>
<li><a class="reference internal" href="#io">io</a></li>
<li><a class="reference internal" href="#reprlib">reprlib</a></li>
<li><a class="reference internal" href="#logging">logging</a></li>
<li><a class="reference internal" href="#csv">csv</a></li>
<li><a class="reference internal" href="#contextlib">contextlib</a></li>
<li><a class="reference internal" href="#decimal-and-fractions">decimal and fractions</a></li>
<li><a class="reference internal" href="#ftp">ftp</a></li>
<li><a class="reference internal" href="#popen">popen</a></li>
<li><a class="reference internal" href="#select">select</a></li>
<li><a class="reference internal" href="#gzip-and-zipfile">gzip y zipfile</a></li>
<li><a class="reference internal" href="#tarfile">tarfile</a></li>
<li><a class="reference internal" href="#hashlib">hashlib</a></li>
<li><a class="reference internal" href="#ast">ast</a></li>
<li><a class="reference internal" href="#os">os</a></li>
<li><a class="reference internal" href="#shutil">shutil</a></li>
<li><a class="reference internal" href="#sqlite3">sqlite3</a></li>
<li><a class="reference internal" href="#html">html</a></li>
<li><a class="reference internal" href="#socket">socket</a></li>
<li><a class="reference internal" href="#ssl">ssl</a></li>
<li><a class="reference internal" href="#nntp">nntp</a></li>
<li><a class="reference internal" href="#certificates">certificados</a></li>
<li><a class="reference internal" href="#imaplib">imaplib</a></li>
<li><a class="reference internal" href="#http-client">http.client</a></li>
<li><a class="reference internal" href="#unittest">unittest</a></li>
<li><a class="reference internal" href="#random">random</a></li>
<li><a class="reference internal" href="#poplib">poplib</a></li>
<li><a class="reference internal" href="#asyncore">asyncore</a></li>
<li><a class="reference internal" href="#tempfile">tempfile</a></li>
<li><a class="reference internal" href="#inspect">inspect</a></li>
<li><a class="reference internal" href="#pydoc">pydoc</a></li>
<li><a class="reference internal" href="#dis">dis</a></li>
<li><a class="reference internal" href="#dbm">dbm</a></li>
<li><a class="reference internal" href="#ctypes">ctypes</a></li>
<li><a class="reference internal" href="#site">site</a></li>
<li><a class="reference internal" href="#sysconfig">sysconfig</a></li>
<li><a class="reference internal" href="#pdb">pdb</a></li>
<li><a class="reference internal" href="#configparser">configparser</a></li>
<li><a class="reference internal" href="#urllib-parse">urllib.parse</a></li>
<li><a class="reference internal" href="#mailbox">mailbox</a></li>
<li><a class="reference internal" href="#turtledemo">turtledemo</a></li>
</ul>
</li>
<li><a class="reference internal" href="#multi-threading">Multi-threading</a></li>
<li><a class="reference internal" href="#optimizations">Optimizations</a></li>
<li><a class="reference internal" href="#unicode">Unicode</a></li>
<li><a class="reference internal" href="#codecs">Codecs</a></li>
<li><a class="reference internal" href="#documentation">Documentación</a></li>
<li><a class="reference internal" href="#idle">IDLE</a></li>
<li><a class="reference internal" href="#code-repository">Repositorio de código</a></li>
<li><a class="reference internal" href="#build-and-c-api-changes">Cambios en la API de construcción y C</a></li>
<li><a class="reference internal" href="#porting-to-python-3-2">Portar a Python 3.2</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Tema anterior</h4>
    <p class="topless"><a href="3.3.html"
                          title="capítulo anterior">Qué hay de nuevo en Python 3.3</a></p>
  </div>
  <div>
    <h4>Próximo tema</h4>
    <p class="topless"><a href="3.1.html"
                          title="próximo capítulo">Qué hay de nuevo en Python 3.1</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Reporta un bug</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/3.11/Doc/whatsnew/3.2.rst"
            rel="nofollow">Ver fuente
        </a>
      </li>
    </ul>
  </div>
        </nav>
    </div>
</div>

  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice general"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Índice de Módulos Python"
             >módulos</a> |</li>
        <li class="right" >
          <a href="3.1.html" title="Qué hay de nuevo en Python 3.1"
             accesskey="N">siguiente</a> |</li>
        <li class="right" >
          <a href="3.3.html" title="Qué hay de nuevo en Python 3.3"
             accesskey="P">anterior</a> |</li>

          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.11.2 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Qué hay de nuevo en Python</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Qué hay de nuevo en Python 3.2</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Búsqueda rápida" aria-label="Búsqueda rápida" type="text" name="q" />
          <input type="submit" value="Ir" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
                     |
                </li>
            
      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="what-s-new-in-python-3-2">
<h1>Qué hay de nuevo en Python 3.2<a class="headerlink" href="#what-s-new-in-python-3-2" title="Enlazar permanentemente con este título">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Autor</dt>
<dd class="field-odd"><p>Raymond Hettinger</p>
</dd>
</dl>
<p>Este artículo explica las nuevas características de Python 3.2 en comparación con 3.1. Python 3.2 se lanzó el 20 de febrero de 2011. Se centra en algunos aspectos destacados y ofrece algunos ejemplos. Para obtener detalles completos, consulte el archivo <a class="reference external" href="https://github.com/python/cpython/blob/076ca6c3c8df3030307e548d9be792ce3c1c6eea/Misc/NEWS">Misc/NEWS</a>.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<p><span class="target" id="index-30"></span><a class="pep reference external" href="https://peps.python.org/pep-0392/"><strong>PEP 392</strong></a> - Calendario de Publicación Python 3.2</p>
</div>
<section id="pep-384-defining-a-stable-abi">
<h2>PEP 384: Definición de un ABI estable<a class="headerlink" href="#pep-384-defining-a-stable-abi" title="Enlazar permanentemente con este título">¶</a></h2>
<p>En el pasado, los módulos de extensión creados para una versión de Python a menudo no se podían usar con otras versiones de Python. Particularmente en Windows, cada lanzamiento de funciones de Python requería reconstruir todos los módulos de extensión que uno quería usar. Este requisito fue el resultado del acceso gratuito a los componentes internos del intérprete de Python que los módulos de extensión podían usar.</p>
<p>Con Python 3.2, está disponible un enfoque alternativo: los módulos de extensión que se restringen a una API limitada (al definir Py_LIMITED_API) no pueden usar muchas de las funciones internas, pero están restringidos a un conjunto de funciones API que se promete serán estables para varias versiones. Como consecuencia, los módulos de extensión creados para 3.2 en ese modo también funcionarán con 3.3, 3.4, etc. Los módulos de extensión que hacen uso de los detalles de las estructuras de memoria aún se pueden construir, pero deberán recompilarse para cada lanzamiento de funciones.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<dl class="simple">
<dt><span class="target" id="index-31"></span><a class="pep reference external" href="https://peps.python.org/pep-0384/"><strong>PEP 384</strong></a> - Definición de un ABI estable</dt><dd><p>PEP escrito por Martin von Löwis.</p>
</dd>
</dl>
</div>
</section>
<section id="pep-389-argparse-command-line-parsing-module">
<h2>PEP 389: Módulo de análisis sintáctico (<em>Parser</em>) de línea de comandos Argparse<a class="headerlink" href="#pep-389-argparse-command-line-parsing-module" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Se introdujo un nuevo módulo para el análisis de la línea de comandos, <a class="reference internal" href="../library/argparse.html#module-argparse" title="argparse: Command-line option and argument parsing library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">argparse</span></code></a>, para superar las limitaciones de <a class="reference internal" href="../library/optparse.html#module-optparse" title="optparse: Command-line option parsing library. (obsoleto)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">optparse</span></code></a> que no brindaba soporte para argumentos posicionales (no solo opciones), subcomandos, opciones requeridas y otros patrones comunes para especificar y validar opciones.</p>
<p>Este módulo ya ha tenido un éxito generalizado en la comunidad como módulo de terceros. Con más funciones que su predecesor, el módulo <a class="reference internal" href="../library/argparse.html#module-argparse" title="argparse: Command-line option and argument parsing library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">argparse</span></code></a> es ahora el módulo preferido para el procesamiento de la línea de comandos. El módulo más antiguo todavía se mantiene disponible debido a la gran cantidad de código heredado que depende de él.</p>
<p>Aquí hay un analizador de ejemplo comentado que muestra características de cómo limitar los resultados a un conjunto de opciones, especificar un <em>metavar</em> en la pantalla de ayuda, validar que uno o más argumentos posicionales están presentes y hacer una opción requerida:­:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">argparse</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span>
            <span class="n">description</span> <span class="o">=</span> <span class="s1">&#39;Manage servers&#39;</span><span class="p">,</span>         <span class="c1"># main description for help</span>
            <span class="n">epilog</span> <span class="o">=</span> <span class="s1">&#39;Tested on Solaris and Linux&#39;</span><span class="p">)</span> <span class="c1"># displayed after help</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;action&#39;</span><span class="p">,</span>                       <span class="c1"># argument name</span>
            <span class="n">choices</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;deploy&#39;</span><span class="p">,</span> <span class="s1">&#39;start&#39;</span><span class="p">,</span> <span class="s1">&#39;stop&#39;</span><span class="p">],</span>  <span class="c1"># three allowed values</span>
            <span class="n">help</span> <span class="o">=</span> <span class="s1">&#39;action on each target&#39;</span><span class="p">)</span>         <span class="c1"># help msg</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;targets&#39;</span><span class="p">,</span>
            <span class="n">metavar</span> <span class="o">=</span> <span class="s1">&#39;HOSTNAME&#39;</span><span class="p">,</span>                   <span class="c1"># var name used in help msg</span>
            <span class="n">nargs</span> <span class="o">=</span> <span class="s1">&#39;+&#39;</span><span class="p">,</span>                            <span class="c1"># require one or more targets</span>
            <span class="n">help</span> <span class="o">=</span> <span class="s1">&#39;url for target machines&#39;</span><span class="p">)</span>       <span class="c1"># help msg explanation</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-u&#39;</span><span class="p">,</span> <span class="s1">&#39;--user&#39;</span><span class="p">,</span>                 <span class="c1"># -u or --user option</span>
            <span class="n">required</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>                        <span class="c1"># make it a required argument</span>
            <span class="n">help</span> <span class="o">=</span> <span class="s1">&#39;login as user&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Ejemplo de llamada al analizador en una cadena de caracteres de comandos:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cmd</span> <span class="o">=</span> <span class="s1">&#39;deploy sneezy.example.com sleepy.example.com -u skycaptain&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="n">cmd</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">action</span>
<span class="go">&#39;deploy&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">targets</span>
<span class="go">[&#39;sneezy.example.com&#39;, &#39;sleepy.example.com&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">user</span>
<span class="go">&#39;skycaptain&#39;</span>
</pre></div>
</div>
<p>Ejemplo de ayuda generada automáticamente por el analizador:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="s1">&#39;-h&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>

<span class="go">usage: manage_cloud.py [-h] -u USER</span>
<span class="go">                       {deploy,start,stop} HOSTNAME [HOSTNAME ...]</span>

<span class="go">Manage servers</span>

<span class="go">positional arguments:</span>
<span class="go">  {deploy,start,stop}   action on each target</span>
<span class="go">  HOSTNAME              url for target machines</span>

<span class="go">optional arguments:</span>
<span class="go">  -h, --help            show this help message and exit</span>
<span class="go">  -u USER, --user USER  login as user</span>

<span class="go">Tested on Solaris and Linux</span>
</pre></div>
</div>
<p>Una característica especialmente agradable de <a class="reference internal" href="../library/argparse.html#module-argparse" title="argparse: Command-line option and argument parsing library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">argparse</span></code></a> es la capacidad de definir sub-analizadores (<em>subparsers</em>), cada uno con sus propios patrones de argumentos y pantallas de ayuda:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">argparse</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s1">&#39;HELM&#39;</span><span class="p">)</span>
<span class="n">subparsers</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_subparsers</span><span class="p">()</span>

<span class="n">parser_l</span> <span class="o">=</span> <span class="n">subparsers</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s1">&#39;launch&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Launch Control&#39;</span><span class="p">)</span>   <span class="c1"># first subgroup</span>
<span class="n">parser_l</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-m&#39;</span><span class="p">,</span> <span class="s1">&#39;--missiles&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
<span class="n">parser_l</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-t&#39;</span><span class="p">,</span> <span class="s1">&#39;--torpedos&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store_true&#39;</span><span class="p">)</span>

<span class="n">parser_m</span> <span class="o">=</span> <span class="n">subparsers</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s1">&#39;move&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Move Vessel&#39;</span><span class="p">,</span>        <span class="c1"># second subgroup</span>
                                 <span class="n">aliases</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;steer&#39;</span><span class="p">,</span> <span class="s1">&#39;turn&#39;</span><span class="p">))</span>         <span class="c1"># equivalent names</span>
<span class="n">parser_m</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-c&#39;</span><span class="p">,</span> <span class="s1">&#39;--course&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">parser_m</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-s&#39;</span><span class="p">,</span> <span class="s1">&#39;--speed&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>./helm.py --help                         <span class="c1"># top level help (launch and move)</span>
<span class="gp">$ </span>./helm.py launch --help                  <span class="c1"># help for launch options</span>
<span class="gp">$ </span>./helm.py launch --missiles              <span class="c1"># set missiles=True and torpedos=False</span>
<span class="gp">$ </span>./helm.py steer --course <span class="m">180</span> --speed <span class="m">5</span>   <span class="c1"># set movement parameters</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<dl class="simple">
<dt><span class="target" id="index-32"></span><a class="pep reference external" href="https://peps.python.org/pep-0389/"><strong>PEP 389</strong></a> - Nuevo módulo de análisis de línea de comandos</dt><dd><p>PEP escrito por Steven Bethard.</p>
</dd>
</dl>
<p><a class="reference internal" href="../library/argparse.html#upgrading-optparse-code"><span class="std std-ref">Actualizar el código de optparse</span></a> para obtener detalles sobre las diferencias con <a class="reference internal" href="../library/optparse.html#module-optparse" title="optparse: Command-line option parsing library. (obsoleto)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">optparse</span></code></a>.</p>
</div>
</section>
<section id="pep-391-dictionary-based-configuration-for-logging">
<h2>PEP 391: Configuración basada en diccionario para Logging<a class="headerlink" href="#pep-391-dictionary-based-configuration-for-logging" title="Enlazar permanentemente con este título">¶</a></h2>
<p>El módulo <a class="reference internal" href="../library/logging.html#module-logging" title="logging: Flexible event logging system for applications."><code class="xref py py-mod docutils literal notranslate"><span class="pre">logging</span></code></a> proporcionó dos tipos de configuración, un estilo con llamadas de función para cada opción y otro estilo guiado por un archivo externo guardado en formato <code class="xref py py-mod docutils literal notranslate"><span class="pre">ConfigParser</span></code>. Esas opciones no proporcionaron la flexibilidad para crear configuraciones a partir de archivos JSON o YAML, ni admitieron la configuración incremental, que es necesaria para especificar las opciones del logger desde una línea de comandos.</p>
<p>Para permitir un estilo más flexible, el módulo ahora ofrece <a class="reference internal" href="../library/logging.config.html#logging.config.dictConfig" title="logging.config.dictConfig"><code class="xref py py-func docutils literal notranslate"><span class="pre">logging.config.dictConfig()</span></code></a> para especificar la configuración de logging con diccionarios simples de Python. Las opciones de configuración incluyen formateadores, gestores, filtros y loggers. Aquí hay un ejemplo funcional de un diccionario de configuración:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
 <span class="s2">&quot;formatters&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;brief&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">%(levelname)-8s</span><span class="s2">: </span><span class="si">%(name)-15s</span><span class="s2">: </span><span class="si">%(message)s</span><span class="s2">&quot;</span><span class="p">},</span>
                <span class="s2">&quot;full&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">%(asctime)s</span><span class="s2"> </span><span class="si">%(name)-15s</span><span class="s2"> </span><span class="si">%(levelname)-8s</span><span class="s2"> </span><span class="si">%(message)s</span><span class="s2">&quot;</span><span class="p">}</span>
                <span class="p">},</span>
 <span class="s2">&quot;handlers&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;console&quot;</span><span class="p">:</span> <span class="p">{</span>
                   <span class="s2">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;logging.StreamHandler&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;formatter&quot;</span><span class="p">:</span> <span class="s2">&quot;brief&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;level&quot;</span><span class="p">:</span> <span class="s2">&quot;INFO&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;stream&quot;</span><span class="p">:</span> <span class="s2">&quot;ext://sys.stdout&quot;</span><span class="p">},</span>
              <span class="s2">&quot;console_priority&quot;</span><span class="p">:</span> <span class="p">{</span>
                   <span class="s2">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;logging.StreamHandler&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;formatter&quot;</span><span class="p">:</span> <span class="s2">&quot;full&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;level&quot;</span><span class="p">:</span> <span class="s2">&quot;ERROR&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;stream&quot;</span><span class="p">:</span> <span class="s2">&quot;ext://sys.stderr&quot;</span><span class="p">}</span>
              <span class="p">},</span>
 <span class="s2">&quot;root&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;level&quot;</span><span class="p">:</span> <span class="s2">&quot;DEBUG&quot;</span><span class="p">,</span> <span class="s2">&quot;handlers&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;console&quot;</span><span class="p">,</span> <span class="s2">&quot;console_priority&quot;</span><span class="p">]}}</span>
</pre></div>
</div>
<p>Si ese diccionario está almacenado en un archivo llamado <code class="file docutils literal notranslate"><span class="pre">conf.json</span></code>, se puede cargar y llamar con un código como este:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">json</span><span class="o">,</span> <span class="nn">logging.config</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;conf.json&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">conf</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logging</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">dictConfig</span><span class="p">(</span><span class="n">conf</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Transaction completed normally&quot;</span><span class="p">)</span>
<span class="go">INFO    : root           : Transaction completed normally</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logging</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="s2">&quot;Abnormal termination&quot;</span><span class="p">)</span>
<span class="go">2011-02-17 11:14:36,694 root            CRITICAL Abnormal termination</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<dl class="simple">
<dt><span class="target" id="index-33"></span><a class="pep reference external" href="https://peps.python.org/pep-0391/"><strong>PEP 391</strong></a> - Configuración basada en diccionario para Logging</dt><dd><p>PEP escrito por Vinay Sajip.</p>
</dd>
</dl>
</div>
</section>
<section id="pep-3148-the-concurrent-futures-module">
<h2>PEP 3148: El módulo <code class="docutils literal notranslate"><span class="pre">concurrent.futures</span></code><a class="headerlink" href="#pep-3148-the-concurrent-futures-module" title="Enlazar permanentemente con este título">¶</a></h2>
<p>El código para crear y administrar la concurrencia se está recopilando en un nuevo espacio de nombres de nivel superior, <em>concurrent</em>. Su primer miembro es un paquete <em>futures</em> que proporciona una interfaz uniforme de alto nivel para administrar hilos y procesos.</p>
<p>El diseño de <a class="reference internal" href="../library/concurrent.futures.html#module-concurrent.futures" title="concurrent.futures: Execute computations concurrently using threads or processes."><code class="xref py py-mod docutils literal notranslate"><span class="pre">concurrent.futures</span></code></a> se inspiró en el paquete <em>java.util.concurrent</em>. En ese modelo, una llamada en ejecución y su resultado están representados por un objeto <a class="reference internal" href="../library/concurrent.futures.html#concurrent.futures.Future" title="concurrent.futures.Future"><code class="xref py py-class docutils literal notranslate"><span class="pre">Future</span></code></a> que abstrae características comunes a hilos, procesos y llamadas a procedimientos remotos. Ese objeto admite verificaciones de estado (en ejecución o terminadas), tiempos de espera, cancelaciones, agregar devoluciones de llamada y acceso a resultados o excepciones.</p>
<p>El agregado principal del nuevo módulo es un par de clases ejecutoras para lanzar y administrar llamadas. El objetivo de los ejecutores es facilitar el uso de las herramientas existentes para realizar llamadas en paralelo. Ahorran el esfuerzo necesario para configurar un grupo de recursos, lanzar las llamadas, crear una cola de resultados, agregar gestión de tiempo de espera y limitar la cantidad total de hilos, procesos o llamadas a procedimientos remotos.</p>
<p>Idealmente, cada aplicación debería compartir un solo ejecutor en varios componentes para que los límites de procesos e hilos se puedan administrar de forma centralizada. Esto resuelve el desafío de diseño que surge cuando cada componente tiene su propia estrategia competitiva para la gestión de recursos.</p>
<p>Ambas clases comparten una interfaz común con tres métodos: <a class="reference internal" href="../library/concurrent.futures.html#concurrent.futures.Executor.submit" title="concurrent.futures.Executor.submit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">submit()</span></code></a> para programar un invocable y retornar un objeto <a class="reference internal" href="../library/concurrent.futures.html#concurrent.futures.Future" title="concurrent.futures.Future"><code class="xref py py-class docutils literal notranslate"><span class="pre">Future</span></code></a> <a class="reference internal" href="../library/concurrent.futures.html#concurrent.futures.Executor.map" title="concurrent.futures.Executor.map"><code class="xref py py-meth docutils literal notranslate"><span class="pre">map()</span></code></a> para programar muchas llamadas asincrónicas a la vez, y <a class="reference internal" href="../library/concurrent.futures.html#concurrent.futures.Executor.shutdown" title="concurrent.futures.Executor.shutdown"><code class="xref py py-meth docutils literal notranslate"><span class="pre">shutdown()</span></code></a> para liberar recursos. La clase es un <a class="reference internal" href="../glossary.html#term-context-manager"><span class="xref std std-term">context manager</span></a> y se puede usar en una declaración <a class="reference internal" href="../reference/compound_stmts.html#with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a> para asegurar que los recursos se liberen automáticamente cuando los futuros actualmente pendientes terminan de ejecutarse.</p>
<p>Un ejemplo simple de <a class="reference internal" href="../library/concurrent.futures.html#concurrent.futures.ThreadPoolExecutor" title="concurrent.futures.ThreadPoolExecutor"><code class="xref py py-class docutils literal notranslate"><span class="pre">ThreadPoolExecutor</span></code></a> es un lanzamiento de cuatro hilos paralelos para copiar archivos:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">concurrent.futures</span><span class="o">,</span> <span class="nn">shutil</span>
<span class="k">with</span> <span class="n">concurrent</span><span class="o">.</span><span class="n">futures</span><span class="o">.</span><span class="n">ThreadPoolExecutor</span><span class="p">(</span><span class="n">max_workers</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="n">e</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">,</span> <span class="s1">&#39;src1.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;dest1.txt&#39;</span><span class="p">)</span>
    <span class="n">e</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">,</span> <span class="s1">&#39;src2.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;dest2.txt&#39;</span><span class="p">)</span>
    <span class="n">e</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">,</span> <span class="s1">&#39;src3.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;dest3.txt&#39;</span><span class="p">)</span>
    <span class="n">e</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">,</span> <span class="s1">&#39;src3.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;dest4.txt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<dl class="simple">
<dt><span class="target" id="index-34"></span><a class="pep reference external" href="https://peps.python.org/pep-3148/"><strong>PEP 3148</strong></a> - Futuros – Ejecutar Cómputos Asincrónicos</dt><dd><p>PEP escrito por Brian Quinlan.</p>
</dd>
</dl>
<p><a class="reference internal" href="../library/concurrent.futures.html#threadpoolexecutor-example"><span class="std std-ref">Código para lecturas de URL en paralelo con grupos de hilos</span></a>, un ejemplo que usa hilos para buscar varias páginas web en paralelo.</p>
<p><a class="reference internal" href="../library/concurrent.futures.html#processpoolexecutor-example"><span class="std std-ref">Código para calcular números primos en paralelo</span></a>, un ejemplo demostrando <a class="reference internal" href="../library/concurrent.futures.html#concurrent.futures.ProcessPoolExecutor" title="concurrent.futures.ProcessPoolExecutor"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProcessPoolExecutor</span></code></a>.</p>
</div>
</section>
<section id="pep-3147-pyc-repository-directories">
<h2>PEP 3147: Directorios del repositorio de PYC<a class="headerlink" href="#pep-3147-pyc-repository-directories" title="Enlazar permanentemente con este título">¶</a></h2>
<p>El esquema de Python para almacenar en caché bytecode en archivos <em>.pyc</em> no funcionó bien en entornos con múltiples intérpretes de Python. Si un intérprete encontrara un archivo en caché creado por otro intérprete, volvería a compilar la fuente y sobrescribiría el archivo en caché, perdiendo así los beneficios del almacenamiento en caché.</p>
<p>El problema de las «peleas de pyc» se ha vuelto más pronunciado a medida que se ha convertido en un lugar común para las distribuciones de Linux enviadas con múltiples versiones de Python. Estos conflictos también surgen con alternativas de CPython como <em>Unladen Swallow</em>.</p>
<p>Para resolver este problema, el mecanismo de importación de Python se ha ampliado para utilizar nombres de archivo distintos para cada intérprete. En lugar de que Python 3.2 y Python 3.3 y <em>Unladen Swallow</em> compitan por un archivo llamado «mymodule.pyc», ahora buscarán «mymodule.cpython-32.pyc», «mymodule.cpython-33.pyc» y «mymodule .unladen10.pyc». Y para evitar que todos estos nuevos archivos abarroten los directorios de origen, los archivos <em>pyc</em> ahora se recopilan en un directorio «__pycache__» almacenado en el directorio del paquete.</p>
<p>Aparte de los nombres de archivo y directorios de destino, el nuevo esquema tiene algunos aspectos que son visibles para el programador:</p>
<ul>
<li><p>Los módulos importados ahora tienen un atributo <a class="reference internal" href="../reference/import.html#cached__" title="__cached__"><code class="xref py py-attr docutils literal notranslate"><span class="pre">__cached__</span></code></a> que almacena el nombre del archivo real que se importó:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">collections</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">collections</span><span class="o">.</span><span class="n">__cached__</span> 
<span class="go">&#39;c:/py32/lib/__pycache__/collections.cpython-32.pyc&#39;</span>
</pre></div>
</div>
</li>
<li><p>La etiqueta que es única para cada intérprete es accesible desde el módulo <a class="reference internal" href="../library/imp.html#module-imp" title="imp: Access the implementation of the import statement. (obsoleto)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">imp</span></code></a>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">imp</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">imp</span><span class="o">.</span><span class="n">get_tag</span><span class="p">()</span> 
<span class="go">&#39;cpython-32&#39;</span>
</pre></div>
</div>
</li>
<li><p>Los scripts que intentan deducir el nombre del archivo de origen del archivo importado ahora deben ser más inteligentes. Ya no es suficiente simplemente quitar la «c» final del nombre de archivo «.pyc». En su lugar, use las nuevas funciones del módulo <a class="reference internal" href="../library/imp.html#module-imp" title="imp: Access the implementation of the import statement. (obsoleto)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">imp</span></code></a>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">imp</span><span class="o">.</span><span class="n">source_from_cache</span><span class="p">(</span><span class="s1">&#39;c:/py32/lib/__pycache__/collections.cpython-32.pyc&#39;</span><span class="p">)</span>
<span class="go">&#39;c:/py32/lib/collections.py&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">imp</span><span class="o">.</span><span class="n">cache_from_source</span><span class="p">(</span><span class="s1">&#39;c:/py32/lib/collections.py&#39;</span><span class="p">)</span> 
<span class="go">&#39;c:/py32/lib/__pycache__/collections.cpython-32.pyc&#39;</span>
</pre></div>
</div>
</li>
<li><p>Los módulos <a class="reference internal" href="../library/py_compile.html#module-py_compile" title="py_compile: Generate byte-code files from Python source files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">py_compile</span></code></a> y <a class="reference internal" href="../library/compileall.html#module-compileall" title="compileall: Tools for byte-compiling all Python source files in a directory tree."><code class="xref py py-mod docutils literal notranslate"><span class="pre">compileall</span></code></a> se han actualizado para reflejar la nueva convención de nomenclatura y el directorio de destino. La invocación por línea de comandos de <em>compileall</em> tiene nuevas opciones: <code class="docutils literal notranslate"><span class="pre">-i</span></code> para especificar una lista de archivos y directorios para compilar y <code class="docutils literal notranslate"><span class="pre">-b</span></code> que hace que los archivos bytecode se escriban en su ubicación heredada en lugar de <em>__pycache__</em>.</p></li>
<li><p>El módulo <a class="reference internal" href="../library/importlib.html#module-importlib.abc" title="importlib.abc: Abstract base classes related to import"><code class="xref py py-mod docutils literal notranslate"><span class="pre">importlib.abc</span></code></a> se ha actualizado con una nueva <a class="reference internal" href="../glossary.html#term-abstract-base-class"><span class="xref std std-term">clase base abstracta</span></a> para cargar archivos bytecode. Las ABC (por sus siglas en inglés <em>abstract base class</em>) obsoletas, <code class="xref py py-class docutils literal notranslate"><span class="pre">PyLoader</span></code> y <code class="xref py py-class docutils literal notranslate"><span class="pre">PyPycLoader</span></code>, han sido deprecadas (las instrucciones sobre cómo mantener la compatibilidad con Python 3.1 se incluyen con la documentación).</p></li>
</ul>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<dl class="simple">
<dt><span class="target" id="index-35"></span><a class="pep reference external" href="https://peps.python.org/pep-3147/"><strong>PEP 3147</strong></a> - Directorio del repositorio PYC</dt><dd><p>PEP escrito por Barry Warsaw.</p>
</dd>
</dl>
</div>
</section>
<section id="pep-3149-abi-version-tagged-so-files">
<h2>PEP 3149: Archivos .so con etiquetado de versión para ABI<a class="headerlink" href="#pep-3149-abi-version-tagged-so-files" title="Enlazar permanentemente con este título">¶</a></h2>
<p>El directorio del repositorio PYC permite la ubicación conjunta de varios archivos de cache bytecode. Este PEP implementa un mecanismo similar para los archivos de objetos compartidos dándoles un directorio común y nombres distintos para cada versión.</p>
<p>El directorio común es «pyshared» y los nombres de los archivos se diferencian identificando la implementación de Python (como CPython, PyPy, Jython, etc.), los números de versión principal y secundaria, y las banderas de compilación opcionales (como «d» para debug, «m» para pymalloc, «u» para ancho-unicode). Para un paquete arbitrario «foo», se verán estos archivos cuando se instala el paquete de distribución:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">pyshared</span><span class="o">/</span><span class="n">foo</span><span class="o">.</span><span class="n">cpython</span><span class="o">-</span><span class="mi">32</span><span class="n">m</span><span class="o">.</span><span class="n">so</span>
<span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">pyshared</span><span class="o">/</span><span class="n">foo</span><span class="o">.</span><span class="n">cpython</span><span class="o">-</span><span class="mi">33</span><span class="n">md</span><span class="o">.</span><span class="n">so</span>
</pre></div>
</div>
<p>En Python mismo, las etiquetas son accesibles desde funciones en el módulo <a class="reference internal" href="../library/sysconfig.html#module-sysconfig" title="sysconfig: Python's configuration information"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sysconfig</span></code></a>:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sysconfig</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sysconfig</span><span class="o">.</span><span class="n">get_config_var</span><span class="p">(</span><span class="s1">&#39;SOABI&#39;</span><span class="p">)</span>       <span class="c1"># find the version tag</span>
<span class="go">&#39;cpython-32mu&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sysconfig</span><span class="o">.</span><span class="n">get_config_var</span><span class="p">(</span><span class="s1">&#39;EXT_SUFFIX&#39;</span><span class="p">)</span>  <span class="c1"># find the full filename extension</span>
<span class="go">&#39;.cpython-32mu.so&#39;</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<dl class="simple">
<dt><span class="target" id="index-36"></span><a class="pep reference external" href="https://peps.python.org/pep-3149/"><strong>PEP 3149</strong></a> - PEP 3149: Archivos .so con etiquetado de versión para ABI</dt><dd><p>PEP escrito por Barry Warsaw.</p>
</dd>
</dl>
</div>
</section>
<section id="pep-3333-python-web-server-gateway-interface-v1-0-1">
<h2>PEP 3333: Interfaz de puerta de enlace del servidor web Python v1.0.1<a class="headerlink" href="#pep-3333-python-web-server-gateway-interface-v1-0-1" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Este PEP informativo aclara cómo el protocolo WSGI debe gestionar los problemas de bytes/texto. El desafío es que el manejo de cadenas de caracteres en Python 3 se maneja de manera más conveniente con el tipo <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> aunque el protocolo HTTP está orientado a bytes.</p>
<p>El PEP diferencia las llamadas <em>cadenas nativas</em> que se utilizan para los encabezados y metadatos de solicitud/respuesta (<em>request/response</em>) frente a las <em>cadenas de bytes</em> que se utilizan para los cuerpos de las solicitudes y respuestas.</p>
<p>Las <em>cadenas nativas</em> son siempre de tipo <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> pero están restringidas a puntos de código entre <em>U+0000 * hasta *U+00FF</em> que se pueden traducir a bytes usando la codificación <em>Latin-1</em>. Estas cadenas de caracteres se utilizan para las claves y valores en el diccionario de entorno y para los encabezados y estados de respuesta en la función <code class="xref py py-func docutils literal notranslate"><span class="pre">start_response()</span></code>. Deben seguir <span class="target" id="index-37"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc2616.html"><strong>RFC 2616</strong></a> con respecto a la codificación. Es decir, deben tener caracteres <em>ISO-8859-1</em> o utilizar codificación MIME <span class="target" id="index-38"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc2047.html"><strong>RFC 2047</strong></a>.</p>
<p>Para los desarrolladores que portan aplicaciones WSGI desde Python 2, estos son los puntos destacados:</p>
<ul class="simple">
<li><p>Si la aplicación ya usó cadenas para encabezados en Python 2, no es necesario ningún cambio.</p></li>
<li><p>Si, en cambio, la aplicación codificó encabezados de salida o decodificó encabezados de entrada, entonces los encabezados deberán volver a codificarse en Latin-1. Por ejemplo, un encabezado de salida codificado en utf-8 usaba <code class="docutils literal notranslate"><span class="pre">h.encode('utf-8')</span></code>, ahora se necesita convertir de bytes a cadenas nativas usando <code class="docutils literal notranslate"><span class="pre">h.encode('utf-8').decode('latin-1')</span></code>.</p></li>
<li><p>Los valores proporcionados por una aplicación o enviados mediante el método <code class="xref py py-meth docutils literal notranslate"><span class="pre">write()</span></code> deben ser cadenas de bytes. La función <code class="xref py py-func docutils literal notranslate"><span class="pre">start_response()</span></code> y el entorno deben usar cadenas nativas. Los dos no se pueden mezclar.</p></li>
</ul>
<p>Para los implementadores de servidores que escriben rutas de CGI a WSGI u otros protocolos de estilo CGI, los usuarios deben poder acceder al entorno utilizando cadenas nativas, aunque la plataforma subyacente pueda tener una convención diferente. Para cerrar esta brecha, el módulo <a class="reference internal" href="../library/wsgiref.html#module-wsgiref" title="wsgiref: WSGI Utilities and Reference Implementation."><code class="xref py py-mod docutils literal notranslate"><span class="pre">wsgiref</span></code></a> tiene una nueva función, <a class="reference internal" href="../library/wsgiref.html#wsgiref.handlers.read_environ" title="wsgiref.handlers.read_environ"><code class="xref py py-func docutils literal notranslate"><span class="pre">wsgiref.handlers.read_environ()</span></code></a> para transcodificar variables CGI de <a class="reference internal" href="../library/os.html#os.environ" title="os.environ"><code class="xref py py-attr docutils literal notranslate"><span class="pre">os.environ</span></code></a> en cadenas nativas y retornar un nuevo diccionario.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<dl class="simple">
<dt><span class="target" id="index-39"></span><a class="pep reference external" href="https://peps.python.org/pep-3333/"><strong>PEP 3333</strong></a> - Interfaz de puerta de enlace del servidor web Python v1.0.1</dt><dd><p>PEP escrito por Phillip Eby.</p>
</dd>
</dl>
</div>
</section>
<section id="other-language-changes">
<h2>Otros cambios de lenguaje<a class="headerlink" href="#other-language-changes" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Algunos cambios más pequeños realizados en el lenguaje central de Python son:</p>
<ul>
<li><p>El formato de cadena de caracteres para <a class="reference internal" href="../library/functions.html#format" title="format"><code class="xref py py-func docutils literal notranslate"><span class="pre">format()</span></code></a> y <a class="reference internal" href="../library/stdtypes.html#str.format" title="str.format"><code class="xref py py-meth docutils literal notranslate"><span class="pre">str.format()</span></code></a> obtuvo nuevas capacidades para el carácter de formato <strong>#</strong>. Anteriormente, para enteros en binario, octal o hexadecimal, hacía que la salida tuviera el prefijo “0b”, “0o” o “0x” respectivamente. Ahora también puede manejar flotantes, complejos y decimales, lo que hace que la salida siempre tenga un punto decimal, incluso cuando no le siguen dígitos.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">format</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="s1">&#39;#o&#39;</span><span class="p">)</span>
<span class="go">&#39;0o24&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">format</span><span class="p">(</span><span class="mf">12.34</span><span class="p">,</span> <span class="s1">&#39;#5.0f&#39;</span><span class="p">)</span>
<span class="go">&#39;  12.&#39;</span>
</pre></div>
</div>
<p>(Sugerido por Mark Dickinson e implementado por Eric Smith en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7094">bpo-7094</a>.)</p>
</li>
<li><p>También hay un nuevo método <a class="reference internal" href="../library/stdtypes.html#str.format_map" title="str.format_map"><code class="xref py py-meth docutils literal notranslate"><span class="pre">str.format_map()</span></code></a> que amplía las capacidades del método existente <a class="reference internal" href="../library/stdtypes.html#str.format" title="str.format"><code class="xref py py-meth docutils literal notranslate"><span class="pre">str.format()</span></code></a> al aceptar objetos arbitrarios <a class="reference internal" href="../glossary.html#term-mapping"><span class="xref std std-term">mapping</span></a>. Este nuevo método hace posible usar formato de cadena de caracteres con cualquiera de los muchos objetos similares a diccionarios de Python, como <a class="reference internal" href="../library/collections.html#collections.defaultdict" title="collections.defaultdict"><code class="xref py py-class docutils literal notranslate"><span class="pre">defaultdict</span></code></a>, <a class="reference internal" href="../library/shelve.html#shelve.Shelf" title="shelve.Shelf"><code class="xref py py-class docutils literal notranslate"><span class="pre">Shelf</span></code></a>, <a class="reference internal" href="../library/configparser.html#configparser.ConfigParser" title="configparser.ConfigParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigParser</span></code></a>, o <a class="reference internal" href="../library/dbm.html#module-dbm" title="dbm: Interfaces to various Unix &quot;database&quot; formats."><code class="xref py py-mod docutils literal notranslate"><span class="pre">dbm</span></code></a>. También es útil con subclases personalizadas <a class="reference internal" href="../library/stdtypes.html#dict" title="dict"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> que normalizan claves antes de la búsqueda o que proporcionan un método <code class="xref py py-meth docutils literal notranslate"><span class="pre">__missing__()</span></code> para claves desconocidas:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">shelve</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">shelve</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;tmp.shl&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;The </span><span class="si">{project_name}</span><span class="s1"> status is </span><span class="si">{status}</span><span class="s1"> as of </span><span class="si">{date}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format_map</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="go">&#39;The testing project status is green as of February 15, 2011&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">LowerCasedDict</span><span class="p">(</span><span class="nb">dict</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="nb">dict</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lcd</span> <span class="o">=</span> <span class="n">LowerCasedDict</span><span class="p">(</span><span class="n">part</span><span class="o">=</span><span class="s1">&#39;widgets&#39;</span><span class="p">,</span> <span class="n">quantity</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;There are </span><span class="si">{QUANTITY}</span><span class="s1"> </span><span class="si">{Part}</span><span class="s1"> in stock&#39;</span><span class="o">.</span><span class="n">format_map</span><span class="p">(</span><span class="n">lcd</span><span class="p">)</span>
<span class="go">&#39;There are 10 widgets in stock&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">PlaceholderDict</span><span class="p">(</span><span class="nb">dict</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__missing__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="s1">&#39;&lt;</span><span class="si">{}</span><span class="s1">&gt;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;Hello </span><span class="si">{name}</span><span class="s1">, welcome to </span><span class="si">{location}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format_map</span><span class="p">(</span><span class="n">PlaceholderDict</span><span class="p">())</span>
<span class="go">&#39;Hello &lt;name&gt;, welcome to &lt;location&gt;&#39;</span>
</pre></div>
</div>
</li>
</ul>
<blockquote>
<div><p>(Sugerido por Raymond Hettinger e implementado por Eric Smith en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=6081">bpo-6081</a>.)</p>
</div></blockquote>
<ul>
<li><p>El intérprete ahora puede iniciarse con una opción silenciosa, <code class="docutils literal notranslate"><span class="pre">-q</span></code>, para evitar que la información de copyright y versión se muestre en el modo interactivo. La opción se puede introspectar usando el atributo <a class="reference internal" href="../library/sys.html#sys.flags" title="sys.flags"><code class="xref py py-attr docutils literal notranslate"><span class="pre">sys.flags</span></code></a>:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python -q
<span class="go">&gt;&gt;&gt; sys.flags</span>
<span class="go">sys.flags(debug=0, division_warning=0, inspect=0, interactive=0,</span>
<span class="go">optimize=0, dont_write_bytecode=0, no_user_site=0, no_site=0,</span>
<span class="go">ignore_environment=0, verbose=0, bytes_warning=0, quiet=1)</span>
</pre></div>
</div>
<p>(Contribución de Marcin Wojdyr en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1772833">bpo-1772833</a>).</p>
</li>
<li><p>La función <a class="reference internal" href="../library/functions.html#hasattr" title="hasattr"><code class="xref py py-func docutils literal notranslate"><span class="pre">hasattr()</span></code></a> funciona llamando a <a class="reference internal" href="../library/functions.html#getattr" title="getattr"><code class="xref py py-func docutils literal notranslate"><span class="pre">getattr()</span></code></a> y detectando si se lanza una excepción. Esta técnica le permite detectar métodos creados dinámicamente por <code class="xref py py-meth docutils literal notranslate"><span class="pre">__getattr__()</span></code> o <code class="xref py py-meth docutils literal notranslate"><span class="pre">__getattribute__()</span></code> que de otra manera estarían ausentes en el diccionario de la clase. Anteriormente, <em>hasattr</em> detectaba cualquier excepción, posiblemente enmascarando errores genuinos. Ahora, <em>hasattr</em> se ha ajustado para capturar solo <a class="reference internal" href="../library/exceptions.html#AttributeError" title="AttributeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">AttributeError</span></code></a> y dejar que otras excepciones pasen:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
<span class="gp">... </span>    <span class="nd">@property</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="mi">1</span> <span class="o">//</span> <span class="mi">0</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">hasattr</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  <span class="c">...</span>
<span class="gr">ZeroDivisionError</span>: <span class="n">integer division or modulo by zero</span>
</pre></div>
</div>
<p>(Descubierto por Yury Selivanov y arreglado por Benjamin Peterson; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=9666">bpo-9666</a>.)</p>
</li>
<li><p>La <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-func docutils literal notranslate"><span class="pre">str()</span></code></a> de un número flotante o complejo ahora es el mismo que su <a class="reference internal" href="../library/functions.html#repr" title="repr"><code class="xref py py-func docutils literal notranslate"><span class="pre">repr()</span></code></a>. Anteriormente, el formulario <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-func docutils literal notranslate"><span class="pre">str()</span></code></a> era más corto, pero eso solo causaba confusión y ya no es necesario ahora que el más corto posible <a class="reference internal" href="../library/functions.html#repr" title="repr"><code class="xref py py-func docutils literal notranslate"><span class="pre">repr()</span></code></a> se muestra por defecto:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">math</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">repr</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
<span class="go">&#39;3.141592653589793&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
<span class="go">&#39;3.141592653589793&#39;</span>
</pre></div>
</div>
<p>(Propuesto e implementado por Mark Dickinson; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=9337">bpo-9337</a>.)</p>
</li>
<li><p>Los objetos <a class="reference internal" href="../library/stdtypes.html#memoryview" title="memoryview"><code class="xref py py-class docutils literal notranslate"><span class="pre">memoryview</span></code></a> ahora tienen un método <a class="reference internal" href="../library/stdtypes.html#memoryview.release" title="memoryview.release"><code class="xref py py-meth docutils literal notranslate"><span class="pre">release()</span></code></a> y ahora también admiten el protocolo de gestión de contexto. Esto permite la liberación oportuna de los recursos adquiridos al solicitar un búfer del objeto original.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="nb">memoryview</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;abcdefgh&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">v</span><span class="p">:</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
<span class="go">[97, 98, 99, 100, 101, 102, 103, 104]</span>
</pre></div>
</div>
<p>(Añadido por Antoine Pitrou; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=9757">bpo-9757</a>.)</p>
</li>
<li><p>Anteriormente, era ilegal eliminar un nombre del espacio de nombres local si aparece como una variable libre en un bloque anidado:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">outer</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">inner</span><span class="p">():</span>
        <span class="k">return</span> <span class="n">x</span>
    <span class="n">inner</span><span class="p">()</span>
    <span class="k">del</span> <span class="n">x</span>
</pre></div>
</div>
<p>Esto ahora está permitido. Recuerde que el objetivo de una cláusula <a class="reference internal" href="../reference/compound_stmts.html#except"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">except</span></code></a> se borra, por lo que este código que solía funcionar con Python 2.6, lanza un <a class="reference internal" href="../library/exceptions.html#SyntaxError" title="SyntaxError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SyntaxError</span></code></a> con Python 3.1 y ahora funciona nuevamente:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
    <span class="k">def</span> <span class="nf">print_error</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">something</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">print_error</span><span class="p">()</span>
        <span class="c1"># implicit &quot;del e&quot; here</span>
</pre></div>
</div>
<p>(Ver <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=4617">bpo-4617</a>.)</p>
</li>
<li><p>La herramienta interna <code class="xref c c-type docutils literal notranslate"><span class="pre">structsequence</span></code> ahora crea subclases de tupla. Esto significa que las estructuras C como las retornadas por <a class="reference internal" href="../library/os.html#os.stat" title="os.stat"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.stat()</span></code></a>, <a class="reference internal" href="../library/time.html#time.gmtime" title="time.gmtime"><code class="xref py py-func docutils literal notranslate"><span class="pre">time.gmtime()</span></code></a>, y <a class="reference internal" href="../library/sys.html#sys.version_info" title="sys.version_info"><code class="xref py py-attr docutils literal notranslate"><span class="pre">sys.version_info</span></code></a> ahora funcionan como <a class="reference internal" href="../glossary.html#term-named-tuple"><span class="xref std std-term">named tuple</span></a> y ahora trabaja con funciones y métodos que esperan una tupla como argumento. Este es un gran paso adelante para hacer que las estructuras de C sean tan flexibles como sus contrapartes de Python puro:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sys</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;Version </span><span class="si">%d</span><span class="s1">.</span><span class="si">%d</span><span class="s1">.</span><span class="si">%d</span><span class="s1"> </span><span class="si">%s</span><span class="s1">(</span><span class="si">%d</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span> 
<span class="go">&#39;Version 3.2.0 final(0)&#39;</span>
</pre></div>
</div>
<p>(Sugerido por Arfrever Frehtes Taifersar Arahesis e implementado por Benjamin Peterson en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8413">bpo-8413</a>.)</p>
</li>
<li><p>Las <em>Warnings</em> ahora son más fáciles de controlar usando la variable de entorno <span class="target" id="index-40"></span><a class="reference internal" href="../using/cmdline.html#envvar-PYTHONWARNINGS"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONWARNINGS</span></code></a> como alternativa al uso de <code class="docutils literal notranslate"><span class="pre">-W</span></code> en la línea de comando:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">export</span> <span class="nv">PYTHONWARNINGS</span><span class="o">=</span><span class="s1">&#39;ignore::RuntimeWarning::,once::UnicodeWarning::&#39;</span>
</pre></div>
</div>
<p>(Sugerido por Barry Warsaw e implementado por Philip Jenvey en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7301">bpo-7301</a>.)</p>
</li>
<li><p>Se ha agregado una nueva categoría de advertencia, <a class="reference internal" href="../library/exceptions.html#ResourceWarning" title="ResourceWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ResourceWarning</span></code></a>. Se emite cuando se detectan problemas potenciales con el consumo de recursos o la limpieza. Está silenciado de forma predeterminada en las versiones de lanzamiento normales, pero se puede habilitar a través de los medios proporcionados por el módulo <a class="reference internal" href="../library/warnings.html#module-warnings" title="warnings: Issue warning messages and control their disposition."><code class="xref py py-mod docutils literal notranslate"><span class="pre">warnings</span></code></a> o en la línea de comandos.</p>
<p>Un <a class="reference internal" href="../library/exceptions.html#ResourceWarning" title="ResourceWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ResourceWarning</span></code></a> se emite en el cierre del intérprete si la lista <a class="reference internal" href="../library/gc.html#gc.garbage" title="gc.garbage"><code class="xref py py-data docutils literal notranslate"><span class="pre">gc.garbage</span></code></a> no está vacía, y si <a class="reference internal" href="../library/gc.html#gc.DEBUG_UNCOLLECTABLE" title="gc.DEBUG_UNCOLLECTABLE"><code class="xref py py-attr docutils literal notranslate"><span class="pre">gc.DEBUG_UNCOLLECTABLE</span></code></a> está configurado, se imprimen todos los objetos no recolectados. Esto tiene como objetivo informar al programador de que su código contiene problemas de finalización de objetos.</p>
<p>Un <a class="reference internal" href="../library/exceptions.html#ResourceWarning" title="ResourceWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ResourceWarning</span></code></a> también se emite cuando un <a class="reference internal" href="../glossary.html#term-file-object"><span class="xref std std-term">file object</span></a> se destruye sin haber sido cerrado explícitamente. Si bien el desasignador de dicho objeto asegura que cierra el recurso del sistema operativo subyacente (generalmente, un descriptor de archivo), la demora en desasignar el objeto podría producir varios problemas, especialmente en Windows. A continuación, se muestra un ejemplo de cómo habilitar la advertencia desde la línea de comando:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python -q -Wdefault
<span class="go">&gt;&gt;&gt; f = open(&quot;foo&quot;, &quot;wb&quot;)</span>
<span class="go">&gt;&gt;&gt; del f</span>
<span class="go">__main__:1: ResourceWarning: unclosed file &lt;_io.BufferedWriter name=&#39;foo&#39;&gt;</span>
</pre></div>
</div>
<p>(Agregado por Antoine Pitrou y Georg Brandl en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=10093">bpo-10093</a> y <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=477863">bpo-477863</a>.)</p>
</li>
<li><p>Los objetos <a class="reference internal" href="../library/stdtypes.html#range" title="range"><code class="xref py py-class docutils literal notranslate"><span class="pre">range</span></code></a> ahora admiten los métodos <em>index</em> y <em>count</em>. Esto es parte de un esfuerzo para hacer que más objetos implementen completamente la <a class="reference internal" href="../glossary.html#term-abstract-base-class"><span class="xref std std-term">abstract base class</span></a> <code class="xref py py-class docutils literal notranslate"><span class="pre">collections.Sequence</span></code>. Como resultado, el lenguaje tendrá una API más uniforme. Además, los objetos <a class="reference internal" href="../library/stdtypes.html#range" title="range"><code class="xref py py-class docutils literal notranslate"><span class="pre">range</span></code></a> ahora admiten índices negativos y de corte, incluso con valores mayores que <a class="reference internal" href="../library/sys.html#sys.maxsize" title="sys.maxsize"><code class="xref py py-attr docutils literal notranslate"><span class="pre">sys.maxsize</span></code></a>. Esto hace que <em>range</em> sea más interoperable con listas:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="go">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">2</span><span class="p">)[</span><span class="mi">5</span><span class="p">]</span>
<span class="go">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">2</span><span class="p">)[</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>
<span class="go">range(0, 10, 2)</span>
</pre></div>
</div>
<p>(Contribuido por Daniel Stutzbach en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=9213">bpo-9213</a>, por Alexander Belopolsky en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=2690">bpo-2690</a>, y por Nick Coghlan en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=10889">bpo-10889</a>.)</p>
</li>
<li><p>Se resucitó la función incorporada <a class="reference internal" href="../library/functions.html#callable" title="callable"><code class="xref py py-func docutils literal notranslate"><span class="pre">callable()</span></code></a> de Py2.x. Proporciona una alternativa concisa y legible al uso de una <a class="reference internal" href="../glossary.html#term-abstract-base-class"><span class="xref std std-term">abstract base class</span></a> en una expresión como <code class="docutils literal notranslate"><span class="pre">isinstance(x,</span> <span class="pre">collections.Callable)</span></code>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">callable</span><span class="p">(</span><span class="nb">max</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">callable</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
<p>(Ver <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=10518">bpo-10518</a>.)</p>
</li>
<li><p>El mecanismo de importación de Python ahora puede cargar módulos instalados en directorios con caracteres no ASCII en el nombre de la ruta. Esto resolvió un problema agravante con los directorios de inicio para los usuarios con caracteres no ASCII en sus nombres de usuario.</p></li>
</ul>
<blockquote>
<div><p>(Trabajo extenso requerido por Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=9425">bpo-9425</a>.)</p>
</div></blockquote>
</section>
<section id="new-improved-and-deprecated-modules">
<h2>Módulos nuevos, mejorados y obsoletos<a class="headerlink" href="#new-improved-and-deprecated-modules" title="Enlazar permanentemente con este título">¶</a></h2>
<p>La biblioteca estándar de Python ha sido objeto de importantes esfuerzos de mantenimiento y mejoras de calidad.</p>
<p>La mayor novedad para Python 3.2 es que el paquete <a class="reference internal" href="../library/email.html#module-email" title="email: Package supporting the parsing, manipulating, and generating email messages."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email</span></code></a>, el módulo <a class="reference internal" href="../library/mailbox.html#module-mailbox" title="mailbox: Manipulate mailboxes in various formats"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mailbox</span></code></a> y los módulos <a class="reference internal" href="../library/nntplib.html#module-nntplib" title="nntplib: NNTP protocol client (requires sockets). (obsoleto)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">nntplib</span></code></a> ahora funcionan correctamente con el modelo de bytes/texto en Python 3. Por primera vez , existe un manejo correcto de mensajes con codificaciones mixtas.</p>
<p>En toda la biblioteca estándar, se ha prestado más atención a las codificaciones y los problemas de texto frente a bytes. En particular, las interacciones con el sistema operativo ahora son más capaces de intercambiar datos que no son ASCII mediante la codificación MBCS de Windows, codificaciones con reconocimiento de configuración regional o UTF-8.</p>
<p>Otro logro importante es la adición de un soporte sustancialmente mejor para conexiones <em>SSL</em> y certificados de seguridad.</p>
<p>Además, más clases ahora implementan <a class="reference internal" href="../glossary.html#term-context-manager"><span class="xref std std-term">context manager</span></a> para soportar una conveniente y confiable limpieza de recursos usando una declaración <a class="reference internal" href="../reference/compound_stmts.html#with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a>.</p>
<section id="email">
<h3>email<a class="headerlink" href="#email" title="Enlazar permanentemente con este título">¶</a></h3>
<p>La usabilidad del paquete <a class="reference internal" href="../library/email.html#module-email" title="email: Package supporting the parsing, manipulating, and generating email messages."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email</span></code></a> en Python 3 se ha solucionado principalmente gracias a los amplios esfuerzos de R. David Murray. El problema era que los correos electrónicos generalmente se leen y almacenan en forma de <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> en lugar de texto <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, y pueden contener múltiples codificaciones dentro de un solo correo electrónico. Por lo tanto, el paquete email tuvo que ampliarse para analizar y generar mensajes de correo electrónico en formato de bytes.</p>
<ul>
<li><p>Nuevas funciones <a class="reference internal" href="../library/email.parser.html#email.message_from_bytes" title="email.message_from_bytes"><code class="xref py py-func docutils literal notranslate"><span class="pre">message_from_bytes()</span></code></a> y <a class="reference internal" href="../library/email.parser.html#email.message_from_binary_file" title="email.message_from_binary_file"><code class="xref py py-func docutils literal notranslate"><span class="pre">message_from_binary_file()</span></code></a>, y nuevas clases <a class="reference internal" href="../library/email.parser.html#email.parser.BytesFeedParser" title="email.parser.BytesFeedParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">BytesFeedParser</span></code></a> y <a class="reference internal" href="../library/email.parser.html#email.parser.BytesParser" title="email.parser.BytesParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">BytesParser</span></code></a> permiten mensajes de datos en binario para ser analizados (<em>parsed</em>) en objetos modelados.</p></li>
<li><p>Dada la entrada de bytes al modelo, <a class="reference internal" href="../library/email.compat32-message.html#email.message.Message.get_payload" title="email.message.Message.get_payload"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_payload()</span></code></a> decodificará por defecto un cuerpo de mensaje que tiene un <em class="mailheader">Content-Transfer-Encoding</em> de <em>8bit</em> usando el juego de caracteres especificado en el encabezados MIME y retorna la cadena de caracteres resultante.</p></li>
<li><p>Dada la entrada de bytes al modelo, <a class="reference internal" href="../library/email.generator.html#email.generator.Generator" title="email.generator.Generator"><code class="xref py py-class docutils literal notranslate"><span class="pre">Generator</span></code></a> convertirá los cuerpos de los mensajes que tengan un <em class="mailheader">Content-Transfer-Encoding</em> de <em>8bit</em> para tener en su lugar un <em>7bit</em><em class="mailheader">Content-Transfer-Encoding</em>.</p>
<p>Los encabezados con bytes no codificados que no sean ASCII se consideran <span class="target" id="index-41"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc2047.html"><strong>RFC 2047</strong></a>-codificados utilizando el juego de caracteres <em>unknown-8bit</em>.</p>
</li>
<li><p>Una nueva clase <a class="reference internal" href="../library/email.generator.html#email.generator.BytesGenerator" title="email.generator.BytesGenerator"><code class="xref py py-class docutils literal notranslate"><span class="pre">BytesGenerator</span></code></a> produce bytes como salida, conservando cualquier dato no ASCII sin cambios que estuviera presente en la entrada utilizada para construir el modelo, incluidos los cuerpos de los mensajes con un <em class="mailheader">Content-Transfer-Encoding</em> de <em>8bit</em>.</p></li>
<li><p>La clase <a class="reference internal" href="../library/smtplib.html#module-smtplib" title="smtplib: SMTP protocol client (requires sockets)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">smtplib</span></code></a><a class="reference internal" href="../library/smtplib.html#smtplib.SMTP" title="smtplib.SMTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">SMTP</span></code></a> ahora acepta una cadena de bytes para el argumento <em>msg</em> para el método <a class="reference internal" href="../library/smtplib.html#smtplib.SMTP.sendmail" title="smtplib.SMTP.sendmail"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sendmail()</span></code></a>, y un nuevo método, <a class="reference internal" href="../library/smtplib.html#smtplib.SMTP.send_message" title="smtplib.SMTP.send_message"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send_message()</span></code></a> acepta un objeto <a class="reference internal" href="../library/email.compat32-message.html#email.message.Message" title="email.message.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a> y opcionalmente puede obtener las direcciones <em>from_addr</em> y <em>to_addrs</em> directamente del objeto.</p></li>
</ul>
<p>(Propuesto e implementado por R. David Murray, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=4661">bpo-4661</a> y <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=10321">bpo-10321</a>.)</p>
</section>
<section id="elementtree">
<h3>elementtree<a class="headerlink" href="#elementtree" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El paquete <a class="reference internal" href="../library/xml.etree.elementtree.html#module-xml.etree.ElementTree" title="xml.etree.ElementTree: Implementation of the ElementTree API."><code class="xref py py-mod docutils literal notranslate"><span class="pre">xml.etree.ElementTree</span></code></a> y su contraparte <code class="xref py py-mod docutils literal notranslate"><span class="pre">xml.etree.cElementTree</span></code> se han actualizado a la versión 1.3.</p>
<p>Se han agregado varias nuevas y útiles funciones y métodos:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../library/xml.etree.elementtree.html#xml.etree.ElementTree.fromstringlist" title="xml.etree.ElementTree.fromstringlist"><code class="xref py py-func docutils literal notranslate"><span class="pre">xml.etree.ElementTree.fromstringlist()</span></code></a> que crea un documento XML a partir de una secuencia de fragmentos</p></li>
<li><p><a class="reference internal" href="../library/xml.etree.elementtree.html#xml.etree.ElementTree.register_namespace" title="xml.etree.ElementTree.register_namespace"><code class="xref py py-func docutils literal notranslate"><span class="pre">xml.etree.ElementTree.register_namespace()</span></code></a> para registrar un prefijo de espacio de nombres global</p></li>
<li><p><a class="reference internal" href="../library/xml.etree.elementtree.html#xml.etree.ElementTree.tostringlist" title="xml.etree.ElementTree.tostringlist"><code class="xref py py-func docutils literal notranslate"><span class="pre">xml.etree.ElementTree.tostringlist()</span></code></a> para la representación de cadenas de caracteres, incluidas todas las sublistas</p></li>
<li><p><a class="reference internal" href="../library/xml.etree.elementtree.html#xml.etree.ElementTree.Element.extend" title="xml.etree.ElementTree.Element.extend"><code class="xref py py-meth docutils literal notranslate"><span class="pre">xml.etree.ElementTree.Element.extend()</span></code></a> para agregar una secuencia de cero o más elementos</p></li>
<li><p><a class="reference internal" href="../library/xml.etree.elementtree.html#xml.etree.ElementTree.Element.iterfind" title="xml.etree.ElementTree.Element.iterfind"><code class="xref py py-meth docutils literal notranslate"><span class="pre">xml.etree.ElementTree.Element.iterfind()</span></code></a> busca un elemento y subelementos</p></li>
<li><p><a class="reference internal" href="../library/xml.etree.elementtree.html#xml.etree.ElementTree.Element.itertext" title="xml.etree.ElementTree.Element.itertext"><code class="xref py py-meth docutils literal notranslate"><span class="pre">xml.etree.ElementTree.Element.itertext()</span></code></a> crea un iterador de texto sobre un elemento y sus subelementos</p></li>
<li><p><a class="reference internal" href="../library/xml.etree.elementtree.html#xml.etree.ElementTree.TreeBuilder.end" title="xml.etree.ElementTree.TreeBuilder.end"><code class="xref py py-meth docutils literal notranslate"><span class="pre">xml.etree.ElementTree.TreeBuilder.end()</span></code></a> cierra el elemento actual</p></li>
<li><p><a class="reference internal" href="../library/xml.etree.elementtree.html#xml.etree.ElementTree.TreeBuilder.doctype" title="xml.etree.ElementTree.TreeBuilder.doctype"><code class="xref py py-meth docutils literal notranslate"><span class="pre">xml.etree.ElementTree.TreeBuilder.doctype()</span></code></a> gestiona la declaración <em>doctype</em></p></li>
</ul>
<p>Dos métodos que han sido deprecados:</p>
<ul class="simple">
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">xml.etree.ElementTree.getchildren()</span></code> usar <code class="docutils literal notranslate"><span class="pre">list(elem)</span></code> en su lugar.</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">xml.etree.ElementTree.getiterator()</span></code> usar <code class="docutils literal notranslate"><span class="pre">Element.iter</span></code> en su lugar.</p></li>
</ul>
<p>Para obtener más información sobre la actualización, consulte <a class="reference external" href="https://web.archive.org/web/20200703234532/http://effbot.org/zone/elementtree-13-intro.htm">Introducing ElementTree</a> en el sitio web de Fredrik Lundh.</p>
<p>(Contribución de Florent Xicluna y Fredrik Lundh, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=6472">bpo-6472</a>.)</p>
</section>
<section id="functools">
<h3>functools<a class="headerlink" href="#functools" title="Enlazar permanentemente con este título">¶</a></h3>
<ul>
<li><p>El módulo <a class="reference internal" href="../library/functools.html#module-functools" title="functools: Higher-order functions and operations on callable objects."><code class="xref py py-mod docutils literal notranslate"><span class="pre">functools</span></code></a> incluye un nuevo decorador para almacenar en caché las llamadas a funciones. <a class="reference internal" href="../library/functools.html#functools.lru_cache" title="functools.lru_cache"><code class="xref py py-func docutils literal notranslate"><span class="pre">functools.lru_cache()</span></code></a> puede guardar consultas repetidas en un recurso externo siempre que se espere que los resultados sean los mismos.</p>
<p>Por ejemplo, agregar un decorador de almacenamiento en caché a una función de consulta de base de datos puede ahorrar accesos a la base de datos para búsquedas populares:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">functools</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@functools</span><span class="o">.</span><span class="n">lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">get_phone_number</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">c</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="gp">... </span>    <span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT phonenumber FROM phonelist WHERE name=?&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">name</span><span class="p">,))</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">c</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">user_requests</span><span class="p">:</span>        
<span class="gp">... </span>    <span class="n">get_phone_number</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>        <span class="c1"># cached lookup</span>
</pre></div>
</div>
<p>Para ayudar a elegir un tamaño de caché efectivo, la función encapsulada está instrumentada para rastrear estadísticas de caché:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get_phone_number</span><span class="o">.</span><span class="n">cache_info</span><span class="p">()</span>     
<span class="go">CacheInfo(hits=4805, misses=980, maxsize=300, currsize=300)</span>
</pre></div>
</div>
<p>Si la tabla <em>phonelist</em> se actualiza, el contenido desactualizado de la caché se puede borrar con:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get_phone_number</span><span class="o">.</span><span class="n">cache_clear</span><span class="p">()</span>
</pre></div>
</div>
<p>(Contribución de Raymond Hettinger e incorporando ideas de diseño de Jim Baker, Miki Tebeka, y Nick Coghlan; ver <a class="reference external" href="https://code.activestate.com/recipes/498245">recipe 498245</a>, <a class="reference external" href="https://code.activestate.com/recipes/577479">recipe 577479</a>, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=10586">bpo-10586</a>, y <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=10593">bpo-10593</a>.)</p>
</li>
<li><p>El decorador <a class="reference internal" href="../library/functools.html#functools.wraps" title="functools.wraps"><code class="xref py py-func docutils literal notranslate"><span class="pre">functools.wraps()</span></code></a> ahora agrega un atributo <code class="xref py py-attr docutils literal notranslate"><span class="pre">__wrapped__</span></code> que apunta a la función invocable original. Esto permite la introspección de funciones envueltas (<em>wrapped</em>). También copia <code class="xref py py-attr docutils literal notranslate"><span class="pre">__annotations__</span></code> si está definido. Y ahora también omite elegantemente los atributos faltantes como <code class="xref py py-attr docutils literal notranslate"><span class="pre">__doc__</span></code> que podrían no estar definidos para el invocable envuelto.</p>
<p>En el ejemplo anterior, la caché se puede eliminar recuperando la función original:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get_phone_number</span> <span class="o">=</span> <span class="n">get_phone_number</span><span class="o">.</span><span class="n">__wrapped__</span>    <span class="c1"># uncached function</span>
</pre></div>
</div>
<p>(Por Nick Coghlan y Terrence Cole; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=9567">bpo-9567</a>, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=3445">bpo-3445</a>, y <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8814">bpo-8814</a>.)</p>
</li>
<li><p>Para ayudar a escribir clases con métodos de comparación enriquecidos, un nuevo decorador <a class="reference internal" href="../library/functools.html#functools.total_ordering" title="functools.total_ordering"><code class="xref py py-func docutils literal notranslate"><span class="pre">functools.total_ordering()</span></code></a> usará métodos de igualdad y desigualdad existentes para completar los métodos restantes.</p>
<p>Por ejemplo, suministrar <em>__eq__</em> y <em>__lt__</em> permitirá que <a class="reference internal" href="../library/functools.html#functools.total_ordering" title="functools.total_ordering"><code class="xref py py-func docutils literal notranslate"><span class="pre">total_ordering()</span></code></a> complete <em>__le__</em>, <em>__gt__</em> and <em>__ge__</em>:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="nd">@total_ordering</span>
<span class="k">class</span> <span class="nc">Student</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">lastname</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">firstname</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span> <span class="o">==</span>
                <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">lastname</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span> <span class="n">other</span><span class="o">.</span><span class="n">firstname</span><span class="o">.</span><span class="n">lower</span><span class="p">()))</span>

    <span class="k">def</span> <span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">lastname</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">firstname</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span> <span class="o">&lt;</span>
                <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">lastname</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span> <span class="n">other</span><span class="o">.</span><span class="n">firstname</span><span class="o">.</span><span class="n">lower</span><span class="p">()))</span>
</pre></div>
</div>
<p>Con el decorador <em>total_ordering</em>, los métodos de comparación restantes se completan automáticamente.</p>
<p>(Contribución por Raymond Hettinger.)</p>
</li>
<li><p>Para ayudar en la migración de programas desde Python 2, la función <a class="reference internal" href="../library/functools.html#functools.cmp_to_key" title="functools.cmp_to_key"><code class="xref py py-func docutils literal notranslate"><span class="pre">functools.cmp_to_key()</span></code></a> convierte una función de comparación de estilo antiguo en la nueva <a class="reference internal" href="../glossary.html#term-key-function"><span class="xref std std-term">key function</span></a>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># locale-aware sort order</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">iterable</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">cmp_to_key</span><span class="p">(</span><span class="n">locale</span><span class="o">.</span><span class="n">strcoll</span><span class="p">))</span> 
</pre></div>
</div>
<p>Para obtener ejemplos de ordenación y un breve tutorial, consulte el tutorial <a class="reference external" href="https://wiki.python.org/moin/HowTo/Sorting/">Sorting HowTo</a>.</p>
<p>(Contribución por Raymond Hettinger.)</p>
</li>
</ul>
</section>
<section id="itertools">
<h3>itertools<a class="headerlink" href="#itertools" title="Enlazar permanentemente con este título">¶</a></h3>
<ul>
<li><p>El módulo <a class="reference internal" href="../library/itertools.html#module-itertools" title="itertools: Functions creating iterators for efficient looping."><code class="xref py py-mod docutils literal notranslate"><span class="pre">itertools</span></code></a> tiene una nueva función <a class="reference internal" href="../library/itertools.html#itertools.accumulate" title="itertools.accumulate"><code class="xref py py-func docutils literal notranslate"><span class="pre">accumulate()</span></code></a> modelada en el operador <em>scan</em> de APL y la función <em>accumulate</em> de Numpy:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">accumulate</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">accumulate</span><span class="p">([</span><span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">50</span><span class="p">]))</span>
<span class="go">[8, 10, 60]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">prob_dist</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">accumulate</span><span class="p">(</span><span class="n">prob_dist</span><span class="p">))</span>      <span class="c1"># cumulative probability distribution</span>
<span class="go">[0.1, 0.5, 0.7, 1.0]</span>
</pre></div>
</div>
<p>Para un ejemplo usando <a class="reference internal" href="../library/itertools.html#itertools.accumulate" title="itertools.accumulate"><code class="xref py py-func docutils literal notranslate"><span class="pre">accumulate()</span></code></a>, vea los <a class="reference internal" href="../library/random.html#random-examples"><span class="std std-ref">ejemplos para el módulo aleatorio</span></a>.</p>
<p>(Contribución de Raymond Hettinger e incorporando sugerencias de diseño de Mark Dickinson.)</p>
</li>
</ul>
</section>
<section id="collections">
<h3>collections<a class="headerlink" href="#collections" title="Enlazar permanentemente con este título">¶</a></h3>
<ul>
<li><p>La clase <a class="reference internal" href="../library/collections.html#collections.Counter" title="collections.Counter"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.Counter</span></code></a> ahora tiene dos formas de resta in situ, el operador existente <em>-=</em> para <a class="reference external" href="https://es.wikipedia.org/wiki/Aritm%C3%A9tica_de_saturaci%C3%B3n">saturación de resta</a> y el nuevo método <a class="reference internal" href="../library/collections.html#collections.Counter.subtract" title="collections.Counter.subtract"><code class="xref py py-meth docutils literal notranslate"><span class="pre">subtract()</span></code></a> para la resta regular. El primero es adecuado para <a class="reference external" href="https://es.wikipedia.org/wiki/Multiconjunto">muticonjunto</a> que solo tienen recuentos positivos, y el último es más adecuado para casos de uso que permiten recuentos negativos:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tally</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">dogs</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">cats</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tally</span> <span class="o">-=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">dogs</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">cats</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>    <span class="c1"># saturating subtraction</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tally</span>
<span class="go">Counter({&#39;dogs&#39;: 3})</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tally</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">dogs</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">cats</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tally</span><span class="o">.</span><span class="n">subtract</span><span class="p">(</span><span class="n">dogs</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">cats</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>      <span class="c1"># regular subtraction</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tally</span>
<span class="go">Counter({&#39;dogs&#39;: 3, &#39;cats&#39;: -5})</span>
</pre></div>
</div>
<p>(Contribución por Raymond Hettinger.)</p>
</li>
<li><p>La clase <a class="reference internal" href="../library/collections.html#collections.OrderedDict" title="collections.OrderedDict"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.OrderedDict</span></code></a> tiene un nuevo método <a class="reference internal" href="../library/collections.html#collections.OrderedDict.move_to_end" title="collections.OrderedDict.move_to_end"><code class="xref py py-meth docutils literal notranslate"><span class="pre">move_to_end()</span></code></a> que toma una clave existente y mueve a la primera o última posición de la secuencia ordenada.</p>
<p>El valor predeterminado es mover un elemento a la última posición. Esto es equivalente a renovar una entrada con <code class="docutils literal notranslate"><span class="pre">od[k]</span> <span class="pre">=</span> <span class="pre">od.pop(k)</span></code>.</p>
<p>Una operación de mover al final rápida es útil para volver a secuenciar entradas. Por ejemplo, se puede usar un diccionario ordenado para rastrear el orden de acceso a las entradas por antigüedad desde la más antigua hasta la más reciente.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;X&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="go">[&#39;a&#39;, &#39;b&#39;, &#39;X&#39;, &#39;d&#39;, &#39;e&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">move_to_end</span><span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="go">[&#39;a&#39;, &#39;b&#39;, &#39;d&#39;, &#39;e&#39;, &#39;X&#39;]</span>
</pre></div>
</div>
<p>(Contribución por Raymond Hettinger.)</p>
</li>
<li><p>La clase <a class="reference internal" href="../library/collections.html#collections.deque" title="collections.deque"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.deque</span></code></a> desarrolló dos métodos nuevos <a class="reference internal" href="../library/collections.html#collections.deque.count" title="collections.deque.count"><code class="xref py py-meth docutils literal notranslate"><span class="pre">count()</span></code></a> y <a class="reference internal" href="../library/collections.html#collections.deque.reverse" title="collections.deque.reverse"><code class="xref py py-meth docutils literal notranslate"><span class="pre">reverse()</span></code></a> que los hacen más intercambiables con los objetos <a class="reference internal" href="../library/stdtypes.html#list" title="list"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a> :</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">deque</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">deque</span><span class="p">(</span><span class="s1">&#39;simsalabim&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;s&#39;</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span>
<span class="go">deque([&#39;m&#39;, &#39;i&#39;, &#39;b&#39;, &#39;a&#39;, &#39;l&#39;, &#39;a&#39;, &#39;s&#39;, &#39;m&#39;, &#39;i&#39;, &#39;s&#39;])</span>
</pre></div>
</div>
<p>(Contribución por Raymond Hettinger.)</p>
</li>
</ul>
</section>
<section id="threading">
<h3>threading<a class="headerlink" href="#threading" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El módulo <a class="reference internal" href="../library/threading.html#module-threading" title="threading: Thread-based parallelism."><code class="xref py py-mod docutils literal notranslate"><span class="pre">threading</span></code></a> tiene una nueva clase <a class="reference internal" href="../library/threading.html#threading.Barrier" title="threading.Barrier"><code class="xref py py-class docutils literal notranslate"><span class="pre">Barrier</span></code></a> de sincronización para hacer que varios hilos esperen hasta que todos hayan alcanzado un punto de barrera común. Las barreras son útiles para asegurarse de que una tarea con múltiples condiciones previas no se ejecute hasta que se completen todas las tareas predecesoras.</p>
<p>Las barreras pueden trabajar con un número arbitrario de hilos. Esto es una generalización de <a class="reference external" href="https://es.wikipedia.org/wiki/Barrera_(inform%C3%A1tica)">barrera informática</a> que se define solo para dos hilos.</p>
<p>Implementado como una barrera cíclica de dos fases, los objetos <a class="reference internal" href="../library/threading.html#threading.Barrier" title="threading.Barrier"><code class="xref py py-class docutils literal notranslate"><span class="pre">Barrier</span></code></a> son adecuados para su uso en bucles. Las fases separadas de <em>llenado</em> y <em>drenaje</em> aseguran que todos los hilos se liberen (drenan) antes de que cualquiera de ellos pueda retornar y volver a entrar en la barrera. La barrera se restablece completamente después de cada ciclo.</p>
<p>Ejemplo de uso de barreras:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">threading</span> <span class="kn">import</span> <span class="n">Barrier</span><span class="p">,</span> <span class="n">Thread</span>

<span class="k">def</span> <span class="nf">get_votes</span><span class="p">(</span><span class="n">site</span><span class="p">):</span>
    <span class="n">ballots</span> <span class="o">=</span> <span class="n">conduct_election</span><span class="p">(</span><span class="n">site</span><span class="p">)</span>
    <span class="n">all_polls_closed</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>        <span class="c1"># do not count until all polls are closed</span>
    <span class="n">totals</span> <span class="o">=</span> <span class="n">summarize</span><span class="p">(</span><span class="n">ballots</span><span class="p">)</span>
    <span class="n">publish</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">totals</span><span class="p">)</span>

<span class="n">all_polls_closed</span> <span class="o">=</span> <span class="n">Barrier</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sites</span><span class="p">))</span>
<span class="k">for</span> <span class="n">site</span> <span class="ow">in</span> <span class="n">sites</span><span class="p">:</span>
    <span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">get_votes</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">site</span><span class="p">,))</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>
</div>
<p>En este ejemplo, la barrera impone una regla de que los votos no se pueden contar en ningún lugar de votación hasta que se cierren todas las urnas. Observe cómo una solución con una barrera es similar a una con <a class="reference internal" href="../library/threading.html#threading.Thread.join" title="threading.Thread.join"><code class="xref py py-meth docutils literal notranslate"><span class="pre">threading.Thread.join()</span></code></a>, pero los hilos se mantienen vivos y continúan trabajando (resumiendo las papeletas) después de que se cruza el punto de la barrera.</p>
<p>Si alguna de las tareas predecesoras puede bloquearse o retrasarse, se puede crear una barrera con un parámetro opcional <em>timeout</em>. Luego, si el período de tiempo de espera transcurre antes de que todas las tareas predecesoras alcancen el punto de barrera, se liberan todos los hilos en espera y se lanza una excepción <a class="reference internal" href="../library/threading.html#threading.BrokenBarrierError" title="threading.BrokenBarrierError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">BrokenBarrierError</span></code></a>:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_votes</span><span class="p">(</span><span class="n">site</span><span class="p">):</span>
    <span class="n">ballots</span> <span class="o">=</span> <span class="n">conduct_election</span><span class="p">(</span><span class="n">site</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">all_polls_closed</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">midnight</span> <span class="o">-</span> <span class="n">time</span><span class="o">.</span><span class="n">now</span><span class="p">())</span>
    <span class="k">except</span> <span class="n">BrokenBarrierError</span><span class="p">:</span>
        <span class="n">lockbox</span> <span class="o">=</span> <span class="n">seal_ballots</span><span class="p">(</span><span class="n">ballots</span><span class="p">)</span>
        <span class="n">queue</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">lockbox</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">totals</span> <span class="o">=</span> <span class="n">summarize</span><span class="p">(</span><span class="n">ballots</span><span class="p">)</span>
        <span class="n">publish</span><span class="p">(</span><span class="n">site</span><span class="p">,</span> <span class="n">totals</span><span class="p">)</span>
</pre></div>
</div>
<p>En este ejemplo, la barrera impone una regla más sólida. Si algunos sitios electorales no terminan antes de la medianoche, la barrera expira y las boletas se sellan y se depositan en una cola para su posterior manejo.</p>
<p>Consulte <a class="reference external" href="https://osl.cs.illinois.edu/media/papers/karmani-2009-barrier_synchronization_pattern.pdf">Barrier Synchronization Patterns</a> para obtener más ejemplos de cómo se pueden usar las barreras en la computación paralela. Además, hay una explicación simple pero completa de las barreras en <a class="reference external" href="https://greenteapress.com/semaphores/LittleBookOfSemaphores.pdf">The Little Book of Semaphores</a>, <em>section 3.6</em>.</p>
<p>(Contribución de Kristján Valur Jónsson con una revisión de API de Jeffrey Yasskin en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8777">bpo-8777</a>.)</p>
</section>
<section id="datetime-and-time">
<h3>datetime and time<a class="headerlink" href="#datetime-and-time" title="Enlazar permanentemente con este título">¶</a></h3>
<ul>
<li><p>El módulo <a class="reference internal" href="../library/datetime.html#module-datetime" title="datetime: Basic date and time types."><code class="xref py py-mod docutils literal notranslate"><span class="pre">datetime</span></code></a> tiene un nuevo tipo <a class="reference internal" href="../library/datetime.html#datetime.timezone" title="datetime.timezone"><code class="xref py py-class docutils literal notranslate"><span class="pre">timezone</span></code></a> que implementa la interfaz <a class="reference internal" href="../library/datetime.html#datetime.tzinfo" title="datetime.tzinfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">tzinfo</span></code></a> retornando un desplazamiento fijo desde UTC y un nombre de zona horaria. Esto hace que sea más fácil crear objetos de fecha y hora que tengan en cuenta la zona horaria:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timezone</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>
<span class="go">datetime.datetime(2010, 12, 8, 21, 4, 2, 923754, tzinfo=datetime.timezone.utc)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="s2">&quot;01/01/2000 12:00 +0000&quot;</span><span class="p">,</span> <span class="s2">&quot;%m/</span><span class="si">%d</span><span class="s2">/%Y %H:%M %z&quot;</span><span class="p">)</span>
<span class="go">datetime.datetime(2000, 1, 1, 12, 0, tzinfo=datetime.timezone.utc)</span>
</pre></div>
</div>
</li>
<li><p>Además, los objetos <a class="reference internal" href="../library/datetime.html#datetime.timedelta" title="datetime.timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">timedelta</span></code></a> ahora pueden ser multiplicados por objetos <a class="reference internal" href="../library/functions.html#float" title="float"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a> y divididos por objetos <a class="reference internal" href="../library/functions.html#float" title="float"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a> e <a class="reference internal" href="../library/functions.html#int" title="int"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>. Y los objetos <a class="reference internal" href="../library/datetime.html#datetime.timedelta" title="datetime.timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">timedelta</span></code></a> ahora se pueden dividir entre sí.</p></li>
<li><p>El método <a class="reference internal" href="../library/datetime.html#datetime.date.strftime" title="datetime.date.strftime"><code class="xref py py-meth docutils literal notranslate"><span class="pre">datetime.date.strftime()</span></code></a> ya no está restringido a años posteriores a 1900. El nuevo rango de años admitido es de 1000 a 9999 inclusive.</p></li>
<li><p>Siempre que se utiliza un año de dos dígitos en una tupla de tiempo, la interpretación se rige por <code class="xref py py-attr docutils literal notranslate"><span class="pre">time.accept2dyear</span></code>. El valor predeterminado es <code class="docutils literal notranslate"><span class="pre">True</span></code>, lo que significa que para un año de dos dígitos, el siglo se calcula de acuerdo con las reglas POSIX que rigen el formato strptime <code class="docutils literal notranslate"><span class="pre">%y</span></code>.</p>
<p>A partir de Py3.2, el uso de la heurística de adivinación del siglo emitirá un <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a>. En su lugar, se recomienda que <code class="xref py py-attr docutils literal notranslate"><span class="pre">time.accept2dyear</span></code> se establezca en <code class="docutils literal notranslate"><span class="pre">False</span></code> para que se puedan usar rangos de fechas grandes sin suposiciones:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">time</span><span class="o">,</span> <span class="nn">warnings</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">warnings</span><span class="o">.</span><span class="n">resetwarnings</span><span class="p">()</span>      <span class="c1"># remove the default warning filters</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">time</span><span class="o">.</span><span class="n">accept2dyear</span> <span class="o">=</span> <span class="kc">True</span>      <span class="c1"># guess whether 11 means 11 or 2011</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time</span><span class="o">.</span><span class="n">asctime</span><span class="p">((</span><span class="mi">11</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="go">Warning (from warnings module):</span>
<span class="go">  ...</span>
<span class="go">DeprecationWarning: Century info guessed for a 2-digit year.</span>
<span class="go">&#39;Fri Jan  1 12:34:56 2011&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">time</span><span class="o">.</span><span class="n">accept2dyear</span> <span class="o">=</span> <span class="kc">False</span>     <span class="c1"># use the full range of allowable dates</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time</span><span class="o">.</span><span class="n">asctime</span><span class="p">((</span><span class="mi">11</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="go">&#39;Fri Jan  1 12:34:56 11&#39;</span>
</pre></div>
</div>
<p>Varias funciones ahora tienen rangos de fechas significativamente ampliados. Cuando <code class="xref py py-attr docutils literal notranslate"><span class="pre">time.accept2dyear</span></code> es falso, la función <a class="reference internal" href="../library/time.html#time.asctime" title="time.asctime"><code class="xref py py-func docutils literal notranslate"><span class="pre">time.asctime()</span></code></a> aceptará cualquier año que quepa en un entero C, mientras que las funciones <a class="reference internal" href="../library/time.html#time.mktime" title="time.mktime"><code class="xref py py-func docutils literal notranslate"><span class="pre">time.mktime()</span></code></a> y <a class="reference internal" href="../library/time.html#time.strftime" title="time.strftime"><code class="xref py py-func docutils literal notranslate"><span class="pre">time.strftime()</span></code></a> aceptarán la gama completa admitida por las funciones correspondientes del sistema operativo.</p>
</li>
</ul>
<p>(Contribución de Alexander Belopolsky y Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1289118">bpo-1289118</a>, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5094">bpo-5094</a>, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=6641">bpo-6641</a>, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=2706">bpo-2706</a>, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1777412">bpo-1777412</a>, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8013">bpo-8013</a>, y <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=10827">bpo-10827</a>.)</p>
</section>
<section id="math">
<h3>math<a class="headerlink" href="#math" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El módulo <a class="reference internal" href="../library/math.html#module-math" title="math: Mathematical functions (sin() etc.)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">math</span></code></a> se ha actualizado con seis nuevas funciones inspiradas en el estándar C99.</p>
<p>La función <a class="reference internal" href="../library/math.html#math.isfinite" title="math.isfinite"><code class="xref py py-func docutils literal notranslate"><span class="pre">isfinite()</span></code></a> proporciona una forma rápida y fiable de detectar valores especiales. Retorna <code class="docutils literal notranslate"><span class="pre">True</span></code> para números regulares y <code class="docutils literal notranslate"><span class="pre">False</span></code> para <em>Nan</em> o <em>Infinity</em>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">isfinite</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">isfinite</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">123</span><span class="p">,</span> <span class="mf">4.56</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;Nan&#39;</span><span class="p">),</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;Inf&#39;</span><span class="p">))]</span>
<span class="go">[True, True, False, False]</span>
</pre></div>
</div>
<p>La función <a class="reference internal" href="../library/math.html#math.expm1" title="math.expm1"><code class="xref py py-func docutils literal notranslate"><span class="pre">expm1()</span></code></a> calcula <code class="docutils literal notranslate"><span class="pre">e**x-1</span></code> para valores pequeños de <em>x</em> sin incurrir en la pérdida de precisión que generalmente acompaña a la resta de cantidades casi iguales:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">expm1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expm1</span><span class="p">(</span><span class="mf">0.013671875</span><span class="p">)</span>   <span class="c1"># more accurate way to compute e**x-1 for a small x</span>
<span class="go">0.013765762467652909</span>
</pre></div>
</div>
<p>La función <a class="reference internal" href="../library/math.html#math.erf" title="math.erf"><code class="xref py py-func docutils literal notranslate"><span class="pre">erf()</span></code></a> calcula una integral de probabilidad o <a class="reference external" href="https://es.wikipedia.org/wiki/Funci%C3%B3n_error">función de error gaussiano</a>. La función de error complementaria, <a class="reference internal" href="../library/math.html#math.erfc" title="math.erfc"><code class="xref py py-func docutils literal notranslate"><span class="pre">erfc()</span></code></a>, es <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">-</span> <span class="pre">erf(x)</span></code>:</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">erf</span><span class="p">,</span> <span class="n">erfc</span><span class="p">,</span> <span class="n">sqrt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">erf</span><span class="p">(</span><span class="mf">1.0</span><span class="o">/</span><span class="n">sqrt</span><span class="p">(</span><span class="mf">2.0</span><span class="p">))</span>   <span class="c1"># portion of normal distribution within 1 standard deviation</span>
<span class="go">0.682689492137086</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">erfc</span><span class="p">(</span><span class="mf">1.0</span><span class="o">/</span><span class="n">sqrt</span><span class="p">(</span><span class="mf">2.0</span><span class="p">))</span>  <span class="c1"># portion of normal distribution outside 1 standard deviation</span>
<span class="go">0.31731050786291404</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">erf</span><span class="p">(</span><span class="mf">1.0</span><span class="o">/</span><span class="n">sqrt</span><span class="p">(</span><span class="mf">2.0</span><span class="p">))</span> <span class="o">+</span> <span class="n">erfc</span><span class="p">(</span><span class="mf">1.0</span><span class="o">/</span><span class="n">sqrt</span><span class="p">(</span><span class="mf">2.0</span><span class="p">))</span>
<span class="go">1.0</span>
</pre></div>
</div>
<p>La función <a class="reference internal" href="../library/math.html#math.gamma" title="math.gamma"><code class="xref py py-func docutils literal notranslate"><span class="pre">gamma()</span></code></a> es una extensión continua de la función factorial. Consulte <a class="reference external" href="https://es.wikipedia.org/wiki/Funci%C3%B3n_gamma">https://es.wikipedia.org/wiki/Funci%C3%B3n_gamma</a> para obtener más detalles. Debido a que la función está relacionada con factoriales, crece incluso para valores pequeños de <em>x</em>, por lo que también hay una función <a class="reference internal" href="../library/math.html#math.lgamma" title="math.lgamma"><code class="xref py py-func docutils literal notranslate"><span class="pre">lgamma()</span></code></a> para calcular el logaritmo natural de la función gamma:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">gamma</span><span class="p">,</span> <span class="n">lgamma</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gamma</span><span class="p">(</span><span class="mf">7.0</span><span class="p">)</span>           <span class="c1"># six factorial</span>
<span class="go">720.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lgamma</span><span class="p">(</span><span class="mf">801.0</span><span class="p">)</span>        <span class="c1"># log(800 factorial)</span>
<span class="go">4551.950730698041</span>
</pre></div>
</div>
<p>(Contribución de Mark Dickinson.)</p>
</section>
<section id="abc">
<h3>abc<a class="headerlink" href="#abc" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El módulo <a class="reference internal" href="../library/abc.html#module-abc" title="abc: Abstract base classes according to :pep:`3119`."><code class="xref py py-mod docutils literal notranslate"><span class="pre">abc</span></code></a> ahora admite <a class="reference internal" href="../library/abc.html#abc.abstractclassmethod" title="abc.abstractclassmethod"><code class="xref py py-func docutils literal notranslate"><span class="pre">abstractclassmethod()</span></code></a> y <a class="reference internal" href="../library/abc.html#abc.abstractstaticmethod" title="abc.abstractstaticmethod"><code class="xref py py-func docutils literal notranslate"><span class="pre">abstractstaticmethod()</span></code></a>.</p>
<p>Estas herramientas permiten definir una <a class="reference internal" href="../glossary.html#term-abstract-base-class"><span class="xref std std-term">abstract base class</span></a> que requiere un <a class="reference internal" href="../library/functions.html#classmethod" title="classmethod"><code class="xref py py-func docutils literal notranslate"><span class="pre">classmethod()</span></code></a> o <a class="reference internal" href="../library/functions.html#staticmethod" title="staticmethod"><code class="xref py py-func docutils literal notranslate"><span class="pre">staticmethod()</span></code></a> particular para ser implementado:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Temperature</span><span class="p">(</span><span class="n">metaclass</span><span class="o">=</span><span class="n">abc</span><span class="o">.</span><span class="n">ABCMeta</span><span class="p">):</span>
    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractclassmethod</span>
    <span class="k">def</span> <span class="nf">from_fahrenheit</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="o">...</span>
    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractclassmethod</span>
    <span class="k">def</span> <span class="nf">from_celsius</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="o">...</span>
</pre></div>
</div>
<p>(Parche enviado por Daniel Urban; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5867">bpo-5867</a>.)</p>
</section>
<section id="io">
<h3>io<a class="headerlink" href="#io" title="Enlazar permanentemente con este título">¶</a></h3>
<p>La clase <a class="reference internal" href="../library/io.html#io.BytesIO" title="io.BytesIO"><code class="xref py py-class docutils literal notranslate"><span class="pre">io.BytesIO</span></code></a> tiene un nuevo método, <a class="reference internal" href="../library/io.html#io.BytesIO.getbuffer" title="io.BytesIO.getbuffer"><code class="xref py py-meth docutils literal notranslate"><span class="pre">getbuffer()</span></code></a>, que proporciona una funcionalidad similar a <a class="reference internal" href="../library/stdtypes.html#memoryview" title="memoryview"><code class="xref py py-func docutils literal notranslate"><span class="pre">memoryview()</span></code></a>. Crea una vista editable de los datos sin hacer una copia. El acceso aleatorio del búfer y la compatibilidad con la notación de sectores son adecuados para la edición in situ:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">REC_LEN</span><span class="p">,</span> <span class="n">LOC_START</span><span class="p">,</span> <span class="n">LOC_LEN</span> <span class="o">=</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">change_location</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="n">record_number</span><span class="p">,</span> <span class="n">location</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">start</span> <span class="o">=</span> <span class="n">record_number</span> <span class="o">*</span> <span class="n">REC_LEN</span> <span class="o">+</span> <span class="n">LOC_START</span>
<span class="gp">... </span>    <span class="n">buffer</span><span class="p">[</span><span class="n">start</span><span class="p">:</span> <span class="n">start</span><span class="o">+</span><span class="n">LOC_LEN</span><span class="p">]</span> <span class="o">=</span> <span class="n">location</span>

<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">io</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">byte_stream</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span>
<span class="gp">... </span>    <span class="sa">b</span><span class="s1">&#39;G3805  storeroom  Main chassis    &#39;</span>
<span class="gp">... </span>    <span class="sa">b</span><span class="s1">&#39;X7899  shipping   Reserve cog     &#39;</span>
<span class="gp">... </span>    <span class="sa">b</span><span class="s1">&#39;L6988  receiving  Primary sprocket&#39;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer</span> <span class="o">=</span> <span class="n">byte_stream</span><span class="o">.</span><span class="n">getbuffer</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">change_location</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;warehouse  &#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">change_location</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;showroom   &#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">byte_stream</span><span class="o">.</span><span class="n">getvalue</span><span class="p">())</span>
<span class="go">b&#39;G3805  showroom   Main chassis    &#39;</span>
<span class="go">b&#39;X7899  warehouse  Reserve cog     &#39;</span>
<span class="go">b&#39;L6988  receiving  Primary sprocket&#39;</span>
</pre></div>
</div>
<p>(Contribución de Antoine Pitrou en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5506">bpo-5506</a>.)</p>
</section>
<section id="reprlib">
<h3>reprlib<a class="headerlink" href="#reprlib" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Al escribir un método <code class="xref py py-meth docutils literal notranslate"><span class="pre">__repr__()</span></code> para un contenedor personalizado, es fácil olvidarse de gestionar el caso en el que un miembro hace referencia al contenedor en sí. Los objetos incorporados de Python como <a class="reference internal" href="../library/stdtypes.html#list" title="list"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a> y <a class="reference internal" href="../library/stdtypes.html#set" title="set"><code class="xref py py-class docutils literal notranslate"><span class="pre">set</span></code></a> manejan la autorreferencia mostrando «…» en la parte recursiva de la cadena de representación.</p>
<p>Para ayudar a escribir tales métodos <code class="xref py py-meth docutils literal notranslate"><span class="pre">__repr__()</span></code>, el módulo <a class="reference internal" href="../library/reprlib.html#module-reprlib" title="reprlib: Alternate repr() implementation with size limits."><code class="xref py py-mod docutils literal notranslate"><span class="pre">reprlib</span></code></a> tiene un nuevo decorador, <a class="reference internal" href="../library/reprlib.html#reprlib.recursive_repr" title="reprlib.recursive_repr"><code class="xref py py-func docutils literal notranslate"><span class="pre">recursive_repr()</span></code></a>, para detectar llamadas recursivas a <code class="xref py py-meth docutils literal notranslate"><span class="pre">__repr__()</span></code> y sustituir una cadena marcadora de posición en su lugar:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">MyList</span><span class="p">(</span><span class="nb">list</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nd">@recursive_repr</span><span class="p">()</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="s1">&#39;&lt;&#39;</span> <span class="o">+</span> <span class="s1">&#39;|&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">repr</span><span class="p">,</span> <span class="bp">self</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39;&gt;&#39;</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">MyList</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="go">&lt;&#39;a&#39;|&#39;b&#39;|&#39;c&#39;|...|&#39;x&#39;&gt;</span>
</pre></div>
</div>
<p>(Contribución de Raymond Hettinger en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=9826">bpo-9826</a> y <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=9840">bpo-9840</a>.)</p>
</section>
<section id="logging">
<h3>logging<a class="headerlink" href="#logging" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Además de la configuración basada en diccionario descrita anteriormente, el paquete <a class="reference internal" href="../library/logging.html#module-logging" title="logging: Flexible event logging system for applications."><code class="xref py py-mod docutils literal notranslate"><span class="pre">logging</span></code></a> tiene muchas otras mejoras.</p>
<p>La documentación de logging se ha aumentado con un <a class="reference internal" href="../howto/logging.html#logging-basic-tutorial"><span class="std std-ref">tutorial básico</span></a>, un <a class="reference internal" href="../howto/logging.html#logging-advanced-tutorial"><span class="std std-ref">tutorial avanzado</span></a>, y un <a class="reference internal" href="../howto/logging-cookbook.html#logging-cookbook"><span class="std std-ref">libro de recetas</span></a>. Estos documentos son la forma más rápida de aprender sobre logging.</p>
<p>La función de configuración <a class="reference internal" href="../library/logging.html#logging.basicConfig" title="logging.basicConfig"><code class="xref py py-func docutils literal notranslate"><span class="pre">logging.basicConfig()</span></code></a> adquirió un argumento <em>style</em> para admitir tres tipos diferentes de formato de cadena de caracteres. Su valor predeterminado es «%» para el formato % tradicional, se puede establecer en «{» para el nuevo estilo <a class="reference internal" href="../library/stdtypes.html#str.format" title="str.format"><code class="xref py py-meth docutils literal notranslate"><span class="pre">str.format()</span></code></a>, o se puede establecer en «$» para el formato de estilo shell proporcionado por <a class="reference internal" href="../library/string.html#string.Template" title="string.Template"><code class="xref py py-class docutils literal notranslate"><span class="pre">string.Template</span></code></a>. Las siguientes tres configuraciones son equivalentes:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">logging</span> <span class="kn">import</span> <span class="n">basicConfig</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">basicConfig</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s1">&#39;%&#39;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%(name)s</span><span class="s2"> -&gt; </span><span class="si">%(levelname)s</span><span class="s2">: </span><span class="si">%(message)s</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">basicConfig</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s1">&#39;{&#39;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{name}</span><span class="s2"> -&gt; </span><span class="si">{levelname}</span><span class="s2"> </span><span class="si">{message}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">basicConfig</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s1">&#39;$&#39;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;$name -&gt; $levelname: $message&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Si no se establece ninguna configuración antes de que ocurra un evento de logging, ahora hay una configuración predeterminada que usa una <a class="reference internal" href="../library/logging.handlers.html#logging.StreamHandler" title="logging.StreamHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">StreamHandler</span></code></a> dirigido a <a class="reference internal" href="../library/sys.html#sys.stderr" title="sys.stderr"><code class="xref py py-attr docutils literal notranslate"><span class="pre">sys.stderr</span></code></a> para eventos de nivel <code class="docutils literal notranslate"><span class="pre">WARNING</span></code> o mayor. Anteriormente, un evento que ocurría antes de que se establezca una configuración lanzaba una excepción o eliminaba silenciosamente el evento según el valor de <code class="xref py py-attr docutils literal notranslate"><span class="pre">logging.raiseExceptions</span></code>. El nuevo gestor predeterminado se almacena en <a class="reference internal" href="../library/logging.html#logging.lastResort" title="logging.lastResort"><code class="xref py py-attr docutils literal notranslate"><span class="pre">logging.lastResort</span></code></a>.</p>
<p>El uso de filtros ha sido simplificado. En lugar de crear un objeto <a class="reference internal" href="../library/logging.html#logging.Filter" title="logging.Filter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Filter</span></code></a>, la declaración puede ser cualquier invocable Python que retorna <code class="docutils literal notranslate"><span class="pre">True</span></code> o <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<p>Hubo una serie de otras mejoras que agregan flexibilidad y simplifican la configuración. Consulte la documentación del módulo para obtener una lista completa de los cambios en Python 3.2.</p>
</section>
<section id="csv">
<h3>csv<a class="headerlink" href="#csv" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El módulo <a class="reference internal" href="../library/csv.html#module-csv" title="csv: Write and read tabular data to and from delimited files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">csv</span></code></a> ahora admite un nuevo dialecto, <a class="reference internal" href="../library/csv.html#csv.unix_dialect" title="csv.unix_dialect"><code class="xref py py-class docutils literal notranslate"><span class="pre">unix_dialect</span></code></a>, que aplica comillas para todos los campos y un estilo Unix tradicional con <code class="docutils literal notranslate"><span class="pre">'\n'</span></code> como terminador de línea. El nombre del dialecto registrado es <code class="docutils literal notranslate"><span class="pre">unix</span></code>.</p>
<p>La clase <a class="reference internal" href="../library/csv.html#csv.DictWriter" title="csv.DictWriter"><code class="xref py py-class docutils literal notranslate"><span class="pre">csv.DictWriter</span></code></a> tiene un nuevo método, <a class="reference internal" href="../library/csv.html#csv.DictWriter.writeheader" title="csv.DictWriter.writeheader"><code class="xref py py-meth docutils literal notranslate"><span class="pre">writeheader()</span></code></a> para escribir una fila inicial para documentar los nombres de los campos:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">csv</span><span class="o">,</span> <span class="nn">sys</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictWriter</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;dept&#39;</span><span class="p">],</span> <span class="n">dialect</span><span class="o">=</span><span class="s1">&#39;unix&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">.</span><span class="n">writeheader</span><span class="p">()</span>
<span class="go">&quot;name&quot;,&quot;dept&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w</span><span class="o">.</span><span class="n">writerows</span><span class="p">([</span>
<span class="gp">... </span>    <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;tom&#39;</span><span class="p">,</span> <span class="s1">&#39;dept&#39;</span><span class="p">:</span> <span class="s1">&#39;accounting&#39;</span><span class="p">},</span>
<span class="gp">... </span>    <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;susan&#39;</span><span class="p">,</span> <span class="s1">&#39;dept&#39;</span><span class="p">:</span> <span class="s1">&#39;Salesl&#39;</span><span class="p">}])</span>
<span class="go">&quot;tom&quot;,&quot;accounting&quot;</span>
<span class="go">&quot;susan&quot;,&quot;sales&quot;</span>
</pre></div>
</div>
<p>(Nuevo dialecto sugerido por Jay Talbot en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5975">bpo-5975</a>, y el nuevo método sugerido por Ed Abraham en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1537721">bpo-1537721</a>.)</p>
</section>
<section id="contextlib">
<h3>contextlib<a class="headerlink" href="#contextlib" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Hay una nueva y ligeramente alucinante herramienta <a class="reference internal" href="../library/contextlib.html#contextlib.ContextDecorator" title="contextlib.ContextDecorator"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContextDecorator</span></code></a> que es útil para crear un <a class="reference internal" href="../glossary.html#term-context-manager"><span class="xref std std-term">context manager</span></a> que cumple una doble función como decorador de funciones.</p>
<p>Para su comodidad, esta nueva funcionalidad es utilizada por <a class="reference internal" href="../library/contextlib.html#contextlib.contextmanager" title="contextlib.contextmanager"><code class="xref py py-func docutils literal notranslate"><span class="pre">contextmanager()</span></code></a> de modo que no se necesita ningún esfuerzo adicional para admitir ambos roles.</p>
<p>La idea básica es que tanto los gestores de contexto como los decoradores de funciones se pueden usar para envoltorios (<em>wrappers</em>) previos y posteriores a la acción. Los gestores de contexto envuelven un grupo de declaraciones usando la declaración <a class="reference internal" href="../reference/compound_stmts.html#with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a> y los decoradores de funciones envuelven un grupo de declaraciones encerradas en una función. Por lo tanto, ocasionalmente es necesario escribir un envoltorio de acción previa o posterior que se pueda usar en cualquiera de los roles.</p>
<p>Por ejemplo, a veces es útil envolver funciones o grupos de declaraciones con un logger que pueda rastrear el tiempo de entrada y el tiempo de salida. En lugar de escribir tanto un decorador de funciones como un gestor de contexto para la tarea, <a class="reference internal" href="../library/contextlib.html#contextlib.contextmanager" title="contextlib.contextmanager"><code class="xref py py-func docutils literal notranslate"><span class="pre">contextmanager()</span></code></a> proporciona ambas capacidades en una sola definición:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">contextlib</span> <span class="kn">import</span> <span class="n">contextmanager</span>
<span class="kn">import</span> <span class="nn">logging</span>

<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>

<span class="nd">@contextmanager</span>
<span class="k">def</span> <span class="nf">track_entry_and_exit</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Entering: </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
    <span class="k">yield</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Exiting: </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>Anteriormente, esto solo se podía usar como gestor de contexto:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">track_entry_and_exit</span><span class="p">(</span><span class="s1">&#39;widget loader&#39;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Some time consuming activity goes here&#39;</span><span class="p">)</span>
    <span class="n">load_widget</span><span class="p">()</span>
</pre></div>
</div>
<p>Ahora, también se puede usar como decorador:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="nd">@track_entry_and_exit</span><span class="p">(</span><span class="s1">&#39;widget loader&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">activity</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Some time consuming activity goes here&#39;</span><span class="p">)</span>
    <span class="n">load_widget</span><span class="p">()</span>
</pre></div>
</div>
<p>Tratar de cumplir dos roles a la vez impone algunas limitaciones a la técnica. Los gestores de contexto normalmente tienen la flexibilidad de retornar un argumento utilizable por una instrucción <a class="reference internal" href="../reference/compound_stmts.html#with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a>, pero no hay paralelo para los decoradores de funciones.</p>
<p>En el ejemplo anterior, no hay una forma limpia para que el gestor de contexto <em>track_entry_and_exit</em> retorne una instancia de logging para usar en el cuerpo de las declaraciones adjuntas.</p>
<p>(Contribución de Michael Foord en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=9110">bpo-9110</a>.)</p>
</section>
<section id="decimal-and-fractions">
<h3>decimal and fractions<a class="headerlink" href="#decimal-and-fractions" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Mark Dickinson diseñó un esquema elegante y eficiente para asegurar que diferentes tipos de datos numéricos tendrán el mismo valor hash siempre que sus valores reales sean iguales (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8188">bpo-8188</a>):</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="nb">hash</span><span class="p">(</span><span class="n">Fraction</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="o">==</span> <span class="nb">hash</span><span class="p">(</span><span class="mf">1.5</span><span class="p">)</span> <span class="o">==</span> \
       <span class="nb">hash</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;1.5&quot;</span><span class="p">))</span> <span class="o">==</span> <span class="nb">hash</span><span class="p">(</span><span class="nb">complex</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
</pre></div>
</div>
<p>Algunos de los detalles de hash se exponen a través de un nuevo atributo, <a class="reference internal" href="../library/sys.html#sys.hash_info" title="sys.hash_info"><code class="xref py py-attr docutils literal notranslate"><span class="pre">sys.hash_info</span></code></a>, que describe el ancho de bits del valor hash, el módulo principal, los valores hash para <em>infinity</em> y <em>nan</em>, y el multiplicador utilizado para la parte imaginaria de un número:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sys</span><span class="o">.</span><span class="n">hash_info</span> 
<span class="go">sys.hash_info(width=64, modulus=2305843009213693951, inf=314159, nan=0, imag=1000003)</span>
</pre></div>
</div>
<p>Se ha atenuado una decisión temprana para limitar la interoperabilidad de varios tipos numéricos. Todavía no se admite (y es desaconsejable) tener una mezcla implícita en expresiones aritméticas como <code class="docutils literal notranslate"><span class="pre">Decimal('1.1')</span> <span class="pre">+</span> <span class="pre">float('1.1')</span></code> porque este último pierde información en el proceso de construcción del float binario. Sin embargo, dado que el valor de punto flotante existente se puede convertir sin pérdidas a una representación decimal o racional, tiene sentido agregarlos al constructor y admitir comparaciones de tipo mixto.</p>
<ul class="simple">
<li><p>El constructor <a class="reference internal" href="../library/decimal.html#decimal.Decimal" title="decimal.Decimal"><code class="xref py py-class docutils literal notranslate"><span class="pre">decimal.Decimal</span></code></a> ahora acepta objetos <a class="reference internal" href="../library/functions.html#float" title="float"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a> directamente, por lo que ya no es necesario utilizar el método <a class="reference internal" href="../library/decimal.html#decimal.Decimal.from_float" title="decimal.Decimal.from_float"><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_float()</span></code></a> (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8257">bpo-8257</a>).</p></li>
<li><p>Las comparaciones de tipos mixto ahora son totalmente compatibles, de modo que los objetos <a class="reference internal" href="../library/decimal.html#decimal.Decimal" title="decimal.Decimal"><code class="xref py py-class docutils literal notranslate"><span class="pre">Decimal</span></code></a> se pueden comparar directamente con <a class="reference internal" href="../library/functions.html#float" title="float"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a> y <a class="reference internal" href="../library/fractions.html#fractions.Fraction" title="fractions.Fraction"><code class="xref py py-class docutils literal notranslate"><span class="pre">fractions.Fraction</span></code></a> (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=2531">bpo-2531</a> y <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8188">bpo-8188</a>).</p></li>
</ul>
<p>Cambios similares se hicieron en <a class="reference internal" href="../library/fractions.html#fractions.Fraction" title="fractions.Fraction"><code class="xref py py-class docutils literal notranslate"><span class="pre">fractions.Fraction</span></code></a> por lo que los métodos <a class="reference internal" href="../library/fractions.html#fractions.Fraction.from_float" title="fractions.Fraction.from_float"><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_float()</span></code></a> y <a class="reference internal" href="../library/fractions.html#fractions.Fraction.from_decimal" title="fractions.Fraction.from_decimal"><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_decimal()</span></code></a> ya no son necesarios (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8294">bpo-8294</a>):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">fractions</span> <span class="kn">import</span> <span class="n">Fraction</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Decimal</span><span class="p">(</span><span class="mf">1.1</span><span class="p">)</span>
<span class="go">Decimal(&#39;1.100000000000000088817841970012523233890533447265625&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Fraction</span><span class="p">(</span><span class="mf">1.1</span><span class="p">)</span>
<span class="go">Fraction(2476979795053773, 2251799813685248)</span>
</pre></div>
</div>
<p>Otro cambio útil para el módulo <a class="reference internal" href="../library/decimal.html#module-decimal" title="decimal: Implementation of the General Decimal Arithmetic  Specification."><code class="xref py py-mod docutils literal notranslate"><span class="pre">decimal</span></code></a> es que el atributo <code class="xref py py-attr docutils literal notranslate"><span class="pre">Context.clamp</span></code> ahora es público. Esto es útil para crear contextos que se correspondan con los formatos de intercambio decimal especificados en IEEE 754 (ver :<cite>8540</cite>).</p>
<p>(Contribución de Mark Dickinson y Raymond Hettinger.)</p>
</section>
<section id="ftp">
<h3>ftp<a class="headerlink" href="#ftp" title="Enlazar permanentemente con este título">¶</a></h3>
<p>La clase <a class="reference internal" href="../library/ftplib.html#ftplib.FTP" title="ftplib.FTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">ftplib.FTP</span></code></a> ahora admite el protocolo de gestor de contexto para consumir incondicionalmente las excepciones <a class="reference internal" href="../library/socket.html#socket.error" title="socket.error"><code class="xref py py-exc docutils literal notranslate"><span class="pre">socket.error</span></code></a> y cerrar la conexión FTP cuando haya terminado:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ftplib</span> <span class="kn">import</span> <span class="n">FTP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">FTP</span><span class="p">(</span><span class="s2">&quot;ftp1.at.proftpd.org&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">ftp</span><span class="p">:</span>
<span class="go">        ftp.login()</span>
<span class="go">        ftp.dir()</span>

<span class="go">&#39;230 Anonymous login ok, restrictions apply.&#39;</span>
<span class="go">dr-xr-xr-x   9 ftp      ftp           154 May  6 10:43 .</span>
<span class="go">dr-xr-xr-x   9 ftp      ftp           154 May  6 10:43 ..</span>
<span class="go">dr-xr-xr-x   5 ftp      ftp          4096 May  6 10:43 CentOS</span>
<span class="go">dr-xr-xr-x   3 ftp      ftp            18 Jul 10  2008 Fedora</span>
</pre></div>
</div>
<p>Otros objetos similares a archivos como <a class="reference internal" href="../library/mmap.html#mmap.mmap" title="mmap.mmap"><code class="xref py py-class docutils literal notranslate"><span class="pre">mmap.mmap</span></code></a> y <a class="reference internal" href="../library/fileinput.html#fileinput.input" title="fileinput.input"><code class="xref py py-func docutils literal notranslate"><span class="pre">fileinput.input()</span></code></a> también adquirieron gestores de contexto de cierre automático:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">fileinput</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="n">files</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;log1.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;log2.txt&#39;</span><span class="p">))</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">process</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</pre></div>
</div>
<p>(Contribución de Tarek Ziadé y Giampaolo Rodolà en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=4972">bpo-4972</a>, y por Georg Brandl en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8046">bpo-8046</a> y <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1286">bpo-1286</a>.)</p>
<p>La clase <a class="reference internal" href="../library/ftplib.html#ftplib.FTP_TLS" title="ftplib.FTP_TLS"><code class="xref py py-class docutils literal notranslate"><span class="pre">FTP_TLS</span></code></a> ahora acepta un parámetro <em>context</em>, que es un objeto <a class="reference internal" href="../library/ssl.html#ssl.SSLContext" title="ssl.SSLContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">ssl.SSLContext</span></code></a> que permite agrupar opciones de configuración SSL, certificados y claves privadas en una sola (y potencialmente de larga duración) estructura.</p>
<p>(Contribución de Giampaolo Rodolà; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8806">bpo-8806</a>.)</p>
</section>
<section id="popen">
<h3>popen<a class="headerlink" href="#popen" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Las funciones <a class="reference internal" href="../library/os.html#os.popen" title="os.popen"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.popen()</span></code></a> y <a class="reference internal" href="../library/subprocess.html#subprocess.Popen" title="subprocess.Popen"><code class="xref py py-func docutils literal notranslate"><span class="pre">subprocess.Popen()</span></code></a> ahora admiten declaraciones <a class="reference internal" href="../reference/compound_stmts.html#with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a> para el cierre automático de los descriptores de archivo.</p>
<p>(Contribución de Antoine Pitrou y Brian Curtin en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7461">bpo-7461</a> y <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=10554">bpo-10554</a>.)</p>
</section>
<section id="select">
<h3>select<a class="headerlink" href="#select" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El módulo <a class="reference internal" href="../library/select.html#module-select" title="select: Wait for I/O completion on multiple streams."><code class="xref py py-mod docutils literal notranslate"><span class="pre">select</span></code></a> ahora presenta un nuevo atributo constante, <a class="reference internal" href="../library/select.html#select.PIPE_BUF" title="select.PIPE_BUF"><code class="xref py py-attr docutils literal notranslate"><span class="pre">PIPE_BUF</span></code></a>, que da el número mínimo de bytes que están garantizados para no bloquearse cuando <a class="reference internal" href="../library/select.html#select.select" title="select.select"><code class="xref py py-func docutils literal notranslate"><span class="pre">select.select()</span></code></a> dice que una tubería está lista para escribir.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">select</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">select</span><span class="o">.</span><span class="n">PIPE_BUF</span>  
<span class="go">512</span>
</pre></div>
</div>
<p>(Disponible en sistemas Unix. Parche de Sébastien Sablé en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=9862">bpo-9862</a>)</p>
</section>
<section id="gzip-and-zipfile">
<h3>gzip y zipfile<a class="headerlink" href="#gzip-and-zipfile" title="Enlazar permanentemente con este título">¶</a></h3>
<p><a class="reference internal" href="../library/gzip.html#gzip.GzipFile" title="gzip.GzipFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">gzip.GzipFile</span></code></a> ahora implementa <a class="reference internal" href="../library/io.html#io.BufferedIOBase" title="io.BufferedIOBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">io.BufferedIOBase</span></code></a> <a class="reference internal" href="../glossary.html#term-abstract-base-class"><span class="xref std std-term">clase base abstracta</span></a> (excepto para <code class="docutils literal notranslate"><span class="pre">truncate()</span></code>). También tiene un método <a class="reference internal" href="../library/gzip.html#gzip.GzipFile.peek" title="gzip.GzipFile.peek"><code class="xref py py-meth docutils literal notranslate"><span class="pre">peek()</span></code></a> y admite objetos de archivo con rellenos de ceros y que no se pueden buscar.</p>
<p>El módulo <a class="reference internal" href="../library/gzip.html#module-gzip" title="gzip: Interfaces for gzip compression and decompression using file objects."><code class="xref py py-mod docutils literal notranslate"><span class="pre">gzip</span></code></a> también obtiene las funciones <a class="reference internal" href="../library/gzip.html#gzip.compress" title="gzip.compress"><code class="xref py py-func docutils literal notranslate"><span class="pre">compress()</span></code></a> y <a class="reference internal" href="../library/gzip.html#gzip.decompress" title="gzip.decompress"><code class="xref py py-func docutils literal notranslate"><span class="pre">decompress()</span></code></a> para facilitar la compresión y descompresión en memoria. Tenga en cuenta que el texto debe codificarse como <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> antes de comprimir y descomprimir:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">gzip</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;Three shall be the number thou shalt count, &#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;and the number of the counting shall be three&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>                        <span class="c1"># convert to utf-8</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="go">89</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">gzip</span><span class="o">.</span><span class="n">compress</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="go">77</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gzip</span><span class="o">.</span><span class="n">decompress</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()[:</span><span class="mi">42</span><span class="p">]</span>      <span class="c1"># decompress and convert to text</span>
<span class="go">&#39;Three shall be the number thou shalt count&#39;</span>
</pre></div>
</div>
<p>(Contribución de Anand B. Pillai en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=3488">bpo-3488</a>; y de Antoine Pitrou, Nir Aides y Brian Curtin en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=9962">bpo-9962</a>, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1675951">bpo-1675951</a>, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7471">bpo-7471</a> y <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=2846">bpo-2846</a>.)</p>
<p>Además, la clase <code class="xref py py-class docutils literal notranslate"><span class="pre">zipfile.ZipExtFile</span></code> se modificó internamente para representar archivos almacenados dentro de un archivo. La nueva implementación es significativamente más rápida y se puede incluir en un objeto <a class="reference internal" href="../library/io.html#io.BufferedReader" title="io.BufferedReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">io.BufferedReader</span></code></a> para obtener más aceleraciones. También resuelve un problema en el que las llamadas intercaladas a <em>read</em> y <em>readline</em> daban resultados incorrectos.</p>
<p>(Parche enviado por Nir Aides en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7610">bpo-7610</a>.)</p>
</section>
<section id="tarfile">
<h3>tarfile<a class="headerlink" href="#tarfile" title="Enlazar permanentemente con este título">¶</a></h3>
<p>La clase <a class="reference internal" href="../library/tarfile.html#tarfile.TarFile" title="tarfile.TarFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">TarFile</span></code></a> ahora se puede usar como gestor de contexto. Además, su método <a class="reference internal" href="../library/tarfile.html#tarfile.TarFile.add" title="tarfile.TarFile.add"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add()</span></code></a> tiene una nueva opción, <em>filter</em>, que controla qué archivos se agregan y permite editar los metadatos del archivo.</p>
<p>La nueva opción <em>filter</em> reemplaza el parámetro anterior y menos flexible <em>exclude</em> que ahora está deprecado. Si se especifica, el parámetro opcional <em>filter</em> debe ser un <a class="reference internal" href="../glossary.html#term-keyword-argument"><span class="xref std std-term">keyword argument</span></a>. La función <em>filter</em> proporcionada por el usuario acepta un objeto <a class="reference internal" href="../library/tarfile.html#tarfile.TarInfo" title="tarfile.TarInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">TarInfo</span></code></a> y retorna un objeto <a class="reference internal" href="../library/tarfile.html#tarfile.TarInfo" title="tarfile.TarInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">TarInfo</span></code></a> actualizado, o si desea que el archivo sea excluido, la función puede retornar <code class="docutils literal notranslate"><span class="pre">None</span></code>:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">tarfile</span><span class="o">,</span> <span class="nn">glob</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">myfilter</span><span class="p">(</span><span class="n">tarinfo</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">tarinfo</span><span class="o">.</span><span class="n">isfile</span><span class="p">():</span>             <span class="c1"># only save real files</span>
<span class="gp">... </span>        <span class="n">tarinfo</span><span class="o">.</span><span class="n">uname</span> <span class="o">=</span> <span class="s1">&#39;monty&#39;</span>      <span class="c1"># redact the user name</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="n">tarinfo</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">tarfile</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;myarchive.tar.gz&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;w:gz&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">tf</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;*.txt&#39;</span><span class="p">):</span>
<span class="gp">... </span>        <span class="n">tf</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="n">myfilter</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">tf</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
<span class="go">-rw-r--r-- monty/501        902 2011-01-26 17:59:11 annotations.txt</span>
<span class="go">-rw-r--r-- monty/501        123 2011-01-26 17:59:11 general_questions.txt</span>
<span class="go">-rw-r--r-- monty/501       3514 2011-01-26 17:59:11 prion.txt</span>
<span class="go">-rw-r--r-- monty/501        124 2011-01-26 17:59:11 py_todo.txt</span>
<span class="go">-rw-r--r-- monty/501       1399 2011-01-26 17:59:11 semaphore_notes.txt</span>
</pre></div>
</div>
<p>(Propuesto por Tarek Ziadé e implementado por Lars Gustäbel en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=6856">bpo-6856</a>.)</p>
</section>
<section id="hashlib">
<h3>hashlib<a class="headerlink" href="#hashlib" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El módulo <a class="reference internal" href="../library/hashlib.html#module-hashlib" title="hashlib: Secure hash and message digest algorithms."><code class="xref py py-mod docutils literal notranslate"><span class="pre">hashlib</span></code></a> tiene dos nuevos atributos constantes que enumeran los algoritmos hash garantizados para estar presentes en todas las implementaciones y los disponibles en la implementación actual:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">hashlib</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">hashlib</span><span class="o">.</span><span class="n">algorithms_guaranteed</span>
<span class="go">{&#39;sha1&#39;, &#39;sha224&#39;, &#39;sha384&#39;, &#39;sha256&#39;, &#39;sha512&#39;, &#39;md5&#39;}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">hashlib</span><span class="o">.</span><span class="n">algorithms_available</span>
<span class="go">{&#39;md2&#39;, &#39;SHA256&#39;, &#39;SHA512&#39;, &#39;dsaWithSHA&#39;, &#39;mdc2&#39;, &#39;SHA224&#39;, &#39;MD4&#39;, &#39;sha256&#39;,</span>
<span class="go">&#39;sha512&#39;, &#39;ripemd160&#39;, &#39;SHA1&#39;, &#39;MDC2&#39;, &#39;SHA&#39;, &#39;SHA384&#39;, &#39;MD2&#39;,</span>
<span class="go">&#39;ecdsa-with-SHA1&#39;,&#39;md4&#39;, &#39;md5&#39;, &#39;sha1&#39;, &#39;DSA-SHA&#39;, &#39;sha224&#39;,</span>
<span class="go">&#39;dsaEncryption&#39;, &#39;DSA&#39;, &#39;RIPEMD160&#39;, &#39;sha&#39;, &#39;MD5&#39;, &#39;sha384&#39;}</span>
</pre></div>
</div>
<p>(Sugerido por Carl Chenet en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7418">bpo-7418</a>.)</p>
</section>
<section id="ast">
<h3>ast<a class="headerlink" href="#ast" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El módulo <a class="reference internal" href="../library/ast.html#module-ast" title="ast: Abstract Syntax Tree classes and manipulation."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ast</span></code></a> tiene una maravillosa herramienta de propósito general para evaluar cadenas de expresión de forma segura utilizando la sintaxis literal de Python. La función <a class="reference internal" href="../library/ast.html#ast.literal_eval" title="ast.literal_eval"><code class="xref py py-func docutils literal notranslate"><span class="pre">ast.literal_eval()</span></code></a> sirve como una alternativa segura a la función incorporada <a class="reference internal" href="../library/functions.html#eval" title="eval"><code class="xref py py-func docutils literal notranslate"><span class="pre">eval()</span></code></a> la cual se abusa fácilmente. Python 3.2 agrega <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> y <a class="reference internal" href="../library/stdtypes.html#set" title="set"><code class="xref py py-class docutils literal notranslate"><span class="pre">set</span></code></a> literales a la lista de tipos admitidos: cadenas de caracteres, bytes, números, tuplas, listas, diccionarios, sets, valores booleanos y <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ast</span> <span class="kn">import</span> <span class="n">literal_eval</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span> <span class="o">=</span> <span class="s2">&quot;{&#39;req&#39;: 3, &#39;func&#39;: &#39;pow&#39;, &#39;args&#39;: (2, 0.5)}&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">literal_eval</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="go">{&#39;args&#39;: (2, 0.5), &#39;req&#39;: 3, &#39;func&#39;: &#39;pow&#39;}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">request</span> <span class="o">=</span> <span class="s2">&quot;os.system(&#39;do something harmful&#39;)&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">literal_eval</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  <span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">malformed node or string: &lt;_ast.Call object at 0x101739a10&gt;</span>
</pre></div>
</div>
<p>(Implementado por Benjamin Peterson y Georg Brandl.)</p>
</section>
<section id="os">
<h3>os<a class="headerlink" href="#os" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Los diferentes sistemas operativos utilizan varias codificaciones para los nombres de archivo y las variables de entorno. El módulo <a class="reference internal" href="../library/os.html#module-os" title="os: Miscellaneous operating system interfaces."><code class="xref py py-mod docutils literal notranslate"><span class="pre">os</span></code></a> proporciona dos funciones nuevas, <a class="reference internal" href="../library/os.html#os.fsencode" title="os.fsencode"><code class="xref py py-func docutils literal notranslate"><span class="pre">fsencode()</span></code></a> y <a class="reference internal" href="../library/os.html#os.fsdecode" title="os.fsdecode"><code class="xref py py-func docutils literal notranslate"><span class="pre">fsdecode()</span></code></a>, para codificar y decodificar nombres de archivo:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;Sehenswürdigkeiten&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">fsencode</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
<span class="go">b&#39;Sehensw\xc3\xbcrdigkeiten&#39;</span>
</pre></div>
</div>
<p>Algunos sistemas operativos permiten el acceso directo a bytes codificados en el entorno. Si es así, la constante <a class="reference internal" href="../library/os.html#os.supports_bytes_environ" title="os.supports_bytes_environ"><code class="xref py py-attr docutils literal notranslate"><span class="pre">os.supports_bytes_environ</span></code></a> será verdadera.</p>
<p>Para acceder directamente a las variables de entorno codificadas (si está disponible), utilice la nueva función <a class="reference internal" href="../library/os.html#os.getenvb" title="os.getenvb"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.getenvb()</span></code></a> o utilice <a class="reference internal" href="../library/os.html#os.environb" title="os.environb"><code class="xref py py-data docutils literal notranslate"><span class="pre">os.environb</span></code></a>, que es una versión en bytes de <a class="reference internal" href="../library/os.html#os.environ" title="os.environ"><code class="xref py py-data docutils literal notranslate"><span class="pre">os.environ</span></code></a>.</p>
<p>(Contribución de Victor Stinner.)</p>
</section>
<section id="shutil">
<h3>shutil<a class="headerlink" href="#shutil" title="Enlazar permanentemente con este título">¶</a></h3>
<p>La función <a class="reference internal" href="../library/shutil.html#shutil.copytree" title="shutil.copytree"><code class="xref py py-func docutils literal notranslate"><span class="pre">shutil.copytree()</span></code></a> tiene dos nuevas opciones:</p>
<ul class="simple">
<li><p><em>ignore_dangling_symlinks</em>: cuando <code class="docutils literal notranslate"><span class="pre">symlinks=False</span></code> para que la función copie un archivo apuntado por un enlace simbólico, no el enlace simbólico en sí. Esta opción silenciará el error lanzado si el archivo no existe.</p></li>
<li><p><em>copy_function</em>: es un invocable que se utilizará para copiar archivos. <a class="reference internal" href="../library/shutil.html#shutil.copy2" title="shutil.copy2"><code class="xref py py-func docutils literal notranslate"><span class="pre">shutil.copy2()</span></code></a> se usa por defecto.</p></li>
</ul>
<p>(Contribución de Tarek Ziadé.)</p>
<p>Además, el módulo <a class="reference internal" href="../library/shutil.html#module-shutil" title="shutil: High-level file operations, including copying."><code class="xref py py-mod docutils literal notranslate"><span class="pre">shutil</span></code></a> ahora admite <a class="reference internal" href="../library/shutil.html#archiving-operations"><span class="std std-ref">operaciones de archivado</span></a> para archivos zip, archivos tar sin comprimir, archivos tar comprimidos con gzip y archivos tar bzip. Y hay funciones para registrar formatos de archivado de archivo adicionales (como archivos tar comprimidos xz o formatos personalizados).</p>
<p>Las funciones principales son <a class="reference internal" href="../library/shutil.html#shutil.make_archive" title="shutil.make_archive"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_archive()</span></code></a> y <a class="reference internal" href="../library/shutil.html#shutil.unpack_archive" title="shutil.unpack_archive"><code class="xref py py-func docutils literal notranslate"><span class="pre">unpack_archive()</span></code></a>. Por defecto, ambas operan en el directorio actual (que puede ser configurado por <a class="reference internal" href="../library/os.html#os.chdir" title="os.chdir"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.chdir()</span></code></a>) y en cualquier subdirectorio. El nombre del archivo de almacenamiento debe especificarse con una ruta completa. El paso de archivado no es destructivo (los archivos originales no se modifican).</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">shutil</span><span class="o">,</span> <span class="nn">pprint</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s1">&#39;mydata&#39;</span><span class="p">)</span>  <span class="c1"># change to the source directory</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">shutil</span><span class="o">.</span><span class="n">make_archive</span><span class="p">(</span><span class="s1">&#39;/var/backup/mydata&#39;</span><span class="p">,</span>
<span class="gp">... </span>                        <span class="s1">&#39;zip&#39;</span><span class="p">)</span>      <span class="c1"># archive the current directory</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span>                                   <span class="c1"># show the name of archive</span>
<span class="go">&#39;/var/backup/mydata.zip&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s1">&#39;tmp&#39;</span><span class="p">)</span>                     <span class="c1"># change to an unpacking</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">shutil</span><span class="o">.</span><span class="n">unpack_archive</span><span class="p">(</span><span class="s1">&#39;/var/backup/mydata.zip&#39;</span><span class="p">)</span>  <span class="c1"># recover the data</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">shutil</span><span class="o">.</span><span class="n">get_archive_formats</span><span class="p">())</span>  <span class="c1"># display known formats</span>
<span class="go">[(&#39;bztar&#39;, &quot;bzip2&#39;ed tar-file&quot;),</span>
<span class="go"> (&#39;gztar&#39;, &quot;gzip&#39;ed tar-file&quot;),</span>
<span class="go"> (&#39;tar&#39;, &#39;uncompressed tar file&#39;),</span>
<span class="go"> (&#39;zip&#39;, &#39;ZIP file&#39;)]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">shutil</span><span class="o">.</span><span class="n">register_archive_format</span><span class="p">(</span>     <span class="c1"># register a new archive format</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;xz&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">function</span><span class="o">=</span><span class="n">xz</span><span class="o">.</span><span class="n">compress</span><span class="p">,</span>           <span class="c1"># callable archiving function</span>
<span class="gp">... </span>    <span class="n">extra_args</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;level&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">)],</span>      <span class="c1"># arguments to the function</span>
<span class="gp">... </span>    <span class="n">description</span><span class="o">=</span><span class="s1">&#39;xz compression&#39;</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<p>(Contribución de Tarek Ziadé.)</p>
</section>
<section id="sqlite3">
<h3>sqlite3<a class="headerlink" href="#sqlite3" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El módulo <a class="reference internal" href="../library/sqlite3.html#module-sqlite3" title="sqlite3: A DB-API 2.0 implementation using SQLite 3.x."><code class="xref py py-mod docutils literal notranslate"><span class="pre">sqlite3</span></code></a> se actualizó a la versión 2.6.0 de pysqlite. Tiene dos nuevas capacidades.</p>
<ul class="simple">
<li><p>El atributo <code class="xref py py-attr docutils literal notranslate"><span class="pre">sqlite3.Connection.in_transit</span></code> es verdadero si hay una transacción activa para cambios no confirmados.</p></li>
<li><p>Los métodos <a class="reference internal" href="../library/sqlite3.html#sqlite3.Connection.enable_load_extension" title="sqlite3.Connection.enable_load_extension"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sqlite3.Connection.enable_load_extension()</span></code></a> y <a class="reference internal" href="../library/sqlite3.html#sqlite3.Connection.load_extension" title="sqlite3.Connection.load_extension"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sqlite3.Connection.load_extension()</span></code></a> le permiten cargar extensiones SQLite desde archivos «.so». Una extensión conocida es la extensión de búsqueda de texto completo distribuida con SQLite.</p></li>
</ul>
<p>(Contribución de R. David Murray y Shashwat Anand; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8845">bpo-8845</a>.)</p>
</section>
<section id="html">
<h3>html<a class="headerlink" href="#html" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Se introdujo un nuevo módulo <a class="reference internal" href="../library/html.html#module-html" title="html: Helpers for manipulating HTML."><code class="xref py py-mod docutils literal notranslate"><span class="pre">html</span></code></a> con una sola función, <a class="reference internal" href="../library/html.html#html.escape" title="html.escape"><code class="xref py py-func docutils literal notranslate"><span class="pre">escape()</span></code></a>, que se usa para escapar caracteres reservados del marcado HTML:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">html</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">html</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="s1">&#39;x &gt; 2 &amp;&amp; x &lt; 7&#39;</span><span class="p">)</span>
<span class="go">&#39;x &amp;gt; 2 &amp;amp;&amp;amp; x &amp;lt; 7&#39;</span>
</pre></div>
</div>
</section>
<section id="socket">
<h3>socket<a class="headerlink" href="#socket" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El módulo <a class="reference internal" href="../library/socket.html#module-socket" title="socket: Low-level networking interface."><code class="xref py py-mod docutils literal notranslate"><span class="pre">socket</span></code></a> tiene dos nuevas mejoras.</p>
<ul class="simple">
<li><p>Los objetos de socket ahora tienen un método <a class="reference internal" href="../library/socket.html#socket.socket.detach" title="socket.socket.detach"><code class="xref py py-meth docutils literal notranslate"><span class="pre">detach()</span></code></a> que pone el socket en estado cerrado sin cerrar realmente el descriptor de archivo subyacente. Este último se puede reutilizar para otros fines. (Agregado por Antoine Pitrou; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8524">bpo-8524</a>.)</p></li>
<li><p><a class="reference internal" href="../library/socket.html#socket.create_connection" title="socket.create_connection"><code class="xref py py-func docutils literal notranslate"><span class="pre">socket.create_connection()</span></code></a> ahora admite el protocolo de administración de contexto para consumir incondicionalmente las excepciones <a class="reference internal" href="../library/socket.html#socket.error" title="socket.error"><code class="xref py py-exc docutils literal notranslate"><span class="pre">socket.error</span></code></a> y cerrar el socket cuando haya terminado. (Contribución de Giampaolo Rodolà; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=9794">bpo-9794</a>.)</p></li>
</ul>
</section>
<section id="ssl">
<h3>ssl<a class="headerlink" href="#ssl" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El módulo <a class="reference internal" href="../library/ssl.html#module-ssl" title="ssl: TLS/SSL wrapper for socket objects"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ssl</span></code></a> agregó una serie de características para satisfacer los requisitos comunes para conexiones a Internet seguras (encriptadas, autenticadas):</p>
<ul class="simple">
<li><p>Una nueva clase, <a class="reference internal" href="../library/ssl.html#ssl.SSLContext" title="ssl.SSLContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">SSLContext</span></code></a>, sirve como contenedor para datos SSL persistentes, como configuraciones de protocolo, certificados, claves privadas y varias opciones más. Incluye un <a class="reference internal" href="../library/ssl.html#ssl.SSLContext.wrap_socket" title="ssl.SSLContext.wrap_socket"><code class="xref py py-meth docutils literal notranslate"><span class="pre">wrap_socket()</span></code></a> para crear un socket SSL a partir de un contexto SSL.</p></li>
<li><p>Una nueva función, <a class="reference internal" href="../library/ssl.html#ssl.match_hostname" title="ssl.match_hostname"><code class="xref py py-func docutils literal notranslate"><span class="pre">ssl.match_hostname()</span></code></a>, admite la verificación de identidad del servidor para protocolos de nivel superior mediante la implementación de las reglas de HTTPS (de <span class="target" id="index-42"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc2818.html"><strong>RFC 2818</strong></a>) que también son adecuadas para otros protocolos.</p></li>
<li><p>La función constructora <a class="reference internal" href="../library/ssl.html#ssl.wrap_socket" title="ssl.wrap_socket"><code class="xref py py-func docutils literal notranslate"><span class="pre">ssl.wrap_socket()</span></code></a> ahora toma un argumento <em>ciphers</em>. La cadena <em>ciphers</em> enumera los algoritmos de cifrado permitidos utilizando el formato descrito en la <a class="reference external" href="https://www.openssl.org/docs/man1.0.2/man1/ciphers.html#CIPHER-LIST-FORMAT">documentación de OpenSSL</a>.</p></li>
<li><p>Cuando se vincula con versiones recientes de OpenSSL, el módulo <a class="reference internal" href="../library/ssl.html#module-ssl" title="ssl: TLS/SSL wrapper for socket objects"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ssl</span></code></a> ahora admite la extensión de Server Name Indication (SNI, en español: Indicador del nombre del servidor) para el protocolo TLS, lo que permite que varios» hosts virtuales «utilicen diferentes certificados en un solo puerto IP. Esta extensión solo es compatible en modo cliente y se activa pasando el argumento <em>server_hostname</em> a <a class="reference internal" href="../library/ssl.html#ssl.SSLContext.wrap_socket" title="ssl.SSLContext.wrap_socket"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ssl.SSLContext.wrap_socket()</span></code></a>.</p></li>
<li><p>Se han agregado varias opciones al módulo <a class="reference internal" href="../library/ssl.html#module-ssl" title="ssl: TLS/SSL wrapper for socket objects"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ssl</span></code></a>, como <a class="reference internal" href="../library/ssl.html#ssl.OP_NO_SSLv2" title="ssl.OP_NO_SSLv2"><code class="xref py py-data docutils literal notranslate"><span class="pre">OP_NO_SSLv2</span></code></a> que deshabilita el protocolo SSLv2 inseguro y obsoleto.</p></li>
<li><p>La extensión ahora carga todos los algoritmos de resumen y cifrados OpenSSL. Si algunos certificados SSL no se pueden verificar, se notifican como un error de «algoritmo desconocido».</p></li>
<li><p>La versión de OpenSSL que se está utilizando ahora es accesible usando los atributos del módulo <a class="reference internal" href="../library/ssl.html#ssl.OPENSSL_VERSION" title="ssl.OPENSSL_VERSION"><code class="xref py py-data docutils literal notranslate"><span class="pre">ssl.OPENSSL_VERSION</span></code></a> (una cadena de caracteres), <a class="reference internal" href="../library/ssl.html#ssl.OPENSSL_VERSION_INFO" title="ssl.OPENSSL_VERSION_INFO"><code class="xref py py-data docutils literal notranslate"><span class="pre">ssl.OPENSSL_VERSION_INFO</span></code></a> (una tupla de 5), y <a class="reference internal" href="../library/ssl.html#ssl.OPENSSL_VERSION_NUMBER" title="ssl.OPENSSL_VERSION_NUMBER"><code class="xref py py-data docutils literal notranslate"><span class="pre">ssl.OPENSSL_VERSION_NUMBER</span></code></a> (un número entero).</p></li>
</ul>
<p>(Contribución de Antoine Pitrou en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8850">bpo-8850</a>, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1589">bpo-1589</a>, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8322">bpo-8322</a>, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5639">bpo-5639</a>, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=4870">bpo-4870</a>, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8484">bpo-8484</a>, y <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8321">bpo-8321</a>.)</p>
</section>
<section id="nntp">
<h3>nntp<a class="headerlink" href="#nntp" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El módulo <a class="reference internal" href="../library/nntplib.html#module-nntplib" title="nntplib: NNTP protocol client (requires sockets). (obsoleto)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">nntplib</span></code></a> tiene una implementación renovada con mejoras en la semántica de bytes y texto, así como APIs más prácticas. Estas mejoras rompen la compatibilidad con la versión nntplib en Python 3.1, que en sí misma era parcialmente disfuncional.</p>
<p>También se ha agregado soporte para conexiones seguras a través de TLS implícito (usando <a class="reference internal" href="../library/nntplib.html#nntplib.NNTP_SSL" title="nntplib.NNTP_SSL"><code class="xref py py-class docutils literal notranslate"><span class="pre">nntplib.NNTP_SSL</span></code></a>) y explícito (usando <a class="reference internal" href="../library/nntplib.html#nntplib.NNTP.starttls" title="nntplib.NNTP.starttls"><code class="xref py py-meth docutils literal notranslate"><span class="pre">nntplib.NNTP.starttls()</span></code></a>).</p>
<p>(Contribución de Antoine Pitrou en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=9360">bpo-9360</a> y Andrew Vant en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1926">bpo-1926</a>.)</p>
</section>
<section id="certificates">
<h3>certificados<a class="headerlink" href="#certificates" title="Enlazar permanentemente con este título">¶</a></h3>
<p><a class="reference internal" href="../library/http.client.html#http.client.HTTPSConnection" title="http.client.HTTPSConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">http.client.HTTPSConnection</span></code></a>, <a class="reference internal" href="../library/urllib.request.html#urllib.request.HTTPSHandler" title="urllib.request.HTTPSHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">urllib.request.HTTPSHandler</span></code></a> y <a class="reference internal" href="../library/urllib.request.html#urllib.request.urlopen" title="urllib.request.urlopen"><code class="xref py py-func docutils literal notranslate"><span class="pre">urllib.request.urlopen()</span></code></a> ahora toman argumentos opcionales para permitir la comprobación del certificado del servidor con un conjunto de Autoridades de Certificación recomendado en usos públicos de HTTPS.</p>
<p>(Agregado por Antoine Pitrou, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=9003">bpo-9003</a>.)</p>
</section>
<section id="imaplib">
<h3>imaplib<a class="headerlink" href="#imaplib" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Se ha agregado soporte para TLS explícito en conexiones IMAP4 estándar a través del nuevo método <a class="reference internal" href="../library/imaplib.html#imaplib.IMAP4.starttls" title="imaplib.IMAP4.starttls"><code class="xref py py-mod docutils literal notranslate"><span class="pre">imaplib.IMAP4.starttls</span></code></a>.</p>
<p>(Contribución de Lorenzo M. Catucci y Antoine Pitrou, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=4471">bpo-4471</a>.)</p>
</section>
<section id="http-client">
<h3>http.client<a class="headerlink" href="#http-client" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Hubo una serie de pequeñas mejoras de API en el módulo <a class="reference internal" href="../library/http.client.html#module-http.client" title="http.client: HTTP and HTTPS protocol client (requires sockets)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">http.client</span></code></a>. Las respuestas simples HTTP 0.9 de estilo antiguo ya no son compatibles y el parámetro <em>strict</em> está obsoleto en todas las clases.</p>
<p>Las clases <a class="reference internal" href="../library/http.client.html#http.client.HTTPConnection" title="http.client.HTTPConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">HTTPConnection</span></code></a> y <a class="reference internal" href="../library/http.client.html#http.client.HTTPSConnection" title="http.client.HTTPSConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">HTTPSConnection</span></code></a> ahora tienen un parámetro <em>source_address</em> para una tupla (host, port) que indica desde dónde se realiza la conexión HTTP.</p>
<p>Se agregó soporte para verificación de certificados y hosts virtuales HTTPS a <a class="reference internal" href="../library/http.client.html#http.client.HTTPSConnection" title="http.client.HTTPSConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">HTTPSConnection</span></code></a>.</p>
<p>El método <a class="reference internal" href="../library/http.client.html#http.client.HTTPConnection.request" title="http.client.HTTPConnection.request"><code class="xref py py-meth docutils literal notranslate"><span class="pre">request()</span></code></a> en los objetos de conexión permitía un argumento <em>body</em> opcional para que un <a class="reference internal" href="../glossary.html#term-file-object"><span class="xref std std-term">file object</span></a> pudiera usarse para proporcionar el contenido de la solicitud. Convenientemente, el argumento <em>body</em> ahora también acepta un objeto <a class="reference internal" href="../glossary.html#term-iterable"><span class="xref std std-term">iterable</span></a> siempre que incluya un encabezado explícito <code class="docutils literal notranslate"><span class="pre">Content-Length</span></code>. Esta interfaz ampliada es mucho más flexible que antes.</p>
<p>Para establecer una conexión HTTPS a través de un servidor proxy, existe un nuevo método <a class="reference internal" href="../library/http.client.html#http.client.HTTPConnection.set_tunnel" title="http.client.HTTPConnection.set_tunnel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_tunnel()</span></code></a> que establece el host y el puerto para el túnel HTTP Connect.</p>
<p>Para que coincida con el comportamiento de <a class="reference internal" href="../library/http.server.html#module-http.server" title="http.server: HTTP server and request handlers."><code class="xref py py-mod docutils literal notranslate"><span class="pre">http.server</span></code></a>, la biblioteca de cliente HTTP ahora también codifica encabezados con codificación ISO-8859-1 (Latin-1). Ya lo estaba haciendo para los encabezados entrantes, por lo que ahora el comportamiento es coherente para el tráfico entrante y saliente. (Véase el trabajo de Armin Ronacher en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=10980">bpo-10980</a>)</p>
</section>
<section id="unittest">
<h3>unittest<a class="headerlink" href="#unittest" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El módulo unittest tiene una serie de mejoras con soporte para descubrimiento de pruebas para paquetes, una experimentación más sencilla en el indicador interactivo, nuevos métodos de casos de prueba, mensajes de diagnóstico mejorados para fallas en las pruebas y mejores nombres de métodos.</p>
<ul>
<li><p>La llamada de línea de comandos <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">unittest</span></code> ahora puede aceptar rutas de archivo en lugar de nombres de módulos para ejecutar pruebas específicas (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=10620">bpo-10620</a>). El nuevo descubrimiento de pruebas puede encontrar pruebas dentro de los paquetes, localizando cualquier prueba que se pueda importar desde el directorio de nivel superior. El directorio de nivel superior se puede especificar con la opción <code class="docutils literal notranslate"><span class="pre">-t</span></code>, un patrón para hacer coincidir archivos con <code class="docutils literal notranslate"><span class="pre">-p</span></code> y un directorio para iniciar el descubrimiento con <code class="docutils literal notranslate"><span class="pre">-s</span></code>:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python -m unittest discover -s my_proj_dir -p _test.py
</pre></div>
</div>
<p>(Contribución de Michael Foord.)</p>
</li>
<li><p>La experimentación en el indicador interactivo ahora es más fácil porque la clase <code class="xref py py-class docutils literal notranslate"><span class="pre">unittest.case.TestCase</span></code> ahora se puede instanciar sin argumentos:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">unittest</span> <span class="kn">import</span> <span class="n">TestCase</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">TestCase</span><span class="p">()</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="mi">8</span><span class="p">)</span>
</pre></div>
</div>
<p>(Contribución de Michael Foord.)</p>
</li>
<li><p>El módulo <a class="reference internal" href="../library/unittest.html#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal notranslate"><span class="pre">unittest</span></code></a> tiene dos métodos nuevos, <a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertWarns" title="unittest.TestCase.assertWarns"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertWarns()</span></code></a> y <a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertWarnsRegex" title="unittest.TestCase.assertWarnsRegex"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertWarnsRegex()</span></code></a> para verificar que un tipo de advertencia dado es activado por el código bajo prueba:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertWarns</span><span class="p">(</span><span class="ne">DeprecationWarning</span><span class="p">):</span>
    <span class="n">legacy_function</span><span class="p">(</span><span class="s1">&#39;XYZ&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>(Contribución de Antoine Pitrou, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=9754">bpo-9754</a>.)</p>
<p>Otro método nuevo, <a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertCountEqual" title="unittest.TestCase.assertCountEqual"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertCountEqual()</span></code></a> se usa para comparar dos iterables para determinar si sus conteos de elementos son iguales (si los mismos elementos están presentes con el mismo número de ocurrencias independientemente del orden):</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_anagram</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assertCountEqual</span><span class="p">(</span><span class="s1">&#39;algorithm&#39;</span><span class="p">,</span> <span class="s1">&#39;logarithm&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>(Contribución por Raymond Hettinger.)</p>
</li>
<li><p>Una característica principal del módulo unittest es un esfuerzo por producir diagnósticos significativos cuando falla una prueba. Cuando es posible, la falla se registra junto con una diferencia de la salida. Esto es especialmente útil para analizar archivos de registro de ejecuciones de prueba fallidas. Sin embargo, dado que las diferencias en ocasiones pueden ser voluminosas, hay un nuevo atributo <a class="reference internal" href="../library/unittest.html#unittest.TestCase.maxDiff" title="unittest.TestCase.maxDiff"><code class="xref py py-attr docutils literal notranslate"><span class="pre">maxDiff</span></code></a> que establece la longitud máxima de las diferencias mostradas.</p></li>
<li><p>Además, los nombres de los métodos en el módulo se han sometido a una serie de limpiezas.</p>
<p>Por ejemplo, <a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertRegex" title="unittest.TestCase.assertRegex"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertRegex()</span></code></a> es el nuevo nombre de <code class="xref py py-meth docutils literal notranslate"><span class="pre">assertRegexpMatches()</span></code> que fue mal nombrado porque la prueba usa <a class="reference internal" href="../library/re.html#re.search" title="re.search"><code class="xref py py-func docutils literal notranslate"><span class="pre">re.search()</span></code></a>, no <a class="reference internal" href="../library/re.html#re.match" title="re.match"><code class="xref py py-func docutils literal notranslate"><span class="pre">re.match()</span></code></a>. Otros métodos que usan expresiones regulares ahora se nombran usando la forma corta «Regex» en lugar de «Regexp» – esto coincide con los nombres usados en otras implementaciones de unittest, coincide con el nombre antiguo de Python para el módulo <a class="reference internal" href="../library/re.html#module-re" title="re: Regular expression operations."><code class="xref py py-mod docutils literal notranslate"><span class="pre">re</span></code></a>, y utiliza inequívocamente camel-case.</p>
<p>(Contribución de Raymond Hettinger e implementado por Ezio Melotti.)</p>
</li>
<li><p>Para mejorar la coherencia, algunos alias de métodos antiguos se están deprecando en favor de los nombres preferidos:</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 51%" />
<col style="width: 49%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Old Name</p></th>
<th class="head"><p>Preferred Name</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">assert_()</span></code></p></td>
<td><p><a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertTrue" title="unittest.TestCase.assertTrue"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertTrue()</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertEquals()</span></code></p></td>
<td><p><a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertEqual" title="unittest.TestCase.assertEqual"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertEqual()</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertNotEquals()</span></code></p></td>
<td><p><a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertNotEqual" title="unittest.TestCase.assertNotEqual"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertNotEqual()</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertAlmostEquals()</span></code></p></td>
<td><p><a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertAlmostEqual" title="unittest.TestCase.assertAlmostEqual"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertAlmostEqual()</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertNotAlmostEquals()</span></code></p></td>
<td><p><a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertNotAlmostEqual" title="unittest.TestCase.assertNotAlmostEqual"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertNotAlmostEqual()</span></code></a></p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Asimismo, se espera que los métodos <code class="docutils literal notranslate"><span class="pre">TestCase.fail*</span></code> obsoletos en Python 3.1 se eliminen en Python 3.3. También vea la sección <a class="reference internal" href="../library/unittest.html#deprecated-aliases"><span class="std std-ref">Alias obsoletos</span></a> en la documentación <a class="reference internal" href="../library/unittest.html#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal notranslate"><span class="pre">unittest</span></code></a>.</p>
<p>(Contribución de Ezio Melotti; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=9424">bpo-9424</a>.)</p>
</li>
<li><p>El método <code class="xref py py-meth docutils literal notranslate"><span class="pre">assertDictContainsSubset()</span></code> quedó obsoleto porque porque estaba mal implementado con los argumentos en el orden incorrecto. Esto creó ilusiones ópticas difíciles de depurar en las que pruebas como <code class="docutils literal notranslate"><span class="pre">TestCase().assertDictContainsSubset({'a':1,</span> <span class="pre">'b':2},</span> <span class="pre">{'a':1})</span></code> fallarían.</p>
<p>(Contribución por Raymond Hettinger.)</p>
</li>
</ul>
</section>
<section id="random">
<h3>random<a class="headerlink" href="#random" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Los métodos enteros en el módulo <a class="reference internal" href="../library/random.html#module-random" title="random: Generate pseudo-random numbers with various common distributions."><code class="xref py py-mod docutils literal notranslate"><span class="pre">random</span></code></a> ahora hacen un mejor trabajo al producir distribuciones uniformes. Anteriormente, calculaban las selecciones con <code class="docutils literal notranslate"><span class="pre">int(n*random())</span></code> que tenía un ligero sesgo siempre que <em>n</em> no era una potencia de dos. Ahora, se realizan selecciones múltiples desde un rango hasta la siguiente potencia de dos y una selección se mantiene solo cuando cae dentro del rango <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">&lt;=</span> <span class="pre">x</span> <span class="pre">&lt;</span> <span class="pre">n</span></code>. Las funciones y métodos afectados son <a class="reference internal" href="../library/random.html#random.randrange" title="random.randrange"><code class="xref py py-func docutils literal notranslate"><span class="pre">randrange()</span></code></a>, <a class="reference internal" href="../library/random.html#random.randint" title="random.randint"><code class="xref py py-func docutils literal notranslate"><span class="pre">randint()</span></code></a>, <a class="reference internal" href="../library/random.html#random.choice" title="random.choice"><code class="xref py py-func docutils literal notranslate"><span class="pre">choice()</span></code></a>, <a class="reference internal" href="../library/random.html#random.shuffle" title="random.shuffle"><code class="xref py py-func docutils literal notranslate"><span class="pre">shuffle()</span></code></a> y <a class="reference internal" href="../library/random.html#random.sample" title="random.sample"><code class="xref py py-func docutils literal notranslate"><span class="pre">sample()</span></code></a>.</p>
<p>(Contribución de Raymond Hettinger; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=9025">bpo-9025</a>.)</p>
</section>
<section id="poplib">
<h3>poplib<a class="headerlink" href="#poplib" title="Enlazar permanentemente con este título">¶</a></h3>
<p><a class="reference internal" href="../library/poplib.html#poplib.POP3_SSL" title="poplib.POP3_SSL"><code class="xref py py-class docutils literal notranslate"><span class="pre">POP3_SSL</span></code></a> la clase ahora acepta un parámetro <em>context</em>, que es un objeto <a class="reference internal" href="../library/ssl.html#ssl.SSLContext" title="ssl.SSLContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">ssl.SSLContext</span></code></a> que permite agrupar opciones de configuración SSL, certificados y claves privadas en una única estructura (potencialmente de larga duración) .</p>
<p>(Contribución de Giampaolo Rodolà; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8807">bpo-8807</a>.)</p>
</section>
<section id="asyncore">
<h3>asyncore<a class="headerlink" href="#asyncore" title="Enlazar permanentemente con este título">¶</a></h3>
<p><a class="reference internal" href="../library/asyncore.html#asyncore.dispatcher" title="asyncore.dispatcher"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncore.dispatcher</span></code></a> ahora proporciona un método <a class="reference internal" href="../library/asyncore.html#asyncore.dispatcher.handle_accepted" title="asyncore.dispatcher.handle_accepted"><code class="xref py py-meth docutils literal notranslate"><span class="pre">handle_accepted()</span></code></a> que devuelve un par <code class="docutils literal notranslate"><span class="pre">(sock,</span> <span class="pre">addr)</span></code> al que se llama cuando se ha establecido realmente una conexión con un nuevo extremo remoto. Se supone que esto se usa como reemplazo del antiguo <a class="reference internal" href="../library/asyncore.html#asyncore.dispatcher.handle_accept" title="asyncore.dispatcher.handle_accept"><code class="xref py py-meth docutils literal notranslate"><span class="pre">handle_accept()</span></code></a> y evita que el usuario llame directamente a <a class="reference internal" href="../library/asyncore.html#asyncore.dispatcher.accept" title="asyncore.dispatcher.accept"><code class="xref py py-meth docutils literal notranslate"><span class="pre">accept()</span></code></a>.</p>
<p>(Contribución de Giampaolo Rodolà; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=6706">bpo-6706</a>.)</p>
</section>
<section id="tempfile">
<h3>tempfile<a class="headerlink" href="#tempfile" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El módulo <a class="reference internal" href="../library/tempfile.html#module-tempfile" title="tempfile: Generate temporary files and directories."><code class="xref py py-mod docutils literal notranslate"><span class="pre">tempfile</span></code></a> tiene un nuevo gestor de contexto, <a class="reference internal" href="../library/tempfile.html#tempfile.TemporaryDirectory" title="tempfile.TemporaryDirectory"><code class="xref py py-class docutils literal notranslate"><span class="pre">TemporaryDirectory</span></code></a> que proporciona una limpieza determinista fácil de directorios temporales</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tmpdirname</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;created temporary dir:&#39;</span><span class="p">,</span> <span class="n">tmpdirname</span><span class="p">)</span>
</pre></div>
</div>
<p>(Contribución de Neil Schemenauer y Nick Coghlan; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5178">bpo-5178</a>.)</p>
</section>
<section id="inspect">
<h3>inspect<a class="headerlink" href="#inspect" title="Enlazar permanentemente con este título">¶</a></h3>
<ul>
<li><p>El módulo <a class="reference internal" href="../library/inspect.html#module-inspect" title="inspect: Extract information and source code from live objects."><code class="xref py py-mod docutils literal notranslate"><span class="pre">inspect</span></code></a> tiene una nueva función <a class="reference internal" href="../library/inspect.html#inspect.getgeneratorstate" title="inspect.getgeneratorstate"><code class="xref py py-func docutils literal notranslate"><span class="pre">getgeneratorstate()</span></code></a> para identificar fácilmente el estado actual de un generador iterador:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">inspect</span> <span class="kn">import</span> <span class="n">getgeneratorstate</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">gen</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">yield</span> <span class="s1">&#39;demo&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">gen</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">getgeneratorstate</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="go">&#39;GEN_CREATED&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">next</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="go">&#39;demo&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">getgeneratorstate</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="go">&#39;GEN_SUSPENDED&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">next</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">getgeneratorstate</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="go">&#39;GEN_CLOSED&#39;</span>
</pre></div>
</div>
<p>(Contribución de Rodolpho Eckhardt y Nick Coghlan, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=10220">bpo-10220</a>.)</p>
</li>
<li><p>Para admitir búsquedas sin la posibilidad de activar un atributo dinámico, el módulo <a class="reference internal" href="../library/inspect.html#module-inspect" title="inspect: Extract information and source code from live objects."><code class="xref py py-mod docutils literal notranslate"><span class="pre">inspect</span></code></a> tiene una nueva función, <a class="reference internal" href="../library/inspect.html#inspect.getattr_static" title="inspect.getattr_static"><code class="xref py py-func docutils literal notranslate"><span class="pre">getattr_static()</span></code></a>. A diferencia de <a class="reference internal" href="../library/functions.html#hasattr" title="hasattr"><code class="xref py py-func docutils literal notranslate"><span class="pre">hasattr()</span></code></a>, esta es una verdadera búsqueda de solo lectura, garantizada que no cambiará de estado mientras está buscando:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
<span class="gp">... </span>    <span class="nd">@property</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Running&#39;</span><span class="p">)</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="mi">10</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">getattr</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">)</span>
<span class="go">Running</span>
<span class="go">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inspect</span><span class="o">.</span><span class="n">getattr_static</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">)</span>
<span class="go">&lt;property object at 0x1022bd788&gt;</span>
</pre></div>
</div>
</li>
</ul>
<blockquote>
<div><p>(Contribución de Michael Foord.)</p>
</div></blockquote>
</section>
<section id="pydoc">
<h3>pydoc<a class="headerlink" href="#pydoc" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El módulo <a class="reference internal" href="../library/pydoc.html#module-pydoc" title="pydoc: Documentation generator and online help system."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pydoc</span></code></a> ahora proporciona una interfaz de servidor web muy mejorada, así como una nueva opción de línea de comandos <code class="docutils literal notranslate"><span class="pre">-b</span></code> para abrir automáticamente una ventana del navegador para mostrar ese servidor:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pydoc3.2 -b
</pre></div>
</div>
<p>(Contribución de Ron Adam; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=2001">bpo-2001</a>.)</p>
</section>
<section id="dis">
<h3>dis<a class="headerlink" href="#dis" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El módulo <a class="reference internal" href="../library/dis.html#module-dis" title="dis: Disassembler for Python bytecode."><code class="xref py py-mod docutils literal notranslate"><span class="pre">dis</span></code></a> obtuvo dos nuevas funciones para inspeccionar código, <a class="reference internal" href="../library/dis.html#dis.code_info" title="dis.code_info"><code class="xref py py-func docutils literal notranslate"><span class="pre">code_info()</span></code></a> y <a class="reference internal" href="../library/dis.html#dis.show_code" title="dis.show_code"><code class="xref py py-func docutils literal notranslate"><span class="pre">show_code()</span></code></a>. Ambas proporcionan información detallada del objeto de código para la función, método, cadena de código fuente o objeto de código suministrados. El primero retorna una cadena de caracteres y el segundo la imprime:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">dis</span><span class="o">,</span> <span class="nn">random</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dis</span><span class="o">.</span><span class="n">show_code</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">)</span>
<span class="go">Name:              choice</span>
<span class="go">Filename:          /Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/random.py</span>
<span class="go">Argument count:    2</span>
<span class="go">Kw-only arguments: 0</span>
<span class="go">Number of locals:  3</span>
<span class="go">Stack size:        11</span>
<span class="go">Flags:             OPTIMIZED, NEWLOCALS, NOFREE</span>
<span class="go">Constants:</span>
<span class="go">   0: &#39;Choose a random element from a non-empty sequence.&#39;</span>
<span class="go">   1: &#39;Cannot choose from an empty sequence&#39;</span>
<span class="go">Names:</span>
<span class="go">   0: _randbelow</span>
<span class="go">   1: len</span>
<span class="go">   2: ValueError</span>
<span class="go">   3: IndexError</span>
<span class="go">Variable names:</span>
<span class="go">   0: self</span>
<span class="go">   1: seq</span>
<span class="go">   2: i</span>
</pre></div>
</div>
<p>Además, la función <a class="reference internal" href="../library/dis.html#dis.dis" title="dis.dis"><code class="xref py py-func docutils literal notranslate"><span class="pre">dis()</span></code></a> ahora acepta argumentos de cadena para que el modismo común <code class="docutils literal notranslate"><span class="pre">dis(compile(s,</span> <span class="pre">'',</span> <span class="pre">'eval'))</span></code> se pueda abreviar a <code class="docutils literal notranslate"><span class="pre">dis(s)</span></code>:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dis</span><span class="p">(</span><span class="s1">&#39;3*x+1 if x%2==1 else x//2&#39;</span><span class="p">)</span>
<span class="go">  1           0 LOAD_NAME                0 (x)</span>
<span class="go">              3 LOAD_CONST               0 (2)</span>
<span class="go">              6 BINARY_MODULO</span>
<span class="go">              7 LOAD_CONST               1 (1)</span>
<span class="go">             10 COMPARE_OP               2 (==)</span>
<span class="go">             13 POP_JUMP_IF_FALSE       28</span>
<span class="go">             16 LOAD_CONST               2 (3)</span>
<span class="go">             19 LOAD_NAME                0 (x)</span>
<span class="go">             22 BINARY_MULTIPLY</span>
<span class="go">             23 LOAD_CONST               1 (1)</span>
<span class="go">             26 BINARY_ADD</span>
<span class="go">             27 RETURN_VALUE</span>
<span class="go">        &gt;&gt;   28 LOAD_NAME                0 (x)</span>
<span class="go">             31 LOAD_CONST               0 (2)</span>
<span class="go">             34 BINARY_FLOOR_DIVIDE</span>
<span class="go">             35 RETURN_VALUE</span>
</pre></div>
</div>
<p>En conjunto, estas mejoras facilitan explorar cómo se implementa CPython y ver por sí mismo qué hace la sintaxis del lenguaje bajo el capó.</p>
<p>(Contribución de Nick Coghlan en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=9147">bpo-9147</a>.)</p>
</section>
<section id="dbm">
<h3>dbm<a class="headerlink" href="#dbm" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Todos los módulos de base de datos ahora admiten los métodos <code class="xref py py-meth docutils literal notranslate"><span class="pre">get()</span></code> y <code class="xref py py-meth docutils literal notranslate"><span class="pre">setdefault()</span></code>.</p>
<p>(Sugerido por Ray Allen en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=9523">bpo-9523</a>.)</p>
</section>
<section id="ctypes">
<h3>ctypes<a class="headerlink" href="#ctypes" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Un nuevo tipo, <a class="reference internal" href="../library/ctypes.html#ctypes.c_ssize_t" title="ctypes.c_ssize_t"><code class="xref py py-class docutils literal notranslate"><span class="pre">ctypes.c_ssize_t</span></code></a> representa el tipo de datos C <code class="xref c c-type docutils literal notranslate"><span class="pre">ssize_t</span></code>.</p>
</section>
<section id="site">
<h3>site<a class="headerlink" href="#site" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El módulo <a class="reference internal" href="../library/site.html#module-site" title="site: Module responsible for site-specific configuration."><code class="xref py py-mod docutils literal notranslate"><span class="pre">site</span></code></a> tiene tres nuevas funciones útiles para informar sobre los detalles de una determinada instalación de Python.</p>
<ul class="simple">
<li><p><a class="reference internal" href="../library/site.html#site.getsitepackages" title="site.getsitepackages"><code class="xref py py-func docutils literal notranslate"><span class="pre">getsitepackages()</span></code></a> enumera todos los directorios de paquetes de sitios globales.</p></li>
<li><p><a class="reference internal" href="../library/site.html#site.getuserbase" title="site.getuserbase"><code class="xref py py-func docutils literal notranslate"><span class="pre">getuserbase()</span></code></a> informa sobre el directorio base del usuario donde se pueden almacenar los datos.</p></li>
<li><p><a class="reference internal" href="../library/site.html#site.getusersitepackages" title="site.getusersitepackages"><code class="xref py py-func docutils literal notranslate"><span class="pre">getusersitepackages()</span></code></a> revela la ruta del directorio de paquetes de sitio específico del usuario.</p></li>
</ul>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">site</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">site</span><span class="o">.</span><span class="n">getsitepackages</span><span class="p">()</span>
<span class="go">[&#39;/Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/site-packages&#39;,</span>
<span class="go"> &#39;/Library/Frameworks/Python.framework/Versions/3.2/lib/site-python&#39;,</span>
<span class="go"> &#39;/Library/Python/3.2/site-packages&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">site</span><span class="o">.</span><span class="n">getuserbase</span><span class="p">()</span>
<span class="go">&#39;/Users/raymondhettinger/Library/Python/3.2&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">site</span><span class="o">.</span><span class="n">getusersitepackages</span><span class="p">()</span>
<span class="go">&#39;/Users/raymondhettinger/Library/Python/3.2/lib/python/site-packages&#39;</span>
</pre></div>
</div>
<p>Convenientemente, se puede acceder a algunas de las funciones del sitio directamente desde la línea de comandos:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python -m site --user-base
<span class="go">/Users/raymondhettinger/.local</span>
<span class="gp">$ </span>python -m site --user-site
<span class="go">/Users/raymondhettinger/.local/lib/python3.2/site-packages</span>
</pre></div>
</div>
<p>(Contribución de Tarek Ziadé en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=6693">bpo-6693</a>.)</p>
</section>
<section id="sysconfig">
<h3>sysconfig<a class="headerlink" href="#sysconfig" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El nuevo módulo <a class="reference internal" href="../library/sysconfig.html#module-sysconfig" title="sysconfig: Python's configuration information"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sysconfig</span></code></a> hace que sea sencillo descubrir rutas de instalación y variables de configuración que varían entre plataformas e instalaciones.</p>
<p>El módulo ofrece acceso a funciones de acceso simple para información de plataforma y versión:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../library/sysconfig.html#sysconfig.get_platform" title="sysconfig.get_platform"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_platform()</span></code></a> retornando valores como <em>linux-i586</em> o <em>macosx-10.6-ppc</em>.</p></li>
<li><p><a class="reference internal" href="../library/sysconfig.html#sysconfig.get_python_version" title="sysconfig.get_python_version"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_python_version()</span></code></a> retorna una cadena de versión de Python como» 3.2 «.</p></li>
</ul>
<p>También proporciona acceso a las rutas y variables correspondientes a uno de los siete esquemas con nombre utilizados por <a class="reference internal" href="../library/distutils.html#module-distutils" title="distutils: Support for building and installing Python modules into an existing Python installation."><code class="xref py py-mod docutils literal notranslate"><span class="pre">distutils</span></code></a>. Estos incluyen <em>posix_prefix</em>, <em>posix_home</em>, <em>posix_user</em>, <em>nt</em>, <em>nt_user *, *os2</em>, <em>os2_home</em>:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../library/sysconfig.html#sysconfig.get_paths" title="sysconfig.get_paths"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_paths()</span></code></a> crea un diccionario que contiene las rutas de instalación para el esquema de instalación actual.</p></li>
<li><p><a class="reference internal" href="../library/sysconfig.html#sysconfig.get_config_vars" title="sysconfig.get_config_vars"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_config_vars()</span></code></a> retorna un diccionario de variables específicas de la plataforma.</p></li>
</ul>
<p>También hay una conveniente interfaz de línea de comandos:</p>
<div class="highlight-doscon notranslate"><div class="highlight"><pre><span></span><span class="gp">C:\Python32&gt;</span>python -m sysconfig
<span class="go">Platform: &quot;win32&quot;</span>
<span class="go">Python version: &quot;3.2&quot;</span>
<span class="go">Current installation scheme: &quot;nt&quot;</span>

<span class="go">Paths:</span>
<span class="go">        data = &quot;C:\Python32&quot;</span>
<span class="go">        include = &quot;C:\Python32\Include&quot;</span>
<span class="go">        platinclude = &quot;C:\Python32\Include&quot;</span>
<span class="go">        platlib = &quot;C:\Python32\Lib\site-packages&quot;</span>
<span class="go">        platstdlib = &quot;C:\Python32\Lib&quot;</span>
<span class="go">        purelib = &quot;C:\Python32\Lib\site-packages&quot;</span>
<span class="go">        scripts = &quot;C:\Python32\Scripts&quot;</span>
<span class="go">        stdlib = &quot;C:\Python32\Lib&quot;</span>

<span class="go">Variables:</span>
<span class="go">        BINDIR = &quot;C:\Python32&quot;</span>
<span class="go">        BINLIBDEST = &quot;C:\Python32\Lib&quot;</span>
<span class="go">        EXE = &quot;.exe&quot;</span>
<span class="go">        INCLUDEPY = &quot;C:\Python32\Include&quot;</span>
<span class="go">        LIBDEST = &quot;C:\Python32\Lib&quot;</span>
<span class="go">        SO = &quot;.pyd&quot;</span>
<span class="go">        VERSION = &quot;32&quot;</span>
<span class="go">        abiflags = &quot;&quot;</span>
<span class="go">        base = &quot;C:\Python32&quot;</span>
<span class="go">        exec_prefix = &quot;C:\Python32&quot;</span>
<span class="go">        platbase = &quot;C:\Python32&quot;</span>
<span class="go">        prefix = &quot;C:\Python32&quot;</span>
<span class="go">        projectbase = &quot;C:\Python32&quot;</span>
<span class="go">        py_version = &quot;3.2&quot;</span>
<span class="go">        py_version_nodot = &quot;32&quot;</span>
<span class="go">        py_version_short = &quot;3.2&quot;</span>
<span class="go">        srcdir = &quot;C:\Python32&quot;</span>
<span class="go">        userbase = &quot;C:\Documents and Settings\Raymond\Application Data\Python&quot;</span>
</pre></div>
</div>
<p>(Sacado de Distutils por Tarek Ziadé.)</p>
</section>
<section id="pdb">
<h3>pdb<a class="headerlink" href="#pdb" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El módulo depurador <a class="reference internal" href="../library/pdb.html#module-pdb" title="pdb: The Python debugger for interactive interpreters."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pdb</span></code></a> obtuvo una serie de mejoras de usabilidad:</p>
<ul class="simple">
<li><p><code class="file docutils literal notranslate"><span class="pre">pdb.py</span></code> ahora tiene una opción <code class="docutils literal notranslate"><span class="pre">-c</span></code> que ejecuta comandos como se indica en un archivo de script <code class="file docutils literal notranslate"><span class="pre">.pdbrc</span></code>.</p></li>
<li><p>Un archivo de secuencia de comandos <code class="file docutils literal notranslate"><span class="pre">.pdbrc</span></code> puede contener comandos <code class="docutils literal notranslate"><span class="pre">continue</span></code> y <code class="docutils literal notranslate"><span class="pre">next</span></code> que continúan depurando.</p></li>
<li><p>El constructor de la clase <code class="xref py py-class docutils literal notranslate"><span class="pre">Pdb</span></code> ahora acepta un argumento <em>nosigint</em>.</p></li>
<li><p>Nuevos comandos: <code class="docutils literal notranslate"><span class="pre">l(list)</span></code>, <code class="docutils literal notranslate"><span class="pre">ll(long</span> <span class="pre">list)</span></code> y <code class="docutils literal notranslate"><span class="pre">source</span></code> para enumerar el código fuente.</p></li>
<li><p>Nuevos comandos: <code class="docutils literal notranslate"><span class="pre">display</span></code> y <code class="docutils literal notranslate"><span class="pre">undisplay</span></code> para mostrar u ocultar el valor de una expresión si ha cambiado.</p></li>
<li><p>Nuevo comando: <code class="docutils literal notranslate"><span class="pre">interact</span></code> para iniciar un intérprete interactivo que contiene los nombres globales y locales que se encuentran en el alcance actual.</p></li>
<li><p>Los puntos de interrupción se pueden borrar por número de punto de interrupción.</p></li>
</ul>
<p>(Contribución de Georg Brandl, Antonio Cuni e Ilya Sandler.)</p>
</section>
<section id="configparser">
<h3>configparser<a class="headerlink" href="#configparser" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El módulo <a class="reference internal" href="../library/configparser.html#module-configparser" title="configparser: Configuration file parser."><code class="xref py py-mod docutils literal notranslate"><span class="pre">configparser</span></code></a> se modificó para mejorar la usabilidad y la previsibilidad del analizador predeterminado y su sintaxis INI compatible. La antigua clase <code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigParser</span></code> fue eliminada en favor de <code class="xref py py-class docutils literal notranslate"><span class="pre">SafeConfigParser</span></code> que a su vez ha sido renombrada a <a class="reference internal" href="../library/configparser.html#configparser.ConfigParser" title="configparser.ConfigParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigParser</span></code></a>. La compatibilidad con comentarios en línea ahora está desactivada de forma predeterminada y no se permiten duplicados de secciones u opciones en una única fuente de configuración.</p>
<p>Los analizadores de configuración obtuvieron una nueva API basada en el protocolo de mapeo:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">parser</span> <span class="o">=</span> <span class="n">ConfigParser</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parser</span><span class="o">.</span><span class="n">read_string</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="gp">... </span><span class="s2">[DEFAULT]</span>
<span class="gp">... </span><span class="s2">location = upper left</span>
<span class="gp">... </span><span class="s2">visible = yes</span>
<span class="gp">... </span><span class="s2">editable = no</span>
<span class="gp">... </span><span class="s2">color = blue</span>
<span class="gp">...</span><span class="s2"></span>
<span class="gp">... </span><span class="s2">[main]</span>
<span class="gp">... </span><span class="s2">title = Main Menu</span>
<span class="gp">... </span><span class="s2">color = green</span>
<span class="gp">...</span><span class="s2"></span>
<span class="gp">... </span><span class="s2">[options]</span>
<span class="gp">... </span><span class="s2">title = Options</span>
<span class="gp">... </span><span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parser</span><span class="p">[</span><span class="s1">&#39;main&#39;</span><span class="p">][</span><span class="s1">&#39;color&#39;</span><span class="p">]</span>
<span class="go">&#39;green&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parser</span><span class="p">[</span><span class="s1">&#39;main&#39;</span><span class="p">][</span><span class="s1">&#39;editable&#39;</span><span class="p">]</span>
<span class="go">&#39;no&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">section</span> <span class="o">=</span> <span class="n">parser</span><span class="p">[</span><span class="s1">&#39;options&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">section</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span>
<span class="go">&#39;Options&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">section</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Options (editable: </span><span class="si">%(editable)s</span><span class="s1">)&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">section</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span>
<span class="go">&#39;Options (editable: no)&#39;</span>
</pre></div>
</div>
<p>La nueva API se implementa sobre la API clásica, por lo que las subclases de analizadores personalizados deberían poder usarla sin modificaciones.</p>
<p>La estructura de archivos INI aceptada por los analizadores de configuración ahora se puede personalizar. Los usuarios pueden especificar opciones alternativas/delimitadores de valores y prefijos de comentarios, cambiar el nombre de la sección <em>DEFAULT</em> o cambiar la sintaxis de interpolación.</p>
<p>Hay soporte para la interpolación conectable que incluye un controlador de interpolación adicional <a class="reference internal" href="../library/configparser.html#configparser.ExtendedInterpolation" title="configparser.ExtendedInterpolation"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExtendedInterpolation</span></code></a>:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">parser</span> <span class="o">=</span> <span class="n">ConfigParser</span><span class="p">(</span><span class="n">interpolation</span><span class="o">=</span><span class="n">ExtendedInterpolation</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parser</span><span class="o">.</span><span class="n">read_dict</span><span class="p">({</span><span class="s1">&#39;buildout&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;directory&#39;</span><span class="p">:</span> <span class="s1">&#39;/home/ambv/zope9&#39;</span><span class="p">},</span>
<span class="gp">... </span>                  <span class="s1">&#39;custom&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;prefix&#39;</span><span class="p">:</span> <span class="s1">&#39;/usr/local&#39;</span><span class="p">}})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parser</span><span class="o">.</span><span class="n">read_string</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="gp">... </span><span class="s2">[buildout]</span>
<span class="gp">... </span><span class="s2">parts =</span>
<span class="gp">... </span><span class="s2">  zope9</span>
<span class="gp">... </span><span class="s2">  instance</span>
<span class="gp">... </span><span class="s2">find-links =</span>
<span class="gp">... </span><span class="s2">  ${buildout:directory}/downloads/dist</span>
<span class="gp">...</span><span class="s2"></span>
<span class="gp">... </span><span class="s2">[zope9]</span>
<span class="gp">... </span><span class="s2">recipe = plone.recipe.zope9install</span>
<span class="gp">... </span><span class="s2">location = /opt/zope</span>
<span class="gp">...</span><span class="s2"></span>
<span class="gp">... </span><span class="s2">[instance]</span>
<span class="gp">... </span><span class="s2">recipe = plone.recipe.zope9instance</span>
<span class="gp">... </span><span class="s2">zope9-location = ${zope9:location}</span>
<span class="gp">... </span><span class="s2">zope-conf = ${custom:prefix}/etc/zope.conf</span>
<span class="gp">... </span><span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parser</span><span class="p">[</span><span class="s1">&#39;buildout&#39;</span><span class="p">][</span><span class="s1">&#39;find-links&#39;</span><span class="p">]</span>
<span class="go">&#39;\n/home/ambv/zope9/downloads/dist&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parser</span><span class="p">[</span><span class="s1">&#39;instance&#39;</span><span class="p">][</span><span class="s1">&#39;zope-conf&#39;</span><span class="p">]</span>
<span class="go">&#39;/usr/local/etc/zope.conf&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">parser</span><span class="p">[</span><span class="s1">&#39;instance&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span><span class="p">[</span><span class="s1">&#39;zope-conf&#39;</span><span class="p">]</span>
<span class="go">&#39;/usr/local/etc/zope.conf&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span><span class="p">[</span><span class="s1">&#39;zope9-location&#39;</span><span class="p">]</span>
<span class="go">&#39;/opt/zope&#39;</span>
</pre></div>
</div>
<p>También se introdujeron una serie de características más pequeñas, como soporte para especificar codificación en operaciones de lectura, especificar valores de respaldo para funciones de obtención o leer directamente desde diccionarios y cadenas.</p>
<p>(Todos los cambios aportados por Łukasz Langa.)</p>
</section>
<section id="urllib-parse">
<h3>urllib.parse<a class="headerlink" href="#urllib-parse" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Se realizaron varias mejoras de usabilidad para el módulo <a class="reference internal" href="../library/urllib.parse.html#module-urllib.parse" title="urllib.parse: Parse URLs into or assemble them from components."><code class="xref py py-mod docutils literal notranslate"><span class="pre">urllib.parse</span></code></a>.</p>
<p>La función <a class="reference internal" href="../library/urllib.parse.html#urllib.parse.urlparse" title="urllib.parse.urlparse"><code class="xref py py-func docutils literal notranslate"><span class="pre">urlparse()</span></code></a> ahora admite direcciones <a class="reference external" href="https://en.wikipedia.org/wiki/IPv6">IPv6</a> como se describe en <span class="target" id="index-43"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc2732.html"><strong>RFC 2732</strong></a>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">urllib.parse</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">urlparse</span><span class="p">(</span><span class="s1">&#39;http://[dead:beef:cafe:5417:affe:8FA3:deaf:feed]/foo/&#39;</span><span class="p">)</span> 
<span class="go">ParseResult(scheme=&#39;http&#39;,</span>
<span class="go">            netloc=&#39;[dead:beef:cafe:5417:affe:8FA3:deaf:feed]&#39;,</span>
<span class="go">            path=&#39;/foo/&#39;,</span>
<span class="go">            params=&#39;&#39;,</span>
<span class="go">            query=&#39;&#39;,</span>
<span class="go">            fragment=&#39;&#39;)</span>
</pre></div>
</div>
<p>La función <a class="reference internal" href="../library/urllib.parse.html#urllib.parse.urldefrag" title="urllib.parse.urldefrag"><code class="xref py py-func docutils literal notranslate"><span class="pre">urldefrag()</span></code></a> ahora devuelve un <a class="reference internal" href="../glossary.html#term-named-tuple"><span class="xref std std-term">named tuple</span></a>:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">urldefrag</span><span class="p">(</span><span class="s1">&#39;http://python.org/about/#target&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span>
<span class="go">DefragResult(url=&#39;http://python.org/about/&#39;, fragment=&#39;target&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">&#39;http://python.org/about/&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">fragment</span>
<span class="go">&#39;target&#39;</span>
</pre></div>
</div>
<p>Y, la función <a class="reference internal" href="../library/urllib.parse.html#urllib.parse.urlencode" title="urllib.parse.urlencode"><code class="xref py py-func docutils literal notranslate"><span class="pre">urlencode()</span></code></a> ahora es mucho más flexible, aceptando un tipo de cadena o bytes para el argumento <em>query</em>. Si es una cadena, entonces los parámetros <em>safe</em>, <em>encoding</em> y <em>error</em> se envían a <a class="reference internal" href="../library/urllib.parse.html#urllib.parse.quote_plus" title="urllib.parse.quote_plus"><code class="xref py py-func docutils literal notranslate"><span class="pre">quote_plus()</span></code></a> para codificar:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">urlencode</span><span class="p">([</span>
<span class="gp">... </span>     <span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;telenovela&#39;</span><span class="p">),</span>
<span class="gp">... </span>     <span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;¿Dónde Está Elisa?&#39;</span><span class="p">)],</span>
<span class="gp">... </span>     <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;latin-1&#39;</span><span class="p">)</span>
<span class="go">&#39;type=telenovela&amp;name=%BFD%F3nde+Est%E1+Elisa%3F&#39;</span>
</pre></div>
</div>
<p>Como se detalla en <a class="reference internal" href="../library/urllib.parse.html#parsing-ascii-encoded-bytes"><span class="std std-ref">Análisis de bytes codificados ASCII</span></a>, todas las funciones <a class="reference internal" href="../library/urllib.parse.html#module-urllib.parse" title="urllib.parse: Parse URLs into or assemble them from components."><code class="xref py py-mod docutils literal notranslate"><span class="pre">urllib.parse</span></code></a> ahora aceptan cadenas de bytes codificadas en ASCII como entrada, siempre que no estén mezcladas con cadenas normales. Si se proporcionan cadenas de bytes codificadas en ASCII como parámetros, los tipos de retorno también serán cadenas de bytes codificadas en ASCII:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">urlparse</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;http://www.python.org:80/about/&#39;</span><span class="p">)</span> 
<span class="go">ParseResultBytes(scheme=b&#39;http&#39;, netloc=b&#39;www.python.org:80&#39;,</span>
<span class="go">                 path=b&#39;/about/&#39;, params=b&#39;&#39;, query=b&#39;&#39;, fragment=b&#39;&#39;)</span>
</pre></div>
</div>
<p>(Trabajo de Nick Coghlan, Dan Mahn y Senthil Kumaran en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=2987">bpo-2987</a>, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5468">bpo-5468</a>, y <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=9873">bpo-9873</a>.)</p>
</section>
<section id="mailbox">
<h3>mailbox<a class="headerlink" href="#mailbox" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Gracias a un esfuerzo concertado de R. David Murray, el módulo <a class="reference internal" href="../library/mailbox.html#module-mailbox" title="mailbox: Manipulate mailboxes in various formats"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mailbox</span></code></a> se ha corregido para Python 3.2. El desafío era que el buzón había sido diseñado originalmente con una interfaz de texto, pero los mensajes de correo electrónico se representan mejor con <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> porque varias partes de un mensaje pueden tener diferentes codificaciones.</p>
<p>La solución aprovechó el soporte binario de los paquete <a class="reference internal" href="../library/email.html#module-email" title="email: Package supporting the parsing, manipulating, and generating email messages."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email</span></code></a> para analizar mensajes de correo electrónico arbitrarios. Además, la solución requirió una serie de cambios en la API.</p>
<p>Como era de esperar, el método <a class="reference internal" href="../library/mailbox.html#mailbox.Mailbox.add" title="mailbox.Mailbox.add"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add()</span></code></a> para los objetos <a class="reference internal" href="../library/mailbox.html#mailbox.Mailbox" title="mailbox.Mailbox"><code class="xref py py-class docutils literal notranslate"><span class="pre">mailbox.Mailbox</span></code></a> ahora acepta entrada binaria.</p>
<p><a class="reference internal" href="../library/io.html#io.StringIO" title="io.StringIO"><code class="xref py py-class docutils literal notranslate"><span class="pre">StringIO</span></code></a> y la entrada del archivo de texto están en desuso. Además, la entrada de cadenas fallará antes si se utilizan caracteres que no sean ASCII. Anteriormente, fallaba cuando el correo electrónico se procesaba en un paso posterior.</p>
<p>También hay soporte para salida binaria. El método <a class="reference internal" href="../library/mailbox.html#mailbox.Mailbox.get_file" title="mailbox.Mailbox.get_file"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_file()</span></code></a> ahora devuelve un archivo en modo binario (donde solía configurar incorrectamente el archivo en modo texto). También hay un nuevo método <a class="reference internal" href="../library/mailbox.html#mailbox.Mailbox.get_bytes" title="mailbox.Mailbox.get_bytes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_bytes()</span></code></a> que devuelve una representación <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> de un mensaje correspondiente a una <em>key</em> dada.</p>
<p>Todavía es posible obtener una salida no binaria usando el método de la API anterior <a class="reference internal" href="../library/mailbox.html#mailbox.Mailbox.get_string" title="mailbox.Mailbox.get_string"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_string()</span></code></a>, pero ese enfoque no es muy útil. En su lugar, es mejor extraer mensajes de un objeto <a class="reference internal" href="../library/mailbox.html#mailbox.Message" title="mailbox.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a> o cargarlos desde una entrada binaria.</p>
<p>(Contribuido por R. David Murray, con esfuerzos de Steffen Daode Nurpmeso y un parche inicial de Victor Stinner en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=9124">bpo-9124</a>.)</p>
</section>
<section id="turtledemo">
<h3>turtledemo<a class="headerlink" href="#turtledemo" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El código de demostración para el módulo <a class="reference internal" href="../library/turtle.html#module-turtle" title="turtle: An educational framework for simple graphics applications"><code class="xref py py-mod docutils literal notranslate"><span class="pre">turtle</span></code></a> se movió del directorio <em>Demo</em> a la biblioteca principal. Incluye más de una docena de scripts de muestra con pantallas animadas. Al estar en <a class="reference internal" href="../library/sys.html#sys.path" title="sys.path"><code class="xref py py-attr docutils literal notranslate"><span class="pre">sys.path</span></code></a>, ahora se puede ejecutar directamente desde la línea de comandos:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python -m turtledemo
</pre></div>
</div>
<p>(Movido del directorio Demo por Alexander Belopolsky en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=10199">bpo-10199</a>.)</p>
</section>
</section>
<section id="multi-threading">
<h2>Multi-threading<a class="headerlink" href="#multi-threading" title="Enlazar permanentemente con este título">¶</a></h2>
<ul>
<li><p>Se ha reescrito el mecanismo para serializar la ejecución de subprocesos de Python que se ejecutan simultáneamente (generalmente conocido como <a class="reference internal" href="../glossary.html#term-GIL"><span class="xref std std-term">GIL</span></a> o Global Interpreter Lock). Entre los objetivos estaban los intervalos de conmutación más predecibles y la reducción de la sobrecarga debido a la contención de bloqueo y la cantidad de llamadas al sistema consiguientes. La noción de un «intervalo de verificación» para permitir cambios de hilo ha sido abandonada y reemplazada por una duración absoluta expresada en segundos. Este parámetro se puede ajustar a través de <a class="reference internal" href="../library/sys.html#sys.setswitchinterval" title="sys.setswitchinterval"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.setswitchinterval()</span></code></a>. Actualmente, el valor predeterminado es 5 milisegundos.</p>
<p>Se pueden leer detalles adicionales sobre la implementación en un mensaje de lista de correo <a class="reference external" href="https://mail.python.org/pipermail/python-dev/2009-October/093321.html">python-dev mailing-list message</a> (sin embargo, «prioridad las solicitudes» como se expone en este mensaje no se han mantenido para su inclusión).</p>
<p>(Contribución de Antoine Pitrou.)</p>
</li>
<li><p>Los bloqueos regulares y recursivos ahora aceptan un argumento opcional <em>timeout</em> para su método <a class="reference internal" href="../library/threading.html#threading.Lock.acquire" title="threading.Lock.acquire"><code class="xref py py-meth docutils literal notranslate"><span class="pre">acquire()</span></code></a> . (Contribución de Antoine Pitrou; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7316">bpo-7316</a>.)</p></li>
<li><p>De manera similar, <a class="reference internal" href="../library/threading.html#threading.Semaphore.acquire" title="threading.Semaphore.acquire"><code class="xref py py-meth docutils literal notranslate"><span class="pre">threading.Semaphore.acquire()</span></code></a> también ganó un argumento <em>timeout</em>. (Contribución de Torsten Landschoff; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=850728">bpo-850728</a>.)</p></li>
<li><p>Las adquisiciones de bloqueos regulares y recursivas ahora pueden ser interrumpidas por señales en plataformas que usan Pthreads. Esto significa que los programas de Python que se bloquean mientras adquieren bloqueos pueden eliminarse con éxito enviando repetidamente SIGINT al proceso (presionando <kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">Ctrl</kbd>+<kbd class="kbd docutils literal notranslate">C</kbd></kbd> en la mayoría de los shells). (Contribuido por Reid Kleckner; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8844">bpo-8844</a>.)</p></li>
</ul>
</section>
<section id="optimizations">
<h2>Optimizations<a class="headerlink" href="#optimizations" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Se han agregado una serie de pequeñas mejoras de rendimiento:</p>
<ul>
<li><p>El optimizador de mirilla de Python ahora reconoce patrones como <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">in</span> <span class="pre">{1,</span> <span class="pre">2,</span> <span class="pre">3}</span></code> como una prueba de pertenencia a un conjunto de constantes. El optimizador reformula <a class="reference internal" href="../library/stdtypes.html#set" title="set"><code class="xref py py-class docutils literal notranslate"><span class="pre">set</span></code></a> como <a class="reference internal" href="../library/stdtypes.html#frozenset" title="frozenset"><code class="xref py py-class docutils literal notranslate"><span class="pre">frozenset</span></code></a> y almacena la constante preconstruida.</p>
<p>Ahora que la penalización de velocidad se ha ido, es práctico comenzar a escribir pruebas de membresía usando notación de conjuntos. Este estilo es semánticamente claro y operativamente rápido:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">extension</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">rpartition</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">2</span><span class="p">]</span>
<span class="k">if</span> <span class="n">extension</span> <span class="ow">in</span> <span class="p">{</span><span class="s1">&#39;xml&#39;</span><span class="p">,</span> <span class="s1">&#39;html&#39;</span><span class="p">,</span> <span class="s1">&#39;xhtml&#39;</span><span class="p">,</span> <span class="s1">&#39;css&#39;</span><span class="p">}:</span>
    <span class="n">handle</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>(Parche y pruebas adicionales aportadas por Dave Malcolm; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=6690">bpo-6690</a>).</p>
</li>
<li><p>Serializar y deserializar datos usando el módulo <a class="reference internal" href="../library/pickle.html#module-pickle" title="pickle: Convert Python objects to streams of bytes and back."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pickle</span></code></a> ahora es varias veces más rápido.</p>
<p>(Contribución de Alexandre Vassalotti, Antoine Pitrou y el equipo de Unladen Swallow en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=9410">bpo-9410</a> y <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=3873">bpo-3873</a>.)</p>
</li>
<li><p>El algoritmo <a class="reference external" href="https://en.wikipedia.org/wiki/Timsort">Timsort algorithm</a> usado en <a class="reference internal" href="../library/stdtypes.html#list.sort" title="list.sort"><code class="xref py py-meth docutils literal notranslate"><span class="pre">list.sort()</span></code></a> y <a class="reference internal" href="../library/functions.html#sorted" title="sorted"><code class="xref py py-func docutils literal notranslate"><span class="pre">sorted()</span></code></a> ahora se ejecuta más rápido y usa menos memoria cuando se llama con <a class="reference internal" href="../glossary.html#term-key-function"><span class="xref std std-term">key function</span></a>. Anteriormente, cada elemento de una lista se envolvía con un objeto temporal que recordaba el valor clave asociado con cada elemento. Ahora, dos matrices de claves y valores se ordenan en paralelo. Esto ahorra la memoria consumida por los contenedores de clasificación y ahorra el tiempo perdido al delegar comparaciones.</p>
<p>(Parche de Daniel Stutzbach en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=9915">bpo-9915</a>.)</p>
</li>
<li><p>El rendimiento de la decodificación JSON mejora y el consumo de memoria se reduce siempre que se repite la misma cadena para varias claves. Además, la codificación JSON ahora usa las aceleraciones de C cuando el argumento <code class="docutils literal notranslate"><span class="pre">sort_keys</span></code> es verdadero.</p>
<p>(Contribución de Antoine Pitrou en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7451">bpo-7451</a> y Raymond Hettinger y Antoine Pitrou en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=10314">bpo-10314</a>.)</p>
</li>
<li><p>Los bloqueos recursivos (creados con la API <a class="reference internal" href="../library/threading.html#threading.RLock" title="threading.RLock"><code class="xref py py-func docutils literal notranslate"><span class="pre">threading.RLock()</span></code></a>) ahora se benefician de una implementación de C que los hace tan rápidos como los bloqueos normales, y entre 10 y 15 veces más rápidos que su anterior implementación pura de Python.</p>
<p>(Contribución de Antoine Pitrou; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=3001">bpo-3001</a>.)</p>
</li>
<li><p>El algoritmo de búsqueda rápida en stringlib ahora es usado por los métodos <code class="xref py py-meth docutils literal notranslate"><span class="pre">split()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">rsplit()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">splitlines()</span></code> y <code class="xref py py-meth docutils literal notranslate"><span class="pre">replace()</span></code> en objetos <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#bytearray" title="bytearray"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytearray</span></code></a> y <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>. Asimismo, el algoritmo también es utilizado por <code class="xref py py-meth docutils literal notranslate"><span class="pre">rfind()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">rindex()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">rsplit()</span></code> y <code class="xref py py-meth docutils literal notranslate"><span class="pre">rpartition()</span></code>.</p>
<p>(Parche de Florent Xicluna en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7622">bpo-7622</a> y <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7462">bpo-7462</a>.)</p>
</li>
<li><p>Las conversiones de enteros a cadenas de caracteres ahora funcionan con dos «dígitos» a la vez, lo que reduce el número de operaciones de división y módulo.</p>
<p>(<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=6713">bpo-6713</a> de Gawain Bolton, Mark Dickinson y Victor Stinner.)</p>
</li>
</ul>
<p>Hubo varias otras optimizaciones menores. Establecer diferencias ahora se ejecuta más rápido cuando un operando es mucho más grande que el otro (parche de Andress Bennetts en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8685">bpo-8685</a>). El método <code class="xref py py-meth docutils literal notranslate"><span class="pre">array.repeat()</span></code> tiene una implementación más rápida (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1569291">bpo-1569291</a> de Alexander Belopolsky). El <code class="xref py py-class docutils literal notranslate"><span class="pre">BaseHTTPRequestHandler</span></code> tiene un almacenamiento en búfer más eficiente (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=3709">bpo-3709</a> por Andrew Schaaf). La función <a class="reference internal" href="../library/operator.html#operator.attrgetter" title="operator.attrgetter"><code class="xref py py-func docutils literal notranslate"><span class="pre">operator.attrgetter()</span></code></a> se ha acelerado (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=10160">bpo-10160</a> de Christos Georgiou). Y <code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigParser</span></code> carga argumentos de varias líneas un poco más rápido (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7113">bpo-7113</a> de Łukasz Langa).</p>
</section>
<section id="unicode">
<h2>Unicode<a class="headerlink" href="#unicode" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Python se ha actualizado a <a class="reference external" href="https://unicode.org/versions/Unicode6.0.0/">Unicode 6.0.0</a>. La actualización del estándar agrega más de 2000 caracteres nuevos, incluidos los símbolos <a class="reference external" href="https://en.wikipedia.org/wiki/Emoji">emoji</a> que son importantes para los teléfonos móviles.</p>
<p>Además, el estándar actualizado modificó las propiedades de dos caracteres de Kannada (U+0CF1, U+0CF2) y un carácter numérico New Tai Lue (U+19DA), lo que hace que el primero sea elegible para su uso en identificadores y descalifica al segundo. Para obtener más información, consulte <a class="reference external" href="https://www.unicode.org/versions/Unicode6.0.0/#Database_Changes">Unicode Character Database Changes</a>.</p>
</section>
<section id="codecs">
<h2>Codecs<a class="headerlink" href="#codecs" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Se agregó soporte para <em>cp720</em> codificación DOS árabe (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=1616979">bpo-1616979</a>).</p>
<p>La codificación MBCS ya no ignora el argumento del controlador de errores. En el modo estricto predeterminado, genera un <a class="reference internal" href="../library/exceptions.html#UnicodeDecodeError" title="UnicodeDecodeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">UnicodeDecodeError</span></code></a> cuando encuentra una secuencia de bytes no codificable y un <a class="reference internal" href="../library/exceptions.html#UnicodeEncodeError" title="UnicodeEncodeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">UnicodeEncodeError</span></code></a> para un carácter no codificable.</p>
<p>El códec MBCS admite los controladores de errores <code class="docutils literal notranslate"><span class="pre">'strict'</span></code> e <code class="docutils literal notranslate"><span class="pre">'ignore'</span></code> para la decodificación y <code class="docutils literal notranslate"><span class="pre">'strict'</span></code> y <code class="docutils literal notranslate"><span class="pre">'replace'</span></code> para la codificación.</p>
<p>Para emular la codificación Python3.1 MBCS, seleccione el controlador <code class="docutils literal notranslate"><span class="pre">'ignore'</span></code> para decodificar y el controlador <code class="docutils literal notranslate"><span class="pre">'replace'</span></code> para codificar.</p>
<p>En Mac OS X, Python decodifica los argumentos de la línea de comandos con <code class="docutils literal notranslate"><span class="pre">'utf-8'</span></code> en lugar de la codificación local.</p>
<p>De forma predeterminada, <a class="reference internal" href="../library/tarfile.html#module-tarfile" title="tarfile: Read and write tar-format archive files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">tarfile</span></code></a> usa la codificación <code class="docutils literal notranslate"><span class="pre">'utf-8'</span></code> en Windows (en lugar de <code class="docutils literal notranslate"><span class="pre">'mbcs'</span></code>) y el controlador de errores <code class="docutils literal notranslate"><span class="pre">'surrogateescape'</span></code> en todos los sistemas operativos.</p>
</section>
<section id="documentation">
<h2>Documentación<a class="headerlink" href="#documentation" title="Enlazar permanentemente con este título">¶</a></h2>
<p>La documentación sigue mejorando.</p>
<ul>
<li><p>Se ha agregado una tabla de enlaces rápidos en la parte superior de secciones largas como <a class="reference internal" href="../library/functions.html#built-in-funcs"><span class="std std-ref">Funciones Built-in</span></a>. En el caso de <a class="reference internal" href="../library/itertools.html#module-itertools" title="itertools: Functions creating iterators for efficient looping."><code class="xref py py-mod docutils literal notranslate"><span class="pre">itertools</span></code></a>, los enlaces están acompañados de tablas de resúmenes al estilo de una hoja de trucos para proporcionar una descripción general y un cambio de memoria sin tener que leer todos los documentos.</p></li>
<li><p>En algunos casos, el código fuente puro de Python puede ser un complemento útil de la documentación, por lo que ahora muchos módulos incluyen enlaces rápidos a la última versión del código fuente. Por ejemplo, la documentación del módulo <a class="reference internal" href="../library/functools.html#module-functools" title="functools: Higher-order functions and operations on callable objects."><code class="xref py py-mod docutils literal notranslate"><span class="pre">functools</span></code></a> tiene un enlace rápido en la parte superior etiquetado:</p>
<blockquote>
<div><p><strong>Código fuente</strong> <a class="reference external" href="https://github.com/python/cpython/tree/3.11/Lib/functools.py">Lib/functools.py</a>.</p>
</div></blockquote>
<p>(Contribuido por Raymond Hettinger; ver <a class="reference external" href="https://rhettinger.wordpress.com/2011/01/28/open-your-source-more/">rationale</a>.)</p>
</li>
<li><p>Los documentos ahora contienen más ejemplos y recetas. En particular, el módulo <a class="reference internal" href="../library/re.html#module-re" title="re: Regular expression operations."><code class="xref py py-mod docutils literal notranslate"><span class="pre">re</span></code></a> tiene una sección extensa, <a class="reference internal" href="../library/re.html#re-examples"><span class="std std-ref">Ejemplos de expresiones regulares</span></a>. Asimismo, el módulo <a class="reference internal" href="../library/itertools.html#module-itertools" title="itertools: Functions creating iterators for efficient looping."><code class="xref py py-mod docutils literal notranslate"><span class="pre">itertools</span></code></a> continúa siendo actualizado con nuevo <a class="reference internal" href="../library/itertools.html#itertools-recipes"><span class="std std-ref">Fórmulas con itertools</span></a>.</p></li>
<li><p>El módulo <a class="reference internal" href="../library/datetime.html#module-datetime" title="datetime: Basic date and time types."><code class="xref py py-mod docutils literal notranslate"><span class="pre">datetime</span></code></a> ahora tiene una implementación auxiliar en Python puro. No se modificó ninguna funcionalidad. Esto solo proporciona una implementación alternativa más fácil de leer.</p>
<p>(Contribuido por Alexander Belopolsky en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=9528">bpo-9528</a>.)</p>
</li>
<li><p>Se ha eliminado el directorio no mantenido <code class="file docutils literal notranslate"><span class="pre">Demo</span></code>. Algunas demostraciones se integraron en la documentación, otras se movieron al directorio <code class="file docutils literal notranslate"><span class="pre">Tools/demo</span></code> y otras se eliminaron por completo.</p>
<p>(Contribución de Georg Brandl en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7962">bpo-7962</a>.)</p>
</li>
</ul>
</section>
<section id="idle">
<h2>IDLE<a class="headerlink" href="#idle" title="Enlazar permanentemente con este título">¶</a></h2>
<ul>
<li><p>El menú de formato ahora tiene una opción para limpiar archivos de origen eliminando los espacios en blanco finales.</p>
<p>(Contribución de Raymond Hettinger; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5150">bpo-5150</a>.)</p>
</li>
<li><p>IDLE en Mac OS X ahora funciona con Carbon AquaTk y Cocoa AquaTk.</p>
<p>(Contribución de Kevin Walzer, Ned Deily y Ronald Oussoren; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=6075">bpo-6075</a>.)</p>
</li>
</ul>
</section>
<section id="code-repository">
<h2>Repositorio de código<a class="headerlink" href="#code-repository" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Además del repositorio de código Subversion existente en <a class="reference external" href="https://svn.python.org">https://svn.python.org</a>, ahora hay un repositorio <a class="reference external" href="https://www.mercurial-scm.org/">Mercurial</a> en <a class="reference external" href="https://hg.python.org/">https://hg.python.org/</a>.</p>
<p>Después de la versión 3.2, hay planes para cambiar a Mercurial como repositorio principal. Este sistema de control de versiones distribuido debería facilitar a los miembros de la comunidad la creación y el intercambio de conjuntos de cambios externos. Consulte <span class="target" id="index-44"></span><a class="pep reference external" href="https://peps.python.org/pep-0385/"><strong>PEP 385</strong></a> para obtener más detalles.</p>
<p>Para aprender a utilizar el nuevo sistema de control de versiones, consulte el <a class="reference external" href="https://www.mercurial-scm.org/wiki/QuickStart">Quick Start</a> o la <a class="reference external" href="https://www.mercurial-scm.org/guide">Guide to Mercurial Workflows</a>.</p>
</section>
<section id="build-and-c-api-changes">
<h2>Cambios en la API de construcción y C<a class="headerlink" href="#build-and-c-api-changes" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Los cambios en el proceso de compilación de Python y en la API de C incluyen:</p>
<ul>
<li><p>Los scripts <em>idle</em>, <em>pydoc</em> y <em>2to3</em> ahora están instalados con un sufijo específico de la versión en <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">altinstall</span></code> (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=10679">bpo-10679</a>).</p></li>
<li><p>Las funciones C que acceden a la base de datos Unicode ahora aceptan y retornan caracteres del rango Unicode completo, incluso en compilaciones Unicode estrechas (Py_UNICODE_TOLOWER, Py_UNICODE_ISDECIMAL, y otras). Una diferencia visible en Python es que <a class="reference internal" href="../library/unicodedata.html#unicodedata.numeric" title="unicodedata.numeric"><code class="xref py py-func docutils literal notranslate"><span class="pre">unicodedata.numeric()</span></code></a> ahora devuelve el valor correcto para puntos de código grandes y <a class="reference internal" href="../library/functions.html#repr" title="repr"><code class="xref py py-func docutils literal notranslate"><span class="pre">repr()</span></code></a> puede considerar más caracteres como imprimibles.</p>
<p>(Informado por Bupjoe Lee y corregido por Amaury Forgeot D’Arc; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5127">bpo-5127</a>.)</p>
</li>
<li><p>Los gotos calculados ahora están habilitados de forma predeterminada en los compiladores compatibles (que son detectados por el script de configuración). Todavía se pueden desactivar de forma selectiva especificando <code class="docutils literal notranslate"><span class="pre">--without-computed-gotos</span></code>.</p>
<p>(Contribución de Antoine Pitrou; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=9203">bpo-9203</a>.)</p>
</li>
<li><p>Se eliminó la opción <code class="docutils literal notranslate"><span class="pre">--with-wctype-functions</span></code>. La base de datos unicode incorporada ahora se usa para todas las funciones.</p>
<p>(Contribución de Amaury Forgeot D’Arc; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=9210">bpo-9210</a>.)</p>
</li>
<li><p>Los valores hash ahora son valores de un nuevo tipo, <code class="xref c c-type docutils literal notranslate"><span class="pre">Py_hash_t</span></code>, que se define como del mismo tamaño que un puntero. Anteriormente eran del tipo long, que en algunos sistemas operativos de 64 bits todavía tiene una longitud de solo 32 bits. Como resultado de esta corrección, <a class="reference internal" href="../library/stdtypes.html#set" title="set"><code class="xref py py-class docutils literal notranslate"><span class="pre">set</span></code></a> y <a class="reference internal" href="../library/stdtypes.html#dict" title="dict"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> ahora pueden contener más de <code class="docutils literal notranslate"><span class="pre">2**32</span></code> entradas en compilaciones con punteros de 64 bits (anteriormente, podían crecer hasta ese tamaño pero su desempeño se degradaba catastróficamente).</p>
<p>(Sugerido por Raymond Hettinger e implementado por Benjamin Peterson; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=9778">bpo-9778</a>.)</p>
</li>
<li><p>Una nueva macro <code class="xref c c-macro docutils literal notranslate"><span class="pre">Py_VA_COPY</span></code> copia el estado de la lista de argumentos de la variable. Es equivalente a C99 <em>va_copy</em> pero está disponible en todas las plataformas Python (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=2443">bpo-2443</a>).</p></li>
<li><p>Una nueva función de la API de C <a class="reference internal" href="../c-api/init.html#c.PySys_SetArgvEx" title="PySys_SetArgvEx"><code class="xref c c-func docutils literal notranslate"><span class="pre">PySys_SetArgvEx()</span></code></a> permite que un intérprete integrado establezca <a class="reference internal" href="../library/sys.html#sys.argv" title="sys.argv"><code class="xref py py-attr docutils literal notranslate"><span class="pre">sys.argv</span></code></a> sin modificar también <a class="reference internal" href="../library/sys.html#sys.path" title="sys.path"><code class="xref py py-attr docutils literal notranslate"><span class="pre">sys.path</span></code></a> (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5753">bpo-5753</a>).</p></li>
<li><p><code class="xref c c-macro docutils literal notranslate"><span class="pre">PyEval_CallObject</span></code> ahora solo está disponible en forma de macro. La declaración de función, que se mantuvo por razones de compatibilidad con versiones anteriores, ahora se elimina; la macro se introdujo en 1997 (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8276">bpo-8276</a>).</p></li>
<li><p>Hay una nueva función <a class="reference internal" href="../c-api/long.html#c.PyLong_AsLongLongAndOverflow" title="PyLong_AsLongLongAndOverflow"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyLong_AsLongLongAndOverflow()</span></code></a> que es análoga a <a class="reference internal" href="../c-api/long.html#c.PyLong_AsLongAndOverflow" title="PyLong_AsLongAndOverflow"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyLong_AsLongAndOverflow()</span></code></a>. Ambos sirven para convertir Python <a class="reference internal" href="../library/functions.html#int" title="int"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a> en un tipo nativo de ancho fijo al tiempo que brindan detección de casos en los que la conversión no encaja (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7767">bpo-7767</a>).</p></li>
<li><p>La función <a class="reference internal" href="../c-api/unicode.html#c.PyUnicode_CompareWithASCIIString" title="PyUnicode_CompareWithASCIIString"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_CompareWithASCIIString()</span></code></a> ahora devuelve <em>not equal</em> si la cadena de Python es <em>NUL</em> terminada.</p></li>
<li><p>Hay una nueva función <a class="reference internal" href="../c-api/exceptions.html#c.PyErr_NewExceptionWithDoc" title="PyErr_NewExceptionWithDoc"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyErr_NewExceptionWithDoc()</span></code></a> que es como <a class="reference internal" href="../c-api/exceptions.html#c.PyErr_NewException" title="PyErr_NewException"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyErr_NewException()</span></code></a> pero permite especificar una cadena de documentos. Esto permite que las excepciones de C tengan las mismas capacidades de auto-documentación que sus contrapartes de Python puro (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=7033">bpo-7033</a>).</p></li>
<li><p>Cuando se compila con la opción <code class="docutils literal notranslate"><span class="pre">--with-valgrind</span></code>, el asignador de pymalloc se desactivará automáticamente cuando se ejecute en Valgrind. Esto brinda una detección mejorada de fugas de memoria cuando se ejecuta en Valgrind, mientras se aprovecha pymalloc en otros momentos (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=2422">bpo-2422</a>).</p></li>
<li><p>Se eliminó el formato <code class="docutils literal notranslate"><span class="pre">O?</span></code> De las funciones <em>PyArg_Parse</em>. El formato ya no se usa y nunca se había documentado (<a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8837">bpo-8837</a>).</p></li>
</ul>
<p>Hubo una serie de otros pequeños cambios en la C-API. Consulte el archivo <a class="reference external" href="https://github.com/python/cpython/blob/v3.2.6/Misc/NEWS">Misc/NEWS</a> para obtener una lista completa.</p>
<p>Además, hubo una serie de actualizaciones en la compilación de Mac OS X, consulte <a class="reference external" href="https://github.com/python/cpython/blob/v3.2.6/Mac/BuildScript/README.txt">Mac/BuildScript/README.txt</a> para obtener más detalles. Para los usuarios que ejecutan una compilación de 32/64 bits, existe un problema conocido con el Tcl/Tk predeterminado en Mac OS X 10.6. En consecuencia, recomendamos instalar una alternativa actualizada como <a class="reference external" href="https://www.activestate.com/activetcl/downloads">ActiveState Tcl/Tk 8.5.9</a>. Consulte <a class="reference external" href="https://www.python.org/download/mac/tcltk/">https://www.python.org/download/mac/tcltk/</a> para obtener detalles adicionales.</p>
</section>
<section id="porting-to-python-3-2">
<h2>Portar a Python 3.2<a class="headerlink" href="#porting-to-python-3-2" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Esta sección enumera los cambios descritos anteriormente y otras correcciones de errores que pueden requerir cambios en su código:</p>
<ul>
<li><p>El módulo <a class="reference internal" href="../library/configparser.html#module-configparser" title="configparser: Configuration file parser."><code class="xref py py-mod docutils literal notranslate"><span class="pre">configparser</span></code></a> tiene una serie de limpiezas. El cambio principal es reemplazar la antigua <code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigParser</span></code> con la alternativa preferida de larga data <code class="xref py py-class docutils literal notranslate"><span class="pre">SafeConfigParser</span></code>. Además, hay una serie de incompatibilidades menores:</p>
<ul class="simple">
<li><p>La sintaxis de interpolación ahora está validada en las operaciones <a class="reference internal" href="../library/configparser.html#configparser.ConfigParser.get" title="configparser.ConfigParser.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get()</span></code></a> y <a class="reference internal" href="../library/configparser.html#configparser.ConfigParser.set" title="configparser.ConfigParser.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set()</span></code></a>. En el esquema de interpolación predeterminado, solo dos tokens con signos de porcentaje son válidos: <code class="docutils literal notranslate"><span class="pre">%(name)s</span></code> y <code class="docutils literal notranslate"><span class="pre">%%</span></code>, siendo este último un signo de porcentaje de escape.</p></li>
<li><p>Los métodos <a class="reference internal" href="../library/configparser.html#configparser.ConfigParser.set" title="configparser.ConfigParser.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set()</span></code></a> y <a class="reference internal" href="../library/configparser.html#configparser.ConfigParser.add_section" title="configparser.ConfigParser.add_section"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_section()</span></code></a>  ahora verifican que los valores sean cadenas reales. Anteriormente, los tipos no admitidos podían introducirse involuntariamente.</p></li>
<li><p>Las secciones u opciones duplicadas de una sola fuente ahora generan <a class="reference internal" href="../library/configparser.html#configparser.DuplicateSectionError" title="configparser.DuplicateSectionError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DuplicateSectionError</span></code></a> o <a class="reference internal" href="../library/configparser.html#configparser.DuplicateOptionError" title="configparser.DuplicateOptionError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DuplicateOptionError</span></code></a>. Anteriormente, los duplicados sobrescribían silenciosamente una entrada anterior.</p></li>
<li><p>Los comentarios en línea ahora están deshabilitados de forma predeterminada, por lo que ahora el carácter <strong>;</strong> se puede usar de forma segura en los valores.</p></li>
<li><p>Los comentarios ahora se pueden sangrar. En consecuencia, para que <strong>;</strong> o <strong>#</strong> aparezcan al principio de una línea en valores multilínea, debe interpolarse. Esto evita que los caracteres de prefijo de comentario en valores se confundan con comentarios.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code> ahora es un valor válido y ya no se convierte automáticamente en una cadena vacía. Para cadenas vacías, use <code class="docutils literal notranslate"><span class="pre">&quot;option</span> <span class="pre">=&quot;</span></code> en una línea.</p></li>
</ul>
</li>
<li><p>El módulo <a class="reference internal" href="../library/nntplib.html#module-nntplib" title="nntplib: NNTP protocol client (requires sockets). (obsoleto)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">nntplib</span></code></a> se modificó ampliamente, lo que significa que sus API a menudo son incompatibles con las API 3.1.</p></li>
<li><p><a class="reference internal" href="../library/stdtypes.html#bytearray" title="bytearray"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytearray</span></code></a> ya no se pueden usar como nombres de archivo; en su lugar, deben convertirse a <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a>.</p></li>
<li><p>Los <code class="xref py py-meth docutils literal notranslate"><span class="pre">array.tostring()</span></code> y <code class="xref py py-meth docutils literal notranslate"><span class="pre">array.fromstring()</span></code> han sido renombrados a <code class="xref py py-meth docutils literal notranslate"><span class="pre">array.tobytes()</span></code> y <code class="xref py py-meth docutils literal notranslate"><span class="pre">array.frombytes()</span></code> para mayor claridad. Los nombres antiguos han quedado obsoletos. (Ver <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=8990">bpo-8990</a>.)</p></li>
<li><p>Funciones <code class="docutils literal notranslate"><span class="pre">PyArg_Parse*()</span></code>:</p>
<ul class="simple">
<li><p>Se ha eliminado el formato «t#»: utilice «s#» o «s*» en su lugar</p></li>
<li><p>Se han eliminado los formatos «w» y «w #»: utilice «w*» en su lugar</p></li>
</ul>
</li>
<li><p>El tipo <code class="xref c c-type docutils literal notranslate"><span class="pre">PyCObject</span></code>, obsoleto en 3.1, ha sido eliminado. Para envolver punteros C opacos en objetos Python, se debe utilizar la API <a class="reference internal" href="../c-api/capsule.html#c.PyCapsule" title="PyCapsule"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyCapsule</span></code></a>; el nuevo tipo tiene una interfaz bien definida para pasar información de seguridad de escritura y una firma menos complicada para llamar a un destructor.</p></li>
<li><p>La función <code class="xref py py-func docutils literal notranslate"><span class="pre">sys.setfilesystemencoding()</span></code> se eliminó porque tenía un diseño defectuoso.</p></li>
<li><p>La función y el método <a class="reference internal" href="../library/random.html#random.seed" title="random.seed"><code class="xref py py-func docutils literal notranslate"><span class="pre">random.seed()</span></code></a> ahora saltan semillas de cadenas con una función hash sha512. Para acceder a la versión anterior de <em>seed</em> para reproducir secuencias de Python 3.1, establezca el argumento <em>version</em> en <em>1</em>, <code class="docutils literal notranslate"><span class="pre">random.seed(s,</span> <span class="pre">version=1)</span></code>.</p></li>
<li><p>La función anteriormente obsoleta <code class="xref py py-func docutils literal notranslate"><span class="pre">string.maketrans()</span></code> ha sido eliminada en favor de los métodos estáticos <a class="reference internal" href="../library/stdtypes.html#bytes.maketrans" title="bytes.maketrans"><code class="xref py py-meth docutils literal notranslate"><span class="pre">bytes.maketrans()</span></code></a> y <a class="reference internal" href="../library/stdtypes.html#bytearray.maketrans" title="bytearray.maketrans"><code class="xref py py-meth docutils literal notranslate"><span class="pre">bytearray.maketrans()</span></code></a>. Este cambio resuelve la confusión sobre qué tipos eran compatibles con el módulo <a class="reference internal" href="../library/string.html#module-string" title="string: Common string operations."><code class="xref py py-mod docutils literal notranslate"><span class="pre">string</span></code></a>. Ahora, <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a>, y <a class="reference internal" href="../library/stdtypes.html#bytearray" title="bytearray"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytearray</span></code></a> cada uno tiene sus propios métodos <strong>maketrans</strong> y <strong>translate</strong> con tablas de traducción intermedias del tipo apropiado.</p>
<p>(Contribución de Georg Brandl; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=5675">bpo-5675</a>.)</p>
</li>
<li><p>La función anteriormente obsoleta <code class="xref py py-func docutils literal notranslate"><span class="pre">contextlib.nested()</span></code> ha sido eliminada en favor de una declaración simple <a class="reference internal" href="../reference/compound_stmts.html#with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a> que puede aceptar múltiples administradores de contexto. La última técnica es más rápida (porque está integrada) y hace un mejor trabajo finalizando múltiples administradores de contexto cuando uno de ellos genera una excepción:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;mylog.txt&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">infile</span><span class="p">,</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;a.out&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outfile</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">infile</span><span class="p">:</span>
        <span class="k">if</span> <span class="s1">&#39;&lt;critical&gt;&#39;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
            <span class="n">outfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</pre></div>
</div>
<p>(Contribución de Georg Brandl y Mattias Brändström; <a class="reference external" href="https://codereview.appspot.com/53094">appspot issue 53094</a>.)</p>
</li>
<li><p><a class="reference internal" href="../library/struct.html#struct.pack" title="struct.pack"><code class="xref py py-func docutils literal notranslate"><span class="pre">struct.pack()</span></code></a> ahora permite bytes para el código del paquete de cadenas <code class="docutils literal notranslate"><span class="pre">s</span></code>. Anteriormente, aceptaba argumentos de texto y los codificaba implícitamente en bytes usando UTF-8. Esto era problemático porque hacía suposiciones sobre la codificación correcta y porque una codificación de longitud variable puede fallar al escribir en un segmento de longitud fija de una estructura.</p>
<p>El código como <code class="docutils literal notranslate"><span class="pre">struct.pack('&lt;6sHHBBB',</span> <span class="pre">'GIF87a',</span> <span class="pre">x,</span> <span class="pre">y)</span></code> debe reescribirse para usar bytes en lugar de texto, <code class="docutils literal notranslate"><span class="pre">struct.pack('&lt;6sHHBBB',</span> <span class="pre">b'GIF87a',</span> <span class="pre">x,</span> <span class="pre">y)</span></code>.</p>
<p>(Descubierto por David Beazley y corregido por Victor Stinner; <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=10783">bpo-10783</a>.)</p>
</li>
<li><p>La clase <a class="reference internal" href="../library/xml.etree.elementtree.html#module-xml.etree.ElementTree" title="xml.etree.ElementTree: Implementation of the ElementTree API."><code class="xref py py-class docutils literal notranslate"><span class="pre">xml.etree.ElementTree</span></code></a> ahora genera un <a class="reference internal" href="../library/xml.etree.elementtree.html#xml.etree.ElementTree.ParseError" title="xml.etree.ElementTree.ParseError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">xml.etree.ElementTree.ParseError</span></code></a> cuando falla un análisis. Anteriormente generaba un <a class="reference internal" href="../library/pyexpat.html#xml.parsers.expat.ExpatError" title="xml.parsers.expat.ExpatError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">xml.parsers.expat.ExpatError</span></code></a>.</p></li>
<li><p>El nuevo valor más largo de <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-func docutils literal notranslate"><span class="pre">str()</span></code></a> en flotantes puede romper las pruebas de documentación que se basan en el formato de salida anterior.</p></li>
<li><p>En <a class="reference internal" href="../library/subprocess.html#subprocess.Popen" title="subprocess.Popen"><code class="xref py py-class docutils literal notranslate"><span class="pre">subprocess.Popen</span></code></a>, el valor predeterminado para <em>close_fds</em> es ahora <code class="docutils literal notranslate"><span class="pre">True</span></code> en Unix; en Windows, es <code class="docutils literal notranslate"><span class="pre">True</span></code> si los tres flujos estándar están configurados como <code class="docutils literal notranslate"><span class="pre">None</span></code>, o <code class="docutils literal notranslate"><span class="pre">False</span></code> en caso contrario. Anteriormente, <em>close_fds</em> siempre era <code class="docutils literal notranslate"><span class="pre">False</span></code> de forma predeterminada, lo que producía errores difíciles de resolver o condiciones de carrera cuando los descriptores de archivos abiertos se filtraban en el proceso hijo.</p></li>
<li><p>Se ha eliminado la compatibilidad con HTTP 0.9 heredado de <a class="reference internal" href="../library/urllib.request.html#module-urllib.request" title="urllib.request: Extensible library for opening URLs."><code class="xref py py-mod docutils literal notranslate"><span class="pre">urllib.request</span></code></a> y <a class="reference internal" href="../library/http.client.html#module-http.client" title="http.client: HTTP and HTTPS protocol client (requires sockets)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">http.client</span></code></a>. Dicho soporte todavía está presente en el lado del servidor (en <a class="reference internal" href="../library/http.server.html#module-http.server" title="http.server: HTTP server and request handlers."><code class="xref py py-mod docutils literal notranslate"><span class="pre">http.server</span></code></a>).</p>
<p>(Contribución de Antoine Pitrou, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=10711">bpo-10711</a>.)</p>
</li>
<li><p>Los sockets SSL en modo de tiempo de espera ahora generan <a class="reference internal" href="../library/socket.html#socket.timeout" title="socket.timeout"><code class="xref py py-exc docutils literal notranslate"><span class="pre">socket.timeout</span></code></a> cuando ocurre un tiempo de espera, en lugar de un genérico <a class="reference internal" href="../library/ssl.html#ssl.SSLError" title="ssl.SSLError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SSLError</span></code></a>.</p>
<p>(Contribución de Antoine Pitrou, <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=10272">bpo-10272</a>.)</p>
</li>
<li><p>Las funciones engañosas <a class="reference internal" href="../c-api/init.html#c.PyEval_AcquireLock" title="PyEval_AcquireLock"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyEval_AcquireLock()</span></code></a> y <a class="reference internal" href="../c-api/init.html#c.PyEval_ReleaseLock" title="PyEval_ReleaseLock"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyEval_ReleaseLock()</span></code></a> han quedado oficialmente obsoletas. Las API que reconocen el estado del hilo (como <a class="reference internal" href="../c-api/init.html#c.PyEval_SaveThread" title="PyEval_SaveThread"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyEval_SaveThread()</span></code></a> y <a class="reference internal" href="../c-api/init.html#c.PyEval_RestoreThread" title="PyEval_RestoreThread"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyEval_RestoreThread()</span></code></a>) deben usarse en su lugar.</p></li>
<li><p>Debido a riesgos de seguridad, <code class="xref py py-func docutils literal notranslate"><span class="pre">asyncore.handle_accept()</span></code> ha quedado obsoleto, y se agregó una nueva función, <code class="xref py py-func docutils literal notranslate"><span class="pre">asyncore.handle_accepted()</span></code>, para reemplazarlo.</p>
<p>(Contribución de Giampaolo Rodola en <a class="reference external" href="https://bugs.python.org/issue?&#64;action=redirect&amp;bpo=6706">bpo-6706</a>.)</p>
</li>
<li><p>Debido a la nueva implementación de <a class="reference internal" href="../glossary.html#term-GIL"><span class="xref std std-term">GIL</span></a>, <a class="reference internal" href="../c-api/init.html#c.PyEval_InitThreads" title="PyEval_InitThreads"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyEval_InitThreads()</span></code></a> ya no se puede llamar antes <a class="reference internal" href="../c-api/init.html#c.Py_Initialize" title="Py_Initialize"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_Initialize()</span></code></a>.</p></li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../contents.html">Tabla de contenido</a></h3>
    <ul>
<li><a class="reference internal" href="#">Qué hay de nuevo en Python 3.2</a><ul>
<li><a class="reference internal" href="#pep-384-defining-a-stable-abi">PEP 384: Definición de un ABI estable</a></li>
<li><a class="reference internal" href="#pep-389-argparse-command-line-parsing-module">PEP 389: Módulo de análisis sintáctico (<em>Parser</em>) de línea de comandos Argparse</a></li>
<li><a class="reference internal" href="#pep-391-dictionary-based-configuration-for-logging">PEP 391: Configuración basada en diccionario para Logging</a></li>
<li><a class="reference internal" href="#pep-3148-the-concurrent-futures-module">PEP 3148: El módulo <code class="docutils literal notranslate"><span class="pre">concurrent.futures</span></code></a></li>
<li><a class="reference internal" href="#pep-3147-pyc-repository-directories">PEP 3147: Directorios del repositorio de PYC</a></li>
<li><a class="reference internal" href="#pep-3149-abi-version-tagged-so-files">PEP 3149: Archivos .so con etiquetado de versión para ABI</a></li>
<li><a class="reference internal" href="#pep-3333-python-web-server-gateway-interface-v1-0-1">PEP 3333: Interfaz de puerta de enlace del servidor web Python v1.0.1</a></li>
<li><a class="reference internal" href="#other-language-changes">Otros cambios de lenguaje</a></li>
<li><a class="reference internal" href="#new-improved-and-deprecated-modules">Módulos nuevos, mejorados y obsoletos</a><ul>
<li><a class="reference internal" href="#email">email</a></li>
<li><a class="reference internal" href="#elementtree">elementtree</a></li>
<li><a class="reference internal" href="#functools">functools</a></li>
<li><a class="reference internal" href="#itertools">itertools</a></li>
<li><a class="reference internal" href="#collections">collections</a></li>
<li><a class="reference internal" href="#threading">threading</a></li>
<li><a class="reference internal" href="#datetime-and-time">datetime and time</a></li>
<li><a class="reference internal" href="#math">math</a></li>
<li><a class="reference internal" href="#abc">abc</a></li>
<li><a class="reference internal" href="#io">io</a></li>
<li><a class="reference internal" href="#reprlib">reprlib</a></li>
<li><a class="reference internal" href="#logging">logging</a></li>
<li><a class="reference internal" href="#csv">csv</a></li>
<li><a class="reference internal" href="#contextlib">contextlib</a></li>
<li><a class="reference internal" href="#decimal-and-fractions">decimal and fractions</a></li>
<li><a class="reference internal" href="#ftp">ftp</a></li>
<li><a class="reference internal" href="#popen">popen</a></li>
<li><a class="reference internal" href="#select">select</a></li>
<li><a class="reference internal" href="#gzip-and-zipfile">gzip y zipfile</a></li>
<li><a class="reference internal" href="#tarfile">tarfile</a></li>
<li><a class="reference internal" href="#hashlib">hashlib</a></li>
<li><a class="reference internal" href="#ast">ast</a></li>
<li><a class="reference internal" href="#os">os</a></li>
<li><a class="reference internal" href="#shutil">shutil</a></li>
<li><a class="reference internal" href="#sqlite3">sqlite3</a></li>
<li><a class="reference internal" href="#html">html</a></li>
<li><a class="reference internal" href="#socket">socket</a></li>
<li><a class="reference internal" href="#ssl">ssl</a></li>
<li><a class="reference internal" href="#nntp">nntp</a></li>
<li><a class="reference internal" href="#certificates">certificados</a></li>
<li><a class="reference internal" href="#imaplib">imaplib</a></li>
<li><a class="reference internal" href="#http-client">http.client</a></li>
<li><a class="reference internal" href="#unittest">unittest</a></li>
<li><a class="reference internal" href="#random">random</a></li>
<li><a class="reference internal" href="#poplib">poplib</a></li>
<li><a class="reference internal" href="#asyncore">asyncore</a></li>
<li><a class="reference internal" href="#tempfile">tempfile</a></li>
<li><a class="reference internal" href="#inspect">inspect</a></li>
<li><a class="reference internal" href="#pydoc">pydoc</a></li>
<li><a class="reference internal" href="#dis">dis</a></li>
<li><a class="reference internal" href="#dbm">dbm</a></li>
<li><a class="reference internal" href="#ctypes">ctypes</a></li>
<li><a class="reference internal" href="#site">site</a></li>
<li><a class="reference internal" href="#sysconfig">sysconfig</a></li>
<li><a class="reference internal" href="#pdb">pdb</a></li>
<li><a class="reference internal" href="#configparser">configparser</a></li>
<li><a class="reference internal" href="#urllib-parse">urllib.parse</a></li>
<li><a class="reference internal" href="#mailbox">mailbox</a></li>
<li><a class="reference internal" href="#turtledemo">turtledemo</a></li>
</ul>
</li>
<li><a class="reference internal" href="#multi-threading">Multi-threading</a></li>
<li><a class="reference internal" href="#optimizations">Optimizations</a></li>
<li><a class="reference internal" href="#unicode">Unicode</a></li>
<li><a class="reference internal" href="#codecs">Codecs</a></li>
<li><a class="reference internal" href="#documentation">Documentación</a></li>
<li><a class="reference internal" href="#idle">IDLE</a></li>
<li><a class="reference internal" href="#code-repository">Repositorio de código</a></li>
<li><a class="reference internal" href="#build-and-c-api-changes">Cambios en la API de construcción y C</a></li>
<li><a class="reference internal" href="#porting-to-python-3-2">Portar a Python 3.2</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Tema anterior</h4>
    <p class="topless"><a href="3.3.html"
                          title="capítulo anterior">Qué hay de nuevo en Python 3.3</a></p>
  </div>
  <div>
    <h4>Próximo tema</h4>
    <p class="topless"><a href="3.1.html"
                          title="próximo capítulo">Qué hay de nuevo en Python 3.1</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Reporta un bug</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/3.11/Doc/whatsnew/3.2.rst"
            rel="nofollow">Ver fuente
        </a>
      </li>
    </ul>
  </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice general"
             >índice</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Índice de Módulos Python"
             >módulos</a> |</li>
        <li class="right" >
          <a href="3.1.html" title="Qué hay de nuevo en Python 3.1"
             >siguiente</a> |</li>
        <li class="right" >
          <a href="3.3.html" title="Qué hay de nuevo en Python 3.3"
             >anterior</a> |</li>

          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.11.2 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" >Qué hay de nuevo en Python</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Qué hay de nuevo en Python 3.2</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Búsqueda rápida" aria-label="Búsqueda rápida" type="text" name="q" />
          <input type="submit" value="Ir" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
                     |
                </li>
            
      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="../copyright.html">Copyright</a> 2001-2023, Python Software Foundation.
    <br />
    This page is licensed under the Python Software Foundation License Version 2.
    <br />
    Examples, recipes, and other code in the documentation are additionally licensed under the Zero Clause BSD License.
    <br />
    See <a href="/license.html">History and License</a> for more information.<br />
    <br />

    La Python Software Foundation es una organización sin fines de lucro.
<a href="https://www.python.org/psf/donations/">Por favor, haga una donación.</a>
<br />
    <br />

    Última actualización el mar 23, 2023.
    <a href="/bugs.html">Found a bug</a>?
    <br />

    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.5.0.
    </div>

  </body>
</html>