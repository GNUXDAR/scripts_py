
<!DOCTYPE html>

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>8. Sentencias compuestas &#8212; documentación de Python - 3.10.10</title><meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pydoctheme.css?2022.1" type="text/css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/translations.js"></script>
    
    <script src="../_static/sidebar.js"></script>
    
    <link rel="search" type="application/opensearchdescription+xml"
          title="Buscar en documentación de Python - 3.10.10"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="Sobre este documento" href="../about.html" />
    <link rel="index" title="Índice" href="../genindex.html" />
    <link rel="search" title="Búsqueda" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="9. Componentes de nivel superior" href="toplevel_components.html" />
    <link rel="prev" title="7. Declaraciones simples" href="simple_stmts.html" />
    <link rel="canonical" href="https://docs.python.org/3/reference/compound_stmts.html" />
    
      
    

    
    <style>
      @media only screen {
        table.full-width-table {
            width: 100%;
        }
      }
    </style>
<link rel="shortcut icon" type="image/png" href="../_static/py.svg" />
            <script type="text/javascript" src="../_static/copybutton.js"></script>
            <script type="text/javascript" src="../_static/menu.js"></script> 

  </head>
<body>
<div class="mobile-nav">
    <input type="checkbox" id="menuToggler" class="toggler__input" aria-controls="navigation"
           aria-pressed="false" aria-expanded="false" role="button" aria-label="Menu" />
    <label for="menuToggler" class="toggler__label">
        <span></span>
    </label>
    <nav class="nav-content" role="navigation">
         <a href="https://www.python.org/" class="nav-logo">
             <img src="../_static/py.svg" alt="Logo"/>
         </a>
        <div class="version_switcher_placeholder"></div>
        <form role="search" class="search" action="../search.html" method="get">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" class="search-icon">
                <path fill-rule="nonzero"
                        d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 001.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 00-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.5 6.5 0 005.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" fill="#444"></path>
            </svg>
            <input type="text" name="q" aria-label="Búsqueda rápida"/>
            <input type="submit" value="Ir"/>
        </form>
    </nav>
    <div class="menu-wrapper">
        <nav class="menu" role="navigation" aria-label="main navigation">
            <div class="language_switcher_placeholder"></div>
  <h3><a href="../contents.html">Tabla de contenido</a></h3>
  <ul>
<li><a class="reference internal" href="#">8. Sentencias compuestas</a><ul>
<li><a class="reference internal" href="#the-if-statement">8.1. La sentencia <code class="xref std std-keyword docutils literal notranslate"><span class="pre">if</span></code></a></li>
<li><a class="reference internal" href="#the-while-statement">8.2. La sentencia <code class="xref std std-keyword docutils literal notranslate"><span class="pre">while</span></code></a></li>
<li><a class="reference internal" href="#the-for-statement">8.3. La sentencia <code class="xref std std-keyword docutils literal notranslate"><span class="pre">for</span></code></a></li>
<li><a class="reference internal" href="#the-try-statement">8.4. La sentencia <code class="xref std std-keyword docutils literal notranslate"><span class="pre">try</span></code></a></li>
<li><a class="reference internal" href="#the-with-statement">8.5. La sentencia <code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a></li>
<li><a class="reference internal" href="#the-match-statement">8.6. La sentencia <code class="xref std std-keyword docutils literal notranslate"><span class="pre">match</span></code></a><ul>
<li><a class="reference internal" href="#overview">8.6.1. Resumen</a></li>
<li><a class="reference internal" href="#guards">8.6.2. Protecciones</a></li>
<li><a class="reference internal" href="#irrefutable-case-blocks">8.6.3. Bloques de Casos Irrefutables</a></li>
<li><a class="reference internal" href="#patterns">8.6.4. Patrones</a><ul>
<li><a class="reference internal" href="#or-patterns">8.6.4.1. Patrones OR</a></li>
<li><a class="reference internal" href="#as-patterns">8.6.4.2. patrones AS</a></li>
<li><a class="reference internal" href="#literal-patterns">8.6.4.3. Patrones literales</a></li>
<li><a class="reference internal" href="#capture-patterns">8.6.4.4. Capturar patrones</a></li>
<li><a class="reference internal" href="#wildcard-patterns">8.6.4.5. Patrones comodín</a></li>
<li><a class="reference internal" href="#value-patterns">8.6.4.6. Patrones de valor</a></li>
<li><a class="reference internal" href="#group-patterns">8.6.4.7. Patrones de grupo</a></li>
<li><a class="reference internal" href="#sequence-patterns">8.6.4.8. Patrones de secuencia</a></li>
<li><a class="reference internal" href="#mapping-patterns">8.6.4.9. Patrones de mapeo</a></li>
<li><a class="reference internal" href="#class-patterns">8.6.4.10. Patrones de clase</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#function-definitions">8.7. Definiciones de funciones</a></li>
<li><a class="reference internal" href="#class-definitions">8.8. Definiciones de clase</a></li>
<li><a class="reference internal" href="#coroutines">8.9. Corrutinas</a><ul>
<li><a class="reference internal" href="#coroutine-function-definition">8.9.1. Definición de la función corrutina</a></li>
<li><a class="reference internal" href="#the-async-for-statement">8.9.2. La sentencia <code class="xref std std-keyword docutils literal notranslate"><span class="pre">async</span> <span class="pre">for</span></code></a></li>
<li><a class="reference internal" href="#the-async-with-statement">8.9.3. La sentencia <code class="xref std std-keyword docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Tema anterior</h4>
  <p class="topless"><a href="simple_stmts.html"
                        title="capítulo anterior"><span class="section-number">7. </span>Declaraciones simples</a></p>
  <h4>Próximo tema</h4>
  <p class="topless"><a href="toplevel_components.html"
                        title="próximo capítulo"><span class="section-number">9. </span>Componentes de nivel superior</a></p>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Reporta un Bug</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/3.10/Doc/reference/compound_stmts.rst"
            rel="nofollow">Ver Fuente
        </a>
      </li>
    </ul>
  </div>
        </nav>
    </div>
</div>

  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice general"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Índice de Módulos Python"
             >módulos</a> |</li>
        <li class="right" >
          <a href="toplevel_components.html" title="9. Componentes de nivel superior"
             accesskey="N">siguiente</a> |</li>
        <li class="right" >
          <a href="simple_stmts.html" title="7. Declaraciones simples"
             accesskey="P">anterior</a> |</li>

          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.10.10 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Referencia del Lenguaje Python</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">8. </span>Sentencias compuestas</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Búsqueda rápida" aria-label="Búsqueda rápida" type="text" name="q" />
          <input type="submit" value="Ir" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
                     |
                </li>
            
      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="compound-statements">
<span id="compound"></span><h1><span class="section-number">8. </span>Sentencias compuestas<a class="headerlink" href="#compound-statements" title="Enlazar permanentemente con este título">¶</a></h1>
<p id="index-0">Las sentencias compuestas contienen (grupos de) otras sentencias; estas afectan o controlan la ejecución de esas otras sentencias de alguna manera. En general, las sentencias compuestas abarcan varias líneas, aunque en representaciones simples una sentencia compuesta completa puede estar contenida en una línea.</p>
<p>Las sentencias <a class="reference internal" href="#if"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">if</span></code></a>, <a class="reference internal" href="#while"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">while</span></code></a> y <a class="reference internal" href="#for"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">for</span></code></a> implementan construcciones de control de flujo tradicionales. <a class="reference internal" href="#try"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">try</span></code></a> especifica gestores de excepción o código de limpieza para un grupo de sentencias, mientras que las sentencias <a class="reference internal" href="#with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a> permite la ejecución del código de inicialización y finalización alrededor de un bloque de código. Las definiciones de función y clase también son sentencias sintácticamente compuestas.</p>
<p id="index-1">Una sentencia compuesta consta de una o más “cláusulas”. Una cláusula consta de un encabezado y una “suite”. Los encabezados de cláusula de una declaración compuesta particular están todos en el mismo nivel de indentación. Cada encabezado de cláusula comienza con una palabra clave de identificación única y termina con dos puntos. Una suite es un grupo de sentencias controladas por una cláusula. Una suite puede ser una o más sentencias simples separadas por punto y coma en la misma línea como el encabezado, siguiendo los dos puntos del encabezado, o puede ser una o puede ser una o más declaraciones indentadas en líneas posteriores. Solo la última forma de una suite puede contener sentencias compuestas anidadas; lo siguiente es ilegal, principalmente porque no estaría claro a qué cláusula <a class="reference internal" href="#if"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">if</span></code></a> seguido de la cláusula <a class="reference internal" href="#else"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">else</span></code></a> hace referencia:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">test1</span><span class="p">:</span> <span class="k">if</span> <span class="n">test2</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
<p>También tenga en cuenta que el punto y coma se une más apretado que los dos puntos en este contexto, de modo que en el siguiente ejemplo, todas o ninguna de las llamadas <a class="reference internal" href="../library/functions.html#print" title="print"><code class="xref py py-func docutils literal notranslate"><span class="pre">print()</span></code></a> se ejecutan:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="n">z</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">);</span> <span class="nb">print</span><span class="p">(</span><span class="n">y</span><span class="p">);</span> <span class="nb">print</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
</pre></div>
</div>
<p>Resumiendo:</p>
<pre>
<strong id="grammar-token-python-grammar-compound_stmt"><span id="grammar-token-compound-stmt"></span>compound_stmt</strong> ::=  <a class="reference internal" href="#grammar-token-python-grammar-if_stmt"><code class="xref docutils literal notranslate"><span class="pre">if_stmt</span></code></a>
                   | <a class="reference internal" href="#grammar-token-python-grammar-while_stmt"><code class="xref docutils literal notranslate"><span class="pre">while_stmt</span></code></a>
                   | <a class="reference internal" href="#grammar-token-python-grammar-for_stmt"><code class="xref docutils literal notranslate"><span class="pre">for_stmt</span></code></a>
                   | <a class="reference internal" href="#grammar-token-python-grammar-try_stmt"><code class="xref docutils literal notranslate"><span class="pre">try_stmt</span></code></a>
                   | <a class="reference internal" href="#grammar-token-python-grammar-with_stmt"><code class="xref docutils literal notranslate"><span class="pre">with_stmt</span></code></a>
                   | <a class="reference internal" href="#grammar-token-python-grammar-match_stmt"><code class="xref docutils literal notranslate"><span class="pre">match_stmt</span></code></a>
                   | <a class="reference internal" href="#grammar-token-python-grammar-funcdef"><code class="xref docutils literal notranslate"><span class="pre">funcdef</span></code></a>
                   | <a class="reference internal" href="#grammar-token-python-grammar-classdef"><code class="xref docutils literal notranslate"><span class="pre">classdef</span></code></a>
                   | <a class="reference internal" href="#grammar-token-python-grammar-async_with_stmt"><code class="xref docutils literal notranslate"><span class="pre">async_with_stmt</span></code></a>
                   | <a class="reference internal" href="#grammar-token-python-grammar-async_for_stmt"><code class="xref docutils literal notranslate"><span class="pre">async_for_stmt</span></code></a>
                   | <a class="reference internal" href="#grammar-token-python-grammar-async_funcdef"><code class="xref docutils literal notranslate"><span class="pre">async_funcdef</span></code></a>
<strong id="grammar-token-python-grammar-suite"><span id="grammar-token-suite"></span>suite        </strong> ::=  <a class="reference internal" href="#grammar-token-python-grammar-stmt_list"><code class="xref docutils literal notranslate"><span class="pre">stmt_list</span></code></a> NEWLINE | NEWLINE INDENT <a class="reference internal" href="#grammar-token-python-grammar-statement"><code class="xref docutils literal notranslate"><span class="pre">statement</span></code></a>+ DEDENT
<strong id="grammar-token-python-grammar-statement"><span id="grammar-token-statement"></span>statement    </strong> ::=  <a class="reference internal" href="#grammar-token-python-grammar-stmt_list"><code class="xref docutils literal notranslate"><span class="pre">stmt_list</span></code></a> NEWLINE | <a class="reference internal" href="#grammar-token-python-grammar-compound_stmt"><code class="xref docutils literal notranslate"><span class="pre">compound_stmt</span></code></a>
<strong id="grammar-token-python-grammar-stmt_list"><span id="grammar-token-stmt-list"></span>stmt_list    </strong> ::=  <a class="reference internal" href="simple_stmts.html#grammar-token-python-grammar-simple_stmt"><code class="xref docutils literal notranslate"><span class="pre">simple_stmt</span></code></a> (&quot;;&quot; <a class="reference internal" href="simple_stmts.html#grammar-token-python-grammar-simple_stmt"><code class="xref docutils literal notranslate"><span class="pre">simple_stmt</span></code></a>)* [&quot;;&quot;]
</pre>
<p id="index-2">Tenga en cuenta que las sentencias siempre terminan en un <code class="docutils literal notranslate"><span class="pre">NEWLINE</span></code> posiblemente seguida de <code class="docutils literal notranslate"><span class="pre">DEDENT</span></code>. También tenga en cuenta que las cláusulas de continuación opcionales siempre comienzan con una palabra clave que no puede iniciar una sentencia, por lo tanto, no hay ambigüedades (el problema de “colgado <a class="reference internal" href="#if"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">if</span></code></a>” se resuelve en Python al requerir que las sentencias anidadas <a class="reference internal" href="#if"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">if</span></code></a> deben estar indentadas).</p>
<p>El formato de las reglas gramaticales en las siguientes secciones coloca cada cláusula en una línea separada para mayor claridad.</p>
<section id="the-if-statement">
<span id="else"></span><span id="elif"></span><span id="if"></span><h2><span class="section-number">8.1. </span>La sentencia <code class="xref std std-keyword docutils literal notranslate"><span class="pre">if</span></code><a class="headerlink" href="#the-if-statement" title="Enlazar permanentemente con este título">¶</a></h2>
<p id="index-3">La sentencia <a class="reference internal" href="#if"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">if</span></code></a> se usa para la ejecución condicional:</p>
<pre>
<strong id="grammar-token-python-grammar-if_stmt"><span id="grammar-token-if-stmt"></span>if_stmt</strong> ::=  &quot;if&quot; <a class="reference internal" href="expressions.html#grammar-token-python-grammar-assignment_expression"><code class="xref docutils literal notranslate"><span class="pre">assignment_expression</span></code></a> &quot;:&quot; <a class="reference internal" href="#grammar-token-python-grammar-suite"><code class="xref docutils literal notranslate"><span class="pre">suite</span></code></a>
             (&quot;elif&quot; <a class="reference internal" href="expressions.html#grammar-token-python-grammar-assignment_expression"><code class="xref docutils literal notranslate"><span class="pre">assignment_expression</span></code></a> &quot;:&quot; <a class="reference internal" href="#grammar-token-python-grammar-suite"><code class="xref docutils literal notranslate"><span class="pre">suite</span></code></a>)*
             [&quot;else&quot; &quot;:&quot; <a class="reference internal" href="#grammar-token-python-grammar-suite"><code class="xref docutils literal notranslate"><span class="pre">suite</span></code></a>]
</pre>
<p>Selecciona exactamente una de las suites evaluando las expresiones una por una hasta que se encuentre una verdadera (vea la sección <a class="reference internal" href="expressions.html#booleans"><span class="std std-ref">Operaciones booleanas</span></a> para la definición de verdadero y falso); entonces esa suite se ejecuta (y ninguna otra parte de la sentencia <a class="reference internal" href="#if"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">if</span></code></a> se ejecuta o evalúa). Si todas las expresiones son falsas, se ejecuta la suite de cláusulas <a class="reference internal" href="#else"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">else</span></code></a>, si está presente.</p>
</section>
<section id="the-while-statement">
<span id="while"></span><h2><span class="section-number">8.2. </span>La sentencia <code class="xref std std-keyword docutils literal notranslate"><span class="pre">while</span></code><a class="headerlink" href="#the-while-statement" title="Enlazar permanentemente con este título">¶</a></h2>
<p id="index-4">La sentencia <a class="reference internal" href="#while"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">while</span></code></a> se usa para la ejecución repetida siempre que una expresión sea verdadera:</p>
<pre>
<strong id="grammar-token-python-grammar-while_stmt"><span id="grammar-token-while-stmt"></span>while_stmt</strong> ::=  &quot;while&quot; <a class="reference internal" href="expressions.html#grammar-token-python-grammar-assignment_expression"><code class="xref docutils literal notranslate"><span class="pre">assignment_expression</span></code></a> &quot;:&quot; <a class="reference internal" href="#grammar-token-python-grammar-suite"><code class="xref docutils literal notranslate"><span class="pre">suite</span></code></a>
                [&quot;else&quot; &quot;:&quot; <a class="reference internal" href="#grammar-token-python-grammar-suite"><code class="xref docutils literal notranslate"><span class="pre">suite</span></code></a>]
</pre>
<p>Esto prueba repetidamente la expresión y, si es verdadera, ejecuta la primera suite; si la expresión es falsa (que puede ser la primera vez que se prueba), se ejecuta el conjunto de cláusulas <code class="xref std std-keyword docutils literal notranslate"><span class="pre">else</span></code>, si está presente, y el bucle termina.</p>
<p id="index-5">La sentencia <a class="reference internal" href="simple_stmts.html#break"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">break</span></code></a> ejecutada en la primer suite termina el bucle sin ejecutar la suite de cláusulas <code class="xref std std-keyword docutils literal notranslate"><span class="pre">else</span></code>. La sentencia <a class="reference internal" href="simple_stmts.html#continue"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">continue</span></code></a> ejecutada en la primera suite omite el resto de la suite y vuelve a probar la expresión.</p>
</section>
<section id="the-for-statement">
<span id="for"></span><h2><span class="section-number">8.3. </span>La sentencia <code class="xref std std-keyword docutils literal notranslate"><span class="pre">for</span></code><a class="headerlink" href="#the-for-statement" title="Enlazar permanentemente con este título">¶</a></h2>
<p id="index-6">La sentencia <a class="reference internal" href="#for"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">for</span></code></a> se usa para iterar sobre los elementos de una secuencia (como una cadena de caracteres, tupla o lista) u otro objeto iterable:</p>
<pre>
<strong id="grammar-token-python-grammar-for_stmt"><span id="grammar-token-for-stmt"></span>for_stmt</strong> ::=  &quot;for&quot; <a class="reference internal" href="simple_stmts.html#grammar-token-python-grammar-target_list"><code class="xref docutils literal notranslate"><span class="pre">target_list</span></code></a> &quot;in&quot; <a class="reference internal" href="expressions.html#grammar-token-python-grammar-expression_list"><code class="xref docutils literal notranslate"><span class="pre">expression_list</span></code></a> &quot;:&quot; <a class="reference internal" href="#grammar-token-python-grammar-suite"><code class="xref docutils literal notranslate"><span class="pre">suite</span></code></a>
              [&quot;else&quot; &quot;:&quot; <a class="reference internal" href="#grammar-token-python-grammar-suite"><code class="xref docutils literal notranslate"><span class="pre">suite</span></code></a>]
</pre>
<p>La lista de expresiones se evalúa una vez; debería producir un objeto iterable. Se crea un iterador para el resultado de la <code class="docutils literal notranslate"><span class="pre">expression_list</span></code>. La suite se ejecuta una vez para cada elemento proporcionado por el iterador, en el orden retornado por el iterador. Cada elemento a su vez se asigna a la lista utilizando las reglas estándar para las asignaciones (ver <a class="reference internal" href="simple_stmts.html#assignment"><span class="std std-ref">Declaraciones de asignación</span></a>), y luego se ejecuta la suite. Cuando los elementos están agotados (que es inmediatamente cuando la secuencia está vacía o un iterador lanza una excepción del tipo <a class="reference internal" href="../library/exceptions.html#StopIteration" title="StopIteration"><code class="xref py py-exc docutils literal notranslate"><span class="pre">StopIteration</span></code></a>), la suite en la cláusula <code class="xref std std-keyword docutils literal notranslate"><span class="pre">else</span></code>, si está presente, se ejecuta y el bucle termina.</p>
<p id="index-7">La sentencia <a class="reference internal" href="simple_stmts.html#break"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">break</span></code></a> ejecutada en la primera suite termina el bucle sin ejecutar el conjunto de cláusulas <code class="xref std std-keyword docutils literal notranslate"><span class="pre">else</span></code>. La sentencia <a class="reference internal" href="simple_stmts.html#continue"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">continue</span></code></a> ejecutada en la primera suite omite el resto de las cláusulas y continúa con el siguiente elemento, o con la cláusula <code class="xref std std-keyword docutils literal notranslate"><span class="pre">else</span></code> si no hay un elemento siguiente.</p>
<p>El bucle <code class="docutils literal notranslate"><span class="pre">for</span></code> realiza asignaciones a las variables en la lista. Esto sobrescribe todas las asignaciones anteriores a esas variables, incluidas las realizadas en la suite del bucle <code class="docutils literal notranslate"><span class="pre">for</span></code>:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">5</span>             <span class="c1"># this will not affect the for-loop</span>
                      <span class="c1"># because i will be overwritten with the next</span>
                      <span class="c1"># index in the range</span>
</pre></div>
</div>
<p id="index-8">Names in the target list are not deleted when the loop is finished, but if the
sequence is empty, they will not have been assigned to at all by the loop.  Hint:
the built-in type <a class="reference internal" href="../library/stdtypes.html#range" title="range"><code class="xref py py-func docutils literal notranslate"><span class="pre">range()</span></code></a> represents immutable arithmetic sequences of integers.
For instance, iterating <code class="docutils literal notranslate"><span class="pre">range(3)</span></code> successively yields 0, 1, and then 2.</p>
</section>
<section id="the-try-statement">
<span id="finally"></span><span id="except"></span><span id="try"></span><h2><span class="section-number">8.4. </span>La sentencia <code class="xref std std-keyword docutils literal notranslate"><span class="pre">try</span></code><a class="headerlink" href="#the-try-statement" title="Enlazar permanentemente con este título">¶</a></h2>
<p id="index-9">La sentencia <a class="reference internal" href="#try"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">try</span></code></a> es especifica para gestionar excepciones o código de limpieza para un grupo de sentencias:</p>
<pre>
<strong id="grammar-token-python-grammar-try_stmt"><span id="grammar-token-try-stmt"></span>try_stmt </strong> ::=  <a class="reference internal" href="#grammar-token-python-grammar-try1_stmt"><code class="xref docutils literal notranslate"><span class="pre">try1_stmt</span></code></a> | <a class="reference internal" href="#grammar-token-python-grammar-try2_stmt"><code class="xref docutils literal notranslate"><span class="pre">try2_stmt</span></code></a>
<strong id="grammar-token-python-grammar-try1_stmt"><span id="grammar-token-try1-stmt"></span>try1_stmt</strong> ::=  &quot;try&quot; &quot;:&quot; <a class="reference internal" href="#grammar-token-python-grammar-suite"><code class="xref docutils literal notranslate"><span class="pre">suite</span></code></a>
               (&quot;except&quot; [<a class="reference internal" href="expressions.html#grammar-token-python-grammar-expression"><code class="xref docutils literal notranslate"><span class="pre">expression</span></code></a> [&quot;as&quot; <a class="reference internal" href="lexical_analysis.html#grammar-token-python-grammar-identifier"><code class="xref docutils literal notranslate"><span class="pre">identifier</span></code></a>]] &quot;:&quot; <a class="reference internal" href="#grammar-token-python-grammar-suite"><code class="xref docutils literal notranslate"><span class="pre">suite</span></code></a>)+
               [&quot;else&quot; &quot;:&quot; <a class="reference internal" href="#grammar-token-python-grammar-suite"><code class="xref docutils literal notranslate"><span class="pre">suite</span></code></a>]
               [&quot;finally&quot; &quot;:&quot; <a class="reference internal" href="#grammar-token-python-grammar-suite"><code class="xref docutils literal notranslate"><span class="pre">suite</span></code></a>]
<strong id="grammar-token-python-grammar-try2_stmt"><span id="grammar-token-try2-stmt"></span>try2_stmt</strong> ::=  &quot;try&quot; &quot;:&quot; <a class="reference internal" href="#grammar-token-python-grammar-suite"><code class="xref docutils literal notranslate"><span class="pre">suite</span></code></a>
               &quot;finally&quot; &quot;:&quot; <a class="reference internal" href="#grammar-token-python-grammar-suite"><code class="xref docutils literal notranslate"><span class="pre">suite</span></code></a>
</pre>
<p>The <a class="reference internal" href="#except"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">except</span></code></a> clause(s) specify one or more exception handlers. When no
exception occurs in the <a class="reference internal" href="#try"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">try</span></code></a> clause, no exception handler is executed.
When an exception occurs in the <code class="xref std std-keyword docutils literal notranslate"><span class="pre">try</span></code> suite, a search for an exception
handler is started.  This search inspects the except clauses in turn until one
is found that matches the exception.  An expression-less except clause, if
present, must be last; it matches any exception.  For an except clause with an
expression, that expression is evaluated, and the clause matches the exception
if the resulting object is «compatible» with the exception.  An object is
compatible with an exception if the object is the class or a
<a class="reference internal" href="../glossary.html#term-abstract-base-class"><span class="xref std std-term">non-virtual base class</span></a> of the exception object,
or a tuple containing an item that is the class or a non-virtual base class
of the exception object.</p>
<p>Si ninguna cláusula <code class="docutils literal notranslate"><span class="pre">except</span></code> coincide con la excepción, la búsqueda de un gestor de excepciones continúa en el código circundante y en la pila de invocación. <a class="footnote-reference brackets" href="#id16" id="id1">1</a></p>
<p>Si la evaluación de una expresión en el encabezado de una cláusula <code class="docutils literal notranslate"><span class="pre">except</span></code> lanza una excepción, la búsqueda original de un gestor se cancela y se inicia la búsqueda de la nueva excepción en el código circundante y en la pila de llamadas (se trata como si toda la sentencia <a class="reference internal" href="#try"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">try</span></code></a> provocó la excepción).</p>
<p id="index-10">Cuando se encuentra una cláusula <code class="docutils literal notranslate"><span class="pre">except</span></code> coincidente, la excepción se asigna al destino especificado después de la palabra clave <code class="xref std std-keyword docutils literal notranslate"><span class="pre">as</span></code> en esa cláusula <code class="docutils literal notranslate"><span class="pre">except</span></code>, si está presente, y se ejecuta la suite de cláusulas <code class="docutils literal notranslate"><span class="pre">except</span></code>. Todas las cláusulas <code class="docutils literal notranslate"><span class="pre">except</span></code> deben tener un bloque ejecutable. Cuando se alcanza el final de este bloque, la ejecución continúa normalmente después de toda la sentencia try. (Esto significa que si existen dos gestores de errores anidados para la misma excepción, y la excepción ocurre en la cláusula <code class="docutils literal notranslate"><span class="pre">try</span></code> del gestor interno, el gestor externo no gestionará la excepción).</p>
<p>Cuando se ha asignado una excepción usando <code class="docutils literal notranslate"><span class="pre">as</span> <span class="pre">target</span></code>, se borra al final de la cláusula <code class="docutils literal notranslate"><span class="pre">except</span></code>. Esto es como si</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">except</span> <span class="n">E</span> <span class="k">as</span> <span class="n">N</span><span class="p">:</span>
    <span class="n">foo</span>
</pre></div>
</div>
<p>fue traducido a</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">except</span> <span class="n">E</span> <span class="k">as</span> <span class="n">N</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">foo</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="k">del</span> <span class="n">N</span>
</pre></div>
</div>
<p>Esto significa que la excepción debe asignarse a un nombre diferente para poder referirse a ella después de la cláusula <code class="docutils literal notranslate"><span class="pre">except</span></code>. Las excepciones se borran porque con el seguimiento vinculado a ellas, forman un bucle de referencia con el marco de la pila, manteniendo activos todos los locales en esa pila hasta que ocurra la próxima recolección de basura.</p>
<p id="index-11">Antes de que se ejecute un conjunto de cláusulas <code class="docutils literal notranslate"><span class="pre">except</span></code>, los detalles sobre la excepción se almacenan en el módulo <a class="reference internal" href="../library/sys.html#module-sys" title="sys: Access system-specific parameters and functions."><code class="xref py py-mod docutils literal notranslate"><span class="pre">sys</span></code></a> y se puede acceder a través de <a class="reference internal" href="../library/sys.html#sys.exc_info" title="sys.exc_info"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.exc_info()</span></code></a>. <a class="reference internal" href="../library/sys.html#sys.exc_info" title="sys.exc_info"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.exc_info()</span></code></a> retorna 3 tuplas que consisten en la clase de excepción, la instancia de excepción y un objeto de rastreo (ver sección <a class="reference internal" href="datamodel.html#types"><span class="std std-ref">Jerarquía de tipos estándar</span></a>) que identifica el punto en el programa donde ocurrió la excepción. Lo valores <a class="reference internal" href="../library/sys.html#sys.exc_info" title="sys.exc_info"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.exc_info()</span></code></a> se restauran a sus valores anteriores (antes de la llamada) al regresar de una función que manejó una excepción:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">())</span>
<span class="go">(None, None, None)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">raise</span> <span class="ne">TypeError</span>
<span class="gp">... </span><span class="k">except</span><span class="p">:</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">())</span>
<span class="gp">... </span>    <span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>         <span class="k">raise</span> <span class="ne">ValueError</span>
<span class="gp">... </span>    <span class="k">except</span><span class="p">:</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">())</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">())</span>
<span class="gp">...</span>
<span class="go">(&lt;class &#39;TypeError&#39;&gt;, TypeError(), &lt;traceback object at 0x10efad080&gt;)</span>
<span class="go">(&lt;class &#39;ValueError&#39;&gt;, ValueError(), &lt;traceback object at 0x10efad040&gt;)</span>
<span class="go">(&lt;class &#39;TypeError&#39;&gt;, TypeError(), &lt;traceback object at 0x10efad080&gt;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">())</span>
<span class="go">(None, None, None)</span>
</pre></div>
</div>
<p id="index-12">La cláusula opcional <code class="xref std std-keyword docutils literal notranslate"><span class="pre">else</span></code> se ejecuta si el flujo de control sale de la suite <a class="reference internal" href="#try"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">try</span></code></a>, no se produjo ninguna excepción, y no se ejecutó la sentencia <a class="reference internal" href="simple_stmts.html#return"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">return</span></code></a>, <a class="reference internal" href="simple_stmts.html#continue"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">continue</span></code></a> o <a class="reference internal" href="simple_stmts.html#break"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">break</span></code></a>. Las excepciones en la cláusula <code class="xref std std-keyword docutils literal notranslate"><span class="pre">else</span></code> no se gestionaron con las cláusulas precedentes <a class="reference internal" href="#except"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">except</span></code></a>.</p>
<p id="index-13">Si está presente <a class="reference internal" href="#finally"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">finally</span></code></a>, esto especifica un gestor de “limpieza”. La cláusula <a class="reference internal" href="#try"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">try</span></code></a> se ejecuta, incluidas las cláusulas <a class="reference internal" href="#except"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">except</span></code></a> y <code class="xref std std-keyword docutils literal notranslate"><span class="pre">else</span></code>. Si se produce una excepción en cualquiera de las cláusulas y no se maneja, la excepción se guarda temporalmente. Se ejecuta la cláusula <code class="xref std std-keyword docutils literal notranslate"><span class="pre">finally</span></code>. Si hay una excepción guardada, se vuelve a lanzar al final de la cláusula <code class="xref std std-keyword docutils literal notranslate"><span class="pre">finally</span></code>. Si la cláusula <code class="xref std std-keyword docutils literal notranslate"><span class="pre">finally</span></code> lanza otra excepción, la excepción guardada se establece como el contexto de la nueva excepción. Si la cláusula <code class="xref std std-keyword docutils literal notranslate"><span class="pre">finally</span></code> ejecuta una sentencia <a class="reference internal" href="simple_stmts.html#return"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">return</span></code></a>, <a class="reference internal" href="simple_stmts.html#break"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">break</span></code></a> o <a class="reference internal" href="simple_stmts.html#continue"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">continue</span></code></a>, la excepción guardada se descarta:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>        <span class="mi">1</span><span class="o">/</span><span class="mi">0</span>
<span class="gp">... </span>    <span class="k">finally</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="mi">42</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="p">()</span>
<span class="go">42</span>
</pre></div>
</div>
<p>La información de excepción no está disponible para el programa durante la ejecución de la cláusula <a class="reference internal" href="#finally"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">finally</span></code></a>.</p>
<p id="index-14">Cuando se ejecuta una sentencia <a class="reference internal" href="simple_stmts.html#return"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">return</span></code></a>, <a class="reference internal" href="simple_stmts.html#break"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">break</span></code></a> o <a class="reference internal" href="simple_stmts.html#continue"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">continue</span></code></a> en la suite <a class="reference internal" href="#try"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">try</span></code></a> de un <code class="xref std std-keyword docutils literal notranslate"><span class="pre">try</span></code>…la sentencia <code class="xref std std-keyword docutils literal notranslate"><span class="pre">finally</span></code>, la cláusula <a class="reference internal" href="#finally"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">finally</span></code></a> también se ejecuta “al salir”.</p>
<p>El valor de retorno de una función está determinado por la última sentencia <a class="reference internal" href="simple_stmts.html#return"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">return</span></code></a> ejecutada. Dado que la cláusula <a class="reference internal" href="#finally"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">finally</span></code></a> siempre se ejecuta, una sentencia <code class="xref std std-keyword docutils literal notranslate"><span class="pre">return</span></code> ejecutada en la cláusula <code class="xref std std-keyword docutils literal notranslate"><span class="pre">finally</span></code> siempre será la última ejecutada:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="s1">&#39;try&#39;</span>
<span class="gp">... </span>    <span class="k">finally</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="s1">&#39;finally&#39;</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span><span class="p">()</span>
<span class="go">&#39;finally&#39;</span>
</pre></div>
</div>
<p>Se puede encontrar información adicional sobre las excepciones en la sección <a class="reference internal" href="executionmodel.html#exceptions"><span class="std std-ref">Excepciones</span></a>, e información sobre el uso de la sentencia <a class="reference internal" href="simple_stmts.html#raise"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">raise</span></code></a>, para lanzar excepciones se puede encontrar en la sección <a class="reference internal" href="simple_stmts.html#raise"><span class="std std-ref">La declaración raise</span></a>.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Distinto en la versión 3.8: </span>Antes de Python 3.8, una sentencia <a class="reference internal" href="simple_stmts.html#continue"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">continue</span></code></a> era ilegal en la cláusula <a class="reference internal" href="#finally"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">finally</span></code></a> debido a un problema con la implementación.</p>
</div>
</section>
<section id="the-with-statement">
<span id="as"></span><span id="with"></span><h2><span class="section-number">8.5. </span>La sentencia <code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code><a class="headerlink" href="#the-with-statement" title="Enlazar permanentemente con este título">¶</a></h2>
<p id="index-15">La sentencia <a class="reference internal" href="#with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a> se usa para ajustar la ejecución de un bloque con métodos definidos por un administrador de contexto (ver sección <a class="reference internal" href="datamodel.html#context-managers"><span class="std std-ref">Gestores de Contexto en la Declaración with</span></a>). Esto permite que los patrones de uso comunes <a class="reference internal" href="#try"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">try</span></code></a>…<a class="reference internal" href="#except"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">except</span></code></a>…<a class="reference internal" href="#finally"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">finally</span></code></a> se encapsulen para una reutilización conveniente.</p>
<pre>
<strong id="grammar-token-python-grammar-with_stmt"><span id="grammar-token-with-stmt"></span>with_stmt         </strong> ::=  &quot;with&quot; ( &quot;(&quot; <a class="reference internal" href="#grammar-token-python-grammar-with_stmt_contents"><code class="xref docutils literal notranslate"><span class="pre">with_stmt_contents</span></code></a> &quot;,&quot;? &quot;)&quot; | <a class="reference internal" href="#grammar-token-python-grammar-with_stmt_contents"><code class="xref docutils literal notranslate"><span class="pre">with_stmt_contents</span></code></a> ) &quot;:&quot; <a class="reference internal" href="#grammar-token-python-grammar-suite"><code class="xref docutils literal notranslate"><span class="pre">suite</span></code></a>
<strong id="grammar-token-python-grammar-with_stmt_contents"><span id="grammar-token-with-stmt-contents"></span>with_stmt_contents</strong> ::=  <a class="reference internal" href="#grammar-token-python-grammar-with_item"><code class="xref docutils literal notranslate"><span class="pre">with_item</span></code></a> (&quot;,&quot; <a class="reference internal" href="#grammar-token-python-grammar-with_item"><code class="xref docutils literal notranslate"><span class="pre">with_item</span></code></a>)*
<strong id="grammar-token-python-grammar-with_item"><span id="grammar-token-with-item"></span>with_item         </strong> ::=  <a class="reference internal" href="expressions.html#grammar-token-python-grammar-expression"><code class="xref docutils literal notranslate"><span class="pre">expression</span></code></a> [&quot;as&quot; <a class="reference internal" href="simple_stmts.html#grammar-token-python-grammar-target"><code class="xref docutils literal notranslate"><span class="pre">target</span></code></a>]
</pre>
<p>La ejecución de la sentencia <a class="reference internal" href="#with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a> con un «item» se realiza de la siguiente manera:</p>
<ol class="arabic">
<li><p>The context expression (the expression given in the
<a class="reference internal" href="#grammar-token-python-grammar-with_item"><code class="xref std std-token docutils literal notranslate"><span class="pre">with_item</span></code></a>) is evaluated to obtain a context manager.</p></li>
<li><p>El administrador de contexto <code class="xref py py-meth docutils literal notranslate"><span class="pre">__enter__()</span></code> se carga para su uso posterior.</p></li>
<li><p>El administrador de contexto <code class="xref py py-meth docutils literal notranslate"><span class="pre">__exit__()</span></code> se carga para su uso posterior.</p></li>
<li><p>Se invoca el método del administrador de contexto <code class="xref py py-meth docutils literal notranslate"><span class="pre">__enter__()</span></code>.</p></li>
<li><p>Si se incluyó el destino en la sentencia <a class="reference internal" href="#with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a>, se le asigna el valor de retorno de <code class="xref py py-meth docutils literal notranslate"><span class="pre">__enter__()</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>The <a class="reference internal" href="#with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a> statement guarantees that if the <code class="xref py py-meth docutils literal notranslate"><span class="pre">__enter__()</span></code>
method returns without an error, then <code class="xref py py-meth docutils literal notranslate"><span class="pre">__exit__()</span></code> will always be
called. Thus, if an error occurs during the assignment to the target list,
it will be treated the same as an error occurring within the suite would
be. See step 7 below.</p>
</div>
</li>
<li><p>La suite se ejecuta.</p></li>
<li><p>Se invoca el método del administrador de contexto <code class="xref py py-meth docutils literal notranslate"><span class="pre">__exit__()</span></code>. Si una excepción causó la salida de la suite, su tipo, valor y rastreo se pasan como argumentos a <code class="xref py py-meth docutils literal notranslate"><span class="pre">__exit__()</span></code>. De lo contrario, se proporcionan tres argumentos <a class="reference internal" href="../library/constants.html#None" title="None"><code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></a>.</p>
<p>Si se salió de la suite debido a una excepción, y el valor de retorno del método <code class="xref py py-meth docutils literal notranslate"><span class="pre">__exit__()</span></code> fue falso, la excepción se vuelve a plantear. Si el valor de retorno era verdadero, la excepción se suprime y la ejecución continúa con la sentencia que sigue a la sentencia <a class="reference internal" href="#with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a>.</p>
<p>Si se salió de la suite por cualquier motivo que no sea una excepción, el valor de retorno de <code class="xref py py-meth docutils literal notranslate"><span class="pre">__exit__()</span></code> se ignora y la ejecución continúa en la ubicación normal para el tipo de salida que se tomó.</p>
</li>
</ol>
<p>El siguiente código:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">EXPRESSION</span> <span class="k">as</span> <span class="n">TARGET</span><span class="p">:</span>
    <span class="n">SUITE</span>
</pre></div>
</div>
<p>es semánticamente equivalente a:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">manager</span> <span class="o">=</span> <span class="p">(</span><span class="n">EXPRESSION</span><span class="p">)</span>
<span class="n">enter</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">manager</span><span class="p">)</span><span class="o">.</span><span class="fm">__enter__</span>
<span class="n">exit</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">manager</span><span class="p">)</span><span class="o">.</span><span class="fm">__exit__</span>
<span class="n">value</span> <span class="o">=</span> <span class="n">enter</span><span class="p">(</span><span class="n">manager</span><span class="p">)</span>
<span class="n">hit_except</span> <span class="o">=</span> <span class="kc">False</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">TARGET</span> <span class="o">=</span> <span class="n">value</span>
    <span class="n">SUITE</span>
<span class="k">except</span><span class="p">:</span>
    <span class="n">hit_except</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">exit</span><span class="p">(</span><span class="n">manager</span><span class="p">,</span> <span class="o">*</span><span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()):</span>
        <span class="k">raise</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">hit_except</span><span class="p">:</span>
        <span class="n">exit</span><span class="p">(</span><span class="n">manager</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<p>Con más de un elemento, los administradores de contexto se procesan como si varias sentencias <a class="reference internal" href="#with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a> estuvieran anidadas:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">A</span><span class="p">()</span> <span class="k">as</span> <span class="n">a</span><span class="p">,</span> <span class="n">B</span><span class="p">()</span> <span class="k">as</span> <span class="n">b</span><span class="p">:</span>
    <span class="n">SUITE</span>
</pre></div>
</div>
<p>es semánticamente equivalente a:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">A</span><span class="p">()</span> <span class="k">as</span> <span class="n">a</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">B</span><span class="p">()</span> <span class="k">as</span> <span class="n">b</span><span class="p">:</span>
        <span class="n">SUITE</span>
</pre></div>
</div>
<p>También puedes escribir administradores de contexto de múltiples ítems en múltiples lineas si los ítems están entre paréntesis. Por ejemplo:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="p">(</span>
    <span class="n">A</span><span class="p">()</span> <span class="k">as</span> <span class="n">a</span><span class="p">,</span>
    <span class="n">B</span><span class="p">()</span> <span class="k">as</span> <span class="n">b</span><span class="p">,</span>
<span class="p">):</span>
    <span class="n">SUITE</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Distinto en la versión 3.1: </span>Soporte para múltiples expresiones de contexto.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Distinto en la versión 3.10: </span>Soporte para el uso de paréntesis de agrupación para separar la declaración en múltiples líneas.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<dl class="simple">
<dt><span class="target" id="index-65"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0343"><strong>PEP 343</strong></a> - La sentencia «with»</dt><dd><p>La especificación, antecedentes y ejemplos de la sentencia de Python <a class="reference internal" href="#with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a>.</p>
</dd>
</dl>
</div>
</section>
<section id="the-match-statement">
<span id="match"></span><h2><span class="section-number">8.6. </span>La sentencia <code class="xref std std-keyword docutils literal notranslate"><span class="pre">match</span></code><a class="headerlink" href="#the-match-statement" title="Enlazar permanentemente con este título">¶</a></h2>
<div class="versionadded" id="index-17">
<p><span class="versionmodified added">Nuevo en la versión 3.10.</span></p>
</div>
<p>La declaración match es usada para coincidencia de patrones.  Sintaxis:</p>
<pre>
<strong id="grammar-token-python-grammar-match_stmt"><span id="grammar-token-match-stmt"></span>match_stmt  </strong> ::=  'match' <a class="reference internal" href="#grammar-token-python-grammar-subject_expr"><code class="xref docutils literal notranslate"><span class="pre">subject_expr</span></code></a> &quot;:&quot; NEWLINE INDENT <a class="reference internal" href="#grammar-token-python-grammar-case_block"><code class="xref docutils literal notranslate"><span class="pre">case_block</span></code></a>+ DEDENT
<strong id="grammar-token-python-grammar-subject_expr"><span id="grammar-token-subject-expr"></span>subject_expr</strong> ::=  <code class="xref docutils literal notranslate"><span class="pre">star_named_expression</span></code> &quot;,&quot; <code class="xref docutils literal notranslate"><span class="pre">star_named_expressions</span></code>?
                  | <code class="xref docutils literal notranslate"><span class="pre">named_expression</span></code>
<strong id="grammar-token-python-grammar-case_block"><span id="grammar-token-case-block"></span>case_block  </strong> ::=  'case' <a class="reference internal" href="#grammar-token-python-grammar-patterns"><code class="xref docutils literal notranslate"><span class="pre">patterns</span></code></a> [<a class="reference internal" href="#grammar-token-python-grammar-guard"><code class="xref docutils literal notranslate"><span class="pre">guard</span></code></a>] &quot;:&quot; <code class="xref docutils literal notranslate"><span class="pre">block</span></code>
</pre>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Esta sección utiliza comillas simples para denotar las <a class="reference internal" href="lexical_analysis.html#soft-keywords"><span class="std std-ref">palabras clave suaves</span></a>.</p>
</div>
<p>La coincidencia de patrones toma un patrón como entrada (delante de <code class="docutils literal notranslate"><span class="pre">case</span></code>) y un valor de búsqueda (delante de <code class="docutils literal notranslate"><span class="pre">match</span></code>).  El patrón (que puede contener subpatrones) es comparado con el valor de búsqueda.  Los resultados son:</p>
<ul class="simple">
<li><p>Una coincidencia exitosa o fallida (también llamada éxito o fracaso de un patrón).</p></li>
<li><p>Una posible vinculación de los valores coincidentes con un nombre.  Los requisitos previos para esto se discuten abajo.</p></li>
</ul>
<p>Las palabras clave <code class="docutils literal notranslate"><span class="pre">match</span></code> y <code class="docutils literal notranslate"><span class="pre">case</span></code> son <a class="reference internal" href="lexical_analysis.html#soft-keywords"><span class="std std-ref">palabras clave suaves</span></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<ul class="simple">
<li><p><span class="target" id="index-66"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0634"><strong>PEP 634</strong></a> – Coincidencia de patrones estructurales: Especificación</p></li>
<li><p><span class="target" id="index-67"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0636"><strong>PEP 636</strong></a> – Coincidencia de patrones estructurales: Tutorial</p></li>
</ul>
</div>
<section id="overview">
<h3><span class="section-number">8.6.1. </span>Resumen<a class="headerlink" href="#overview" title="Enlazar permanentemente con este título">¶</a></h3>
<p>A continuación, un resumen del flujo lógico de una declaración de coincidencia:</p>
<ol class="arabic">
<li><p>Se evalúa la expresión <code class="docutils literal notranslate"><span class="pre">subject_expr</span></code> y se obtiene un valor sujeto resultante. Si la expresión contiene una coma, se construye una tupla utilizando <a class="reference internal" href="../library/stdtypes.html#typesseq-tuple"><span class="std std-ref">las reglas estándar</span></a>.</p></li>
<li><p>Se intenta coincidir cada patrón en un <code class="docutils literal notranslate"><span class="pre">case_block</span></code> con el valor sujeto. Las reglas específicas para el éxito o el fracaso se describen abajo. El intento de coincidencia también puede enlazar algunos o todos los nombres independientes dentro del patrón. Las reglas precisas de enlace de patrones varían según el tipo de patrón y se especifican a continuación.  <strong>Los enlaces de nombre realizados durante una coincidencia de patrones exitosa sobreviven al bloque ejecutado y se pueden usar después de la declaración de coincidencia</strong>.</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Durante las coincidencias de patrones fallidas, algunos subpatrones pueden tener éxito.  No confíe en que los enlaces se realicen para una coincidencia fallida.  Por el contrario, no confíe en que las variables permanezcan sin cambios después de una coincidencia fallida.  El comportamiento exacto depende de la implementación y puede variar.  Esta es una decisión intencional para permitir que diferentes implementaciones añadan optimizaciones.</p>
</div>
</div></blockquote>
</li>
<li><p>Si el patrón es exitoso, se evalúa la protección correspondiente (si está presente). En este caso se garantiza que todos los enlaces de nombres han ocurrido.</p>
<ul class="simple">
<li><p>Si la protección se evalúa como verdadera o no existe, se ejecuta el <code class="docutils literal notranslate"><span class="pre">block</span></code> dentro de <code class="docutils literal notranslate"><span class="pre">case_block</span></code>.</p></li>
<li><p>En caso contrario, se intenta con el siguiente <code class="docutils literal notranslate"><span class="pre">case_block</span></code> como se ha descrito anteriormente.</p></li>
<li><p>Si no hay más bloques de casos, la declaración de coincidencia se completa.</p></li>
</ul>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Por lo general, los usuarios no deben confiar en que se evalúe un patrón.  Dependiendo de la implementación, el intérprete puede almacenar en caché los valores o utilizar otras optimizaciones que omitan las evaluaciones repetidas.</p>
</div>
<p>Un ejemplo de declaración de coincidencia:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">flag</span> <span class="o">=</span> <span class="kc">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">match</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">):</span>
<span class="gp">... </span>   <span class="k">case</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">300</span><span class="p">):</span>  <span class="c1"># Mismatch: 200 != 300</span>
<span class="gp">... </span>       <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Case 1&#39;</span><span class="p">)</span>
<span class="gp">... </span>   <span class="k">case</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span> <span class="k">if</span> <span class="n">flag</span><span class="p">:</span>  <span class="c1"># Successful match, but guard fails</span>
<span class="gp">... </span>       <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Case 2&#39;</span><span class="p">)</span>
<span class="gp">... </span>   <span class="k">case</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>  <span class="c1"># Matches and binds y to 200</span>
<span class="gp">... </span>       <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Case 3, y: </span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="gp">... </span>   <span class="k">case</span> <span class="k">_</span><span class="p">:</span>  <span class="c1"># Pattern not attempted</span>
<span class="gp">... </span>       <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Case 4, I match anything!&#39;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">Case 3, y: 200</span>
</pre></div>
</div>
<p>En este caso, <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">flag</span></code> es una protección.  Lea más sobre eso en la siguiente sección.</p>
</section>
<section id="guards">
<h3><span class="section-number">8.6.2. </span>Protecciones<a class="headerlink" href="#guards" title="Enlazar permanentemente con este título">¶</a></h3>
<pre id="index-20">
<strong id="grammar-token-python-grammar-guard"><span id="grammar-token-guard"></span>guard</strong> ::=  &quot;if&quot; <code class="xref docutils literal notranslate"><span class="pre">named_expression</span></code>
</pre>
<p>Una <code class="docutils literal notranslate"><span class="pre">guard</span></code> (que es parte del <code class="docutils literal notranslate"><span class="pre">case</span></code>) debe ser exitosa para que el código dentro de <code class="docutils literal notranslate"><span class="pre">case</span></code> sea ejecutado.  Toma la forma: <a class="reference internal" href="#if"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">if</span></code></a> seguida de una expresión.</p>
<p>El flujo lógico de un bloque <code class="docutils literal notranslate"><span class="pre">case</span></code> con una <code class="docutils literal notranslate"><span class="pre">guard</span></code> es el siguiente:</p>
<ol class="arabic simple">
<li><p>Se comprueba que el patrón del bloque <code class="docutils literal notranslate"><span class="pre">case</span></code> fue exitoso.  Si el patrón falló, el <code class="docutils literal notranslate"><span class="pre">guard</span></code> no se evalúa y se comprueba el siguiente bloque <code class="docutils literal notranslate"><span class="pre">case</span></code>.</p></li>
<li><p>Si el patrón tuvo éxito, se evalúa el <code class="docutils literal notranslate"><span class="pre">guard</span></code>.</p>
<ul class="simple">
<li><p>Si la condición del <code class="docutils literal notranslate"><span class="pre">guard</span></code> es verdadera, se selecciona el bloque de ese caso.</p></li>
<li><p>Si la condición del <code class="docutils literal notranslate"><span class="pre">guard</span></code> es falsa, el bloque de ese caso no es seleccionado.</p></li>
<li><p>Si el <code class="docutils literal notranslate"><span class="pre">guard</span></code> lanza una excepción durante la evaluación, se levanta la excepción.</p></li>
</ul>
</li>
</ol>
<p>Se permite que las protecciones tengan efectos secundarios, ya que son expresiones.  La evaluación de la protección debe ir desde el primer al último bloque de casos, uno a la vez, saltando los bloques de casos cuyo(s) patrón(es) no tenga(n) éxito. (Es decir, la evaluación de las protecciones debe realizarse en orden.) La evaluación de las protecciones debe detenerse una vez que se selecciona un bloque de casos.</p>
</section>
<section id="irrefutable-case-blocks">
<span id="irrefutable-case"></span><h3><span class="section-number">8.6.3. </span>Bloques de Casos Irrefutables<a class="headerlink" href="#irrefutable-case-blocks" title="Enlazar permanentemente con este título">¶</a></h3>
<p id="index-21">Un bloque de casos irrefutable es un bloque de casos que coincide con todo.  Una declaración de coincidencia puede tener como máximo un bloque de casos irrefutable, y debe ser el último.</p>
<p>Un bloque de casos se considera irrefutable si no tiene protección y su patrón es irrefutable.  Un patrón se considera irrefutable si podemos demostrar, sólo por su sintaxis, que siempre tendrá éxito.  Sólo los siguientes patrones son irrefutables:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#as-patterns"><span class="std std-ref">patrones AS</span></a> cuyo lado izquierdo es irrefutable</p></li>
<li><p><a class="reference internal" href="#or-patterns"><span class="std std-ref">Patrones OR</span></a> que contienen al menos un patrón irrefutable</p></li>
<li><p><a class="reference internal" href="#capture-patterns"><span class="std std-ref">Capturar patrones</span></a></p></li>
<li><p><a class="reference internal" href="#wildcard-patterns"><span class="std std-ref">Patrones comodín</span></a></p></li>
<li><p>patrones irrefutables entre paréntesis</p></li>
</ul>
</section>
<section id="patterns">
<h3><span class="section-number">8.6.4. </span>Patrones<a class="headerlink" href="#patterns" title="Enlazar permanentemente con este título">¶</a></h3>
<div class="admonition note" id="index-22">
<p class="admonition-title">Nota</p>
<p>Esta sección utiliza notaciones gramaticales más allá del estándar EBNF:</p>
<ul class="simple">
<li><p>la notación <code class="docutils literal notranslate"><span class="pre">SEP.RULE+</span></code> es la abreviación de <code class="docutils literal notranslate"><span class="pre">RULE</span> <span class="pre">(SEP</span> <span class="pre">RULE)*</span></code></p></li>
<li><p>la notación <code class="docutils literal notranslate"><span class="pre">!RULE</span></code> es la abreviación de una aserción de anticipación negativa</p></li>
</ul>
</div>
<p>La sintaxis de nivel superior para <code class="docutils literal notranslate"><span class="pre">patrones</span></code> es:</p>
<pre>
<strong id="grammar-token-python-grammar-patterns"><span id="grammar-token-patterns"></span>patterns      </strong> ::=  <a class="reference internal" href="#grammar-token-python-grammar-open_sequence_pattern"><code class="xref docutils literal notranslate"><span class="pre">open_sequence_pattern</span></code></a> | <a class="reference internal" href="#grammar-token-python-grammar-pattern"><code class="xref docutils literal notranslate"><span class="pre">pattern</span></code></a>
<strong id="grammar-token-python-grammar-pattern"><span id="grammar-token-pattern"></span>pattern       </strong> ::=  <a class="reference internal" href="#grammar-token-python-grammar-as_pattern"><code class="xref docutils literal notranslate"><span class="pre">as_pattern</span></code></a> | <a class="reference internal" href="#grammar-token-python-grammar-or_pattern"><code class="xref docutils literal notranslate"><span class="pre">or_pattern</span></code></a>
<strong id="grammar-token-python-grammar-closed_pattern"><span id="grammar-token-closed-pattern"></span>closed_pattern</strong> ::=  | <a class="reference internal" href="#grammar-token-python-grammar-literal_pattern"><code class="xref docutils literal notranslate"><span class="pre">literal_pattern</span></code></a>
                    | <a class="reference internal" href="#grammar-token-python-grammar-capture_pattern"><code class="xref docutils literal notranslate"><span class="pre">capture_pattern</span></code></a>
                    | <a class="reference internal" href="#grammar-token-python-grammar-wildcard_pattern"><code class="xref docutils literal notranslate"><span class="pre">wildcard_pattern</span></code></a>
                    | <a class="reference internal" href="#grammar-token-python-grammar-value_pattern"><code class="xref docutils literal notranslate"><span class="pre">value_pattern</span></code></a>
                    | <a class="reference internal" href="#grammar-token-python-grammar-group_pattern"><code class="xref docutils literal notranslate"><span class="pre">group_pattern</span></code></a>
                    | <a class="reference internal" href="#grammar-token-python-grammar-sequence_pattern"><code class="xref docutils literal notranslate"><span class="pre">sequence_pattern</span></code></a>
                    | <a class="reference internal" href="#grammar-token-python-grammar-mapping_pattern"><code class="xref docutils literal notranslate"><span class="pre">mapping_pattern</span></code></a>
                    | <a class="reference internal" href="#grammar-token-python-grammar-class_pattern"><code class="xref docutils literal notranslate"><span class="pre">class_pattern</span></code></a>
</pre>
<p>Las descripciones a continuación incluirán una descripción «en términos simples» de lo que hace un patrón con fines ilustrativos (créditos a Raymond Hettinger por un documento que inspiró la mayoría de las descripciones). Tenga en cuenta que estas descripciones tienen únicamente fines ilustrativos y que <strong>may not</strong> refleja la implementación subyacente. Además, no cubren todos los formularios válidos.</p>
<section id="or-patterns">
<span id="id2"></span><h4><span class="section-number">8.6.4.1. </span>Patrones OR<a class="headerlink" href="#or-patterns" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Un patrón OR son dos o más patrones separados por barras verticales <code class="docutils literal notranslate"><span class="pre">|</span></code>. Sintaxis:</p>
<pre>
<strong id="grammar-token-python-grammar-or_pattern"><span id="grammar-token-or-pattern"></span>or_pattern</strong> ::=  &quot;|&quot;.<a class="reference internal" href="#grammar-token-python-grammar-closed_pattern"><code class="xref docutils literal notranslate"><span class="pre">closed_pattern</span></code></a>+
</pre>
<p>Solo el subpatrón final puede ser <a class="reference internal" href="#irrefutable-case"><span class="std std-ref">irrefutable</span></a>, y cada subpatrón debe vincular el mismo conjunto de nombres para evitar ambigüedades.</p>
<p>Un patrón OR hace coincidir cada uno de sus subpatrones a su vez con el valor del sujeto, hasta que uno tiene éxito. Entonces, el patrón OR se considera exitoso. De lo contrario, si ninguno de los subpatrones tiene éxito, el patrón OR falla.</p>
<p>En términos simples, <code class="docutils literal notranslate"><span class="pre">P1</span> <span class="pre">|</span> <span class="pre">P2</span> <span class="pre">|</span> <span class="pre">...</span></code> intentará igualar <code class="docutils literal notranslate"><span class="pre">P1</span></code>, si falla, intentará igualar <code class="docutils literal notranslate"><span class="pre">P2</span></code>, teniendo éxito inmediatamente si alguno tiene éxito, fallando en caso contrario.</p>
</section>
<section id="as-patterns">
<span id="id3"></span><h4><span class="section-number">8.6.4.2. </span>patrones AS<a class="headerlink" href="#as-patterns" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Un patrón AS coincide con un patrón OR a la izquierda de la palabra clave <a class="reference internal" href="#as"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">as</span></code></a> con un sujeto. Sintaxis:</p>
<pre>
<strong id="grammar-token-python-grammar-as_pattern"><span id="grammar-token-as-pattern"></span>as_pattern</strong> ::=  <a class="reference internal" href="#grammar-token-python-grammar-or_pattern"><code class="xref docutils literal notranslate"><span class="pre">or_pattern</span></code></a> &quot;as&quot; <a class="reference internal" href="#grammar-token-python-grammar-capture_pattern"><code class="xref docutils literal notranslate"><span class="pre">capture_pattern</span></code></a>
</pre>
<p>If the OR pattern fails, the AS pattern fails.  Otherwise, the AS pattern binds
the subject to the name on the right of the as keyword and succeeds.
<code class="docutils literal notranslate"><span class="pre">capture_pattern</span></code> cannot be a <code class="docutils literal notranslate"><span class="pre">_</span></code>.</p>
<p>En términos simples, <code class="docutils literal notranslate"><span class="pre">P</span> <span class="pre">as</span> <span class="pre">NAME</span></code> coincidirá con <code class="docutils literal notranslate"><span class="pre">P</span></code> y, en caso de éxito, establecerá <code class="docutils literal notranslate"><span class="pre">NAME</span> <span class="pre">=</span> <span class="pre">&lt;subject&gt;</span></code>.</p>
</section>
<section id="literal-patterns">
<span id="id4"></span><h4><span class="section-number">8.6.4.3. </span>Patrones literales<a class="headerlink" href="#literal-patterns" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Un patrón literal corresponde a la mayoría de <a class="reference internal" href="lexical_analysis.html#literals"><span class="std std-ref">literals</span></a> en Python. Sintaxis:</p>
<pre>
<strong id="grammar-token-python-grammar-literal_pattern"><span id="grammar-token-literal-pattern"></span>literal_pattern</strong> ::=  <code class="xref docutils literal notranslate"><span class="pre">signed_number</span></code>
                     | <code class="xref docutils literal notranslate"><span class="pre">signed_number</span></code> &quot;+&quot; NUMBER
                     | <code class="xref docutils literal notranslate"><span class="pre">signed_number</span></code> &quot;-&quot; NUMBER
                     | <code class="xref docutils literal notranslate"><span class="pre">strings</span></code>
                     | &quot;None&quot;
                     | &quot;True&quot;
                     | &quot;False&quot;
                     | <code class="xref docutils literal notranslate"><span class="pre">signed_number</span></code>: NUMBER | &quot;-&quot; NUMBER
</pre>
<p>La regla <code class="docutils literal notranslate"><span class="pre">strings</span></code> y el token <code class="docutils literal notranslate"><span class="pre">NUMBER</span></code> se definen en <a class="reference internal" href="grammar.html"><span class="doc">standard Python grammar</span></a>. Se admiten cadenas entre comillas triples. Se admiten cadenas sin formato y cadenas de bytes. <a class="reference internal" href="lexical_analysis.html#f-strings"><span class="std std-ref">Literales de cadena formateados</span></a> no es compatible.</p>
<p>Los formularios <code class="docutils literal notranslate"><span class="pre">signed_number</span> <span class="pre">'+'</span> <span class="pre">NUMBER</span></code> y <code class="docutils literal notranslate"><span class="pre">signed_number</span> <span class="pre">'-'</span> <span class="pre">NUMBER</span></code> son para expresar <a class="reference internal" href="lexical_analysis.html#imaginary"><span class="std std-ref">complex numbers</span></a>; requieren un número real a la izquierda y un número imaginario a la derecha. P.ej. <code class="docutils literal notranslate"><span class="pre">3</span> <span class="pre">+</span> <span class="pre">4j</span></code>.</p>
<p>En términos simples, <code class="docutils literal notranslate"><span class="pre">LITERAL</span></code> solo tendrá éxito si <code class="docutils literal notranslate"><span class="pre">&lt;subject&gt;</span> <span class="pre">==</span> <span class="pre">LITERAL</span></code>. Para los singleton <code class="docutils literal notranslate"><span class="pre">None</span></code>, <code class="docutils literal notranslate"><span class="pre">True</span></code> y <code class="docutils literal notranslate"><span class="pre">False</span></code>, se utiliza el operador <a class="reference internal" href="expressions.html#is"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">is</span></code></a>.</p>
</section>
<section id="capture-patterns">
<span id="id5"></span><h4><span class="section-number">8.6.4.4. </span>Capturar patrones<a class="headerlink" href="#capture-patterns" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Un patrón de captura vincula el valor del sujeto a un nombre. Sintaxis:</p>
<pre>
<strong id="grammar-token-python-grammar-capture_pattern"><span id="grammar-token-capture-pattern"></span>capture_pattern</strong> ::=  !'_' NAME
</pre>
<p>A single underscore <code class="docutils literal notranslate"><span class="pre">_</span></code> is not a capture pattern (this is what <code class="docutils literal notranslate"><span class="pre">!'_'</span></code>
expresses). It is instead treated as a
<a class="reference internal" href="#grammar-token-python-grammar-wildcard_pattern"><code class="xref std std-token docutils literal notranslate"><span class="pre">wildcard_pattern</span></code></a>.</p>
<p>En un patrón dado, un nombre dado solo se puede vincular una vez. P.ej. <code class="docutils literal notranslate"><span class="pre">case</span> <span class="pre">x,</span> <span class="pre">x:</span> <span class="pre">...</span></code> no es válido mientras <code class="docutils literal notranslate"><span class="pre">case</span> <span class="pre">[x]</span> <span class="pre">|</span> <span class="pre">x:</span> <span class="pre">...</span></code> está permitido.</p>
<p>Los patrones de captura siempre tienen éxito. El enlace sigue las reglas de alcance establecidas por el operador de expresión de asignación en <span class="target" id="index-68"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0572"><strong>PEP 572</strong></a>; el nombre se convierte en una variable local en el alcance de la función contenedora más cercana, a menos que haya una declaración <a class="reference internal" href="simple_stmts.html#global"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">global</span></code></a> o <a class="reference internal" href="simple_stmts.html#nonlocal"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">nonlocal</span></code></a> aplicable.</p>
<p>En términos simples, <code class="docutils literal notranslate"><span class="pre">NAME</span></code> siempre tendrá éxito y establecerá <code class="docutils literal notranslate"><span class="pre">NAME</span> <span class="pre">=</span> <span class="pre">&lt;subject&gt;</span></code>.</p>
</section>
<section id="wildcard-patterns">
<span id="id6"></span><h4><span class="section-number">8.6.4.5. </span>Patrones comodín<a class="headerlink" href="#wildcard-patterns" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Un patrón comodín siempre tiene éxito (coincide con cualquier cosa) y no vincula ningún nombre. Sintaxis:</p>
<pre>
<strong id="grammar-token-python-grammar-wildcard_pattern"><span id="grammar-token-wildcard-pattern"></span>wildcard_pattern</strong> ::=  '_'
</pre>
<p><code class="docutils literal notranslate"><span class="pre">_</span></code> es un <a class="reference internal" href="lexical_analysis.html#soft-keywords"><span class="std std-ref">soft keyword</span></a> dentro de cualquier patrón, pero solo dentro de patrones. Es un identificador, como de costumbre, incluso dentro de las expresiones de sujeto <code class="docutils literal notranslate"><span class="pre">match</span></code>, <code class="docutils literal notranslate"><span class="pre">guard</span></code> sy bloques <code class="docutils literal notranslate"><span class="pre">case</span></code>.</p>
<p>En términos simples, <code class="docutils literal notranslate"><span class="pre">_</span></code> siempre tendrá éxito.</p>
</section>
<section id="value-patterns">
<span id="id7"></span><h4><span class="section-number">8.6.4.6. </span>Patrones de valor<a class="headerlink" href="#value-patterns" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Un patrón de valor representa un valor con nombre en Python. Sintaxis:</p>
<pre>
<strong id="grammar-token-python-grammar-value_pattern"><span id="grammar-token-value-pattern"></span>value_pattern</strong> ::=  <a class="reference internal" href="#grammar-token-python-grammar-attr"><code class="xref docutils literal notranslate"><span class="pre">attr</span></code></a>
<strong id="grammar-token-python-grammar-attr"><span id="grammar-token-attr"></span>attr         </strong> ::=  <a class="reference internal" href="#grammar-token-python-grammar-name_or_attr"><code class="xref docutils literal notranslate"><span class="pre">name_or_attr</span></code></a> &quot;.&quot; NAME
<strong id="grammar-token-python-grammar-name_or_attr"><span id="grammar-token-name-or-attr"></span>name_or_attr </strong> ::=  <a class="reference internal" href="#grammar-token-python-grammar-attr"><code class="xref docutils literal notranslate"><span class="pre">attr</span></code></a> | NAME
</pre>
<p>El nombre con puntos en el patrón se busca usando el estándar Python <a class="reference internal" href="executionmodel.html#resolve-names"><span class="std std-ref">name resolution rules</span></a>. El patrón tiene éxito si el valor encontrado se compara con el valor del sujeto (usando el operador de igualdad <code class="docutils literal notranslate"><span class="pre">==</span></code>).</p>
<p>En términos simples, <code class="docutils literal notranslate"><span class="pre">NAME1.NAME2</span></code> solo tendrá éxito si <code class="docutils literal notranslate"><span class="pre">&lt;subject&gt;</span> <span class="pre">==</span> <span class="pre">NAME1.NAME2</span></code></p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Si el mismo valor ocurre varias veces en la misma declaración de coincidencia, el intérprete puede almacenar en caché el primer valor encontrado y reutilizarlo en lugar de repetir la misma búsqueda. Este caché está estrictamente vinculado a una ejecución determinada de una declaración de coincidencia determinada.</p>
</div>
</section>
<section id="group-patterns">
<span id="id8"></span><h4><span class="section-number">8.6.4.7. </span>Patrones de grupo<a class="headerlink" href="#group-patterns" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Un patrón de grupo permite a los usuarios agregar paréntesis alrededor de los patrones para enfatizar la agrupación deseada. De lo contrario, no tiene sintaxis adicional. Sintaxis:</p>
<pre>
<strong id="grammar-token-python-grammar-group_pattern"><span id="grammar-token-group-pattern"></span>group_pattern</strong> ::=  &quot;(&quot; <a class="reference internal" href="#grammar-token-python-grammar-pattern"><code class="xref docutils literal notranslate"><span class="pre">pattern</span></code></a> &quot;)&quot;
</pre>
<p>En términos simples, <code class="docutils literal notranslate"><span class="pre">(P)</span></code> tiene el mismo efecto que <code class="docutils literal notranslate"><span class="pre">P</span></code>.</p>
</section>
<section id="sequence-patterns">
<span id="id9"></span><h4><span class="section-number">8.6.4.8. </span>Patrones de secuencia<a class="headerlink" href="#sequence-patterns" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Un patrón de secuencia contiene varios subpatrones para hacer coincidir con elementos de secuencia. La sintaxis es similar al desempaquetado de una lista o tupla.</p>
<pre>
<strong id="grammar-token-python-grammar-sequence_pattern"><span id="grammar-token-sequence-pattern"></span>sequence_pattern      </strong> ::=  &quot;[&quot; [<a class="reference internal" href="#grammar-token-python-grammar-maybe_sequence_pattern"><code class="xref docutils literal notranslate"><span class="pre">maybe_sequence_pattern</span></code></a>] &quot;]&quot;
                            | &quot;(&quot; [<a class="reference internal" href="#grammar-token-python-grammar-open_sequence_pattern"><code class="xref docutils literal notranslate"><span class="pre">open_sequence_pattern</span></code></a>] &quot;)&quot;
<strong id="grammar-token-python-grammar-open_sequence_pattern"><span id="grammar-token-open-sequence-pattern"></span>open_sequence_pattern </strong> ::=  <a class="reference internal" href="#grammar-token-python-grammar-maybe_star_pattern"><code class="xref docutils literal notranslate"><span class="pre">maybe_star_pattern</span></code></a> &quot;,&quot; [<a class="reference internal" href="#grammar-token-python-grammar-maybe_sequence_pattern"><code class="xref docutils literal notranslate"><span class="pre">maybe_sequence_pattern</span></code></a>]
<strong id="grammar-token-python-grammar-maybe_sequence_pattern"><span id="grammar-token-maybe-sequence-pattern"></span>maybe_sequence_pattern</strong> ::=  &quot;,&quot;.<a class="reference internal" href="#grammar-token-python-grammar-maybe_star_pattern"><code class="xref docutils literal notranslate"><span class="pre">maybe_star_pattern</span></code></a>+ &quot;,&quot;?
<strong id="grammar-token-python-grammar-maybe_star_pattern"><span id="grammar-token-maybe-star-pattern"></span>maybe_star_pattern    </strong> ::=  <a class="reference internal" href="#grammar-token-python-grammar-star_pattern"><code class="xref docutils literal notranslate"><span class="pre">star_pattern</span></code></a> | <a class="reference internal" href="#grammar-token-python-grammar-pattern"><code class="xref docutils literal notranslate"><span class="pre">pattern</span></code></a>
<strong id="grammar-token-python-grammar-star_pattern"><span id="grammar-token-star-pattern"></span>star_pattern          </strong> ::=  &quot;*&quot; (<a class="reference internal" href="#grammar-token-python-grammar-capture_pattern"><code class="xref docutils literal notranslate"><span class="pre">capture_pattern</span></code></a> | <a class="reference internal" href="#grammar-token-python-grammar-wildcard_pattern"><code class="xref docutils literal notranslate"><span class="pre">wildcard_pattern</span></code></a>)
</pre>
<p>No hay diferencia si se utilizan paréntesis o corchetes para los patrones de secuencia (es decir, <code class="docutils literal notranslate"><span class="pre">(...)</span></code> vs <code class="docutils literal notranslate"><span class="pre">[...]</span></code>).</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Un solo patrón encerrado entre paréntesis sin una coma final (por ejemplo, <code class="docutils literal notranslate"><span class="pre">(3</span> <span class="pre">|</span> <span class="pre">4)</span></code>) es un <a class="reference internal" href="#group-patterns"><span class="std std-ref">group pattern</span></a>. Mientras que un solo patrón encerrado entre corchetes (por ejemplo, <code class="docutils literal notranslate"><span class="pre">[3</span> <span class="pre">|</span> <span class="pre">4]</span></code>) sigue siendo un patrón de secuencia.</p>
</div>
<p>A lo sumo, un subpatrón de estrella puede estar en un patrón de secuencia. El subpatrón de estrella puede ocurrir en cualquier posición. Si no hay ningún subpatrón de estrella, el patrón de secuencia es un patrón de secuencia de longitud fija; de lo contrario, es un patrón de secuencia de longitud variable.</p>
<p>El siguiente es el flujo lógico para hacer coincidir un patrón de secuencia con un valor de sujeto:</p>
<ol class="arabic">
<li><p>Si el valor del sujeto no es una secuencia <a class="footnote-reference brackets" href="#id17" id="id10">2</a>, el patrón de secuencia falla.</p></li>
<li><p>Si el valor del sujeto es una instancia de <code class="docutils literal notranslate"><span class="pre">str</span></code>, <code class="docutils literal notranslate"><span class="pre">bytes</span></code> o <code class="docutils literal notranslate"><span class="pre">bytearray</span></code>, el patrón de secuencia falla.</p></li>
<li><p>Los pasos subsiguientes dependen de si el patrón de secuencia es de longitud fija o variable.</p>
<p>Si el patrón de secuencia es de longitud fija:</p>
<ol class="arabic simple">
<li><p>Si la longitud de la secuencia del sujeto no es igual al número de subpatrones, el patrón de secuencia falla</p></li>
<li><p>Los subpatrones del patrón de secuencia se hacen coincidir con sus elementos correspondientes en la secuencia del sujeto de izquierda a derecha. El emparejamiento se detiene tan pronto como falla un subpatrón. Si todos los subpatrones tienen éxito en hacer coincidir su elemento correspondiente, el patrón de secuencia tiene éxito.</p></li>
</ol>
<p>De lo contrario, si el patrón de secuencia es de longitud variable:</p>
<ol class="arabic simple">
<li><p>Si la longitud de la secuencia del sujeto es menor que el número de subpatrones sin estrella, el patrón de secuencia falla.</p></li>
<li><p>Los subpatrones principales no en estrella se emparejan con sus elementos correspondientes como para las secuencias de longitud fija.</p></li>
<li><p>Si el paso anterior tiene éxito, el subpatrón en estrella coincide con una lista formada por los elementos restantes del sujeto, excluyendo los elementos restantes correspondientes a los subpatrones que no son en estrella que siguen el subpatrón en estrella.</p></li>
<li><p>Los subpatrones restantes que no son estrellas se emparejan con sus elementos temáticos correspondientes, como para una secuencia de longitud fija.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>La longitud de la secuencia del sujeto se obtiene a través de <a class="reference internal" href="../library/functions.html#len" title="len"><code class="xref py py-func docutils literal notranslate"><span class="pre">len()</span></code></a> (es decir, a través del protocolo <code class="xref py py-meth docutils literal notranslate"><span class="pre">__len__()</span></code>). El intérprete puede almacenar en caché esta longitud de manera similar a <a class="reference internal" href="#value-patterns"><span class="std std-ref">value patterns</span></a>.</p>
</div>
</li>
</ol>
<p>En términos simples, <code class="docutils literal notranslate"><span class="pre">[P1,</span> <span class="pre">P2,</span> <span class="pre">P3,</span></code> … <code class="docutils literal notranslate"><span class="pre">,</span> <span class="pre">P&lt;N&gt;]</span></code> solo coincide si ocurre todo lo siguiente:</p>
<ul class="simple">
<li><p>comprobar que <code class="docutils literal notranslate"><span class="pre">&lt;subject&gt;</span></code> es una secuencia</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">len(subject)</span> <span class="pre">==</span> <span class="pre">&lt;N&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">P1</span></code> coincide con <code class="docutils literal notranslate"><span class="pre">&lt;subject&gt;[0]</span></code> (tenga en cuenta que esta coincidencia también puede vincular nombres)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">P2</span></code> coincide con <code class="docutils literal notranslate"><span class="pre">&lt;subject&gt;[1]</span></code> (tenga en cuenta que esta coincidencia también puede vincular nombres)</p></li>
<li><p>… y así sucesivamente para el patrón/elemento correspondiente.</p></li>
</ul>
</section>
<section id="mapping-patterns">
<span id="id11"></span><h4><span class="section-number">8.6.4.9. </span>Patrones de mapeo<a class="headerlink" href="#mapping-patterns" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Un patrón de asignación contiene uno o más patrones clave-valor. La sintaxis es similar a la construcción de un diccionario. Sintaxis:</p>
<pre>
<strong id="grammar-token-python-grammar-mapping_pattern"><span id="grammar-token-mapping-pattern"></span>mapping_pattern    </strong> ::=  &quot;{&quot; [<a class="reference internal" href="#grammar-token-python-grammar-items_pattern"><code class="xref docutils literal notranslate"><span class="pre">items_pattern</span></code></a>] &quot;}&quot;
<strong id="grammar-token-python-grammar-items_pattern"><span id="grammar-token-items-pattern"></span>items_pattern      </strong> ::=  &quot;,&quot;.<a class="reference internal" href="#grammar-token-python-grammar-key_value_pattern"><code class="xref docutils literal notranslate"><span class="pre">key_value_pattern</span></code></a>+ &quot;,&quot;?
<strong id="grammar-token-python-grammar-key_value_pattern"><span id="grammar-token-key-value-pattern"></span>key_value_pattern  </strong> ::=  (<a class="reference internal" href="#grammar-token-python-grammar-literal_pattern"><code class="xref docutils literal notranslate"><span class="pre">literal_pattern</span></code></a> | <a class="reference internal" href="#grammar-token-python-grammar-value_pattern"><code class="xref docutils literal notranslate"><span class="pre">value_pattern</span></code></a>) &quot;:&quot; <a class="reference internal" href="#grammar-token-python-grammar-pattern"><code class="xref docutils literal notranslate"><span class="pre">pattern</span></code></a>
                         | <a class="reference internal" href="#grammar-token-python-grammar-double_star_pattern"><code class="xref docutils literal notranslate"><span class="pre">double_star_pattern</span></code></a>
<strong id="grammar-token-python-grammar-double_star_pattern"><span id="grammar-token-double-star-pattern"></span>double_star_pattern</strong> ::=  &quot;**&quot; <a class="reference internal" href="#grammar-token-python-grammar-capture_pattern"><code class="xref docutils literal notranslate"><span class="pre">capture_pattern</span></code></a>
</pre>
<p>Como máximo, un patrón de estrella doble puede estar en un patrón de mapeo. El patrón de estrella doble debe ser el último subpatrón del patrón de mapeo.</p>
<p>No se permiten claves duplicadas en patrones de mapeo. Las claves literales duplicadas lanzarán un <a class="reference internal" href="../library/exceptions.html#SyntaxError" title="SyntaxError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SyntaxError</span></code></a>. Dos claves que de otro modo tendrían el mismo valor lanzarán un <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> en tiempo de ejecución.</p>
<p>El siguiente es el flujo lógico para hacer coincidir un patrón de mapeo con un valor de sujeto:</p>
<ol class="arabic simple">
<li><p>Si el valor del sujeto no es una asignación <a class="footnote-reference brackets" href="#id18" id="id12">3</a>, el patrón de asignación falla.</p></li>
<li><p>Si cada clave dada en el patrón de mapeo está presente en el mapeo del sujeto, y el patrón para cada clave coincide con el elemento correspondiente del mapeo del sujeto, el patrón de mapeo tiene éxito.</p></li>
<li><p>Si se detectan claves duplicadas en el patrón de mapeo, el patrón se considera inválido. Se lanza un <a class="reference internal" href="../library/exceptions.html#SyntaxError" title="SyntaxError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SyntaxError</span></code></a> para valores literales duplicados; o un <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> para claves con nombre del mismo valor.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Los pares clave-valor se hacen coincidir utilizando la forma de dos argumentos del método <code class="docutils literal notranslate"><span class="pre">get()</span></code> del sujeto de mapeo. Los pares clave-valor coincidentes ya deben estar presentes en la asignación y no deben crearse sobre la marcha a través de <code class="xref py py-meth docutils literal notranslate"><span class="pre">__missing__()</span></code> o <code class="xref py py-meth docutils literal notranslate"><span class="pre">__getitem__()</span></code>.</p>
</div>
<p>En términos simples, <code class="docutils literal notranslate"><span class="pre">{KEY1:</span> <span class="pre">P1,</span> <span class="pre">KEY2:</span> <span class="pre">P2,</span> <span class="pre">...</span> <span class="pre">}</span></code> solo coincide si ocurre todo lo siguiente:</p>
<ul class="simple">
<li><p>comprobar <code class="docutils literal notranslate"><span class="pre">&lt;subject&gt;</span></code> es un mapeo</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">KEY1</span> <span class="pre">in</span> <span class="pre">&lt;subject&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">P1</span></code> coincide con <code class="docutils literal notranslate"><span class="pre">&lt;subject&gt;[KEY1]</span></code></p></li>
<li><p>… y así sucesivamente para el par correspondiente de KEY / patrón.</p></li>
</ul>
</section>
<section id="class-patterns">
<span id="id13"></span><h4><span class="section-number">8.6.4.10. </span>Patrones de clase<a class="headerlink" href="#class-patterns" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Un patrón de clase representa una clase y sus argumentos posicionales y de palabras clave (si los hay). Sintaxis:</p>
<pre>
<strong id="grammar-token-python-grammar-class_pattern"><span id="grammar-token-class-pattern"></span>class_pattern      </strong> ::=  <a class="reference internal" href="#grammar-token-python-grammar-name_or_attr"><code class="xref docutils literal notranslate"><span class="pre">name_or_attr</span></code></a> &quot;(&quot; [<a class="reference internal" href="#grammar-token-python-grammar-pattern_arguments"><code class="xref docutils literal notranslate"><span class="pre">pattern_arguments</span></code></a> &quot;,&quot;?] &quot;)&quot;
<strong id="grammar-token-python-grammar-pattern_arguments"><span id="grammar-token-pattern-arguments"></span>pattern_arguments  </strong> ::=  <a class="reference internal" href="#grammar-token-python-grammar-positional_patterns"><code class="xref docutils literal notranslate"><span class="pre">positional_patterns</span></code></a> [&quot;,&quot; <a class="reference internal" href="#grammar-token-python-grammar-keyword_patterns"><code class="xref docutils literal notranslate"><span class="pre">keyword_patterns</span></code></a>]
                         | <a class="reference internal" href="#grammar-token-python-grammar-keyword_patterns"><code class="xref docutils literal notranslate"><span class="pre">keyword_patterns</span></code></a>
<strong id="grammar-token-python-grammar-positional_patterns"><span id="grammar-token-positional-patterns"></span>positional_patterns</strong> ::=  &quot;,&quot;.<a class="reference internal" href="#grammar-token-python-grammar-pattern"><code class="xref docutils literal notranslate"><span class="pre">pattern</span></code></a>+
<strong id="grammar-token-python-grammar-keyword_patterns"><span id="grammar-token-keyword-patterns"></span>keyword_patterns   </strong> ::=  &quot;,&quot;.<a class="reference internal" href="#grammar-token-python-grammar-keyword_pattern"><code class="xref docutils literal notranslate"><span class="pre">keyword_pattern</span></code></a>+
<strong id="grammar-token-python-grammar-keyword_pattern"><span id="grammar-token-keyword-pattern"></span>keyword_pattern    </strong> ::=  NAME &quot;=&quot; <a class="reference internal" href="#grammar-token-python-grammar-pattern"><code class="xref docutils literal notranslate"><span class="pre">pattern</span></code></a>
</pre>
<p>La misma palabra clave no debe repetirse en los patrones de clase.</p>
<p>El siguiente es el flujo lógico para hacer coincidir un patrón de clase con un valor de materia:</p>
<ol class="arabic">
<li><p>Si <code class="docutils literal notranslate"><span class="pre">name_or_attr</span></code> no es una instancia del <a class="reference internal" href="../library/functions.html#type" title="type"><code class="xref py py-class docutils literal notranslate"><span class="pre">type</span></code></a> incorporado, genere <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a>.</p></li>
<li><p>Si el valor del sujeto no es una instancia de <code class="docutils literal notranslate"><span class="pre">name_or_attr</span></code> (probado a través de <a class="reference internal" href="../library/functions.html#isinstance" title="isinstance"><code class="xref py py-func docutils literal notranslate"><span class="pre">isinstance()</span></code></a>), el patrón de clase falla.</p></li>
<li><p>Si no hay argumentos de patrón, el patrón tiene éxito. De lo contrario, los pasos siguientes dependen de si están presentes patrones de argumentos de posición o de palabras clave.</p>
<p>Para varios tipos integrados (especificados a continuación), se acepta un único subpatrón posicional que coincidirá con todo el tema; para estos tipos, los patrones de palabras clave también funcionan como para otros tipos.</p>
<p>Si solo hay patrones de palabras clave, se procesan de la siguiente manera, uno por uno:</p>
<p>I. La palabra clave se busca como un atributo del tema.</p>
<blockquote>
<div><ul class="simple">
<li><p>Si esto lanza una excepción distinta de <a class="reference internal" href="../library/exceptions.html#AttributeError" title="AttributeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">AttributeError</span></code></a>, la excepción aparece.</p></li>
<li><p>Si esto lanza <a class="reference internal" href="../library/exceptions.html#AttributeError" title="AttributeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">AttributeError</span></code></a>, el patrón de clase ha fallado.</p></li>
<li><p>De lo contrario, el subpatrón asociado con el patrón de palabra clave se compara con el valor del atributo del sujeto. Si esto falla, el patrón de clase falla; si esto tiene éxito, la coincidencia continúa con la siguiente palabra clave.</p></li>
</ul>
</div></blockquote>
<p>II. Si todos los patrones de palabras clave tienen éxito, el patrón de clase tiene éxito.</p>
<p>Si hay algún patrón posicional presente, se convierte en patrones de palabras clave utilizando el atributo <a class="reference internal" href="datamodel.html#object.__match_args__" title="object.__match_args__"><code class="xref py py-data docutils literal notranslate"><span class="pre">__match_args__</span></code></a> en la clase <code class="docutils literal notranslate"><span class="pre">name_or_attr</span></code> antes de hacer coincidir:</p>
<p>I. Se llama el equivalente de <code class="docutils literal notranslate"><span class="pre">getattr(cls,</span> <span class="pre">&quot;__match_args__&quot;,</span> <span class="pre">())</span></code>.</p>
<blockquote>
<div><ul class="simple">
<li><p>Si esto lanza una excepción, la excepción surge.</p></li>
<li><p>Si el valor retornado no es una tupla, la conversión falla y se lanza <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a>.</p></li>
<li><p>Si hay más patrones posicionales que <code class="docutils literal notranslate"><span class="pre">len(cls.__match_args__)</span></code>, se lanza <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a>.</p></li>
<li><p>De lo contrario, el patrón posicional <code class="docutils literal notranslate"><span class="pre">i</span></code> se convierte en un patrón de palabra clave utilizando <code class="docutils literal notranslate"><span class="pre">__match_args__[i]</span></code> como palabra clave. <code class="docutils literal notranslate"><span class="pre">__match_args__[i]</span></code> debe ser una cadena; si no, se lanza <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a>.</p></li>
<li><p>Si hay palabras clave duplicadas, se lanza <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a>.</p></li>
</ul>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<p><a class="reference internal" href="datamodel.html#class-pattern-matching"><span class="std std-ref">Personalización de argumentos posicionales en la coincidencia de patrones de clase</span></a></p>
</div>
</div></blockquote>
<dl class="simple">
<dt>II. Una vez que todos los patrones posicionales se hayan convertido en patrones de palabras clave,</dt><dd><p>la coincidencia procede como si solo hubiera patrones de palabras clave.</p>
</dd>
</dl>
<p>Para los siguientes tipos integrados, el manejo de subpatrones posicionales es diferente:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../library/functions.html#bool" title="bool"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></p></li>
<li><p><a class="reference internal" href="../library/stdtypes.html#bytearray" title="bytearray"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytearray</span></code></a></p></li>
<li><p><a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a></p></li>
<li><p><a class="reference internal" href="../library/stdtypes.html#dict" title="dict"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a></p></li>
<li><p><a class="reference internal" href="../library/functions.html#float" title="float"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></p></li>
<li><p><a class="reference internal" href="../library/stdtypes.html#frozenset" title="frozenset"><code class="xref py py-class docutils literal notranslate"><span class="pre">frozenset</span></code></a></p></li>
<li><p><a class="reference internal" href="../library/functions.html#int" title="int"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></p></li>
<li><p><a class="reference internal" href="../library/stdtypes.html#list" title="list"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a></p></li>
<li><p><a class="reference internal" href="../library/stdtypes.html#set" title="set"><code class="xref py py-class docutils literal notranslate"><span class="pre">set</span></code></a></p></li>
<li><p><a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p></li>
<li><p><a class="reference internal" href="../library/stdtypes.html#tuple" title="tuple"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></a></p></li>
</ul>
<p>These classes accept a single positional argument, and the pattern there is matched
against the whole object rather than an attribute. For example <code class="docutils literal notranslate"><span class="pre">int(0|1)</span></code> matches
the value <code class="docutils literal notranslate"><span class="pre">0</span></code>, but not the value <code class="docutils literal notranslate"><span class="pre">0.0</span></code>.</p>
</li>
</ol>
<p>En términos simples, <code class="docutils literal notranslate"><span class="pre">CLS(P1,</span> <span class="pre">attr=P2)</span></code> solo coincide si ocurre lo siguiente:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">isinstance(&lt;subject&gt;,</span> <span class="pre">CLS)</span></code></p></li>
<li><p>convierta <code class="docutils literal notranslate"><span class="pre">P1</span></code> en un patrón de palabra clave usando <code class="docutils literal notranslate"><span class="pre">CLS.__match_args__</span></code></p></li>
<li><dl class="simple">
<dt>Para cada argumento de palabra clave <code class="docutils literal notranslate"><span class="pre">attr=P2</span></code>:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">hasattr(&lt;subject&gt;,</span> <span class="pre">&quot;attr&quot;)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">P2</span></code> coincide con <code class="docutils literal notranslate"><span class="pre">&lt;subject&gt;.attr</span></code></p></li>
</ul>
</dd>
</dl>
</li>
<li><p>… y así sucesivamente para el par de patrón / argumento de palabra clave correspondiente.</p></li>
</ul>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<ul class="simple">
<li><p><span class="target" id="index-69"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0634"><strong>PEP 634</strong></a> – Coincidencia de patrones estructurales: Especificación</p></li>
<li><p><span class="target" id="index-70"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0636"><strong>PEP 636</strong></a> – Coincidencia de patrones estructurales: Tutorial</p></li>
</ul>
</div>
</section>
</section>
</section>
<section id="function-definitions">
<span id="def"></span><span id="function"></span><span id="index-26"></span><h2><span class="section-number">8.7. </span>Definiciones de funciones<a class="headerlink" href="#function-definitions" title="Enlazar permanentemente con este título">¶</a></h2>
<p id="index-27">Una definición de función define una función objeto determinada por el usuario (consulte la sección <a class="reference internal" href="datamodel.html#types"><span class="std std-ref">Jerarquía de tipos estándar</span></a>):</p>
<pre>
<strong id="grammar-token-python-grammar-funcdef"><span id="grammar-token-funcdef"></span>funcdef                  </strong> ::=  [<a class="reference internal" href="#grammar-token-python-grammar-decorators"><code class="xref docutils literal notranslate"><span class="pre">decorators</span></code></a>] &quot;def&quot; <a class="reference internal" href="#grammar-token-python-grammar-funcname"><code class="xref docutils literal notranslate"><span class="pre">funcname</span></code></a> &quot;(&quot; [<a class="reference internal" href="#grammar-token-python-grammar-parameter_list"><code class="xref docutils literal notranslate"><span class="pre">parameter_list</span></code></a>] &quot;)&quot;
                               [&quot;-&gt;&quot; <a class="reference internal" href="expressions.html#grammar-token-python-grammar-expression"><code class="xref docutils literal notranslate"><span class="pre">expression</span></code></a>] &quot;:&quot; <a class="reference internal" href="#grammar-token-python-grammar-suite"><code class="xref docutils literal notranslate"><span class="pre">suite</span></code></a>
<strong id="grammar-token-python-grammar-decorators"><span id="grammar-token-decorators"></span>decorators               </strong> ::=  <a class="reference internal" href="#grammar-token-python-grammar-decorator"><code class="xref docutils literal notranslate"><span class="pre">decorator</span></code></a>+
<strong id="grammar-token-python-grammar-decorator"><span id="grammar-token-decorator"></span>decorator                </strong> ::=  &quot;&#64;&quot; <a class="reference internal" href="expressions.html#grammar-token-python-grammar-assignment_expression"><code class="xref docutils literal notranslate"><span class="pre">assignment_expression</span></code></a> NEWLINE
<strong id="grammar-token-python-grammar-parameter_list"><span id="grammar-token-parameter-list"></span>parameter_list           </strong> ::=  <a class="reference internal" href="#grammar-token-python-grammar-defparameter"><code class="xref docutils literal notranslate"><span class="pre">defparameter</span></code></a> (&quot;,&quot; <a class="reference internal" href="#grammar-token-python-grammar-defparameter"><code class="xref docutils literal notranslate"><span class="pre">defparameter</span></code></a>)* &quot;,&quot; &quot;/&quot; [&quot;,&quot; [<a class="reference internal" href="#grammar-token-python-grammar-parameter_list_no_posonly"><code class="xref docutils literal notranslate"><span class="pre">parameter_list_no_posonly</span></code></a>]]
                                 | <a class="reference internal" href="#grammar-token-python-grammar-parameter_list_no_posonly"><code class="xref docutils literal notranslate"><span class="pre">parameter_list_no_posonly</span></code></a>
<strong id="grammar-token-python-grammar-parameter_list_no_posonly"><span id="grammar-token-parameter-list-no-posonly"></span>parameter_list_no_posonly</strong> ::=  <a class="reference internal" href="#grammar-token-python-grammar-defparameter"><code class="xref docutils literal notranslate"><span class="pre">defparameter</span></code></a> (&quot;,&quot; <a class="reference internal" href="#grammar-token-python-grammar-defparameter"><code class="xref docutils literal notranslate"><span class="pre">defparameter</span></code></a>)* [&quot;,&quot; [<a class="reference internal" href="#grammar-token-python-grammar-parameter_list_starargs"><code class="xref docutils literal notranslate"><span class="pre">parameter_list_starargs</span></code></a>]]
                               | <a class="reference internal" href="#grammar-token-python-grammar-parameter_list_starargs"><code class="xref docutils literal notranslate"><span class="pre">parameter_list_starargs</span></code></a>
<strong id="grammar-token-python-grammar-parameter_list_starargs"><span id="grammar-token-parameter-list-starargs"></span>parameter_list_starargs  </strong> ::=  &quot;*&quot; [<a class="reference internal" href="#grammar-token-python-grammar-parameter"><code class="xref docutils literal notranslate"><span class="pre">parameter</span></code></a>] (&quot;,&quot; <a class="reference internal" href="#grammar-token-python-grammar-defparameter"><code class="xref docutils literal notranslate"><span class="pre">defparameter</span></code></a>)* [&quot;,&quot; [&quot;**&quot; <a class="reference internal" href="#grammar-token-python-grammar-parameter"><code class="xref docutils literal notranslate"><span class="pre">parameter</span></code></a> [&quot;,&quot;]]]
                               | &quot;**&quot; <a class="reference internal" href="#grammar-token-python-grammar-parameter"><code class="xref docutils literal notranslate"><span class="pre">parameter</span></code></a> [&quot;,&quot;]
<strong id="grammar-token-python-grammar-parameter"><span id="grammar-token-parameter"></span>parameter                </strong> ::=  <a class="reference internal" href="lexical_analysis.html#grammar-token-python-grammar-identifier"><code class="xref docutils literal notranslate"><span class="pre">identifier</span></code></a> [&quot;:&quot; <a class="reference internal" href="expressions.html#grammar-token-python-grammar-expression"><code class="xref docutils literal notranslate"><span class="pre">expression</span></code></a>]
<strong id="grammar-token-python-grammar-defparameter"><span id="grammar-token-defparameter"></span>defparameter             </strong> ::=  <a class="reference internal" href="#grammar-token-python-grammar-parameter"><code class="xref docutils literal notranslate"><span class="pre">parameter</span></code></a> [&quot;=&quot; <a class="reference internal" href="expressions.html#grammar-token-python-grammar-expression"><code class="xref docutils literal notranslate"><span class="pre">expression</span></code></a>]
<strong id="grammar-token-python-grammar-funcname"><span id="grammar-token-funcname"></span>funcname                 </strong> ::=  <a class="reference internal" href="lexical_analysis.html#grammar-token-python-grammar-identifier"><code class="xref docutils literal notranslate"><span class="pre">identifier</span></code></a>
</pre>
<p>Una definición de función es una sentencia ejecutable. Su ejecución vincula el nombre de la función en el espacio de nombres local actual a un objeto de función (un contenedor alrededor del código ejecutable para la función). Este objeto de función contiene una referencia al espacio de nombres global actual como el espacio de nombres global que se utilizará cuando se llama a la función.</p>
<p>La definición de la función no ejecuta el cuerpo de la función; esto se ejecuta solo cuando se llama a la función. <a class="footnote-reference brackets" href="#id19" id="id14">4</a></p>
<p id="index-28">Una definición de función puede estar envuelta por una o más expresiones <a class="reference internal" href="../glossary.html#term-decorator"><span class="xref std std-term">decorator</span></a>. Las expresiones de decorador se evalúan cuando se define la función, en el ámbito que contiene la definición de la función. El resultado debe ser invocable, la cual se invoca con el objeto de función como único argumento. El valor retornado está vinculado al nombre de la función en lugar del objeto de la función. Se aplican múltiples decoradores de forma anidada. Por ejemplo, el siguiente código</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="nd">@f1</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
<span class="nd">@f2</span>
<span class="k">def</span> <span class="nf">func</span><span class="p">():</span> <span class="k">pass</span>
</pre></div>
</div>
<p>es más o menos equivalente a</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">func</span><span class="p">():</span> <span class="k">pass</span>
<span class="n">func</span> <span class="o">=</span> <span class="n">f1</span><span class="p">(</span><span class="n">arg</span><span class="p">)(</span><span class="n">f2</span><span class="p">(</span><span class="n">func</span><span class="p">))</span>
</pre></div>
</div>
<p>excepto que la función original no está vinculada temporalmente al nombre <code class="docutils literal notranslate"><span class="pre">func</span></code>.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Distinto en la versión 3.9: </span>Functions may be decorated with any valid
<a class="reference internal" href="expressions.html#grammar-token-python-grammar-assignment_expression"><code class="xref std std-token docutils literal notranslate"><span class="pre">assignment_expression</span></code></a>. Previously, the grammar was
much more restrictive; see <span class="target" id="index-29"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0614"><strong>PEP 614</strong></a> for details.</p>
</div>
<p id="index-30">Cuando uno o más <a class="reference internal" href="../glossary.html#term-parameter"><span class="xref std std-term">parameters</span></a> tienen la forma <em>parameter</em> <code class="docutils literal notranslate"><span class="pre">=</span></code> <em>expression</em>, se dice que la función tiene «valores de parámetros predeterminados». Para un parámetro con un valor predeterminado, el correspondiente <a class="reference internal" href="../glossary.html#term-argument"><span class="xref std std-term">argument</span></a> puede omitirse desde una llamada, en cuyo caso se sustituye el valor predeterminado del parámetro. Si un parámetro tiene un valor predeterminado, todos los parámetros siguientes hasta el «<code class="docutils literal notranslate"><span class="pre">*</span></code>» también deben tener un valor predeterminado — esta es una restricción sintáctica que la gramática no expresa.</p>
<p><strong>Los valores de los parámetros predeterminados se evalúan de izquierda a derecha cuando se ejecuta la definición de la función.</strong> Esto significa que la expresión se evalúa una vez, cuando se define la función, y que se utiliza el mismo valor «precalculado» para cada llamada . Esto es especialmente importante para entender cuando un parámetro predeterminado es un objeto mutable, como una lista o un diccionario: si la función modifica el objeto (por ejemplo, al agregar un elemento a una lista), el valor predeterminado está en efecto modificado. Esto generalmente no es lo que se pretendía. Una forma de evitar esto es usar <code class="docutils literal notranslate"><span class="pre">None</span></code> como valor predeterminado y probarlo explícitamente en el cuerpo de la función, por ejemplo:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">whats_on_the_telly</span><span class="p">(</span><span class="n">penguin</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">penguin</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">penguin</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">penguin</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;property of the zoo&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">penguin</span>
</pre></div>
</div>
<p id="index-31">La semántica de llamadas de función se describe con más detalle en la sección <a class="reference internal" href="expressions.html#calls"><span class="std std-ref">Invocaciones</span></a>. Una llamada a la función siempre asigna valores a todos los parámetros mencionados en la lista de parámetros, ya sea desde argumentos de posición, desde argumentos por palabra clave o desde valores predeterminados. Si está presente la forma «<code class="docutils literal notranslate"><span class="pre">*identifier</span></code>», se inicializa en una tupla que recibe cualquier parámetro posicional excedente, por defecto en la tupla vacía. Si el formulario «<code class="docutils literal notranslate"><span class="pre">**identifier</span></code>» está presente, se inicializa a una nueva asignación ordenada que recibe cualquier exceso de argumentos por palabra clave, por defecto a una nueva asignación vacía del mismo tipo. Los parámetros después de «<code class="docutils literal notranslate"><span class="pre">*</span></code>» o «<code class="docutils literal notranslate"><span class="pre">*identifier</span></code>» son parámetros solo por palabra clave y solo pueden pasarse con argumentos de palabras claves usadas.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Distinto en la versión 3.8: </span>La sintaxis del parámetro de función <code class="docutils literal notranslate"><span class="pre">/</span></code> se puede utilizar para indicar parámetros de posición únicamente. Consulte <span class="target" id="index-71"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0570"><strong>PEP 570</strong></a> para obtener más detalles.</p>
</div>
<p id="index-33">Los parámetros pueden tener <a class="reference internal" href="../glossary.html#term-function-annotation"><span class="xref std std-term">annotation</span></a> de la forma «<code class="docutils literal notranslate"><span class="pre">:</span> <span class="pre">expression</span></code>» que sigue al nombre del parámetro. Cualquier parámetro puede tener una anotación, incluso las de la forma <code class="docutils literal notranslate"><span class="pre">*identifier</span></code> o <code class="docutils literal notranslate"><span class="pre">**</span> <span class="pre">identifier</span></code>. Las funciones pueden tener una anotación «return» de la forma «<code class="docutils literal notranslate"><span class="pre">-&gt;</span> <span class="pre">expression</span></code>» después de la lista de parámetros. Estas anotaciones pueden ser cualquier expresión válida de Python. La presencia de anotaciones no cambia la semántica de una función. Los valores de anotación están disponibles como valores de un diccionario con los nombres de los parámetros en el atributo <code class="xref py py-attr docutils literal notranslate"><span class="pre">__annotations__</span></code> del objeto de la función. Si se usa <code class="docutils literal notranslate"><span class="pre">annotations</span></code> importada desde <a class="reference internal" href="../library/__future__.html#module-__future__" title="__future__: Future statement definitions"><code class="xref py py-mod docutils literal notranslate"><span class="pre">__future__</span></code></a>, las anotaciones se conservan como cadenas de caracteres en tiempo de ejecución que permiten la evaluación pospuesta. De lo contrario, se evalúan cuando se ejecuta la definición de la función. En este caso, las anotaciones pueden evaluarse en un orden diferente al que aparecen en el código fuente.</p>
<p id="index-34">También es posible crear funciones anónimas (funciones no vinculadas a un nombre), para uso inmediato en expresiones. Utiliza expresiones lambda, descritas en la sección <a class="reference internal" href="expressions.html#lambda"><span class="std std-ref">Lambdas</span></a>. Tenga en cuenta que la expresión lambda es simplemente una abreviatura para una definición de función simplificada; una función definida en una sentencia «<a class="reference internal" href="#def"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">def</span></code></a>» puede pasarse o asignarse a otro nombre al igual que una función definida por una expresión lambda. La forma «<code class="xref std std-keyword docutils literal notranslate"><span class="pre">def</span></code>» es en realidad más poderosa ya que permite la ejecución de múltiples sentencias y anotaciones.</p>
<p><strong>Nota del programador:</strong> Las funciones son objetos de la primera-clase. Una sentencia «<code class="docutils literal notranslate"><span class="pre">def</span></code>» ejecutada dentro de una definición de función define una función local que se puede retornar o pasar. Las variables libres utilizadas en la función anidada pueden acceder a las variables locales de la función que contiene el def. Vea la sección <a class="reference internal" href="executionmodel.html#naming"><span class="std std-ref">Nombres y vínculos</span></a> para más detalles.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<dl class="simple">
<dt><span class="target" id="index-72"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3107"><strong>PEP 3107</strong></a> - Anotaciones de funciones</dt><dd><p>La especificación original para anotaciones de funciones.</p>
</dd>
<dt><span class="target" id="index-73"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0484"><strong>PEP 484</strong></a> - Sugerencias de tipo</dt><dd><p>Definición de un significado estándar para anotaciones: sugerencias de tipo.</p>
</dd>
<dt><span class="target" id="index-74"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0526"><strong>PEP 526</strong></a> - Sintaxis para anotaciones variables</dt><dd><p>Capacidad para escribir declaraciones de variables indirectas, incluidas variables de clase y variables de instancia</p>
</dd>
<dt><span class="target" id="index-75"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0563"><strong>PEP 563</strong></a> - Evaluación pospuesta de anotaciones</dt><dd><p>Admite referencias directas dentro de las anotaciones conservando las anotaciones en forma de cadena de caracteres en tiempo de ejecución en lugar de una evaluación apresurada.</p>
</dd>
</dl>
</div>
</section>
<section id="class-definitions">
<span id="class"></span><h2><span class="section-number">8.8. </span>Definiciones de clase<a class="headerlink" href="#class-definitions" title="Enlazar permanentemente con este título">¶</a></h2>
<p id="index-39">Una definición de clase define un objeto de clase (ver sección <a class="reference internal" href="datamodel.html#types"><span class="std std-ref">Jerarquía de tipos estándar</span></a>):</p>
<pre>
<strong id="grammar-token-python-grammar-classdef"><span id="grammar-token-classdef"></span>classdef   </strong> ::=  [<a class="reference internal" href="#grammar-token-python-grammar-decorators"><code class="xref docutils literal notranslate"><span class="pre">decorators</span></code></a>] &quot;class&quot; <a class="reference internal" href="#grammar-token-python-grammar-classname"><code class="xref docutils literal notranslate"><span class="pre">classname</span></code></a> [<a class="reference internal" href="#grammar-token-python-grammar-inheritance"><code class="xref docutils literal notranslate"><span class="pre">inheritance</span></code></a>] &quot;:&quot; <a class="reference internal" href="#grammar-token-python-grammar-suite"><code class="xref docutils literal notranslate"><span class="pre">suite</span></code></a>
<strong id="grammar-token-python-grammar-inheritance"><span id="grammar-token-inheritance"></span>inheritance</strong> ::=  &quot;(&quot; [<a class="reference internal" href="expressions.html#grammar-token-python-grammar-argument_list"><code class="xref docutils literal notranslate"><span class="pre">argument_list</span></code></a>] &quot;)&quot;
<strong id="grammar-token-python-grammar-classname"><span id="grammar-token-classname"></span>classname  </strong> ::=  <a class="reference internal" href="lexical_analysis.html#grammar-token-python-grammar-identifier"><code class="xref docutils literal notranslate"><span class="pre">identifier</span></code></a>
</pre>
<p>Una definición de clase es una sentencia ejecutable. La lista de herencia generalmente proporciona una lista de clases base (consulte <a class="reference internal" href="datamodel.html#metaclasses"><span class="std std-ref">Metaclases</span></a> para usos más avanzados), por lo que cada elemento de la lista debe evaluar a un objeto de clase que permita la subclasificación. Las clases sin una lista de herencia heredan, por defecto, de la clase base <a class="reference internal" href="../library/functions.html#object" title="object"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a>; por lo tanto,</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Foo</span><span class="p">:</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>es equivalente a</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>La suite de la clase se ejecuta en un nuevo marco de ejecución (ver <a class="reference internal" href="executionmodel.html#naming"><span class="std std-ref">Nombres y vínculos</span></a>), usando un espacio de nombres local recién creado y el espacio de nombres global original. (Por lo general, el bloque contiene principalmente definiciones de funciones). Cuando la suite de la clase finaliza la ejecución, su marco de ejecución se descarta pero se guarda su espacio de nombres local. <a class="footnote-reference brackets" href="#id20" id="id15">5</a> Luego se crea un objeto de clase utilizando la lista de herencia para las clases base y el espacio de nombres local guardado para el diccionario de atributos. El nombre de la clase está vinculado a este objeto de clase en el espacio de nombres local original.</p>
<p>El orden en que se definen los atributos en el cuerpo de la clase se conserva en el <code class="docutils literal notranslate"><span class="pre">__dict__</span></code> de la nueva clase. Tenga en cuenta que esto es confiable solo justo después de crear la clase y solo para las clases que se definieron utilizando la sintaxis de definición.</p>
<p>La creación de clases se puede personalizar en gran medida usando <a class="reference internal" href="datamodel.html#metaclasses"><span class="std std-ref">metaclasses</span></a>.</p>
<p id="index-40">Las clases también se pueden decorar: al igual que cuando se decoran funciones,</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="nd">@f1</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
<span class="nd">@f2</span>
<span class="k">class</span> <span class="nc">Foo</span><span class="p">:</span> <span class="k">pass</span>
</pre></div>
</div>
<p>es más o menos equivalente a</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Foo</span><span class="p">:</span> <span class="k">pass</span>
<span class="n">Foo</span> <span class="o">=</span> <span class="n">f1</span><span class="p">(</span><span class="n">arg</span><span class="p">)(</span><span class="n">f2</span><span class="p">(</span><span class="n">Foo</span><span class="p">))</span>
</pre></div>
</div>
<p>Las reglas de evaluación para las expresiones de decorador son las mismas que para los decoradores de funciones. El resultado se vincula al nombre de la clase.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Distinto en la versión 3.9: </span>Classes may be decorated with any valid
<a class="reference internal" href="expressions.html#grammar-token-python-grammar-assignment_expression"><code class="xref std std-token docutils literal notranslate"><span class="pre">assignment_expression</span></code></a>. Previously, the grammar was
much more restrictive; see <span class="target" id="index-41"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0614"><strong>PEP 614</strong></a> for details.</p>
</div>
<p>** Nota del programador: ** Las variables definidas en la definición de la clase son atributos de clase; son compartidos por instancias. Los atributos de instancia se pueden establecer en un método con <code class="docutils literal notranslate"><span class="pre">self.name</span> <span class="pre">=</span> <span class="pre">value</span></code>. Se puede acceder a los atributos de clase e instancia a través de la notación «<code class="docutils literal notranslate"><span class="pre">self.name</span></code>», y un atributo de instancia oculta un atributo de clase con el mismo nombre cuando se accede de esta manera. Los atributos de clase se pueden usar como valores predeterminados para los atributos de instancia, pero el uso de valores mutables puede generar resultados inesperados. <a class="reference internal" href="datamodel.html#descriptors"><span class="std std-ref">Descriptors</span></a> se puede usar para crear variables de instancia con diferentes detalles de implementación.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<dl class="simple">
<dt><span class="target" id="index-76"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3115"><strong>PEP 3115</strong></a> - Metaclases en Python 3000</dt><dd><p>La propuesta que cambió la declaración de metaclases a la sintaxis actual y la semántica de cómo se construyen las clases con metaclases.</p>
</dd>
<dt><span class="target" id="index-77"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3129"><strong>PEP 3129</strong></a> - Decoradores de clase</dt><dd><p>La propuesta que agregó decoradores de clase. Los decoradores de funciones y métodos se introdujeron en <span class="target" id="index-78"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0318"><strong>PEP 318</strong></a>.</p>
</dd>
</dl>
</div>
</section>
<section id="coroutines">
<span id="async"></span><h2><span class="section-number">8.9. </span>Corrutinas<a class="headerlink" href="#coroutines" title="Enlazar permanentemente con este título">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified added">Nuevo en la versión 3.5.</span></p>
</div>
<section id="coroutine-function-definition">
<span id="async-def"></span><span id="index-45"></span><h3><span class="section-number">8.9.1. </span>Definición de la función corrutina<a class="headerlink" href="#coroutine-function-definition" title="Enlazar permanentemente con este título">¶</a></h3>
<pre>
<strong id="grammar-token-python-grammar-async_funcdef"><span id="grammar-token-async-funcdef"></span>async_funcdef</strong> ::=  [<a class="reference internal" href="#grammar-token-python-grammar-decorators"><code class="xref docutils literal notranslate"><span class="pre">decorators</span></code></a>] &quot;async&quot; &quot;def&quot; <a class="reference internal" href="#grammar-token-python-grammar-funcname"><code class="xref docutils literal notranslate"><span class="pre">funcname</span></code></a> &quot;(&quot; [<a class="reference internal" href="#grammar-token-python-grammar-parameter_list"><code class="xref docutils literal notranslate"><span class="pre">parameter_list</span></code></a>] &quot;)&quot;
                   [&quot;-&gt;&quot; <a class="reference internal" href="expressions.html#grammar-token-python-grammar-expression"><code class="xref docutils literal notranslate"><span class="pre">expression</span></code></a>] &quot;:&quot; <a class="reference internal" href="#grammar-token-python-grammar-suite"><code class="xref docutils literal notranslate"><span class="pre">suite</span></code></a>
</pre>
<p id="index-46">La ejecución de corrutinas de Python se puede suspender y reanudar en muchos puntos (consulte <a class="reference internal" href="../glossary.html#term-coroutine"><span class="xref std std-term">coroutine</span></a>). Las expresiones <a class="reference internal" href="expressions.html#await"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">await</span></code></a>, <a class="reference internal" href="#async-for"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">async</span> <span class="pre">for</span></code></a> y <a class="reference internal" href="#async-with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span></code></a> solo se pueden utilizar en el cuerpo de una función de corrutina.</p>
<p>Las funciones definidas con la sintaxis <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span></code> siempre son funciones de corrutina, incluso si no contienen palabras claves <code class="docutils literal notranslate"><span class="pre">await</span></code> o <code class="docutils literal notranslate"><span class="pre">async</span></code>.</p>
<p>Es un error del tipo <a class="reference internal" href="../library/exceptions.html#SyntaxError" title="SyntaxError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SyntaxError</span></code></a> usar una expresión <code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">from</span></code> dentro del cuerpo de una función de corrutina.</p>
<p>Un ejemplo de una función corrutina:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">param1</span><span class="p">,</span> <span class="n">param2</span><span class="p">):</span>
    <span class="n">do_stuff</span><span class="p">()</span>
    <span class="k">await</span> <span class="n">some_coroutine</span><span class="p">()</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Distinto en la versión 3.7: </span><code class="docutils literal notranslate"><span class="pre">await</span></code> y <code class="docutils literal notranslate"><span class="pre">async</span></code> ahora son palabras clave; anteriormente solo se los trataba como tales dentro del cuerpo de una función de rutina.</p>
</div>
</section>
<section id="the-async-for-statement">
<span id="async-for"></span><span id="index-47"></span><h3><span class="section-number">8.9.2. </span>La sentencia <code class="xref std std-keyword docutils literal notranslate"><span class="pre">async</span> <span class="pre">for</span></code><a class="headerlink" href="#the-async-for-statement" title="Enlazar permanentemente con este título">¶</a></h3>
<pre>
<strong id="grammar-token-python-grammar-async_for_stmt"><span id="grammar-token-async-for-stmt"></span>async_for_stmt</strong> ::=  &quot;async&quot; <a class="reference internal" href="#grammar-token-python-grammar-for_stmt"><code class="xref docutils literal notranslate"><span class="pre">for_stmt</span></code></a>
</pre>
<p>Un <a class="reference internal" href="../glossary.html#term-asynchronous-iterable"><span class="xref std std-term">asynchronous iterable</span></a> proporciona un método <code class="docutils literal notranslate"><span class="pre">__aiter__</span></code> que retorna directamente un <a class="reference internal" href="../glossary.html#term-asynchronous-iterator"><span class="xref std std-term">asynchronous iterator</span></a>, que puede llamar a código asincrónico en su método <code class="docutils literal notranslate"><span class="pre">__anext__</span></code>.</p>
<p>La sentencia <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">for</span></code> permite una iteración apropiada sobre iteradores asincrónicos.</p>
<p>El siguiente código:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">for</span> <span class="n">TARGET</span> <span class="ow">in</span> <span class="n">ITER</span><span class="p">:</span>
    <span class="n">SUITE</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">SUITE2</span>
</pre></div>
</div>
<p>Es semánticamente equivalente a:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="nb">iter</span> <span class="o">=</span> <span class="p">(</span><span class="n">ITER</span><span class="p">)</span>
<span class="nb">iter</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="nb">iter</span><span class="p">)</span><span class="o">.</span><span class="fm">__aiter__</span><span class="p">(</span><span class="nb">iter</span><span class="p">)</span>
<span class="n">running</span> <span class="o">=</span> <span class="kc">True</span>

<span class="k">while</span> <span class="n">running</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">TARGET</span> <span class="o">=</span> <span class="k">await</span> <span class="nb">type</span><span class="p">(</span><span class="nb">iter</span><span class="p">)</span><span class="o">.</span><span class="fm">__anext__</span><span class="p">(</span><span class="nb">iter</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">StopAsyncIteration</span><span class="p">:</span>
        <span class="n">running</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">SUITE</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">SUITE2</span>
</pre></div>
</div>
<p>See also <a class="reference internal" href="datamodel.html#object.__aiter__" title="object.__aiter__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__aiter__()</span></code></a> and <a class="reference internal" href="datamodel.html#object.__anext__" title="object.__anext__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__anext__()</span></code></a> for details.</p>
<p>Es un error del tipo <a class="reference internal" href="../library/exceptions.html#SyntaxError" title="SyntaxError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SyntaxError</span></code></a> usar una sentencia <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">for</span></code> fuera del cuerpo de una función de corrutina.</p>
</section>
<section id="the-async-with-statement">
<span id="async-with"></span><span id="index-48"></span><h3><span class="section-number">8.9.3. </span>La sentencia <code class="xref std std-keyword docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span></code><a class="headerlink" href="#the-async-with-statement" title="Enlazar permanentemente con este título">¶</a></h3>
<pre>
<strong id="grammar-token-python-grammar-async_with_stmt"><span id="grammar-token-async-with-stmt"></span>async_with_stmt</strong> ::=  &quot;async&quot; <a class="reference internal" href="#grammar-token-python-grammar-with_stmt"><code class="xref docutils literal notranslate"><span class="pre">with_stmt</span></code></a>
</pre>
<p>Un <a class="reference internal" href="../glossary.html#term-asynchronous-context-manager"><span class="xref std std-term">asynchronous context manager</span></a> es un <a class="reference internal" href="../glossary.html#term-context-manager"><span class="xref std std-term">context manager</span></a> que puede suspender la ejecución en sus métodos <em>enter</em> y <em>exit</em>.</p>
<p>El siguiente código:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">EXPRESSION</span> <span class="k">as</span> <span class="n">TARGET</span><span class="p">:</span>
    <span class="n">SUITE</span>
</pre></div>
</div>
<p>es semánticamente equivalente a:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">manager</span> <span class="o">=</span> <span class="p">(</span><span class="n">EXPRESSION</span><span class="p">)</span>
<span class="n">aenter</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">manager</span><span class="p">)</span><span class="o">.</span><span class="fm">__aenter__</span>
<span class="n">aexit</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">manager</span><span class="p">)</span><span class="o">.</span><span class="fm">__aexit__</span>
<span class="n">value</span> <span class="o">=</span> <span class="k">await</span> <span class="n">aenter</span><span class="p">(</span><span class="n">manager</span><span class="p">)</span>
<span class="n">hit_except</span> <span class="o">=</span> <span class="kc">False</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">TARGET</span> <span class="o">=</span> <span class="n">value</span>
    <span class="n">SUITE</span>
<span class="k">except</span><span class="p">:</span>
    <span class="n">hit_except</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="k">await</span> <span class="n">aexit</span><span class="p">(</span><span class="n">manager</span><span class="p">,</span> <span class="o">*</span><span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()):</span>
        <span class="k">raise</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">hit_except</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">aexit</span><span class="p">(</span><span class="n">manager</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<p>See also <a class="reference internal" href="datamodel.html#object.__aenter__" title="object.__aenter__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__aenter__()</span></code></a> and <a class="reference internal" href="datamodel.html#object.__aexit__" title="object.__aexit__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__aexit__()</span></code></a> for details.</p>
<p>Es un error del tipo <a class="reference internal" href="../library/exceptions.html#SyntaxError" title="SyntaxError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SyntaxError</span></code></a> usar una sentencia <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span></code> fuera del cuerpo de una función de corrutina.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<dl class="simple">
<dt><span class="target" id="index-79"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0492"><strong>PEP 492</strong></a> - Corrutinas con sintaxis <code class="docutils literal notranslate"><span class="pre">async</span></code> y <code class="docutils literal notranslate"><span class="pre">await</span></code></dt><dd><p>La propuesta que convirtió a las corrutinas en un concepto independiente adecuado en Python, y agregó una sintaxis de soporte.</p>
</dd>
</dl>
</div>
<p class="rubric">Notas al pie</p>
<dl class="footnote brackets">
<dt class="label" id="id16"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>La excepción se propaga a la pila de invocación a menos que haya una cláusula <a class="reference internal" href="#finally"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">finally</span></code></a> que provoque otra excepción. Esa nueva excepción hace que se pierda la anterior.</p>
</dd>
<dt class="label" id="id17"><span class="brackets"><a class="fn-backref" href="#id10">2</a></span></dt>
<dd><p>En la coincidencia de patrones, una secuencia se define como una de las siguientes:</p>
<blockquote>
<div><ul class="simple">
<li><p>una clase que hereda de <a class="reference internal" href="../library/collections.abc.html#collections.abc.Sequence" title="collections.abc.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.abc.Sequence</span></code></a></p></li>
<li><p>una clase de Python que se ha registrado como <a class="reference internal" href="../library/collections.abc.html#collections.abc.Sequence" title="collections.abc.Sequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.abc.Sequence</span></code></a></p></li>
<li><p>una clase incorporada que tiene su conjunto de bits (CPython) <a class="reference internal" href="../c-api/typeobj.html#Py_TPFLAGS_SEQUENCE" title="Py_TPFLAGS_SEQUENCE"><code class="xref py py-data docutils literal notranslate"><span class="pre">Py_TPFLAGS_SEQUENCE</span></code></a></p></li>
<li><p>una clase que hereda de cualquiera de los anteriores</p></li>
</ul>
</div></blockquote>
<p>Las siguientes clases de biblioteca estándar son secuencias:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="../library/array.html#array.array" title="array.array"><code class="xref py py-class docutils literal notranslate"><span class="pre">array.array</span></code></a></p></li>
<li><p><a class="reference internal" href="../library/collections.html#collections.deque" title="collections.deque"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.deque</span></code></a></p></li>
<li><p><a class="reference internal" href="../library/stdtypes.html#list" title="list"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a></p></li>
<li><p><a class="reference internal" href="../library/stdtypes.html#memoryview" title="memoryview"><code class="xref py py-class docutils literal notranslate"><span class="pre">memoryview</span></code></a></p></li>
<li><p><a class="reference internal" href="../library/stdtypes.html#range" title="range"><code class="xref py py-class docutils literal notranslate"><span class="pre">range</span></code></a></p></li>
<li><p><a class="reference internal" href="../library/stdtypes.html#tuple" title="tuple"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></a></p></li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Los valores de sujeto de tipo <code class="docutils literal notranslate"><span class="pre">str</span></code>, <code class="docutils literal notranslate"><span class="pre">bytes</span></code> y <code class="docutils literal notranslate"><span class="pre">bytearray</span></code> no coinciden con los patrones de secuencia.</p>
</div>
</dd>
<dt class="label" id="id18"><span class="brackets"><a class="fn-backref" href="#id12">3</a></span></dt>
<dd><p>En la coincidencia de patrones, un mapeo se define como uno de los siguientes:</p>
<blockquote>
<div><ul class="simple">
<li><p>una clase que hereda de <a class="reference internal" href="../library/collections.abc.html#collections.abc.Mapping" title="collections.abc.Mapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.abc.Mapping</span></code></a></p></li>
<li><p>una clase de Python que se ha registrado como <a class="reference internal" href="../library/collections.abc.html#collections.abc.Mapping" title="collections.abc.Mapping"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.abc.Mapping</span></code></a></p></li>
<li><p>una clase incorporada que tiene su conjunto de bits (CPython) <a class="reference internal" href="../c-api/typeobj.html#Py_TPFLAGS_MAPPING" title="Py_TPFLAGS_MAPPING"><code class="xref py py-data docutils literal notranslate"><span class="pre">Py_TPFLAGS_MAPPING</span></code></a></p></li>
<li><p>una clase que hereda de cualquiera de los anteriores</p></li>
</ul>
</div></blockquote>
<p>Las clases de biblioteca estándar <a class="reference internal" href="../library/stdtypes.html#dict" title="dict"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> y <a class="reference internal" href="../library/types.html#types.MappingProxyType" title="types.MappingProxyType"><code class="xref py py-class docutils literal notranslate"><span class="pre">types.MappingProxyType</span></code></a> son asignaciones.</p>
</dd>
<dt class="label" id="id19"><span class="brackets"><a class="fn-backref" href="#id14">4</a></span></dt>
<dd><p>Una cadena de caracteres literal que aparece como la primera sentencia en el cuerpo de la función se transforma en el atributo <code class="docutils literal notranslate"><span class="pre">__doc__</span></code> de la función y, por lo tanto, en funciones <a class="reference internal" href="../glossary.html#term-docstring"><span class="xref std std-term">docstring</span></a>.</p>
</dd>
<dt class="label" id="id20"><span class="brackets"><a class="fn-backref" href="#id15">5</a></span></dt>
<dd><p>Una cadena de caracteres literal que aparece como la primera sentencia en el cuerpo de la clase se transforma en el elemento del espacio de nombre <code class="docutils literal notranslate"><span class="pre">__doc__</span></code> y, por lo tanto, de la clase <a class="reference internal" href="../glossary.html#term-docstring"><span class="xref std std-term">docstring</span></a>.</p>
</dd>
</dl>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">Tabla de contenido</a></h3>
  <ul>
<li><a class="reference internal" href="#">8. Sentencias compuestas</a><ul>
<li><a class="reference internal" href="#the-if-statement">8.1. La sentencia <code class="xref std std-keyword docutils literal notranslate"><span class="pre">if</span></code></a></li>
<li><a class="reference internal" href="#the-while-statement">8.2. La sentencia <code class="xref std std-keyword docutils literal notranslate"><span class="pre">while</span></code></a></li>
<li><a class="reference internal" href="#the-for-statement">8.3. La sentencia <code class="xref std std-keyword docutils literal notranslate"><span class="pre">for</span></code></a></li>
<li><a class="reference internal" href="#the-try-statement">8.4. La sentencia <code class="xref std std-keyword docutils literal notranslate"><span class="pre">try</span></code></a></li>
<li><a class="reference internal" href="#the-with-statement">8.5. La sentencia <code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a></li>
<li><a class="reference internal" href="#the-match-statement">8.6. La sentencia <code class="xref std std-keyword docutils literal notranslate"><span class="pre">match</span></code></a><ul>
<li><a class="reference internal" href="#overview">8.6.1. Resumen</a></li>
<li><a class="reference internal" href="#guards">8.6.2. Protecciones</a></li>
<li><a class="reference internal" href="#irrefutable-case-blocks">8.6.3. Bloques de Casos Irrefutables</a></li>
<li><a class="reference internal" href="#patterns">8.6.4. Patrones</a><ul>
<li><a class="reference internal" href="#or-patterns">8.6.4.1. Patrones OR</a></li>
<li><a class="reference internal" href="#as-patterns">8.6.4.2. patrones AS</a></li>
<li><a class="reference internal" href="#literal-patterns">8.6.4.3. Patrones literales</a></li>
<li><a class="reference internal" href="#capture-patterns">8.6.4.4. Capturar patrones</a></li>
<li><a class="reference internal" href="#wildcard-patterns">8.6.4.5. Patrones comodín</a></li>
<li><a class="reference internal" href="#value-patterns">8.6.4.6. Patrones de valor</a></li>
<li><a class="reference internal" href="#group-patterns">8.6.4.7. Patrones de grupo</a></li>
<li><a class="reference internal" href="#sequence-patterns">8.6.4.8. Patrones de secuencia</a></li>
<li><a class="reference internal" href="#mapping-patterns">8.6.4.9. Patrones de mapeo</a></li>
<li><a class="reference internal" href="#class-patterns">8.6.4.10. Patrones de clase</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#function-definitions">8.7. Definiciones de funciones</a></li>
<li><a class="reference internal" href="#class-definitions">8.8. Definiciones de clase</a></li>
<li><a class="reference internal" href="#coroutines">8.9. Corrutinas</a><ul>
<li><a class="reference internal" href="#coroutine-function-definition">8.9.1. Definición de la función corrutina</a></li>
<li><a class="reference internal" href="#the-async-for-statement">8.9.2. La sentencia <code class="xref std std-keyword docutils literal notranslate"><span class="pre">async</span> <span class="pre">for</span></code></a></li>
<li><a class="reference internal" href="#the-async-with-statement">8.9.3. La sentencia <code class="xref std std-keyword docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Tema anterior</h4>
  <p class="topless"><a href="simple_stmts.html"
                        title="capítulo anterior"><span class="section-number">7. </span>Declaraciones simples</a></p>
  <h4>Próximo tema</h4>
  <p class="topless"><a href="toplevel_components.html"
                        title="próximo capítulo"><span class="section-number">9. </span>Componentes de nivel superior</a></p>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">Reporta un Bug</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/3.10/Doc/reference/compound_stmts.rst"
            rel="nofollow">Ver Fuente
        </a>
      </li>
    </ul>
  </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice general"
             >índice</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Índice de Módulos Python"
             >módulos</a> |</li>
        <li class="right" >
          <a href="toplevel_components.html" title="9. Componentes de nivel superior"
             >siguiente</a> |</li>
        <li class="right" >
          <a href="simple_stmts.html" title="7. Declaraciones simples"
             >anterior</a> |</li>

          <li><img src="../_static/py.svg" alt="python logo" style="vertical-align: middle; margin-top: -1px"/></li>
          <li><a href="https://www.python.org/">Python</a> &#187;</li>
          <li class="switchers">
            <div class="language_switcher_placeholder"></div>
            <div class="version_switcher_placeholder"></div>
          </li>
          <li>
              
          </li>
    <li id="cpython-language-and-version">
      <a href="../index.html">3.10.10 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" >Referencia del Lenguaje Python</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">8. </span>Sentencias compuestas</a></li>
                <li class="right">
                    

    <div class="inline-search" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="Búsqueda rápida" aria-label="Búsqueda rápida" type="text" name="q" />
          <input type="submit" value="Ir" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
                     |
                </li>
            
      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="../copyright.html">Copyright</a> 2001-2023, Python Software Foundation.
    <br />
    This page is licensed under the Python Software Foundation License Version 2.
    <br />
    Examples, recipes, and other code in the documentation are additionally licensed under the Zero Clause BSD License.
    <br />
    See <a href="/license.html">History and License</a> for more information.<br />
    <br />

    La Python Software Foundation es una organización sin fines de lucro.
<a href="https://www.python.org/psf/donations/">Por favor, haga una donación.</a>
<br />
    <br />

    Última actualización el mar 27, 2023.
    <a href="/bugs.html">Found a bug</a>?
    <br />

    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.4.3.
    </div>

  </body>
</html>